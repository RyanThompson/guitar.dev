/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@laravel-streams/core/resources/public/js/index.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@laravel-streams/core/resources/public/js/index.esm.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Application": () => (/* binding */ i),
/* harmony export */   "Collection": () => (/* binding */ a),
/* harmony export */   "CoreServiceProvider": () => (/* binding */ c),
/* harmony export */   "Criteria": () => (/* binding */ u),
/* harmony export */   "Dispatcher": () => (/* binding */ l),
/* harmony export */   "Entry": () => (/* binding */ p),
/* harmony export */   "EntryCollection": () => (/* binding */ d),
/* harmony export */   "Field": () => (/* binding */ h),
/* harmony export */   "FieldCollection": () => (/* binding */ y),
/* harmony export */   "Http": () => (/* binding */ v),
/* harmony export */   "HttpServiceProvider": () => (/* binding */ g),
/* harmony export */   "LocalStorageAdapter": () => (/* binding */ _),
/* harmony export */   "PaginatedEntryCollection": () => (/* binding */ m),
/* harmony export */   "Repository": () => (/* binding */ b),
/* harmony export */   "ServiceProvider": () => (/* binding */ w),
/* harmony export */   "SessionStorageAdapter": () => (/* binding */ S),
/* harmony export */   "StorageAdapter": () => (/* binding */ C),
/* harmony export */   "StorageServiceProvider": () => (/* binding */ O),
/* harmony export */   "Stream": () => (/* binding */ T),
/* harmony export */   "Streams": () => (/* binding */ E),
/* harmony export */   "StreamsServiceProvider": () => (/* binding */ P),
/* harmony export */   "Transformer": () => (/* binding */ A),
/* harmony export */   "app": () => (/* binding */ x),
/* harmony export */   "comparisonOperators": () => (/* binding */ I),
/* harmony export */   "inject": () => (/* binding */ k),
/* harmony export */   "logicalOperators": () => (/* binding */ N),
/* harmony export */   "operators": () => (/* binding */ R)
/* harmony export */ });
/*! For license information please see index.esm.js.LICENSE.txt */
var t={7757:(t,r,o)=>{t.exports=o(5666)},9669:(t,r,o)=>{t.exports=o(1609)},5448:(t,r,o)=>{var i=o(4867),a=o(6026),c=o(4372),u=o(5327),l=o(4097),p=o(4109),d=o(7985),h=o(5061);t.exports=function xhrAdapter(t){return new Promise((function dispatchXhrRequest(r,o){var y=t.data,v=t.headers,g=t.responseType;i.isFormData(y)&&delete v["Content-Type"];var _=new XMLHttpRequest;if(t.auth){var m=t.auth.username||"",b=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";v.Authorization="Basic "+btoa(m+":"+b)}var w=l(t.baseURL,t.url);function onloadend(){if(_){var i="getAllResponseHeaders"in _?p(_.getAllResponseHeaders()):null,c={data:g&&"text"!==g&&"json"!==g?_.response:_.responseText,status:_.status,statusText:_.statusText,headers:i,config:t,request:_};a(r,o,c),_=null}}if(_.open(t.method.toUpperCase(),u(w,t.params,t.paramsSerializer),!0),_.timeout=t.timeout,"onloadend"in _?_.onloadend=onloadend:_.onreadystatechange=function handleLoad(){_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf("file:"))&&setTimeout(onloadend)},_.onabort=function handleAbort(){_&&(o(h("Request aborted",t,"ECONNABORTED",_)),_=null)},_.onerror=function handleError(){o(h("Network Error",t,null,_)),_=null},_.ontimeout=function handleTimeout(){var r="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(r=t.timeoutErrorMessage),o(h(r,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},i.isStandardBrowserEnv()){var S=(t.withCredentials||d(w))&&t.xsrfCookieName?c.read(t.xsrfCookieName):void 0;S&&(v[t.xsrfHeaderName]=S)}"setRequestHeader"in _&&i.forEach(v,(function setRequestHeader(t,r){void 0===y&&"content-type"===r.toLowerCase()?delete v[r]:_.setRequestHeader(r,t)})),i.isUndefined(t.withCredentials)||(_.withCredentials=!!t.withCredentials),g&&"json"!==g&&(_.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&_.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&_.upload&&_.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function onCanceled(t){_&&(_.abort(),o(t),_=null)})),y||(y=null),_.send(y)}))}},1609:(t,r,o)=>{var i=o(4867),a=o(1849),c=o(321),u=o(7185);function createInstance(t){var r=new c(t),o=a(c.prototype.request,r);return i.extend(o,c.prototype,r),i.extend(o,r),o}var l=createInstance(o(5655));l.Axios=c,l.create=function create(t){return createInstance(u(l.defaults,t))},l.Cancel=o(5263),l.CancelToken=o(4972),l.isCancel=o(6502),l.all=function all(t){return Promise.all(t)},l.spread=o(8713),l.isAxiosError=o(6268),t.exports=l,t.exports.default=l},5263:t=>{function Cancel(t){this.message=t}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,t.exports=Cancel},4972:(t,r,o)=>{var i=o(5263);function CancelToken(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function promiseExecutor(t){r=t}));var o=this;t((function cancel(t){o.reason||(o.reason=new i(t),r(o.reason))}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var t;return{token:new CancelToken((function executor(r){t=r})),cancel:t}},t.exports=CancelToken},6502:t=>{t.exports=function isCancel(t){return!(!t||!t.__CANCEL__)}},321:(t,r,o)=>{var i=o(4867),a=o(5327),c=o(782),u=o(3572),l=o(7185),p=o(4875),d=p.validators;function Axios(t){this.defaults=t,this.interceptors={request:new c,response:new c}}Axios.prototype.request=function request(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=l(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&p.assertOptions(r,{silentJSONParsing:d.transitional(d.boolean,"1.0.0"),forcedJSONParsing:d.transitional(d.boolean,"1.0.0"),clarifyTimeoutError:d.transitional(d.boolean,"1.0.0")},!1);var o=[],i=!0;this.interceptors.request.forEach((function unshiftRequestInterceptors(r){"function"==typeof r.runWhen&&!1===r.runWhen(t)||(i=i&&r.synchronous,o.unshift(r.fulfilled,r.rejected))}));var a,c=[];if(this.interceptors.response.forEach((function pushResponseInterceptors(t){c.push(t.fulfilled,t.rejected)})),!i){var h=[u,void 0];for(Array.prototype.unshift.apply(h,o),h=h.concat(c),a=Promise.resolve(t);h.length;)a=a.then(h.shift(),h.shift());return a}for(var y=t;o.length;){var v=o.shift(),g=o.shift();try{y=v(y)}catch(t){g(t);break}}try{a=u(y)}catch(t){return Promise.reject(t)}for(;c.length;)a=a.then(c.shift(),c.shift());return a},Axios.prototype.getUri=function getUri(t){return t=l(this.defaults,t),a(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function forEachMethodNoData(t){Axios.prototype[t]=function(r,o){return this.request(l(o||{},{method:t,url:r,data:(o||{}).data}))}})),i.forEach(["post","put","patch"],(function forEachMethodWithData(t){Axios.prototype[t]=function(r,o,i){return this.request(l(i||{},{method:t,url:r,data:o}))}})),t.exports=Axios},782:(t,r,o)=>{var i=o(4867);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(t,r,o){return this.handlers.push({fulfilled:t,rejected:r,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(t){this.handlers[t]&&(this.handlers[t]=null)},InterceptorManager.prototype.forEach=function forEach(t){i.forEach(this.handlers,(function forEachHandler(r){null!==r&&t(r)}))},t.exports=InterceptorManager},4097:(t,r,o)=>{var i=o(1793),a=o(7303);t.exports=function buildFullPath(t,r){return t&&!i(r)?a(t,r):r}},5061:(t,r,o)=>{var i=o(481);t.exports=function createError(t,r,o,a,c){var u=new Error(t);return i(u,r,o,a,c)}},3572:(t,r,o)=>{var i=o(4867),a=o(8527),c=o(6502),u=o(5655);function throwIfCancellationRequested(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=t.headers||{},t.data=a.call(t,t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(r){delete t.headers[r]})),(t.adapter||u.adapter)(t).then((function onAdapterResolution(r){return throwIfCancellationRequested(t),r.data=a.call(t,r.data,r.headers,t.transformResponse),r}),(function onAdapterRejection(r){return c(r)||(throwIfCancellationRequested(t),r&&r.response&&(r.response.data=a.call(t,r.response.data,r.response.headers,t.transformResponse))),Promise.reject(r)}))}},481:t=>{t.exports=function enhanceError(t,r,o,i,a){return t.config=r,o&&(t.code=o),t.request=i,t.response=a,t.isAxiosError=!0,t.toJSON=function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},7185:(t,r,o)=>{var i=o(4867);t.exports=function mergeConfig(t,r){r=r||{};var o={},a=["url","method","data"],c=["headers","auth","proxy","params"],u=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function getMergedValue(t,r){return i.isPlainObject(t)&&i.isPlainObject(r)?i.merge(t,r):i.isPlainObject(r)?i.merge({},r):i.isArray(r)?r.slice():r}function mergeDeepProperties(a){i.isUndefined(r[a])?i.isUndefined(t[a])||(o[a]=getMergedValue(void 0,t[a])):o[a]=getMergedValue(t[a],r[a])}i.forEach(a,(function valueFromConfig2(t){i.isUndefined(r[t])||(o[t]=getMergedValue(void 0,r[t]))})),i.forEach(c,mergeDeepProperties),i.forEach(u,(function defaultToConfig2(a){i.isUndefined(r[a])?i.isUndefined(t[a])||(o[a]=getMergedValue(void 0,t[a])):o[a]=getMergedValue(void 0,r[a])})),i.forEach(l,(function merge(i){i in r?o[i]=getMergedValue(t[i],r[i]):i in t&&(o[i]=getMergedValue(void 0,t[i]))}));var p=a.concat(c).concat(u).concat(l),d=Object.keys(t).concat(Object.keys(r)).filter((function filterAxiosKeys(t){return-1===p.indexOf(t)}));return i.forEach(d,mergeDeepProperties),o}},6026:(t,r,o)=>{var i=o(5061);t.exports=function settle(t,r,o){var a=o.config.validateStatus;o.status&&a&&!a(o.status)?r(i("Request failed with status code "+o.status,o.config,null,o.request,o)):t(o)}},8527:(t,r,o)=>{var i=o(4867),a=o(5655);t.exports=function transformData(t,r,o){var c=this||a;return i.forEach(o,(function transform(o){t=o.call(c,t,r)})),t}},5655:(t,r,o)=>{var i=o(4155),a=o(4867),c=o(6016),u=o(481),l={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,r){!a.isUndefined(t)&&a.isUndefined(t["Content-Type"])&&(t["Content-Type"]=r)}var p={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function getDefaultAdapter(){var t;return("undefined"!=typeof XMLHttpRequest||void 0!==i&&"[object process]"===Object.prototype.toString.call(i))&&(t=o(5448)),t}(),transformRequest:[function transformRequest(t,r){return c(r,"Accept"),c(r,"Content-Type"),a.isFormData(t)||a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t)?t:a.isArrayBufferView(t)?t.buffer:a.isURLSearchParams(t)?(setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):a.isObject(t)||r&&"application/json"===r["Content-Type"]?(setContentTypeIfUnset(r,"application/json"),function stringifySafely(t,r,o){if(a.isString(t))try{return(r||JSON.parse)(t),a.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(o||JSON.stringify)(t)}(t)):t}],transformResponse:[function transformResponse(t){var r=this.transitional,o=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,c=!o&&"json"===this.responseType;if(c||i&&a.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(c){if("SyntaxError"===t.name)throw u(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};a.forEach(["delete","get","head"],(function forEachMethodNoData(t){p.headers[t]={}})),a.forEach(["post","put","patch"],(function forEachMethodWithData(t){p.headers[t]=a.merge(l)})),t.exports=p},1849:t=>{t.exports=function bind(t,r){return function wrap(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(r,o)}}},5327:(t,r,o)=>{var i=o(4867);function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function buildURL(t,r,o){if(!r)return t;var a;if(o)a=o(r);else if(i.isURLSearchParams(r))a=r.toString();else{var c=[];i.forEach(r,(function serialize(t,r){null!=t&&(i.isArray(t)?r+="[]":t=[t],i.forEach(t,(function parseValue(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),c.push(encode(r)+"="+encode(t))})))})),a=c.join("&")}if(a){var u=t.indexOf("#");-1!==u&&(t=t.slice(0,u)),t+=(-1===t.indexOf("?")?"?":"&")+a}return t}},7303:t=>{t.exports=function combineURLs(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}},4372:(t,r,o)=>{var i=o(4867);t.exports=i.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(t,r,o,a,c,u){var l=[];l.push(t+"="+encodeURIComponent(r)),i.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),i.isString(a)&&l.push("path="+a),i.isString(c)&&l.push("domain="+c),!0===u&&l.push("secure"),document.cookie=l.join("; ")},read:function read(t){var r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function remove(t){this.write(t,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},1793:t=>{t.exports=function isAbsoluteURL(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},6268:t=>{t.exports=function isAxiosError(t){return"object"==typeof t&&!0===t.isAxiosError}},7985:(t,r,o)=>{var i=o(4867);t.exports=i.isStandardBrowserEnv()?function standardBrowserEnv(){var t,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function resolveURL(t){var i=t;return r&&(o.setAttribute("href",i),i=o.href),o.setAttribute("href",i),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return t=resolveURL(window.location.href),function isURLSameOrigin(r){var o=i.isString(r)?resolveURL(r):r;return o.protocol===t.protocol&&o.host===t.host}}():function isURLSameOrigin(){return!0}},6016:(t,r,o)=>{var i=o(4867);t.exports=function normalizeHeaderName(t,r){i.forEach(t,(function processHeader(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[i])}))}},4109:(t,r,o)=>{var i=o(4867),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function parseHeaders(t){var r,o,c,u={};return t?(i.forEach(t.split("\n"),(function parser(t){if(c=t.indexOf(":"),r=i.trim(t.substr(0,c)).toLowerCase(),o=i.trim(t.substr(c+1)),r){if(u[r]&&a.indexOf(r)>=0)return;u[r]="set-cookie"===r?(u[r]?u[r]:[]).concat([o]):u[r]?u[r]+", "+o:o}})),u):u}},8713:t=>{t.exports=function spread(t){return function wrap(r){return t.apply(null,r)}}},4875:(t,r,o)=>{var i=o(8593),a={};["object","boolean","number","function","string","symbol"].forEach((function(t,r){a[t]=function validator(o){return typeof o===t||"a"+(r<1?"n ":" ")+t}}));var c={},u=i.version.split(".");function isOlderVersion(t,r){for(var o=r?r.split("."):u,i=t.split("."),a=0;a<3;a++){if(o[a]>i[a])return!0;if(o[a]<i[a])return!1}return!1}a.transitional=function transitional(t,r,o){var a=r&&isOlderVersion(r);function formatMessage(t,r){return"[Axios v"+i.version+"] Transitional option '"+t+"'"+r+(o?". "+o:"")}return function(o,i,u){if(!1===t)throw new Error(formatMessage(i," has been removed in "+r));return a&&!c[i]&&(c[i]=!0,console.warn(formatMessage(i," has been deprecated since v"+r+" and will be removed in the near future"))),!t||t(o,i,u)}},t.exports={isOlderVersion,assertOptions:function assertOptions(t,r,o){if("object"!=typeof t)throw new TypeError("options must be an object");for(var i=Object.keys(t),a=i.length;a-- >0;){var c=i[a],u=r[c];if(u){var l=t[c],p=void 0===l||u(l,c,t);if(!0!==p)throw new TypeError("option "+c+" must be "+p)}else if(!0!==o)throw Error("Unknown option "+c)}},validators:a}},4867:(t,r,o)=>{var i=o(1849),a=Object.prototype.toString;function isArray(t){return"[object Array]"===a.call(t)}function isUndefined(t){return void 0===t}function isObject(t){return null!==t&&"object"==typeof t}function isPlainObject(t){if("[object Object]"!==a.call(t))return!1;var r=Object.getPrototypeOf(t);return null===r||r===Object.prototype}function isFunction(t){return"[object Function]"===a.call(t)}function forEach(t,r){if(null!=t)if("object"!=typeof t&&(t=[t]),isArray(t))for(var o=0,i=t.length;o<i;o++)r.call(null,t[o],o,t);else for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.call(null,t[a],a,t)}t.exports={isArray,isArrayBuffer:function isArrayBuffer(t){return"[object ArrayBuffer]"===a.call(t)},isBuffer:function isBuffer(t){return null!==t&&!isUndefined(t)&&null!==t.constructor&&!isUndefined(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function isFormData(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function isArrayBufferView(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function isString(t){return"string"==typeof t},isNumber:function isNumber(t){return"number"==typeof t},isObject,isPlainObject,isUndefined,isDate:function isDate(t){return"[object Date]"===a.call(t)},isFile:function isFile(t){return"[object File]"===a.call(t)},isBlob:function isBlob(t){return"[object Blob]"===a.call(t)},isFunction,isStream:function isStream(t){return isObject(t)&&isFunction(t.pipe)},isURLSearchParams:function isURLSearchParams(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach,merge:function merge(){var t={};function assignValue(r,o){isPlainObject(t[o])&&isPlainObject(r)?t[o]=merge(t[o],r):isPlainObject(r)?t[o]=merge({},r):isArray(r)?t[o]=r.slice():t[o]=r}for(var r=0,o=arguments.length;r<o;r++)forEach(arguments[r],assignValue);return t},extend:function extend(t,r,o){return forEach(r,(function assignValue(r,a){t[a]=o&&"function"==typeof r?i(r,o):r})),t},trim:function trim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function stripBOM(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},1227:(t,r,o)=>{var i=o(4155);r.formatArgs=function formatArgs(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;r.splice(1,0,o,"color: inherit");let i=0,a=0;r[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(i++,"%c"===t&&(a=i))})),r.splice(a,0,o)},r.save=function save(t){try{t?r.storage.setItem("debug",t):r.storage.removeItem("debug")}catch(t){}},r.load=function load(){let t;try{t=r.storage.getItem("debug")}catch(t){}!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG);return t},r.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage=function localstorage(){try{return localStorage}catch(t){}}(),r.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=o(2447)(r);const{formatters:a}=t.exports;a.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},2447:(t,r,o)=>{t.exports=function setup(t){function createDebug(t){let r,o,i,a=null;function debug(...t){if(!debug.enabled)return;const o=debug,i=Number(new Date),a=i-(r||i);o.diff=a,o.prev=r,o.curr=i,r=i,t[0]=createDebug.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";c++;const a=createDebug.formatters[i];if("function"==typeof a){const i=t[c];r=a.call(o,i),t.splice(c,1),c--}return r})),createDebug.formatArgs.call(o,t);(o.log||createDebug.log).apply(o,t)}return debug.namespace=t,debug.useColors=createDebug.useColors(),debug.color=createDebug.selectColor(t),debug.extend=extend,debug.destroy=createDebug.destroy,Object.defineProperty(debug,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==createDebug.namespaces&&(o=createDebug.namespaces,i=createDebug.enabled(t)),i),set:t=>{a=t}}),"function"==typeof createDebug.init&&createDebug.init(debug),debug}function extend(t,r){const o=createDebug(this.namespace+(void 0===r?":":r)+t);return o.log=this.log,o}function toNamespace(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(t){if(t instanceof Error)return t.stack||t.message;return t},createDebug.disable=function disable(){const t=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((t=>"-"+t))].join(",");return createDebug.enable(""),t},createDebug.enable=function enable(t){let r;createDebug.save(t),createDebug.namespaces=t,createDebug.names=[],createDebug.skips=[];const o=("string"==typeof t?t:"").split(/[\s,]+/),i=o.length;for(r=0;r<i;r++)o[r]&&("-"===(t=o[r].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+t.substr(1)+"$")):createDebug.names.push(new RegExp("^"+t+"$")))},createDebug.enabled=function enabled(t){if("*"===t[t.length-1])return!0;let r,o;for(r=0,o=createDebug.skips.length;r<o;r++)if(createDebug.skips[r].test(t))return!1;for(r=0,o=createDebug.names.length;r<o;r++)if(createDebug.names[r].test(t))return!0;return!1},createDebug.humanize=o(7824),createDebug.destroy=function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((r=>{createDebug[r]=t[r]})),createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=function selectColor(t){let r=0;for(let o=0;o<t.length;o++)r=(r<<5)-r+t.charCodeAt(o),r|=0;return createDebug.colors[Math.abs(r)%createDebug.colors.length]},createDebug.enable(createDebug.load()),createDebug}},6387:(t,r,o)=>{var i,a=o(4155);!function(c){var u=Object.hasOwnProperty,l=Array.isArray?Array.isArray:function _isArray(t){return"[object Array]"===Object.prototype.toString.call(t)},p="object"==typeof a&&"function"==typeof a.nextTick,d="function"==typeof Symbol,h="object"==typeof Reflect,y="function"==typeof setImmediate?setImmediate:setTimeout,v=d?h&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(t){var r=Object.getOwnPropertyNames(t);return r.push.apply(r,Object.getOwnPropertySymbols(t)),r}:Object.keys;function init(){this._events={},this._conf&&configure.call(this,this._conf)}function configure(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners!==c&&(this._maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this._newListener=t.newListener),t.removeListener&&(this._removeListener=t.removeListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),t.ignoreErrors&&(this.ignoreErrors=t.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function logPossibleMemoryLeak(t,r){var o="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(o+=" Event name: "+r+"."),void 0!==a&&a.emitWarning){var i=new Error(o);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=t,a.emitWarning(i)}else console.error(o),console.trace&&console.trace()}var toArray=function(t,r,o){var i=arguments.length;switch(i){case 0:return[];case 1:return[t];case 2:return[t,r];case 3:return[t,r,o];default:for(var a=new Array(i);i--;)a[i]=arguments[i];return a}};function toObject(t,r){for(var o={},i=t.length,a=r?value.length:0,u=0;u<i;u++)o[t[u]]=u<a?r[u]:c;return o}function TargetObserver(t,r,o){var i,a;if(this._emitter=t,this._target=r,this._listeners={},this._listenersCount=0,(o.on||o.off)&&(i=o.on,a=o.off),r.addEventListener?(i=r.addEventListener,a=r.removeEventListener):r.addListener?(i=r.addListener,a=r.removeListener):r.on&&(i=r.on,a=r.off),!i&&!a)throw Error("target does not implement any known event API");if("function"!=typeof i)throw TypeError("on method must be a function");if("function"!=typeof a)throw TypeError("off method must be a function");this._on=i,this._off=a;var c=t._observers;c?c.push(this):t._observers=[this]}function resolveOptions(t,r,o,i){var a=Object.assign({},r);if(!t)return a;if("object"!=typeof t)throw TypeError("options must be an object");var l,p,d,h=Object.keys(t),y=h.length;function reject(t){throw Error('Invalid "'+l+'" option value'+(t?". Reason: "+t:""))}for(var v=0;v<y;v++){if(l=h[v],!i&&!u.call(r,l))throw Error('Unknown "'+l+'" option');(p=t[l])!==c&&(d=o[l],a[l]=d?d(p,reject):p)}return a}function constructorReducer(t,r){return"function"==typeof t&&t.hasOwnProperty("prototype")||r("value must be a constructor"),t}function makeTypeReducer(t){var r="value must be type of "+t.join("|"),o=t.length,i=t[0],a=t[1];return 1===o?function(t,o){if(typeof t===i)return t;o(r)}:2===o?function(t,o){var c=typeof t;if(c===i||c===a)return t;o(r)}:function(i,a){for(var c=typeof i,u=o;u-- >0;)if(c===t[u])return i;a(r)}}Object.assign(TargetObserver.prototype,{subscribe:function(t,r,o){var i=this,a=this._target,c=this._emitter,u=this._listeners,handler=function(){var i=toArray.apply(null,arguments),u={data:i,name:r,original:t};if(o){var l=o.call(a,u);!1!==l&&c.emit.apply(c,[u.name].concat(i))}else c.emit.apply(c,[r].concat(i))};if(u[t])throw Error("Event '"+t+"' is already listening");this._listenersCount++,c._newListener&&c._removeListener&&!i._onNewListener?(this._onNewListener=function(o){o===r&&null===u[t]&&(u[t]=handler,i._on.call(a,t,handler))},c.on("newListener",this._onNewListener),this._onRemoveListener=function(o){o===r&&!c.hasListeners(o)&&u[t]&&(u[t]=null,i._off.call(a,t,handler))},u[t]=null,c.on("removeListener",this._onRemoveListener)):(u[t]=handler,i._on.call(a,t,handler))},unsubscribe:function(t){var r,o,i,a=this,c=this._listeners,u=this._emitter,l=this._off,p=this._target;if(t&&"string"!=typeof t)throw TypeError("event must be a string");function clearRefs(){a._onNewListener&&(u.off("newListener",a._onNewListener),u.off("removeListener",a._onRemoveListener),a._onNewListener=null,a._onRemoveListener=null);var t=findTargetIndex.call(u,a);u._observers.splice(t,1)}if(t){if(!(r=c[t]))return;l.call(p,t,r),delete c[t],--this._listenersCount||clearRefs()}else{for(i=(o=v(c)).length;i-- >0;)t=o[i],l.call(p,t,c[t]);this._listeners={},this._listenersCount=0,clearRefs()}}});var g=makeTypeReducer(["function"]),_=makeTypeReducer(["object","function"]);function makeCancelablePromise(t,r,o){var i,a,c,u=0,l=new t((function(p,d,h){function cleanup(){a&&(a=null),u&&(clearTimeout(u),u=0)}o=resolveOptions(o,{timeout:0,overload:!1},{timeout:function(t,r){return("number"!=typeof(t*=1)||t<0||!Number.isFinite(t))&&r("timeout must be a positive number"),t}}),i=!o.overload&&"function"==typeof t.prototype.cancel&&"function"==typeof h;var _resolve=function(t){cleanup(),p(t)},_reject=function(t){cleanup(),d(t)};i?r(_resolve,_reject,h):(a=[function(t){_reject(t||Error("canceled"))}],r(_resolve,_reject,(function(t){if(c)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof t)throw TypeError("onCancel callback must be a function");a.push(t)})),c=!0),o.timeout>0&&(u=setTimeout((function(){var t=Error("timeout");t.code="ETIMEDOUT",u=0,l.cancel(t),d(t)}),o.timeout))}));return i||(l.cancel=function(t){if(a){for(var r=a.length,o=1;o<r;o++)a[o](t);a[0](t),a=null}}),l}function findTargetIndex(t){var r=this._observers;if(!r)return-1;for(var o=r.length,i=0;i<o;i++)if(r[i]._target===t)return i;return-1}function searchListenerTree(t,r,o,i,a){if(!o)return null;if(0===i){var c=typeof r;if("string"===c){var u,l,p=0,d=0,h=this.delimiter,y=h.length;if(-1!==(l=r.indexOf(h))){u=new Array(5);do{u[p++]=r.slice(d,l),d=l+y}while(-1!==(l=r.indexOf(h,d)));u[p++]=r.slice(d),r=u,a=p}else r=[r],a=1}else"object"===c?a=r.length:(r=[r],a=1)}var g,_,m,b,w,S,C,O=null,T=r[i],E=r[i+1];if(i===a&&o._listeners)return"function"==typeof o._listeners?(t&&t.push(o._listeners),[o]):(t&&t.push.apply(t,o._listeners),[o]);if("*"===T){for(l=(S=v(o)).length;l-- >0;)"_listeners"!==(g=S[l])&&(C=searchListenerTree(t,r,o[g],i+1,a))&&(O?O.push.apply(O,C):O=C);return O}if("**"===T){for((w=i+1===a||i+2===a&&"*"===E)&&o._listeners&&(O=searchListenerTree(t,r,o,a,a)),l=(S=v(o)).length;l-- >0;)"_listeners"!==(g=S[l])&&("*"===g||"**"===g?(o[g]._listeners&&!w&&(C=searchListenerTree(t,r,o[g],a,a))&&(O?O.push.apply(O,C):O=C),C=searchListenerTree(t,r,o[g],i,a)):C=searchListenerTree(t,r,o[g],g===E?i+2:i,a),C&&(O?O.push.apply(O,C):O=C));return O}if(o[T]&&(O=searchListenerTree(t,r,o[T],i+1,a)),(_=o["*"])&&searchListenerTree(t,r,_,i+1,a),m=o["**"])if(i<a)for(m._listeners&&searchListenerTree(t,r,m,a,a),l=(S=v(m)).length;l-- >0;)"_listeners"!==(g=S[l])&&(g===E?searchListenerTree(t,r,m[g],i+2,a):g===T?searchListenerTree(t,r,m[g],i+1,a):((b={})[g]=m[g],searchListenerTree(t,r,{"**":b},i+1,a)));else m._listeners?searchListenerTree(t,r,m,a,a):m["*"]&&m["*"]._listeners&&searchListenerTree(t,r,m["*"],a,a);return O}function growListenerTree(t,r,o){var i,a,c=0,u=0,l=this.delimiter,p=l.length;if("string"==typeof t)if(-1!==(i=t.indexOf(l))){a=new Array(5);do{a[c++]=t.slice(u,i),u=i+p}while(-1!==(i=t.indexOf(l,u)));a[c++]=t.slice(u)}else a=[t],c=1;else a=t,c=t.length;if(c>1)for(i=0;i+1<c;i++)if("**"===a[i]&&"**"===a[i+1])return;var d,h=this.listenerTree;for(i=0;i<c;i++)if(h=h[d=a[i]]||(h[d]={}),i===c-1)return h._listeners?("function"==typeof h._listeners&&(h._listeners=[h._listeners]),o?h._listeners.unshift(r):h._listeners.push(r),!h._listeners.warned&&this._maxListeners>0&&h._listeners.length>this._maxListeners&&(h._listeners.warned=!0,logPossibleMemoryLeak.call(this,h._listeners.length,d))):h._listeners=r,!0;return!0}function collectTreeEvents(t,r,o,i){for(var a,c,u,l,p=v(t),d=p.length,h=t._listeners;d-- >0;)a=t[c=p[d]],u="_listeners"===c?o:o?o.concat(c):[c],l=i||"symbol"==typeof c,h&&r.push(l?u:u.join(this.delimiter)),"object"==typeof a&&collectTreeEvents.call(this,a,r,u,l);return r}function recursivelyGarbageCollect(t){for(var r,o,i,a=v(t),c=a.length;c-- >0;)(r=t[o=a[c]])&&(i=!0,"_listeners"===o||recursivelyGarbageCollect(r)||delete t[o]);return i}function Listener(t,r,o){this.emitter=t,this.event=r,this.listener=o}function setupListener(t,r,o){if(!0===o)u=!0;else if(!1===o)i=!0;else{if(!o||"object"!=typeof o)throw TypeError("options should be an object or true");var i=o.async,u=o.promisify,l=o.nextTick,d=o.objectify}if(i||l||u){var h=r,v=r._origin||r;if(l&&!p)throw Error("process.nextTick is not supported");u===c&&(u="AsyncFunction"===r.constructor.name),r=function(){var t=arguments,r=this,o=this.event;return u?l?Promise.resolve():new Promise((function(t){y(t)})).then((function(){return r.event=o,h.apply(r,t)})):(l?a.nextTick:y)((function(){r.event=o,h.apply(r,t)}))},r._async=!0,r._origin=v}return[r,d?new Listener(this,t,r):this]}function EventEmitter(t){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,configure.call(this,t)}Listener.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},EventEmitter.EventEmitter2=EventEmitter,EventEmitter.prototype.listenTo=function(t,r,o){if("object"!=typeof t)throw TypeError("target musts be an object");var i=this;function listen(r){if("object"!=typeof r)throw TypeError("events must be an object");var a,c=o.reducers,u=findTargetIndex.call(i,t);a=-1===u?new TargetObserver(i,t,o):i._observers[u];for(var l,p=v(r),d=p.length,h="function"==typeof c,y=0;y<d;y++)l=p[y],a.subscribe(l,r[l]||l,h?c:c&&c[l])}return o=resolveOptions(o,{on:c,off:c,reducers:c},{on:g,off:g,reducers:_}),l(r)?listen(toObject(r)):listen("string"==typeof r?toObject(r.split(/\s+/)):r),this},EventEmitter.prototype.stopListeningTo=function(t,r){var o=this._observers;if(!o)return!1;var i,a=o.length,c=!1;if(t&&"object"!=typeof t)throw TypeError("target should be an object");for(;a-- >0;)i=o[a],t&&i._target!==t||(i.unsubscribe(r),c=!0);return c},EventEmitter.prototype.delimiter=".",EventEmitter.prototype.setMaxListeners=function(t){t!==c&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},EventEmitter.prototype.getMaxListeners=function(){return this._maxListeners},EventEmitter.prototype.event="",EventEmitter.prototype.once=function(t,r,o){return this._once(t,r,!1,o)},EventEmitter.prototype.prependOnceListener=function(t,r,o){return this._once(t,r,!0,o)},EventEmitter.prototype._once=function(t,r,o,i){return this._many(t,1,r,o,i)},EventEmitter.prototype.many=function(t,r,o,i){return this._many(t,r,o,!1,i)},EventEmitter.prototype.prependMany=function(t,r,o,i){return this._many(t,r,o,!0,i)},EventEmitter.prototype._many=function(t,r,o,i,a){var c=this;if("function"!=typeof o)throw new Error("many only accepts instances of Function");function listener(){return 0==--r&&c.off(t,listener),o.apply(this,arguments)}return listener._origin=o,this._on(t,listener,i,a)},EventEmitter.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||init.call(this);var t,r,o,i,a,c,u=arguments[0],l=this.wildcard;if("newListener"===u&&!this._newListener&&!this._events.newListener)return!1;if(l&&(t=u,"newListener"!==u&&"removeListener"!==u&&"object"==typeof u)){if(o=u.length,d)for(i=0;i<o;i++)if("symbol"==typeof u[i]){c=!0;break}c||(u=u.join(this.delimiter))}var p,h=arguments.length;if(this._all&&this._all.length)for(i=0,o=(p=this._all.slice()).length;i<o;i++)switch(this.event=u,h){case 1:p[i].call(this,u);break;case 2:p[i].call(this,u,arguments[1]);break;case 3:p[i].call(this,u,arguments[1],arguments[2]);break;default:p[i].apply(this,arguments)}if(l)p=[],searchListenerTree.call(this,p,t,this.listenerTree,0,o);else{if("function"==typeof(p=this._events[u])){switch(this.event=u,h){case 1:p.call(this);break;case 2:p.call(this,arguments[1]);break;case 3:p.call(this,arguments[1],arguments[2]);break;default:for(r=new Array(h-1),a=1;a<h;a++)r[a-1]=arguments[a];p.apply(this,r)}return!0}p&&(p=p.slice())}if(p&&p.length){if(h>3)for(r=new Array(h-1),a=1;a<h;a++)r[a-1]=arguments[a];for(i=0,o=p.length;i<o;i++)switch(this.event=u,h){case 1:p[i].call(this);break;case 2:p[i].call(this,arguments[1]);break;case 3:p[i].call(this,arguments[1],arguments[2]);break;default:p[i].apply(this,r)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===u)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},EventEmitter.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||init.call(this);var t,r,o,i,a,c,u=arguments[0],l=this.wildcard;if("newListener"===u&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(l&&(t=u,"newListener"!==u&&"removeListener"!==u&&"object"==typeof u)){if(i=u.length,d)for(a=0;a<i;a++)if("symbol"==typeof u[a]){r=!0;break}r||(u=u.join(this.delimiter))}var p,h=[],y=arguments.length;if(this._all)for(a=0,i=this._all.length;a<i;a++)switch(this.event=u,y){case 1:h.push(this._all[a].call(this,u));break;case 2:h.push(this._all[a].call(this,u,arguments[1]));break;case 3:h.push(this._all[a].call(this,u,arguments[1],arguments[2]));break;default:h.push(this._all[a].apply(this,arguments))}if(l?(p=[],searchListenerTree.call(this,p,t,this.listenerTree,0)):p=this._events[u],"function"==typeof p)switch(this.event=u,y){case 1:h.push(p.call(this));break;case 2:h.push(p.call(this,arguments[1]));break;case 3:h.push(p.call(this,arguments[1],arguments[2]));break;default:for(o=new Array(y-1),c=1;c<y;c++)o[c-1]=arguments[c];h.push(p.apply(this,o))}else if(p&&p.length){if(p=p.slice(),y>3)for(o=new Array(y-1),c=1;c<y;c++)o[c-1]=arguments[c];for(a=0,i=p.length;a<i;a++)switch(this.event=u,y){case 1:h.push(p[a].call(this));break;case 2:h.push(p[a].call(this,arguments[1]));break;case 3:h.push(p[a].call(this,arguments[1],arguments[2]));break;default:h.push(p[a].apply(this,o))}}else if(!this.ignoreErrors&&!this._all&&"error"===u)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(h)},EventEmitter.prototype.on=function(t,r,o){return this._on(t,r,!1,o)},EventEmitter.prototype.prependListener=function(t,r,o){return this._on(t,r,!0,o)},EventEmitter.prototype.onAny=function(t){return this._onAny(t,!1)},EventEmitter.prototype.prependAny=function(t){return this._onAny(t,!0)},EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype._onAny=function(t,r){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),r?this._all.unshift(t):this._all.push(t),this},EventEmitter.prototype._on=function(t,r,o,i){if("function"==typeof t)return this._onAny(t,r),this;if("function"!=typeof r)throw new Error("on only accepts instances of Function");this._events||init.call(this);var a,u=this;return i!==c&&(r=(a=setupListener.call(this,t,r,i))[0],u=a[1]),this._newListener&&this.emit("newListener",t,r),this.wildcard?(growListenerTree.call(this,t,r,o),u):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),o?this._events[t].unshift(r):this._events[t].push(r),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,logPossibleMemoryLeak.call(this,this._events[t].length,t))):this._events[t]=r,u)},EventEmitter.prototype.off=function(t,r){if("function"!=typeof r)throw new Error("removeListener only takes instances of Function");var o,i=[];if(this.wildcard){var a="string"==typeof t?t.split(this.delimiter):t.slice();if(!(i=searchListenerTree.call(this,null,a,this.listenerTree,0)))return this}else{if(!this._events[t])return this;o=this._events[t],i.push({_listeners:o})}for(var c=0;c<i.length;c++){var u=i[c];if(o=u._listeners,l(o)){for(var p=-1,d=0,h=o.length;d<h;d++)if(o[d]===r||o[d].listener&&o[d].listener===r||o[d]._origin&&o[d]._origin===r){p=d;break}if(p<0)continue;return this.wildcard?u._listeners.splice(p,1):this._events[t].splice(p,1),0===o.length&&(this.wildcard?delete u._listeners:delete this._events[t]),this._removeListener&&this.emit("removeListener",t,r),this}(o===r||o.listener&&o.listener===r||o._origin&&o._origin===r)&&(this.wildcard?delete u._listeners:delete this._events[t],this._removeListener&&this.emit("removeListener",t,r))}return this.listenerTree&&recursivelyGarbageCollect(this.listenerTree),this},EventEmitter.prototype.offAny=function(t){var r,o=0,i=0;if(t&&this._all&&this._all.length>0){for(o=0,i=(r=this._all).length;o<i;o++)if(t===r[o])return r.splice(o,1),this._removeListener&&this.emit("removeListenerAny",t),this}else{if(r=this._all,this._removeListener)for(o=0,i=r.length;o<i;o++)this.emit("removeListenerAny",r[o]);this._all=[]}return this},EventEmitter.prototype.removeListener=EventEmitter.prototype.off,EventEmitter.prototype.removeAllListeners=function(t){if(t===c)return!this._events||init.call(this),this;if(this.wildcard){var r,o=searchListenerTree.call(this,null,t,this.listenerTree,0);if(!o)return this;for(r=0;r<o.length;r++)o[r]._listeners=null;this.listenerTree&&recursivelyGarbageCollect(this.listenerTree)}else this._events&&(this._events[t]=null);return this},EventEmitter.prototype.listeners=function(t){var r,o,i,a,u,l=this._events;if(t===c){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!l)return[];for(a=(r=v(l)).length,i=[];a-- >0;)"function"==typeof(o=l[r[a]])?i.push(o):i.push.apply(i,o);return i}if(this.wildcard){if(!(u=this.listenerTree))return[];var p=[],d="string"==typeof t?t.split(this.delimiter):t.slice();return searchListenerTree.call(this,p,d,u,0),p}return l&&(o=l[t])?"function"==typeof o?[o]:o:[]},EventEmitter.prototype.eventNames=function(t){var r=this._events;return this.wildcard?collectTreeEvents.call(this,this.listenerTree,[],null,t):r?v(r):[]},EventEmitter.prototype.listenerCount=function(t){return this.listeners(t).length},EventEmitter.prototype.hasListeners=function(t){if(this.wildcard){var r=[],o="string"==typeof t?t.split(this.delimiter):t.slice();return searchListenerTree.call(this,r,o,this.listenerTree,0),r.length>0}var i=this._events,a=this._all;return!!(a&&a.length||i&&(t===c?v(i).length:i[t]))},EventEmitter.prototype.listenersAny=function(){return this._all?this._all:[]},EventEmitter.prototype.waitFor=function(t,r){var o=this,i=typeof r;return"number"===i?r={timeout:r}:"function"===i&&(r={filter:r}),makeCancelablePromise((r=resolveOptions(r,{timeout:0,filter:c,handleError:!1,Promise,overload:!1},{filter:g,Promise:constructorReducer})).Promise,(function(i,a,c){function listener(){var c=r.filter;if(!c||c.apply(o,arguments))if(o.off(t,listener),r.handleError){var u=arguments[0];u?a(u):i(toArray.apply(null,arguments).slice(1))}else i(toArray.apply(null,arguments))}c((function(){o.off(t,listener)})),o._on(t,listener,!1)}),{timeout:r.timeout,overload:r.overload})};var m=EventEmitter.prototype;Object.defineProperties(EventEmitter,{defaultMaxListeners:{get:function(){return m._maxListeners},set:function(t){if("number"!=typeof t||t<0||Number.isNaN(t))throw TypeError("n must be a non-negative number");m._maxListeners=t},enumerable:!0},once:{value:function once(t,r,o){return makeCancelablePromise((o=resolveOptions(o,{Promise,timeout:0,overload:!1},{Promise:constructorReducer})).Promise,(function(o,i,a){var c;if("function"==typeof t.addEventListener)return c=function(){o(toArray.apply(null,arguments))},a((function(){t.removeEventListener(r,c)})),void t.addEventListener(r,c,{once:!0});var u,eventListener=function(){u&&t.removeListener("error",u),o(toArray.apply(null,arguments))};"error"!==r&&(u=function(o){t.removeListener(r,eventListener),i(o)},t.once("error",u)),a((function(){u&&t.removeListener("error",u),t.removeListener(r,eventListener)})),t.once(r,eventListener)}),{timeout:o.timeout,overload:o.overload})},writable:!0,configurable:!0}}),Object.defineProperties(m,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(i=function(){return EventEmitter}.call(r,o,r,t))===c||(t.exports=i)}()},7375:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});var o=Symbol.for("INJECTION");function _proxyGetter(t,r,i,a){Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:function getter(){return a&&!Reflect.hasMetadata(o,this,r)&&Reflect.defineMetadata(o,i(),this,r),Reflect.hasMetadata(o,this,r)?Reflect.getMetadata(o,this,r):i()},set:function setter(t){Reflect.defineMetadata(o,t,this,r)}})}r.makePropertyInjectDecorator=function makePropertyInjectDecorator(t,r){return function(o){return function(i,a){_proxyGetter(i,a,(function(){return t.get(o)}),r)}}},r.makePropertyInjectNamedDecorator=function makePropertyInjectNamedDecorator(t,r){return function(o,i){return function(a,c){_proxyGetter(a,c,(function(){return t.getNamed(o,i)}),r)}}},r.makePropertyInjectTaggedDecorator=function makePropertyInjectTaggedDecorator(t,r){return function(o,i,a){return function(c,u){_proxyGetter(c,u,(function(){return t.getTagged(o,i,a)}),r)}}},r.makePropertyMultiInjectDecorator=function makePropertyMultiInjectDecorator(t,r){return function(o){return function(i,a){_proxyGetter(i,a,(function(){return t.getAll(o)}),r)}}}},4879:(t,r,o)=>{var i=o(7375);r.Z=function getDecorators(t,r){return void 0===r&&(r=!0),{lazyInject:i.makePropertyInjectDecorator(t,r),lazyInjectNamed:i.makePropertyInjectNamedDecorator(t,r),lazyInjectTagged:i.makePropertyInjectTaggedDecorator(t,r),lazyMultiInject:i.makePropertyMultiInjectDecorator(t,r)}}},9934:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tagProperty=r.tagParameter=r.decorate=void 0;var i=o(6674),a=o(6867);function _tagParameterOrProperty(t,r,o,a,c){var u={},l="number"==typeof c,p=void 0!==c&&l?c.toString():o;if(l&&void 0!==o)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,r)&&(u=Reflect.getMetadata(t,r));var d=u[p];if(Array.isArray(d))for(var h=0,y=d;h<y.length;h++){var v=y[h];if(v.key===a.key)throw new Error(i.DUPLICATED_METADATA+" "+v.key.toString())}else d=[];d.push(a),u[p]=d,Reflect.defineMetadata(t,u,r)}function _decorate(t,r){Reflect.decorate(t,r)}function _param(t,r){return function(o,i){r(o,i,t)}}r.tagParameter=function tagParameter(t,r,o,i){_tagParameterOrProperty(a.TAGGED,t,r,i,o)},r.tagProperty=function tagProperty(t,r,o){_tagParameterOrProperty(a.TAGGED_PROP,t.constructor,r,o)},r.decorate=function decorate(t,r,o){"number"==typeof o?_decorate([_param(o,t)],r):"string"==typeof o?Reflect.decorate([t],r,o):_decorate([t],r)}},5744:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.inject=r.LazyServiceIdentifer=void 0;var i=o(6674),a=o(6867),c=o(7738),u=o(9934),l=function(){function LazyServiceIdentifer(t){this._cb=t}return LazyServiceIdentifer.prototype.unwrap=function(){return this._cb()},LazyServiceIdentifer}();r.LazyServiceIdentifer=l,r.inject=function inject(t){return function(r,o,l){if(void 0===t)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(r.name));var p=new c.Metadata(a.INJECT_TAG,t);"number"==typeof l?u.tagParameter(r,o,l,p):u.tagProperty(r,o,p)}}},4315:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.injectable=void 0;var i=o(6674),a=o(6867);r.injectable=function injectable(){return function(t){if(Reflect.hasOwnMetadata(a.PARAM_TYPES,t))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var r=Reflect.getMetadata(a.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(a.PARAM_TYPES,r,t),t}}},1693:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.multiInject=void 0;var i=o(6867),a=o(7738),c=o(9934);r.multiInject=function multiInject(t){return function(r,o,u){var l=new a.Metadata(i.MULTI_INJECT_TAG,t);"number"==typeof u?c.tagParameter(r,o,u,l):c.tagProperty(r,o,l)}}},8085:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.named=void 0;var i=o(6867),a=o(7738),c=o(9934);r.named=function named(t){return function(r,o,u){var l=new a.Metadata(i.NAMED_TAG,t);"number"==typeof u?c.tagParameter(r,o,u,l):c.tagProperty(r,o,l)}}},6515:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.optional=void 0;var i=o(6867),a=o(7738),c=o(9934);r.optional=function optional(){return function(t,r,o){var u=new a.Metadata(i.OPTIONAL_TAG,!0);"number"==typeof o?c.tagParameter(t,r,o,u):c.tagProperty(t,r,u)}}},7014:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.postConstruct=void 0;var i=o(6674),a=o(6867),c=o(7738);r.postConstruct=function postConstruct(){return function(t,r,o){var u=new c.Metadata(a.POST_CONSTRUCT,r);if(Reflect.hasOwnMetadata(a.POST_CONSTRUCT,t.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(a.POST_CONSTRUCT,u,t.constructor)}}},2052:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tagged=void 0;var i=o(7738),a=o(9934);r.tagged=function tagged(t,r){return function(o,c,u){var l=new i.Metadata(t,r);"number"==typeof u?a.tagParameter(o,c,u,l):a.tagProperty(o,c,l)}}},5638:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.targetName=void 0;var i=o(6867),a=o(7738),c=o(9934);r.targetName=function targetName(t){return function(r,o,u){var l=new a.Metadata(i.NAME_TAG,t);c.tagParameter(r,o,u,l)}}},6757:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.unmanaged=void 0;var i=o(6867),a=o(7738),c=o(9934);r.unmanaged=function unmanaged(){return function(t,r,o){var u=new a.Metadata(i.UNMANAGED_TAG,!0);c.tagParameter(t,r,o,u)}}},4290:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Binding=void 0;var i=o(8421),a=o(7791),c=function(){function Binding(t,r){this.id=a.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=r,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return Binding.prototype.clone=function(){var t=new Binding(this.serviceIdentifier,this.scope);return t.activated=t.scope===i.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},Binding}();r.Binding=c},3184:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BindingCount=void 0;r.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},6674:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.STACK_OVERFLOW=r.CIRCULAR_DEPENDENCY_IN_FACTORY=r.POST_CONSTRUCT_ERROR=r.MULTIPLE_POST_CONSTRUCT_METHODS=r.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=r.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=r.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=r.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=r.ARGUMENTS_LENGTH_MISMATCH=r.INVALID_DECORATOR_OPERATION=r.INVALID_TO_SELF_VALUE=r.INVALID_FUNCTION_BINDING=r.INVALID_MIDDLEWARE_RETURN=r.NO_MORE_SNAPSHOTS_AVAILABLE=r.INVALID_BINDING_TYPE=r.NOT_IMPLEMENTED=r.CIRCULAR_DEPENDENCY=r.UNDEFINED_INJECT_ANNOTATION=r.MISSING_INJECT_ANNOTATION=r.MISSING_INJECTABLE_ANNOTATION=r.NOT_REGISTERED=r.CANNOT_UNBIND=r.AMBIGUOUS_MATCH=r.KEY_NOT_FOUND=r.NULL_ARGUMENT=r.DUPLICATED_METADATA=r.DUPLICATED_INJECTABLE_DECORATOR=void 0,r.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",r.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",r.NULL_ARGUMENT="NULL argument",r.KEY_NOT_FOUND="Key Not Found",r.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",r.CANNOT_UNBIND="Could not unbind serviceIdentifier:",r.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",r.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",r.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";r.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},r.CIRCULAR_DEPENDENCY="Circular dependency found:",r.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",r.INVALID_BINDING_TYPE="Invalid binding type:",r.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",r.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",r.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",r.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",r.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";r.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},r.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",r.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",r.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",r.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",r.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";r.POST_CONSTRUCT_ERROR=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return"@postConstruct error in class "+t[0]+": "+t[1]};r.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},r.STACK_OVERFLOW="Maximum call stack size exceeded"},8421:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TargetTypeEnum=r.BindingTypeEnum=r.BindingScopeEnum=void 0;r.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};r.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};r.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NON_CUSTOM_TAG_KEYS=r.POST_CONSTRUCT=r.DESIGN_PARAM_TYPES=r.PARAM_TYPES=r.TAGGED_PROP=r.TAGGED=r.MULTI_INJECT_TAG=r.INJECT_TAG=r.OPTIONAL_TAG=r.UNMANAGED_TAG=r.NAME_TAG=r.NAMED_TAG=void 0,r.NAMED_TAG="named",r.NAME_TAG="name",r.UNMANAGED_TAG="unmanaged",r.OPTIONAL_TAG="optional",r.INJECT_TAG="inject",r.MULTI_INJECT_TAG="multi_inject",r.TAGGED="inversify:tagged",r.TAGGED_PROP="inversify:tagged_props",r.PARAM_TYPES="inversify:paramtypes",r.DESIGN_PARAM_TYPES="design:paramtypes",r.POST_CONSTRUCT="post_construct",r.NON_CUSTOM_TAG_KEYS=function getNonCustomTagKeys(){return[r.INJECT_TAG,r.MULTI_INJECT_TAG,r.NAME_TAG,r.UNMANAGED_TAG,r.NAMED_TAG,r.OPTIONAL_TAG]}()},1389:function(t,r,o){var i=this&&this.__awaiter||function(t,r,o,i){return new(o||(o=Promise))((function(a,c){function fulfilled(t){try{step(i.next(t))}catch(t){c(t)}}function rejected(t){try{step(i.throw(t))}catch(t){c(t)}}function step(t){t.done?a(t.value):function adopt(t){return t instanceof o?t:new o((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))},a=this&&this.__generator||function(t,r){var o,i,a,c,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function verb(c){return function(l){return function step(c){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&c[0]?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,i=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(a=u.trys,(a=a.length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){u=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){u.label=c[1];break}if(6===c[0]&&u.label<a[1]){u.label=a[1],a=c;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(c);break}a[2]&&u.ops.pop(),u.trys.pop();continue}c=r.call(t,u)}catch(t){c=[6,t],i=0}finally{o=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},c=this&&this.__spreadArray||function(t,r){for(var o=0,i=r.length,a=t.length;o<i;o++,a++)t[a]=r[o];return t};Object.defineProperty(r,"__esModule",{value:!0}),r.Container=void 0;var u=o(4290),l=o(6674),p=o(8421),d=o(6867),h=o(1377),y=o(6311),v=o(1927),g=o(1860),_=o(7791),m=o(5800),b=o(5700),w=o(175),S=function(){function Container(t){this._appliedMiddleware=[];var r=t||{};if("object"!=typeof r)throw new Error(""+l.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===r.defaultScope)r.defaultScope=p.BindingScopeEnum.Transient;else if(r.defaultScope!==p.BindingScopeEnum.Singleton&&r.defaultScope!==p.BindingScopeEnum.Transient&&r.defaultScope!==p.BindingScopeEnum.Request)throw new Error(""+l.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===r.autoBindInjectable)r.autoBindInjectable=!1;else if("boolean"!=typeof r.autoBindInjectable)throw new Error(""+l.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===r.skipBaseClassChecks)r.skipBaseClassChecks=!1;else if("boolean"!=typeof r.skipBaseClassChecks)throw new Error(""+l.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:r.autoBindInjectable,defaultScope:r.defaultScope,skipBaseClassChecks:r.skipBaseClassChecks},this.id=_.id(),this._bindingDictionary=new w.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new h.MetadataReader}return Container.merge=function(t,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var a=new Container,u=c([t,r],o).map((function(t){return y.getBindingDictionary(t)})),l=y.getBindingDictionary(a);function copyDictionary(t,r){t.traverse((function(t,o){o.forEach((function(t){r.add(t.serviceIdentifier,t.clone())}))}))}return u.forEach((function(t){copyDictionary(t,l)})),a},Container.prototype.load=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var o=this._getContainerModuleHelpersFactory(),i=0,a=t;i<a.length;i++){var c=a[i],u=o(c.id);c.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction)}},Container.prototype.loadAsync=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return i(this,void 0,void 0,(function(){var r,o,i,c,u;return a(this,(function(a){switch(a.label){case 0:r=this._getContainerModuleHelpersFactory(),o=0,i=t,a.label=1;case 1:return o<i.length?(c=i[o],u=r(c.id),[4,c.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction)]):[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:return[2]}}))}))},Container.prototype.unload=function(){for(var t=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var conditionFactory=function(t){return function(r){return r.moduleId===t}};r.forEach((function(r){var o=conditionFactory(r.id);t._bindingDictionary.removeByCondition(o)}))},Container.prototype.bind=function(t){var r=this.options.defaultScope||p.BindingScopeEnum.Transient,o=new u.Binding(t,r);return this._bindingDictionary.add(t,o),new g.BindingToSyntax(o)},Container.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},Container.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(r){throw new Error(l.CANNOT_UNBIND+" "+m.getServiceIdentifierAsString(t))}},Container.prototype.unbindAll=function(){this._bindingDictionary=new w.Lookup},Container.prototype.isBound=function(t){var r=this._bindingDictionary.hasKey(t);return!r&&this.parent&&(r=this.parent.isBound(t)),r},Container.prototype.isBoundNamed=function(t,r){return this.isBoundTagged(t,d.NAMED_TAG,r)},Container.prototype.isBoundTagged=function(t,r,o){var i=!1;if(this._bindingDictionary.hasKey(t)){var a=this._bindingDictionary.get(t),c=y.createMockRequest(this,t,r,o);i=a.some((function(t){return t.constraint(c)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,r,o)),i},Container.prototype.snapshot=function(){this._snapshots.push(b.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},Container.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(l.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},Container.prototype.createChild=function(t){var r=new Container(t||this.options);return r.parent=this,r},Container.prototype.applyMiddleware=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._appliedMiddleware=this._appliedMiddleware.concat(t);var o=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,r){return r(t)}),o)},Container.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},Container.prototype.get=function(t){return this._get(!1,!1,p.TargetTypeEnum.Variable,t)},Container.prototype.getTagged=function(t,r,o){return this._get(!1,!1,p.TargetTypeEnum.Variable,t,r,o)},Container.prototype.getNamed=function(t,r){return this.getTagged(t,d.NAMED_TAG,r)},Container.prototype.getAll=function(t){return this._get(!0,!0,p.TargetTypeEnum.Variable,t)},Container.prototype.getAllTagged=function(t,r,o){return this._get(!1,!0,p.TargetTypeEnum.Variable,t,r,o)},Container.prototype.getAllNamed=function(t,r){return this.getAllTagged(t,d.NAMED_TAG,r)},Container.prototype.resolve=function(t){var r=this.createChild();return r.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){r.applyMiddleware(t)})),r.get(t)},Container.prototype._getContainerModuleHelpersFactory=function(){var t=this,setModuleId=function(t,r){t._binding.moduleId=r},getRebindFunction=function(r){return function(o){var i=t.rebind.bind(t)(o);return setModuleId(i,r),i}};return function(r){return{bindFunction:(o=r,function(r){var i=t.bind.bind(t)(r);return setModuleId(i,o),i}),isboundFunction:function(r){return t.isBound.bind(t)(r)},rebindFunction:getRebindFunction(r),unbindFunction:function(r){t.unbind.bind(t)(r)}};var o}},Container.prototype._get=function(t,r,o,i,a,c){var u=null,p={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:r,key:a,serviceIdentifier:i,targetType:o,value:c};if(this._middleware){if(null==(u=this._middleware(p)))throw new Error(l.INVALID_MIDDLEWARE_RETURN)}else u=this._planAndResolve()(p);return u},Container.prototype._planAndResolve=function(){var t=this;return function(r){var o=y.plan(t._metadataReader,t,r.isMultiInject,r.targetType,r.serviceIdentifier,r.key,r.value,r.avoidConstraints);return o=r.contextInterceptor(o),v.resolve(o)}},Container}();r.Container=S},3244:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncContainerModule=r.ContainerModule=void 0;var i=o(7791),a=function a(t){this.id=i.id(),this.registry=t};r.ContainerModule=a;var c=function c(t){this.id=i.id(),this.registry=t};r.AsyncContainerModule=c},5700:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ContainerSnapshot=void 0;var o=function(){function ContainerSnapshot(){}return ContainerSnapshot.of=function(t,r){var o=new ContainerSnapshot;return o.bindings=t,o.middleware=r,o},ContainerSnapshot}();r.ContainerSnapshot=o},175:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Lookup=void 0;var i=o(6674),a=function(){function Lookup(){this._map=new Map}return Lookup.prototype.getMap=function(){return this._map},Lookup.prototype.add=function(t,r){if(null==t)throw new Error(i.NULL_ARGUMENT);if(null==r)throw new Error(i.NULL_ARGUMENT);var o=this._map.get(t);void 0!==o?(o.push(r),this._map.set(t,o)):this._map.set(t,[r])},Lookup.prototype.get=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);var r=this._map.get(t);if(void 0!==r)return r;throw new Error(i.KEY_NOT_FOUND)},Lookup.prototype.remove=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(i.KEY_NOT_FOUND)},Lookup.prototype.removeByCondition=function(t){var r=this;this._map.forEach((function(o,i){var a=o.filter((function(r){return!t(r)}));a.length>0?r._map.set(i,a):r._map.delete(i)}))},Lookup.prototype.hasKey=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);return this._map.has(t)},Lookup.prototype.clone=function(){var t=new Lookup;return this._map.forEach((function(r,o){r.forEach((function(r){return t.add(o,r.clone())}))})),t},Lookup.prototype.traverse=function(t){this._map.forEach((function(r,o){t(o,r)}))},Lookup}();r.Lookup=a},6700:(t,r,o)=>{r.GW=r.zY=r.NT=r.b2=r.Ls=r.W2=void 0,o(6867);var i=o(1389);Object.defineProperty(r,"W2",{enumerable:!0,get:function(){return i.Container}});var a=o(8421);var c=o(3244);Object.defineProperty(r,"Ls",{enumerable:!0,get:function(){return c.AsyncContainerModule}});var u=o(4315);Object.defineProperty(r,"b2",{enumerable:!0,get:function(){return u.injectable}});var l=o(2052);var p=o(8085);var d=o(5744);var h=o(6515);var y=o(6757);Object.defineProperty(r,"NT",{enumerable:!0,get:function(){return y.unmanaged}});var v=o(1693);var g=o(5638);var _=o(7014);Object.defineProperty(r,"zY",{enumerable:!0,get:function(){return _.postConstruct}});var m=o(1377);var b=o(7791);var w=o(9934);Object.defineProperty(r,"GW",{enumerable:!0,get:function(){return w.decorate}});var S=o(758);var C=o(5800);var O=o(600)},5228:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Context=void 0;var i=o(7791),a=function(){function Context(t){this.id=i.id(),this.container=t}return Context.prototype.addPlan=function(t){this.plan=t},Context.prototype.setCurrentRequest=function(t){this.currentRequest=t},Context}();r.Context=a},7738:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var i=o(6867),a=function(){function Metadata(t,r){this.key=t,this.value=r}return Metadata.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},Metadata}();r.Metadata=a},1377:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MetadataReader=void 0;var i=o(6867),a=function(){function MetadataReader(){}return MetadataReader.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,t)||{}}},MetadataReader.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(i.TAGGED_PROP,t)||[]},MetadataReader}();r.MetadataReader=a},5314:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Plan=void 0;var o=function o(t,r){this.parentContext=t,this.rootRequest=r};r.Plan=o},6311:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getBindingDictionary=r.createMockRequest=r.plan=void 0;var i=o(3184),a=o(6674),c=o(8421),u=o(6867),l=o(5265),p=o(5800),d=o(5228),h=o(7738),y=o(5314),v=o(6e3),g=o(6748),_=o(8924);function getBindingDictionary(t){return t._bindingDictionary}function _getActiveBindings(t,r,o,c,u){var l=getBindings(o.container,u.serviceIdentifier),d=[];return l.length===i.BindingCount.NoBindingsAvailable&&o.container.options.autoBindInjectable&&"function"==typeof u.serviceIdentifier&&t.getConstructorMetadata(u.serviceIdentifier).compilerGeneratedMetadata&&(o.container.bind(u.serviceIdentifier).toSelf(),l=getBindings(o.container,u.serviceIdentifier)),d=r?l:l.filter((function(t){var r=new g.Request(t.serviceIdentifier,o,c,t,u);return t.constraint(r)})),function _validateActiveBindingCount(t,r,o,c){switch(r.length){case i.BindingCount.NoBindingsAvailable:if(o.isOptional())return r;var u=p.getServiceIdentifierAsString(t),l=a.NOT_REGISTERED;throw l+=p.listMetadataForTarget(u,o),l+=p.listRegisteredBindingsForServiceIdentifier(c,u,getBindings),new Error(l);case i.BindingCount.OnlyOneBindingAvailable:if(!o.isArray())return r;case i.BindingCount.MultipleBindingsAvailable:default:if(o.isArray())return r;u=p.getServiceIdentifierAsString(t),l=a.AMBIGUOUS_MATCH+" "+u;throw l+=p.listRegisteredBindingsForServiceIdentifier(c,u,getBindings),new Error(l)}}(u.serviceIdentifier,d,u,o.container),d}function _createSubRequests(t,r,o,i,u,l){var p,d;if(null===u){p=_getActiveBindings(t,r,i,null,l),d=new g.Request(o,i,null,p,l);var h=new y.Plan(i,d);i.addPlan(h)}else p=_getActiveBindings(t,r,i,u,l),d=u.addChildRequest(l.serviceIdentifier,p,l);p.forEach((function(r){var o=null;if(l.isArray())o=d.addChildRequest(r.serviceIdentifier,r,l);else{if(r.cache)return;o=d}if(r.type===c.BindingTypeEnum.Instance&&null!==r.implementationType){var u=v.getDependencies(t,r.implementationType);if(!i.container.options.skipBaseClassChecks){var p=v.getBaseClassDependencyCount(t,r.implementationType);if(u.length<p){var h=a.ARGUMENTS_LENGTH_MISMATCH(v.getFunctionName(r.implementationType));throw new Error(h)}}u.forEach((function(r){_createSubRequests(t,!1,r.serviceIdentifier,i,o,r)}))}}))}function getBindings(t,r){var o=[],i=getBindingDictionary(t);return i.hasKey(r)?o=i.get(r):null!==t.parent&&(o=getBindings(t.parent,r)),o}r.getBindingDictionary=getBindingDictionary,r.plan=function plan(t,r,o,i,a,c,y,v){void 0===v&&(v=!1);var g=new d.Context(r),m=function _createTarget(t,r,o,i,a,c){var l=t?u.MULTI_INJECT_TAG:u.INJECT_TAG,p=new h.Metadata(l,o),d=new _.Target(r,i,o,p);if(void 0!==a){var y=new h.Metadata(a,c);d.metadata.push(y)}return d}(o,i,a,"",c,y);try{return _createSubRequests(t,v,a,g,null,m),g}catch(t){throw l.isStackOverflowExeption(t)&&g.plan&&p.circularDependencyToException(g.plan.rootRequest),t}},r.createMockRequest=function createMockRequest(t,r,o,i){var a=new _.Target(c.TargetTypeEnum.Variable,"",r,new h.Metadata(o,i)),u=new d.Context(t);return new g.Request(r,u,null,[],a)}},8460:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.QueryableString=void 0;var o=function(){function QueryableString(t){this.str=t}return QueryableString.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},QueryableString.prototype.endsWith=function(t){var r,o=t.split("").reverse().join("");return r=this.str.split("").reverse().join(""),this.startsWith.call({str:r},o)},QueryableString.prototype.contains=function(t){return-1!==this.str.indexOf(t)},QueryableString.prototype.equals=function(t){return this.str===t},QueryableString.prototype.value=function(){return this.str},QueryableString}();r.QueryableString=o},6e3:function(t,r,o){var i=this&&this.__spreadArray||function(t,r){for(var o=0,i=r.length,a=t.length;o<i;o++,a++)t[a]=r[o];return t};Object.defineProperty(r,"__esModule",{value:!0}),r.getFunctionName=r.getBaseClassDependencyCount=r.getDependencies=void 0;var a=o(5744),c=o(6674),u=o(8421),l=o(6867),p=o(5800);Object.defineProperty(r,"getFunctionName",{enumerable:!0,get:function(){return p.getFunctionName}});var d=o(8924);function getTargets(t,r,o,a){var u=t.getConstructorMetadata(o),l=u.compilerGeneratedMetadata;if(void 0===l){var p=c.MISSING_INJECTABLE_ANNOTATION+" "+r+".";throw new Error(p)}var d=u.userGeneratedMetadata,h=Object.keys(d),y=0===o.length&&h.length>0,v=h.length>o.length,g=function getConstructorArgsAsTargets(t,r,o,i,a){for(var c=[],u=0;u<a;u++){var l=getConstructorArgsAsTarget(u,t,r,o,i);null!==l&&c.push(l)}return c}(a,r,l,d,y||v?h.length:o.length),_=getClassPropsAsTargets(t,o);return i(i([],g),_)}function getConstructorArgsAsTarget(t,r,o,i,l){var p=l[t.toString()]||[],h=formatTargetMetadata(p),y=!0!==h.unmanaged,v=i[t],g=h.inject||h.multiInject;if((v=g||v)instanceof a.LazyServiceIdentifer&&(v=v.unwrap()),y){if(!r&&(v===Object||v===Function||void 0===v)){var _=c.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+o+".";throw new Error(_)}var m=new d.Target(u.TargetTypeEnum.ConstructorArgument,h.targetName,v);return m.metadata=p,m}return null}function getClassPropsAsTargets(t,r){for(var o=t.getPropertiesMetadata(r),a=[],c=0,l=Object.keys(o);c<l.length;c++){var p=l[c],h=o[p],y=formatTargetMetadata(o[p]),v=y.targetName||p,g=y.inject||y.multiInject,_=new d.Target(u.TargetTypeEnum.ClassProperty,v,g);_.metadata=h,a.push(_)}var m=Object.getPrototypeOf(r.prototype).constructor;if(m!==Object){var b=getClassPropsAsTargets(t,m);a=i(i([],a),b)}return a}function formatTargetMetadata(t){var r={};return t.forEach((function(t){r[t.key.toString()]=t.value})),{inject:r[l.INJECT_TAG],multiInject:r[l.MULTI_INJECT_TAG],targetName:r[l.NAME_TAG],unmanaged:r[l.UNMANAGED_TAG]}}r.getDependencies=function getDependencies(t,r){return getTargets(t,p.getFunctionName(r),r,!1)},r.getBaseClassDependencyCount=function getBaseClassDependencyCount(t,r){var o=Object.getPrototypeOf(r.prototype).constructor;if(o!==Object){var i=getTargets(t,p.getFunctionName(o),o,!0),a=i.map((function(t){return t.metadata.filter((function(t){return t.key===l.UNMANAGED_TAG}))})),c=[].concat.apply([],a).length,u=i.length-c;return u>0?u:getBaseClassDependencyCount(t,o)}return 0}},6748:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Request=void 0;var i=o(7791),a=function(){function Request(t,r,o,a,c){this.id=i.id(),this.serviceIdentifier=t,this.parentContext=r,this.parentRequest=o,this.target=c,this.childRequests=[],this.bindings=Array.isArray(a)?a:[a],this.requestScope=null===o?new Map:null}return Request.prototype.addChildRequest=function(t,r,o){var i=new Request(t,this.parentContext,this,r,o);return this.childRequests.push(i),i},Request}();r.Request=a},8924:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Target=void 0;var i=o(6867),a=o(7791),c=o(7738),u=o(8460),l=function(){function Target(t,r,o,l){this.id=a.id(),this.type=t,this.serviceIdentifier=o,this.name=new u.QueryableString(r||""),this.metadata=new Array;var p=null;"string"==typeof l?p=new c.Metadata(i.NAMED_TAG,l):l instanceof c.Metadata&&(p=l),null!==p&&this.metadata.push(p)}return Target.prototype.hasTag=function(t){for(var r=0,o=this.metadata;r<o.length;r++){if(o[r].key===t)return!0}return!1},Target.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},Target.prototype.matchesArray=function(t){return this.matchesTag(i.MULTI_INJECT_TAG)(t)},Target.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},Target.prototype.isTagged=function(){return this.metadata.some((function(t){return i.NON_CUSTOM_TAG_KEYS.every((function(r){return t.key!==r}))}))},Target.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},Target.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===i.NAMED_TAG}))[0]:null},Target.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return i.NON_CUSTOM_TAG_KEYS.every((function(r){return t.key!==r}))})):null},Target.prototype.matchesNamedTag=function(t){return this.matchesTag(i.NAMED_TAG)(t)},Target.prototype.matchesTag=function(t){var r=this;return function(o){for(var i=0,a=r.metadata;i<a.length;i++){var c=a[i];if(c.key===t&&c.value===o)return!0}return!1}},Target}();r.Target=l},2279:function(t,r,o){var i=this&&this.__spreadArray||function(t,r){for(var o=0,i=r.length,a=t.length;o<i;o++,a++)t[a]=r[o];return t};Object.defineProperty(r,"__esModule",{value:!0}),r.resolveInstance=void 0;var a=o(6674),c=o(8421),u=o(6867);r.resolveInstance=function resolveInstance(t,r,o){var l=null;return l=r.length>0?function _injectProperties(t,r,o){var i=r.filter((function(t){return null!==t.target&&t.target.type===c.TargetTypeEnum.ClassProperty})),a=i.map(o);return i.forEach((function(r,o){var i;i=r.target.name.value();var c=a[o];t[i]=c})),t}(l=function _createInstance(t,r){return new(t.bind.apply(t,i([void 0],r)))}(t,r.filter((function(t){return null!==t.target&&t.target.type===c.TargetTypeEnum.ConstructorArgument})).map(o)),r,o):new t,function _postConstruct(t,r){if(Reflect.hasMetadata(u.POST_CONSTRUCT,t)){var o=Reflect.getMetadata(u.POST_CONSTRUCT,t);try{r[o.value]()}catch(r){throw new Error(a.POST_CONSTRUCT_ERROR(t.name,r.message))}}}(t,l),l}},1927:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.resolve=void 0;var i=o(6674),a=o(8421),c=o(5265),u=o(5800),l=o(2279),invokeFactory=function(t,r,o){try{return o()}catch(o){throw c.isStackOverflowExeption(o)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(t,r.toString())):o}},_resolveRequest=function(t){return function(r){r.parentContext.setCurrentRequest(r);var o=r.bindings,c=r.childRequests,p=r.target&&r.target.isArray(),d=!(r.parentRequest&&r.parentRequest.target&&r.target&&r.parentRequest.target.matchesArray(r.target.serviceIdentifier));if(p&&d)return c.map((function(r){return _resolveRequest(t)(r)}));var h=null;if(!r.target.isOptional()||0!==o.length){var y=o[0],v=y.scope===a.BindingScopeEnum.Singleton,g=y.scope===a.BindingScopeEnum.Request;if(v&&y.activated)return y.cache;if(g&&null!==t&&t.has(y.id))return t.get(y.id);if(y.type===a.BindingTypeEnum.ConstantValue)h=y.cache,y.activated=!0;else if(y.type===a.BindingTypeEnum.Function)h=y.cache,y.activated=!0;else if(y.type===a.BindingTypeEnum.Constructor)h=y.implementationType;else if(y.type===a.BindingTypeEnum.DynamicValue&&null!==y.dynamicValue)h=invokeFactory("toDynamicValue",y.serviceIdentifier,(function(){return y.dynamicValue(r.parentContext)}));else if(y.type===a.BindingTypeEnum.Factory&&null!==y.factory)h=invokeFactory("toFactory",y.serviceIdentifier,(function(){return y.factory(r.parentContext)}));else if(y.type===a.BindingTypeEnum.Provider&&null!==y.provider)h=invokeFactory("toProvider",y.serviceIdentifier,(function(){return y.provider(r.parentContext)}));else{if(y.type!==a.BindingTypeEnum.Instance||null===y.implementationType){var _=u.getServiceIdentifierAsString(r.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+_)}h=l.resolveInstance(y.implementationType,c,_resolveRequest(t))}return"function"==typeof y.onActivation&&(h=y.onActivation(r.parentContext,h)),v&&(y.cache=h,y.activated=!0),g&&null!==t&&!t.has(y.id)&&t.set(y.id,h),h}}};r.resolve=function resolve(t){return _resolveRequest(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},3366:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BindingInSyntax=void 0;var i=o(8421),a=o(1325),c=function(){function BindingInSyntax(t){this._binding=t}return BindingInSyntax.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new a.BindingWhenOnSyntax(this._binding)},BindingInSyntax.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},BindingInSyntax.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new a.BindingWhenOnSyntax(this._binding)},BindingInSyntax}();r.BindingInSyntax=c},9812:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BindingInWhenOnSyntax=void 0;var i=o(3366),a=o(1811),c=o(8370),u=function(){function BindingInWhenOnSyntax(t){this._binding=t,this._bindingWhenSyntax=new c.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new a.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(t)}return BindingInWhenOnSyntax.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},BindingInWhenOnSyntax.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},BindingInWhenOnSyntax.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},BindingInWhenOnSyntax.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},BindingInWhenOnSyntax.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},BindingInWhenOnSyntax.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},BindingInWhenOnSyntax.prototype.whenTargetTagged=function(t,r){return this._bindingWhenSyntax.whenTargetTagged(t,r)},BindingInWhenOnSyntax.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},BindingInWhenOnSyntax.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},BindingInWhenOnSyntax.prototype.whenParentTagged=function(t,r){return this._bindingWhenSyntax.whenParentTagged(t,r)},BindingInWhenOnSyntax.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},BindingInWhenOnSyntax.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged=function(t,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,r)},BindingInWhenOnSyntax.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},BindingInWhenOnSyntax.prototype.whenNoAncestorTagged=function(t,r){return this._bindingWhenSyntax.whenNoAncestorTagged(t,r)},BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},BindingInWhenOnSyntax.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},BindingInWhenOnSyntax.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},BindingInWhenOnSyntax}();r.BindingInWhenOnSyntax=u},1811:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BindingOnSyntax=void 0;var i=o(8370),a=function(){function BindingOnSyntax(t){this._binding=t}return BindingOnSyntax.prototype.onActivation=function(t){return this._binding.onActivation=t,new i.BindingWhenSyntax(this._binding)},BindingOnSyntax}();r.BindingOnSyntax=a},1860:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BindingToSyntax=void 0;var i=o(6674),a=o(8421),c=o(9812),u=o(1325),l=function(){function BindingToSyntax(t){this._binding=t}return BindingToSyntax.prototype.to=function(t){return this._binding.type=a.BindingTypeEnum.Instance,this._binding.implementationType=t,new c.BindingInWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+i.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},BindingToSyntax.prototype.toConstantValue=function(t){return this._binding.type=a.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=a.BindingScopeEnum.Singleton,new u.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toDynamicValue=function(t){return this._binding.type=a.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new c.BindingInWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toConstructor=function(t){return this._binding.type=a.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=a.BindingScopeEnum.Singleton,new u.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toFactory=function(t){return this._binding.type=a.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=a.BindingScopeEnum.Singleton,new u.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(i.INVALID_FUNCTION_BINDING);var r=this.toConstantValue(t);return this._binding.type=a.BindingTypeEnum.Function,this._binding.scope=a.BindingScopeEnum.Singleton,r},BindingToSyntax.prototype.toAutoFactory=function(t){return this._binding.type=a.BindingTypeEnum.Factory,this._binding.factory=function(r){return function(){return r.container.get(t)}},this._binding.scope=a.BindingScopeEnum.Singleton,new u.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toProvider=function(t){return this._binding.type=a.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=a.BindingScopeEnum.Singleton,new u.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toService=function(t){this.toDynamicValue((function(r){return r.container.get(t)}))},BindingToSyntax}();r.BindingToSyntax=l},1325:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BindingWhenOnSyntax=void 0;var i=o(1811),a=o(8370),c=function(){function BindingWhenOnSyntax(t){this._binding=t,this._bindingWhenSyntax=new a.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return BindingWhenOnSyntax.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},BindingWhenOnSyntax.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},BindingWhenOnSyntax.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},BindingWhenOnSyntax.prototype.whenTargetTagged=function(t,r){return this._bindingWhenSyntax.whenTargetTagged(t,r)},BindingWhenOnSyntax.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},BindingWhenOnSyntax.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},BindingWhenOnSyntax.prototype.whenParentTagged=function(t,r){return this._bindingWhenSyntax.whenParentTagged(t,r)},BindingWhenOnSyntax.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},BindingWhenOnSyntax.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},BindingWhenOnSyntax.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},BindingWhenOnSyntax.prototype.whenAnyAncestorTagged=function(t,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,r)},BindingWhenOnSyntax.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},BindingWhenOnSyntax.prototype.whenNoAncestorTagged=function(t,r){return this._bindingWhenSyntax.whenNoAncestorTagged(t,r)},BindingWhenOnSyntax.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},BindingWhenOnSyntax.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},BindingWhenOnSyntax.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},BindingWhenOnSyntax}();r.BindingWhenOnSyntax=c},8370:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BindingWhenSyntax=void 0;var i=o(1811),a=o(758),c=function(){function BindingWhenSyntax(t){this._binding=t}return BindingWhenSyntax.prototype.when=function(t){return this._binding.constraint=t,new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetNamed=function(t){return this._binding.constraint=a.namedConstraint(t),new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetTagged=function(t,r){return this._binding.constraint=a.taggedConstraint(t)(r),new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(r){return a.typeConstraint(t)(r.parentRequest)},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenParentNamed=function(t){return this._binding.constraint=function(r){return a.namedConstraint(t)(r.parentRequest)},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenParentTagged=function(t,r){return this._binding.constraint=function(o){return a.taggedConstraint(t)(r)(o.parentRequest)},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(r){return a.traverseAncerstors(r,a.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(r){return!a.traverseAncerstors(r,a.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(r){return a.traverseAncerstors(r,a.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(r){return!a.traverseAncerstors(r,a.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorTagged=function(t,r){return this._binding.constraint=function(o){return a.traverseAncerstors(o,a.taggedConstraint(t)(r))},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorTagged=function(t,r){return this._binding.constraint=function(o){return!a.traverseAncerstors(o,a.taggedConstraint(t)(r))},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(r){return a.traverseAncerstors(r,t)},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(r){return!a.traverseAncerstors(r,t)},new i.BindingOnSyntax(this._binding)},BindingWhenSyntax}();r.BindingWhenSyntax=c},758:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.typeConstraint=r.namedConstraint=r.taggedConstraint=r.traverseAncerstors=void 0;var i=o(6867),a=o(7738),traverseAncerstors=function(t,r){var o=t.parentRequest;return null!==o&&(!!r(o)||traverseAncerstors(o,r))};r.traverseAncerstors=traverseAncerstors;var taggedConstraint=function(t){return function(r){var constraint=function(o){return null!==o&&null!==o.target&&o.target.matchesTag(t)(r)};return constraint.metaData=new a.Metadata(t,r),constraint}};r.taggedConstraint=taggedConstraint;var c=taggedConstraint(i.NAMED_TAG);r.namedConstraint=c;r.typeConstraint=function(t){return function(r){var o=null;if(null!==r){if(o=r.bindings[0],"string"==typeof t)return o.serviceIdentifier===t;var i=r.bindings[0].implementationType;return t===i}return!1}}},600:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.multiBindToService=void 0;r.multiBindToService=function(t){return function(r){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return o.forEach((function(o){return t.bind(o).toService(r)}))}}}},5265:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isStackOverflowExeption=void 0;var i=o(6674);r.isStackOverflowExeption=function isStackOverflowExeption(t){return t instanceof RangeError||t.message===i.STACK_OVERFLOW}},7791:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.id=void 0;var o=0;r.id=function id(){return o++}},5800:(t,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.circularDependencyToException=r.listMetadataForTarget=r.listRegisteredBindingsForServiceIdentifier=r.getServiceIdentifierAsString=r.getFunctionName=void 0;var i=o(6674);function getServiceIdentifierAsString(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function alreadyDependencyChain(t,r){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===r||alreadyDependencyChain(t.parentRequest,r))}function getFunctionName(t){if(t.name)return t.name;var r=t.toString(),o=r.match(/^function\s*([^\s(]+)/);return o?o[1]:"Anonymous function: "+r}r.getServiceIdentifierAsString=getServiceIdentifierAsString,r.listRegisteredBindingsForServiceIdentifier=function listRegisteredBindingsForServiceIdentifier(t,r,o){var i="",a=o(t,r);return 0!==a.length&&(i="\nRegistered bindings:",a.forEach((function(t){var r="Object";null!==t.implementationType&&(r=getFunctionName(t.implementationType)),i=i+"\n "+r,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i},r.circularDependencyToException=function circularDependencyToException(t){t.childRequests.forEach((function(t){if(alreadyDependencyChain(t,t.serviceIdentifier)){var r=function dependencyChainToString(t){return function _createStringArr(t,r){void 0===r&&(r=[]);var o=getServiceIdentifierAsString(t.serviceIdentifier);return r.push(o),null!==t.parentRequest?_createStringArr(t.parentRequest,r):r}(t).reverse().join(" --\x3e ")}(t);throw new Error(i.CIRCULAR_DEPENDENCY+" "+r)}circularDependencyToException(t)}))},r.listMetadataForTarget=function listMetadataForTarget(t,r){if(r.isTagged()||r.isNamed()){var o="",i=r.getNamedTag(),a=r.getCustomTags();return null!==i&&(o+=i.toString()+"\n"),null!==a&&a.forEach((function(t){o+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+o}return" "+t},r.getFunctionName=getFunctionName},6961:(t,r,o)=>{var i,a=function(){var t=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function getBaseValue(t,r){if(!i[t]){i[t]={};for(var o=0;o<t.length;o++)i[t][t.charAt(o)]=o}return i[t][r]}var a={compressToBase64:function(t){if(null==t)return"";var o=a._compress(t,6,(function(t){return r.charAt(t)}));switch(o.length%4){default:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:a._decompress(t.length,32,(function(o){return getBaseValue(r,t.charAt(o))}))},compressToUTF16:function(r){return null==r?"":a._compress(r,15,(function(r){return t(r+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:a._decompress(t.length,16384,(function(r){return t.charCodeAt(r)-32}))},compressToUint8Array:function(t){for(var r=a.compress(t),o=new Uint8Array(2*r.length),i=0,c=r.length;i<c;i++){var u=r.charCodeAt(i);o[2*i]=u>>>8,o[2*i+1]=u%256}return o},decompressFromUint8Array:function(r){if(null==r)return a.decompress(r);for(var o=new Array(r.length/2),i=0,c=o.length;i<c;i++)o[i]=256*r[2*i]+r[2*i+1];var u=[];return o.forEach((function(r){u.push(t(r))})),a.decompress(u.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":a._compress(t,6,(function(t){return o.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,(function(r){return getBaseValue(o,t.charAt(r))})))},compress:function(r){return a._compress(r,16,(function(r){return t(r)}))},_compress:function(t,r,o){if(null==t)return"";var i,a,c,u={},l={},p="",d="",h="",y=2,v=3,g=2,_=[],m=0,b=0;for(c=0;c<t.length;c+=1)if(p=t.charAt(c),Object.prototype.hasOwnProperty.call(u,p)||(u[p]=v++,l[p]=!0),d=h+p,Object.prototype.hasOwnProperty.call(u,d))h=d;else{if(Object.prototype.hasOwnProperty.call(l,h)){if(h.charCodeAt(0)<256){for(i=0;i<g;i++)m<<=1,b==r-1?(b=0,_.push(o(m)),m=0):b++;for(a=h.charCodeAt(0),i=0;i<8;i++)m=m<<1|1&a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a>>=1}else{for(a=1,i=0;i<g;i++)m=m<<1|a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a=0;for(a=h.charCodeAt(0),i=0;i<16;i++)m=m<<1|1&a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a>>=1}0==--y&&(y=Math.pow(2,g),g++),delete l[h]}else for(a=u[h],i=0;i<g;i++)m=m<<1|1&a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a>>=1;0==--y&&(y=Math.pow(2,g),g++),u[d]=v++,h=String(p)}if(""!==h){if(Object.prototype.hasOwnProperty.call(l,h)){if(h.charCodeAt(0)<256){for(i=0;i<g;i++)m<<=1,b==r-1?(b=0,_.push(o(m)),m=0):b++;for(a=h.charCodeAt(0),i=0;i<8;i++)m=m<<1|1&a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a>>=1}else{for(a=1,i=0;i<g;i++)m=m<<1|a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a=0;for(a=h.charCodeAt(0),i=0;i<16;i++)m=m<<1|1&a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a>>=1}0==--y&&(y=Math.pow(2,g),g++),delete l[h]}else for(a=u[h],i=0;i<g;i++)m=m<<1|1&a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a>>=1;0==--y&&(y=Math.pow(2,g),g++)}for(a=2,i=0;i<g;i++)m=m<<1|1&a,b==r-1?(b=0,_.push(o(m)),m=0):b++,a>>=1;for(;;){if(m<<=1,b==r-1){_.push(o(m));break}b++}return _.join("")},decompress:function(t){return null==t?"":""==t?null:a._decompress(t.length,32768,(function(r){return t.charCodeAt(r)}))},_decompress:function(r,o,i){var a,c,u,l,p,d,h,y=[],v=4,g=4,_=3,m="",b=[],w={val:i(0),position:o,index:1};for(a=0;a<3;a+=1)y[a]=a;for(u=0,p=Math.pow(2,2),d=1;d!=p;)l=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=i(w.index++)),u|=(l>0?1:0)*d,d<<=1;switch(u){case 0:for(u=0,p=Math.pow(2,8),d=1;d!=p;)l=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=i(w.index++)),u|=(l>0?1:0)*d,d<<=1;h=t(u);break;case 1:for(u=0,p=Math.pow(2,16),d=1;d!=p;)l=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=i(w.index++)),u|=(l>0?1:0)*d,d<<=1;h=t(u);break;case 2:return""}for(y[3]=h,c=h,b.push(h);;){if(w.index>r)return"";for(u=0,p=Math.pow(2,_),d=1;d!=p;)l=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=i(w.index++)),u|=(l>0?1:0)*d,d<<=1;switch(h=u){case 0:for(u=0,p=Math.pow(2,8),d=1;d!=p;)l=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=i(w.index++)),u|=(l>0?1:0)*d,d<<=1;y[g++]=t(u),h=g-1,v--;break;case 1:for(u=0,p=Math.pow(2,16),d=1;d!=p;)l=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=i(w.index++)),u|=(l>0?1:0)*d,d<<=1;y[g++]=t(u),h=g-1,v--;break;case 2:return b.join("")}if(0==v&&(v=Math.pow(2,_),_++),y[h])m=y[h];else{if(h!==g)return null;m=c+c.charAt(0)}b.push(m),y[g++]=c+m.charAt(0),c=m,0==--v&&(v=Math.pow(2,_),_++)}}};return a}();void 0===(i=function(){return a}.call(r,o,r,t))||(t.exports=i)},7824:t=>{var r=1e3,o=60*r,i=60*o,a=24*i,c=7*a,u=365.25*a;function plural(t,r,o,i){var a=r>=1.5*o;return Math.round(t/o)+" "+i+(a?"s":"")}t.exports=function(t,l){l=l||{};var p=typeof t;if("string"===p&&t.length>0)return function parse(t){if((t=String(t)).length>100)return;var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!l)return;var p=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return p*u;case"weeks":case"week":case"w":return p*c;case"days":case"day":case"d":return p*a;case"hours":case"hour":case"hrs":case"hr":case"h":return p*i;case"minutes":case"minute":case"mins":case"min":case"m":return p*o;case"seconds":case"second":case"secs":case"sec":case"s":return p*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}(t);if("number"===p&&isFinite(t))return l.long?function fmtLong(t){var c=Math.abs(t);if(c>=a)return plural(t,c,a,"day");if(c>=i)return plural(t,c,i,"hour");if(c>=o)return plural(t,c,o,"minute");if(c>=r)return plural(t,c,r,"second");return t+" ms"}(t):function fmtShort(t){var c=Math.abs(t);if(c>=a)return Math.round(t/a)+"d";if(c>=i)return Math.round(t/i)+"h";if(c>=o)return Math.round(t/o)+"m";if(c>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},4155:t=>{var r,o,i=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(r===setTimeout)return setTimeout(t,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(o){try{return r.call(null,t,0)}catch(o){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){r=defaultSetTimout}try{o="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){o=defaultClearTimeout}}();var a,c=[],u=!1,l=-1;function cleanUpNextTick(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&drainQueue())}function drainQueue(){if(!u){var t=runTimeout(cleanUpNextTick);u=!0;for(var r=c.length;r;){for(a=c,c=[];++l<r;)a&&a[l].run();l=-1,r=c.length}a=null,u=!1,function runClearTimeout(t){if(o===clearTimeout)return clearTimeout(t);if((o===defaultClearTimeout||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{return o(t)}catch(r){try{return o.call(null,t)}catch(r){return o.call(this,t)}}}(t)}}function Item(t,r){this.fun=t,this.array=r}function noop(){}i.nextTick=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)r[o-1]=arguments[o];c.push(new Item(t,r)),1!==c.length||u||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},8660:(t,r,o)=>{var i,a=o(4155);!function(t){!function(r){var i="object"==typeof o.g?o.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),c=makeExporter(t);function makeExporter(t,r){return function(o,i){"function"!=typeof t[o]&&Object.defineProperty(t,o,{configurable:!0,writable:!0,value:i}),r&&r(o,i)}}void 0===i.Reflect?i.Reflect=t:c=makeExporter(i.Reflect,c),function(t){var r=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,i=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",c=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",u="function"==typeof Object.create,l={__proto__:[]}instanceof Array,p=!u&&!l,d={create:u?function(){return MakeDictionary(Object.create(null))}:l?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:p?function(t,o){return r.call(t,o)}:function(t,r){return r in t},get:p?function(t,o){return r.call(t,o)?t[o]:void 0}:function(t,r){return t[r]}},h=Object.getPrototypeOf(Function),y="object"==typeof a&&a.env&&"true"===a.env.REFLECT_METADATA_USE_MAP_POLYFILL,v=y||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?CreateMapPolyfill():Map,g=y||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?CreateSetPolyfill():Set,_=new(y||"function"!=typeof WeakMap?CreateWeakMapPolyfill():WeakMap);function decorate(t,r,o,i){if(IsUndefined(o)){if(!IsArray(t))throw new TypeError;if(!IsConstructor(r))throw new TypeError;return DecorateConstructor(t,r)}if(!IsArray(t))throw new TypeError;if(!IsObject(r))throw new TypeError;if(!IsObject(i)&&!IsUndefined(i)&&!IsNull(i))throw new TypeError;return IsNull(i)&&(i=void 0),DecorateProperty(t,r,o=ToPropertyKey(o),i)}function metadata(t,r){function decorator(o,i){if(!IsObject(o))throw new TypeError;if(!IsUndefined(i)&&!IsPropertyKey(i))throw new TypeError;OrdinaryDefineOwnMetadata(t,r,o,i)}return decorator}function defineMetadata(t,r,o,i){if(!IsObject(o))throw new TypeError;return IsUndefined(i)||(i=ToPropertyKey(i)),OrdinaryDefineOwnMetadata(t,r,o,i)}function hasMetadata(t,r,o){if(!IsObject(r))throw new TypeError;return IsUndefined(o)||(o=ToPropertyKey(o)),OrdinaryHasMetadata(t,r,o)}function hasOwnMetadata(t,r,o){if(!IsObject(r))throw new TypeError;return IsUndefined(o)||(o=ToPropertyKey(o)),OrdinaryHasOwnMetadata(t,r,o)}function getMetadata(t,r,o){if(!IsObject(r))throw new TypeError;return IsUndefined(o)||(o=ToPropertyKey(o)),OrdinaryGetMetadata(t,r,o)}function getOwnMetadata(t,r,o){if(!IsObject(r))throw new TypeError;return IsUndefined(o)||(o=ToPropertyKey(o)),OrdinaryGetOwnMetadata(t,r,o)}function getMetadataKeys(t,r){if(!IsObject(t))throw new TypeError;return IsUndefined(r)||(r=ToPropertyKey(r)),OrdinaryMetadataKeys(t,r)}function getOwnMetadataKeys(t,r){if(!IsObject(t))throw new TypeError;return IsUndefined(r)||(r=ToPropertyKey(r)),OrdinaryOwnMetadataKeys(t,r)}function deleteMetadata(t,r,o){if(!IsObject(r))throw new TypeError;IsUndefined(o)||(o=ToPropertyKey(o));var i=GetOrCreateMetadataMap(r,o,!1);if(IsUndefined(i))return!1;if(!i.delete(t))return!1;if(i.size>0)return!0;var a=_.get(r);return a.delete(o),a.size>0||_.delete(r),!0}function DecorateConstructor(t,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(r);if(!IsUndefined(i)&&!IsNull(i)){if(!IsConstructor(i))throw new TypeError;r=i}}return r}function DecorateProperty(t,r,o,i){for(var a=t.length-1;a>=0;--a){var c=(0,t[a])(r,o,i);if(!IsUndefined(c)&&!IsNull(c)){if(!IsObject(c))throw new TypeError;i=c}}return i}function GetOrCreateMetadataMap(t,r,o){var i=_.get(t);if(IsUndefined(i)){if(!o)return;i=new v,_.set(t,i)}var a=i.get(r);if(IsUndefined(a)){if(!o)return;a=new v,i.set(r,a)}return a}function OrdinaryHasMetadata(t,r,o){if(OrdinaryHasOwnMetadata(t,r,o))return!0;var i=OrdinaryGetPrototypeOf(r);return!IsNull(i)&&OrdinaryHasMetadata(t,i,o)}function OrdinaryHasOwnMetadata(t,r,o){var i=GetOrCreateMetadataMap(r,o,!1);return!IsUndefined(i)&&ToBoolean(i.has(t))}function OrdinaryGetMetadata(t,r,o){if(OrdinaryHasOwnMetadata(t,r,o))return OrdinaryGetOwnMetadata(t,r,o);var i=OrdinaryGetPrototypeOf(r);return IsNull(i)?void 0:OrdinaryGetMetadata(t,i,o)}function OrdinaryGetOwnMetadata(t,r,o){var i=GetOrCreateMetadataMap(r,o,!1);if(!IsUndefined(i))return i.get(t)}function OrdinaryDefineOwnMetadata(t,r,o,i){GetOrCreateMetadataMap(o,i,!0).set(t,r)}function OrdinaryMetadataKeys(t,r){var o=OrdinaryOwnMetadataKeys(t,r),i=OrdinaryGetPrototypeOf(t);if(null===i)return o;var a=OrdinaryMetadataKeys(i,r);if(a.length<=0)return o;if(o.length<=0)return a;for(var c=new g,u=[],l=0,p=o;l<p.length;l++){var d=p[l];c.has(d)||(c.add(d),u.push(d))}for(var h=0,y=a;h<y.length;h++){d=y[h];c.has(d)||(c.add(d),u.push(d))}return u}function OrdinaryOwnMetadataKeys(t,r){var o=[],i=GetOrCreateMetadataMap(t,r,!1);if(IsUndefined(i))return o;for(var a=GetIterator(i.keys()),c=0;;){var u=IteratorStep(a);if(!u)return o.length=c,o;var l=IteratorValue(u);try{o[c]=l}catch(t){try{IteratorClose(a)}finally{throw t}}c++}}function Type(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function IsUndefined(t){return void 0===t}function IsNull(t){return null===t}function IsSymbol(t){return"symbol"==typeof t}function IsObject(t){return"object"==typeof t?null!==t:"function"==typeof t}function ToPrimitive(t,r){switch(Type(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var o=3===r?"string":5===r?"number":"default",a=GetMethod(t,i);if(void 0!==a){var c=a.call(t,o);if(IsObject(c))throw new TypeError;return c}return OrdinaryToPrimitive(t,"default"===o?"number":o)}function OrdinaryToPrimitive(t,r){if("string"===r){var o=t.toString;if(IsCallable(o))if(!IsObject(a=o.call(t)))return a;if(IsCallable(i=t.valueOf))if(!IsObject(a=i.call(t)))return a}else{var i;if(IsCallable(i=t.valueOf))if(!IsObject(a=i.call(t)))return a;var a,c=t.toString;if(IsCallable(c))if(!IsObject(a=c.call(t)))return a}throw new TypeError}function ToBoolean(t){return!!t}function ToString(t){return""+t}function ToPropertyKey(t){var r=ToPrimitive(t,3);return IsSymbol(r)?r:ToString(r)}function IsArray(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function IsCallable(t){return"function"==typeof t}function IsConstructor(t){return"function"==typeof t}function IsPropertyKey(t){switch(Type(t)){case 3:case 4:return!0;default:return!1}}function GetMethod(t,r){var o=t[r];if(null!=o){if(!IsCallable(o))throw new TypeError;return o}}function GetIterator(t){var r=GetMethod(t,c);if(!IsCallable(r))throw new TypeError;var o=r.call(t);if(!IsObject(o))throw new TypeError;return o}function IteratorValue(t){return t.value}function IteratorStep(t){var r=t.next();return!r.done&&r}function IteratorClose(t){var r=t.return;r&&r.call(t)}function OrdinaryGetPrototypeOf(t){var r=Object.getPrototypeOf(t);if("function"!=typeof t||t===h)return r;if(r!==h)return r;var o=t.prototype,i=o&&Object.getPrototypeOf(o);if(null==i||i===Object.prototype)return r;var a=i.constructor;return"function"!=typeof a||a===t?r:a}function CreateMapPolyfill(){var t={},r=[],o=function(){function MapIterator(t,r,o){this._index=0,this._keys=t,this._values=r,this._selector=o}return MapIterator.prototype["@@iterator"]=function(){return this},MapIterator.prototype[c]=function(){return this},MapIterator.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var o=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=r,this._values=r):this._index++,{value:o,done:!1}}return{value:void 0,done:!0}},MapIterator.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=r,this._values=r),t},MapIterator.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=r,this._values=r),{value:t,done:!0}},MapIterator}();return function(){function Map(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Map.prototype.has=function(t){return this._find(t,!1)>=0},Map.prototype.get=function(t){var r=this._find(t,!1);return r>=0?this._values[r]:void 0},Map.prototype.set=function(t,r){var o=this._find(t,!0);return this._values[o]=r,this},Map.prototype.delete=function(r){var o=this._find(r,!1);if(o>=0){for(var i=this._keys.length,a=o+1;a<i;a++)this._keys[a-1]=this._keys[a],this._values[a-1]=this._values[a];return this._keys.length--,this._values.length--,r===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},Map.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},Map.prototype.keys=function(){return new o(this._keys,this._values,getKey)},Map.prototype.values=function(){return new o(this._keys,this._values,getValue)},Map.prototype.entries=function(){return new o(this._keys,this._values,getEntry)},Map.prototype["@@iterator"]=function(){return this.entries()},Map.prototype[c]=function(){return this.entries()},Map.prototype._find=function(t,r){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&r&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},Map}();function getKey(t,r){return t}function getValue(t,r){return r}function getEntry(t,r){return[t,r]}}function CreateSetPolyfill(){return function(){function Set(){this._map=new v}return Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Set.prototype.has=function(t){return this._map.has(t)},Set.prototype.add=function(t){return this._map.set(t,t),this},Set.prototype.delete=function(t){return this._map.delete(t)},Set.prototype.clear=function(){this._map.clear()},Set.prototype.keys=function(){return this._map.keys()},Set.prototype.values=function(){return this._map.values()},Set.prototype.entries=function(){return this._map.entries()},Set.prototype["@@iterator"]=function(){return this.keys()},Set.prototype[c]=function(){return this.keys()},Set}()}function CreateWeakMapPolyfill(){var t=16,o=d.create(),i=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}return WeakMap.prototype.has=function(t){var r=GetOrCreateWeakMapTable(t,!1);return void 0!==r&&d.has(r,this._key)},WeakMap.prototype.get=function(t){var r=GetOrCreateWeakMapTable(t,!1);return void 0!==r?d.get(r,this._key):void 0},WeakMap.prototype.set=function(t,r){return GetOrCreateWeakMapTable(t,!0)[this._key]=r,this},WeakMap.prototype.delete=function(t){var r=GetOrCreateWeakMapTable(t,!1);return void 0!==r&&delete r[this._key]},WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()},WeakMap}();function CreateUniqueKey(){var t;do{t="@@WeakMap@@"+CreateUUID()}while(d.has(o,t));return o[t]=!0,t}function GetOrCreateWeakMapTable(t,o){if(!r.call(t,i)){if(!o)return;Object.defineProperty(t,i,{value:d.create()})}return t[i]}function FillRandomBytes(t,r){for(var o=0;o<r;++o)t[o]=255*Math.random()|0;return t}function GenRandomBytes(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):FillRandomBytes(new Uint8Array(t),t):FillRandomBytes(new Array(t),t)}function CreateUUID(){var r=GenRandomBytes(t);r[6]=79&r[6]|64,r[8]=191&r[8]|128;for(var o="",i=0;i<t;++i){var a=r[i];4!==i&&6!==i&&8!==i||(o+="-"),a<16&&(o+="0"),o+=a.toString(16).toLowerCase()}return o}}function MakeDictionary(t){return t.__=void 0,delete t.__,t}t("decorate",decorate),t("metadata",metadata),t("defineMetadata",defineMetadata),t("hasMetadata",hasMetadata),t("hasOwnMetadata",hasOwnMetadata),t("getMetadata",getMetadata),t("getOwnMetadata",getOwnMetadata),t("getMetadataKeys",getMetadataKeys),t("getOwnMetadataKeys",getOwnMetadataKeys),t("deleteMetadata",deleteMetadata)}(c)}()}(i||(i={}))},5666:t=>{var r=function(t){var r,o=Object.prototype,i=o.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,o){return Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function(t,r,o){return t[r]=o}}function wrap(t,r,o,i){var a=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(a.prototype),u=new Context(i||[]);return c._invoke=function makeInvokeMethod(t,r,o){var i=p;return function invoke(a,c){if(i===h)throw new Error("Generator is already running");if(i===y){if("throw"===a)throw c;return doneResult()}for(o.method=a,o.arg=c;;){var u=o.delegate;if(u){var l=maybeInvokeDelegate(u,o);if(l){if(l===v)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===p)throw i=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=h;var g=tryCatch(t,r,o);if("normal"===g.type){if(i=o.done?y:d,g.arg===v)continue;return{value:g.arg,done:o.done}}"throw"===g.type&&(i=y,o.method="throw",o.arg=g.arg)}}}(t,o,u),c}function tryCatch(t,r,o){try{return{type:"normal",arg:t.call(r,o)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var g={};define(g,c,(function(){return this}));var _=Object.getPrototypeOf,m=_&&_(_(values([])));m&&m!==o&&i.call(m,c)&&(g=m);var b=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(g);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(o,a,c,u){var l=tryCatch(t[o],t,a);if("throw"!==l.type){var p=l.arg,d=p.value;return d&&"object"==typeof d&&i.call(d,"__await")?r.resolve(d.__await).then((function(t){invoke("next",t,c,u)}),(function(t){invoke("throw",t,c,u)})):r.resolve(d).then((function(t){p.value=t,c(p)}),(function(t){return invoke("throw",t,c,u)}))}u(l.arg)}var o;this._invoke=function enqueue(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,o){invoke(t,i,r,o)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,o){var i=t.iterator[o.method];if(i===r){if(o.delegate=null,"throw"===o.method){if(t.iterator.return&&(o.method="return",o.arg=r,maybeInvokeDelegate(t,o),"throw"===o.method))return v;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=tryCatch(i,t.iterator,o.arg);if("throw"===a.type)return o.method="throw",o.arg=a.arg,o.delegate=null,v;var c=a.arg;return c?c.done?(o[t.resultName]=c.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=r),o.delegate=null,v):c:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,v)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var o=t[c];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=r,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(b,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,o,i,a,c){void 0===c&&(c=Promise);var u=new AsyncIterator(wrap(r,o,i,a),c);return t.isGeneratorFunction(o)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},defineIteratorMethods(b),define(b,l,"Generator"),define(b,c,(function(){return this})),define(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var o in t)r.push(o);return r.reverse(),function next(){for(;r.length;){var o=r.pop();if(o in t)return next.value=o,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!t)for(var o in this)"t"===o.charAt(0)&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function handle(i,a){return u.type="throw",u.arg=t,o.next=i,a&&(o.method="next",o.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],u=c.completion;if("root"===c.tryLoc)return handle("end");if(c.tryLoc<=this.prev){var l=i.call(c,"catchLoc"),p=i.call(c,"finallyLoc");if(l&&p){if(this.prev<c.catchLoc)return handle(c.catchLoc,!0);if(this.prev<c.finallyLoc)return handle(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return handle(c.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return handle(c.finallyLoc)}}}},abrupt:function(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=r&&r<=c.finallyLoc&&(c=null);var u=c?c.completion:{};return u.type=t,u.arg=r,c?(this.method="next",this.next=c.finallyLoc,v):this.complete(u)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc===t){var i=o.completion;if("throw"===i.type){var a=i.arg;resetTryEntry(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,o,i){return this.delegate={iterator:values(t),resultName:o,nextLoc:i},"next"===this.method&&(this.arg=r),v}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},8593:t=>{t.exports=JSON.parse('{"_from":"axios@^0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.4","name":"axios","escapedName":"axios","rawSpec":"^0.21.4","saveSpec":null,"fetchSpec":"^0.21.4"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.4","_where":"/home/radic/projects/streams/packages/streams/core","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')}},r={};function __nested_webpack_require_122241__(o){var i=r[o];if(void 0!==i)return i.exports;var a=r[o]={exports:{}};return t[o].call(a.exports,a,a.exports,__nested_webpack_require_122241__),a.exports}__nested_webpack_require_122241__.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return __nested_webpack_require_122241__.d(r,{a:r}),r},__nested_webpack_require_122241__.d=(t,r)=>{for(var o in r)__nested_webpack_require_122241__.o(r,o)&&!__nested_webpack_require_122241__.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},__nested_webpack_require_122241__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__nested_webpack_require_122241__.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r);var o={};(()=>{__nested_webpack_require_122241__.d(o,{Mx:()=>_,FE:()=>w,SL:()=>te,VR:()=>z,Up:()=>i,kS:()=>G,rF:()=>W,gN:()=>U,ip:()=>X,eV:()=>Q,e6:()=>k,Pv:()=>L,jg:()=>q,_j:()=>J,UT:()=>h,L9:()=>B,JJ:()=>M,GX:()=>D,F6:()=>Y,VE:()=>Z,LP:()=>ee,$T:()=>j,l2:()=>m,iC:()=>V,f3:()=>b,ER:()=>H,Gn:()=>K});__nested_webpack_require_122241__(8660);function __decorate(t,r,o,i){var a,c=arguments.length,u=c<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,r,o,i);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(u=(c<3?a(u):c>3?a(r,o,u):a(r,o))||u);return c>3&&u&&Object.defineProperty(r,o,u),u}function __awaiter(t,r,o,i){return new(o||(o=Promise))((function(a,c){function fulfilled(t){try{step(i.next(t))}catch(t){c(t)}}function rejected(t){try{step(i.throw(t))}catch(t){c(t)}}function step(t){t.done?a(t.value):function adopt(t){return t instanceof o?t:new o((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))}Object.create;Object.create;var t=__nested_webpack_require_122241__(6387),r=__nested_webpack_require_122241__(6700);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _get(t,r,o){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,o){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(o):a.value}},_get(t,r,o||t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}(0,r.GW)((0,r.b2)(),t.EventEmitter2);var i=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(Dispatcher,t);var r=_createSuper(Dispatcher);function Dispatcher(t){var o;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Dispatcher),(o=r.call(this,{wildcard:!0,delimiter:":"})).anyListeners=[],o}return function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),t}(Dispatcher,[{key:"emit",value:function emit(t){for(var r,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var c=(r=_get(_getPrototypeOf(Dispatcher.prototype),"emit",this)).call.apply(r,[this,t].concat(i));return this.anyListeners.forEach((function(r){return r.apply(void 0,[t].concat(i))})),c}},{key:"any",value:function any(t){this.anyListeners.push(t)}}]),Dispatcher}(t.EventEmitter2);i=__decorate([(0,r.b2)(),function __param(t,r){return function(o,i){r(o,i,t)}}(0,(0,r.NT)())],i);var a,c=__nested_webpack_require_122241__(7757),u=__nested_webpack_require_122241__.n(c),l=__nested_webpack_require_122241__(4879);function Repository_typeof(t){return Repository_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Repository_typeof(t)}function Repository_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Repository_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p,d=a=function(){function Repository(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Repository_classCallCheck(this,Repository),this.items=t,this.items=t}return function Repository_createClass(t,r,o){return r&&Repository_defineProperties(t.prototype,r),o&&Repository_defineProperties(t,o),t}(Repository,[{key:"get",value:function get(t,r){var o=getSetDescendantProp(this.items,t);return void 0===o&&(o=r),o}},{key:"set",value:function set(t,r){return"object"===Repository_typeof(t)?this.items=t:getSetDescendantProp(this.items,t,r),this}},{key:"has",value:function has(t){return void 0!==getSetDescendantProp(this.items,t)}}],[{key:"asProxy",value:function asProxy(t){return function makeProxy(t){return new Proxy(t,{get:function get(t,r,o){if(Reflect.has(t,r))return Reflect.get(t,r,o);if(r===p.IS_PROXY)return!0;if(r===p.UNPROXY)return function(){return t};var i=r.toString();return t.has(i)?t.get(i):void 0},set:function set(t,r,o,i){if([p.IS_PROXY,p.UNPROXY].includes(r.toString()))throw Error("Cannot set property: "+r.toString());return Reflect.has(t,r)?Reflect.set(t,r,o,i):(t.set(r.toString(),o),!0)},has:function has(t,r){return!!Reflect.has(t,r)||t.has(r.toString())}})}(new a(t))}}]),Repository}();function getSetDescendantProp(t,r,o){for(var i=r?r.split("."):[];i.length&&t;){var a=i.shift(),c=new RegExp("(.+)\\[([0-9]*)\\]").exec(a);if(null===c||3!=c.length)void 0!==o&&(void 0===t[a]&&(t[a]={}),0===i.length&&(t[a]=o)),t=t[a];else{var u={arrName:c[1],arrIndex:c[2]};void 0!==t[u.arrName]?(void 0!==o&&0===i.length&&(t[u.arrName][u.arrIndex]=o),t=t[u.arrName][u.arrIndex]):t=void 0}}return t}d=a=__decorate([(0,r.b2)()],d),function(t){t.IS_PROXY="__s_isProxy",t.UNPROXY="__s_unproxy"}(p||(p={}));var h=function ServiceProvider(t){!function ServiceProvider_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ServiceProvider),this.app=t},y=function isServiceProviderClass(t){return!(t instanceof h)},v={streams:{},http:{baseURL:"/api",etag:{enabled:!0,manifestKey:"streams"},headers:{"X-Requested-With":"XMLHttpRequest"}}};function Application_typeof(t){return Application_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Application_typeof(t)}function _createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,l=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return u=t.done,t},e:function e(t){l=!0,c=t},f:function f(){try{u||null==o.return||o.return()}finally{if(l)throw c}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function Application_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Application_setPrototypeOf(t,r){return Application_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},Application_setPrototypeOf(t,r)}function Application_createSuper(t){var r=function Application_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=Application_getPrototypeOf(t);if(r){var a=Application_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return Application_possibleConstructorReturn(this,o)}}function Application_possibleConstructorReturn(t,r){if(r&&("object"===Application_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function Application_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Application_getPrototypeOf(t){return Application_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Application_getPrototypeOf(t)}var g=function makeLog(t){return __nested_webpack_require_122241__(1227)(t)}("Application"),_=function(t){!function Application_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Application_setPrototypeOf(t,r)}(Application,t);var o=Application_createSuper(Application);function Application(){var t;return function Application_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Application),(t=o.call(this,{defaultScope:"Transient",autoBindInjectable:!0,skipBaseClassChecks:!0})).providers=[],t.loaded={},t.booted=!1,t.started=!1,t.singleton("events",i).addBindingGetter("events"),t.events.any((function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return g(t," arguments: ",o)})),t}return function Application_createClass(t,r,o){return r&&Application_defineProperties(t.prototype,r),o&&Application_defineProperties(t,o),t}(Application,[{key:"isBooted",value:function isBooted(){return this.booted}},{key:"isStarted",value:function isStarted(){return this.started}},{key:"initialize",value:function initialize(){var t,r,o,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee(){return u().wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return a=Object.assign(Object.assign({providers:[]},a),{config:Object.assign(Object.assign(Object.assign({},v),a.config),{http:Object.assign(Object.assign(Object.assign({},v.http),(null===(t=a.config)||void 0===t?void 0:t.http)||{}),{etag:Object.assign(Object.assign({},v.http.etag),(null===(o=null===(r=a.config)||void 0===r?void 0:r.http)||void 0===o?void 0:o.etag)||{})}),streams:Object.assign(Object.assign({},v.streams),(null===(i=a.config)||void 0===i?void 0:i.streams)||{})})}),this.events.emit("Application:initialize",a),this.instance("config",d.asProxy(a.config)).addBindingGetter("config"),c.next=5,this.loadProviders(a.providers);case 5:return c.next=7,this.registerProviders(this.providers);case 7:return this.events.emit("Application:initialized",this),c.abrupt("return",this);case 9:case"end":return c.stop()}}),_callee,this)})))}},{key:"boot",value:function boot(){return __awaiter(this,void 0,void 0,u().mark((function _callee2(){var t,o,i,a=this;return u().wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if(!this.booted){c.next=2;break}return c.abrupt("return",this);case 2:this.events.emit("Application:boot",this),t=_createForOfIteratorHelper(this.providers),c.prev=4,i=u().mark((function _loop(){var t;return u().wrap((function _loop$(i){for(;;)switch(i.prev=i.next){case 0:if(t=o.value,a.events.emit("Application:bootProvider",t),!("boot"in t)||!0===Reflect.getMetadata("boot",t)){i.next=6;break}return Reflect.defineMetadata("boot",!0,t),i.next=6,a.loadAsync(new r.Ls((function(){return t.boot()})));case 6:a.events.emit("Application:bootedProvider",t);case 7:case"end":return i.stop()}}),_loop)})),t.s();case 7:if((o=t.n()).done){c.next=11;break}return c.delegateYield(i(),"t0",9);case 9:c.next=7;break;case 11:c.next=16;break;case 13:c.prev=13,c.t1=c.catch(4),t.e(c.t1);case 16:return c.prev=16,t.f(),c.finish(16);case 19:return this.booted=!0,this.events.emit("Application:booted",this),c.abrupt("return",this);case 22:case"end":return c.stop()}}),_callee2,this,[[4,13,16,19]])})))}},{key:"start",value:function start(){return __awaiter(this,void 0,void 0,u().mark((function _callee3(){return u().wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return this.events.emit("Application:start",this),this.events.emit("Application:started",this),t.abrupt("return",this);case 3:case"end":return t.stop()}}),_callee3,this)})))}},{key:"loadProviders",value:function loadProviders(t){return __awaiter(this,void 0,void 0,u().mark((function _callee5(){var r=this;return u().wrap((function _callee5$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.all(t.map((function(t){return __awaiter(r,void 0,void 0,u().mark((function _callee4(){return u().wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.loadProvider(t));case 1:case"end":return r.stop()}}),_callee4,this)})))})));case 2:return o.abrupt("return",this);case 3:case"end":return o.stop()}}),_callee5,this)})))}},{key:"loadProvider",value:function loadProvider(t){var r;return __awaiter(this,void 0,void 0,u().mark((function _callee6(){var o,i;return u().wrap((function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:if(!((o=null!==(r=t.name)&&void 0!==r?r:t.constructor.name)in this.loaded)){a.next=3;break}return a.abrupt("return",this.loaded[o]);case 3:if(!("providers"in(i=new t(this)))||!0===Reflect.getMetadata("providers",i)){a.next=8;break}return Reflect.defineMetadata("providers",!0,i),a.next=8,this.loadProviders(i.providers);case 8:return this.events.emit("Application:loadProvider",t),this.loaded[o]=i,this.providers.push(i),this.events.emit("Application:loadedProvider",i),a.abrupt("return",i);case 13:case"end":return a.stop()}}),_callee6,this)})))}},{key:"registerProviders",value:function registerProviders(t){return __awaiter(this,void 0,void 0,u().mark((function _callee8(){var r=this;return u().wrap((function _callee8$(o){for(;;)switch(o.prev=o.next){case 0:return this.events.emit("Application:registerProviders",t),o.next=3,Promise.all(t.map((function(t){return __awaiter(r,void 0,void 0,u().mark((function _callee7(){return u().wrap((function _callee7$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.register(t));case 1:case"end":return r.stop()}}),_callee7,this)})))})));case 3:return this.events.emit("Application:registeredProviders",t),o.abrupt("return",this);case 5:case"end":return o.stop()}}),_callee8,this)})))}},{key:"register",value:function register(t){return __awaiter(this,void 0,void 0,u().mark((function _callee9(){var o;return u().wrap((function _callee9$(i){for(;;)switch(i.prev=i.next){case 0:if(!y(t)){i.next=6;break}return i.next=3,this.loadProvider(t);case 3:o=i.sent,i.next=7;break;case 6:o=t;case 7:if(this.events.emit("Application:registerProvider",t),!("register"in o)||!0===Reflect.getMetadata("register",o)){i.next=12;break}return Reflect.defineMetadata("register",!0,o),i.next=12,this.loadAsync(new r.Ls((function(){return o.register()})));case 12:return this.events.emit("Application:registeredProviders",o),i.abrupt("return",this);case 14:case"end":return i.stop()}}),_callee9,this)})))}},{key:"singleton",value:function singleton(t,r){return this.bind(t).to(r).inSingletonScope(),this}},{key:"binding",value:function binding(t,r){var o=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],binding=this.bind(t).toDynamicValue((function(t){return r(o)}));return i?binding.inSingletonScope():binding.inTransientScope(),this}},{key:"instance",value:function instance(t,r){return this.bind(t).toConstantValue(r),this}},{key:"addBindingGetter",value:function addBindingGetter(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r=r||t;var o=this;return Object.defineProperty(o,r,{get:function get(){return o.get(t)},configurable:!0,enumerable:!0}),this}}],[{key:"instance",get:function get(){return this._instance||(this._instance=new this),this._instance}},{key:"getInstance",value:function getInstance(){return this.instance}}]),Application}(r.W2),m=_.instance,b=(0,l.Z)(m).lazyInject;function Collection_typeof(t){return Collection_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Collection_typeof(t)}function Collection_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Collection_possibleConstructorReturn(t,r){if(r&&("object"===Collection_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return Collection_assertThisInitialized(t)}function Collection_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,Collection_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),Collection_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _construct(t,r,o){return _construct=Collection_isNativeReflectConstruct()?Reflect.construct:function _construct(t,r,o){var i=[null];i.push.apply(i,r);var a=new(Function.bind.apply(t,i));return o&&Collection_setPrototypeOf(a,o.prototype),a},_construct.apply(null,arguments)}function Collection_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Collection_setPrototypeOf(t,r){return Collection_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},Collection_setPrototypeOf(t,r)}function Collection_getPrototypeOf(t){return Collection_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Collection_getPrototypeOf(t)}var w=function(t){!function Collection_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Collection_setPrototypeOf(t,r)}(Collection,t);var r=function Collection_createSuper(t){var r=Collection_isNativeReflectConstruct();return function _createSuperInternal(){var o,i=Collection_getPrototypeOf(t);if(r){var a=Collection_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return Collection_possibleConstructorReturn(this,o)}}(Collection);function Collection(){var t;Collection_classCallCheck(this,Collection);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r.call.apply(r,[this].concat(i)),Object.setPrototypeOf(Collection_assertThisInitialized(t),Array.prototype),t}return Collection}(_wrapNativeSuper(Array)),S=__nested_webpack_require_122241__(9669),C=__nested_webpack_require_122241__.n(S);function ETagCache_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var O=function(){function ETagCache(){!function ETagCache_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ETagCache)}return function ETagCache_createClass(t,r,o){return r&&ETagCache_defineProperties(t.prototype,r),o&&ETagCache_defineProperties(t,o),t}(ETagCache,[{key:"manifestKey",get:function get(){return this.config.http.etag.manifestKey}},{key:"get",value:function get(t){return this.storage.get(t)}},{key:"set",value:function set(t,r,o){return this.addToUuidManifest(t),this.storage.set(t,{etag:r,value:o})}},{key:"reset",value:function reset(){var t=this;this.getUuidManifest().forEach((function(r){return t.storage.unset(r)}))}},{key:"getUuidManifest",value:function getUuidManifest(){return this.storage.has(this.manifestKey)||this.storage.set(this.manifestKey,[]),this.storage.get(this.manifestKey,[])}},{key:"addToUuidManifest",value:function addToUuidManifest(t){var r=this.getUuidManifest();r.push(t),this.storage.set(this.manifestKey,r)}}]),ETagCache}();function ETag_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}__decorate([b("storage")],O.prototype,"storage",void 0),__decorate([b("config")],O.prototype,"config",void 0),O=__decorate([(0,r.b2)()],O);var T=function byLowerCase(t){return function(r){return E(r)===t}},E=function toLowerCase(t){return t.toLowerCase()},P=function getKeys(t){return Object.keys(t)},A=function isCacheableMethod(t){return~["GET","HEAD"].indexOf(t.method.toUpperCase())},x=function getBase64UrlFromConfig(t){return btoa(t.url)},I=function(){function ETag(t){var r=this;!function ETag_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ETag),this.axios=t,this.request=null,this.response=null,this.enabled=!1,Object.defineProperty(t,"etag",{get:function get(){return r},configurable:!0,enumerable:!0})}return function ETag_createClass(t,r,o){return r&&ETag_defineProperties(t.prototype,r),o&&ETag_defineProperties(t,o),t}(ETag,[{key:"enableEtag",value:function enableEtag(){this.enabled||(this.request=this.axios.interceptors.request.use(this.getRequestInterceptor()),this.response=this.axios.interceptors.response.use(this.getResponseInterceptor(),this.getResponseErrorInterceptor()),this.enabled=!0)}},{key:"disableEtag",value:function disableEtag(){this.enabled&&(this.axios.interceptors.request.eject(this.request),this.axios.interceptors.response.eject(this.response),this.enabled=!1)}},{key:"isEnabled",value:function isEnabled(){return this.enabled}},{key:"getCacheByAxiosConfig",value:function getCacheByAxiosConfig(t){return this.cache.get(x(t))}},{key:"getRequestInterceptor",value:function getRequestInterceptor(){var t=this;return function(r){if(A(r)){var o=x(r),i=t.cache.get(o);i&&(r.headers=Object.assign(Object.assign({},r.headers),{"If-None-Match":i.etag}))}return r}}},{key:"getResponseInterceptor",value:function getResponseInterceptor(){var t=this;return function(r){if(A(r.config)){var o=function getHeaderCaseInsensitive(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r[P(r).find(T(t))]}("etag",r.headers);o&&t.cache.set(x(r.config),o,r.data)}return r}}},{key:"getResponseErrorInterceptor",value:function getResponseErrorInterceptor(){var t=this;return function(r){if(r.response&&304===r.response.status){var o=t.getCacheByAxiosConfig(r.response.config);if(!o)return Promise.reject(r);var i=r.response;return i.status=200,i.data=o.value,Promise.resolve(i)}return Promise.reject(r)}}}]),ETag}();function HttpServiceProvider_typeof(t){return HttpServiceProvider_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HttpServiceProvider_typeof(t)}function HttpServiceProvider_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function HttpServiceProvider_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function HttpServiceProvider_setPrototypeOf(t,r){return HttpServiceProvider_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},HttpServiceProvider_setPrototypeOf(t,r)}function HttpServiceProvider_createSuper(t){var r=function HttpServiceProvider_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=HttpServiceProvider_getPrototypeOf(t);if(r){var a=HttpServiceProvider_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return HttpServiceProvider_possibleConstructorReturn(this,o)}}function HttpServiceProvider_possibleConstructorReturn(t,r){if(r&&("object"===HttpServiceProvider_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function HttpServiceProvider_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function HttpServiceProvider_getPrototypeOf(t){return HttpServiceProvider_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},HttpServiceProvider_getPrototypeOf(t)}__decorate([b("http.etag.cache")],I.prototype,"cache",void 0),I=__decorate([(0,r.b2)()],I);var k=function(t){!function HttpServiceProvider_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&HttpServiceProvider_setPrototypeOf(t,r)}(HttpServiceProvider,t);var r=HttpServiceProvider_createSuper(HttpServiceProvider);function HttpServiceProvider(){return HttpServiceProvider_classCallCheck(this,HttpServiceProvider),r.apply(this,arguments)}return function HttpServiceProvider_createClass(t,r,o){return r&&HttpServiceProvider_defineProperties(t.prototype,r),o&&HttpServiceProvider_defineProperties(t,o),t}(HttpServiceProvider,[{key:"register",value:function register(){this.registerAxios()}},{key:"boot",value:function boot(){this.bootETag()}},{key:"registerAxios",value:function registerAxios(){var t,r,o,i=Object.assign(Object.assign({},this.app.config.http),{params:Object.assign({},(null===(t=this.app.config.http)||void 0===t?void 0:t.params)||{}),headers:Object.assign({"X-Requested-With":"XMLHttpRequest"},(null===(r=this.app.config.http)||void 0===r?void 0:r.headers)||{})}),a=this.app.config.streams;if(null===(o=null==a?void 0:a.cache)||void 0===o||o.enabled,(null==a?void 0:a.xdebug)&&(i.headers.Cookie="XDEBUG_SESSION=start",i.params.XDEBUG_SESSION="PHPSTORM"),null==a?void 0:a.authentication){var c=a.authentication,u=c.type,l=c.basic,p=c.token;"basic"===u?i.auth={username:l.username,password:l.password}:"token"===u&&(i.headers.Authorization="Bearer "+p)}var d=C().create(i);this.app.instance("axios",C()),this.app.instance("http",d).addBindingGetter("http")}},{key:"bootETag",value:function bootETag(){if(this.app.config.http.etag.enabled){var t=this.app.http;this.app.singleton("http.etag.cache",O),this.app.instance("http.etag",new I(t)),t.etag.enableEtag()}}}]),HttpServiceProvider}(h),N=__nested_webpack_require_122241__(6961),R=__nested_webpack_require_122241__.n(N);function Transformer_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var j=function(){function Transformer(){!function Transformer_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Transformer)}return function Transformer_createClass(t,r,o){return r&&Transformer_defineProperties(t.prototype,r),o&&Transformer_defineProperties(t,o),t}(Transformer,null,[{key:"prefixesLength",get:function get(){return this.typePrefix.length+5}},{key:"compress",value:function compress(t){return this.typePrefix+"lz-s|"+R().compressToUTF16(t)}},{key:"decompress",value:function decompress(t){var r,o;return t.length<this.prefixesLength||(r=t.substr(0,this.prefixesLength-1),o=t.substring(this.prefixesLength),r===this.typePrefix+"lz-s"&&(t=R().decompressFromUTF16(o))),t}},{key:"encode",value:function encode(t){return"[object Date]"===Object.prototype.toString.call(t)?this.typePrefix+"date|"+t.getTime().toString():"[object RegExp]"===Object.prototype.toString.call(t)?this.typePrefix+"expr|"+t.source:"number"==typeof t?this.typePrefix+"numb|"+t:"boolean"==typeof t?this.typePrefix+"bool|"+(t?"1":"0"):"string"==typeof t?this.typePrefix+"strn|"+t:t===Object(t)?this.typePrefix+"objt|"+JSON.stringify(t):t}},{key:"decode",value:function decode(t){var r,o;if(t.length<this.prefixesLength)return t;switch(r=t.substr(0,this.prefixesLength-1),o=t.substring(this.prefixesLength),r){case this.typePrefix+"date":return new Date(parseInt(o));case this.typePrefix+"expr":return new RegExp(o);case this.typePrefix+"numb":return Number(o);case this.typePrefix+"bool":return Boolean("1"===o);case this.typePrefix+"strn":return""+o;case this.typePrefix+"objt":return JSON.parse(o);default:return t}}}]),Transformer}();function StorageAdapter_typeof(t){return StorageAdapter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},StorageAdapter_typeof(t)}function StorageAdapter_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function StorageAdapter_setPrototypeOf(t,r){return StorageAdapter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},StorageAdapter_setPrototypeOf(t,r)}function StorageAdapter_createSuper(t){var r=function StorageAdapter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=StorageAdapter_getPrototypeOf(t);if(r){var a=StorageAdapter_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return StorageAdapter_possibleConstructorReturn(this,o)}}function StorageAdapter_possibleConstructorReturn(t,r){if(r&&("object"===StorageAdapter_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function StorageAdapter_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function StorageAdapter_getPrototypeOf(t){return StorageAdapter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},StorageAdapter_getPrototypeOf(t)}j.typePrefix="__ls_";var M=function(t){!function StorageAdapter_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&StorageAdapter_setPrototypeOf(t,r)}(StorageAdapter,t);var r=StorageAdapter_createSuper(StorageAdapter);function StorageAdapter(t){var o;return function StorageAdapter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,StorageAdapter),(o=r.call(this,{delimiter:":",wildcard:!0})).storage=t,o}return function StorageAdapter_createClass(t,r,o){return r&&StorageAdapter_defineProperties(t.prototype,r),o&&StorageAdapter_defineProperties(t,o),t}(StorageAdapter,[{key:"get",value:function get(t,r){if(!this.has(t))return r;var o=this.storage.getItem(t);return o=j.decompress(o),j.decode(o)}},{key:"has",value:function has(t){return!!this.storage.getItem(t)}},{key:"set",value:function set(t,r){var o=j.encode(r);return o=j.compress(o),this.storage.setItem(t,o),this.emit("set:"+t,r,t),this}},{key:"unset",value:function unset(t){return this.storage.removeItem(t),this.emit("unset:"+t),this}},{key:"clear",value:function clear(){return this.storage.clear(),this.emit("clear"),this}}]),StorageAdapter}(t.EventEmitter2);function LocalStorageAdapter_typeof(t){return LocalStorageAdapter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LocalStorageAdapter_typeof(t)}function LocalStorageAdapter_setPrototypeOf(t,r){return LocalStorageAdapter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},LocalStorageAdapter_setPrototypeOf(t,r)}function LocalStorageAdapter_createSuper(t){var r=function LocalStorageAdapter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=LocalStorageAdapter_getPrototypeOf(t);if(r){var a=LocalStorageAdapter_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return LocalStorageAdapter_possibleConstructorReturn(this,o)}}function LocalStorageAdapter_possibleConstructorReturn(t,r){if(r&&("object"===LocalStorageAdapter_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function LocalStorageAdapter_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function LocalStorageAdapter_getPrototypeOf(t){return LocalStorageAdapter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},LocalStorageAdapter_getPrototypeOf(t)}var L=function(t){!function LocalStorageAdapter_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&LocalStorageAdapter_setPrototypeOf(t,r)}(LocalStorageAdapter,t);var r=LocalStorageAdapter_createSuper(LocalStorageAdapter);function LocalStorageAdapter(){return function LocalStorageAdapter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,LocalStorageAdapter),r.call(this,window.localStorage)}return LocalStorageAdapter}(M=__decorate([(0,r.b2)()],M));function SessionStorageAdapter_typeof(t){return SessionStorageAdapter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SessionStorageAdapter_typeof(t)}function SessionStorageAdapter_setPrototypeOf(t,r){return SessionStorageAdapter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},SessionStorageAdapter_setPrototypeOf(t,r)}function SessionStorageAdapter_createSuper(t){var r=function SessionStorageAdapter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=SessionStorageAdapter_getPrototypeOf(t);if(r){var a=SessionStorageAdapter_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return SessionStorageAdapter_possibleConstructorReturn(this,o)}}function SessionStorageAdapter_possibleConstructorReturn(t,r){if(r&&("object"===SessionStorageAdapter_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function SessionStorageAdapter_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function SessionStorageAdapter_getPrototypeOf(t){return SessionStorageAdapter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},SessionStorageAdapter_getPrototypeOf(t)}var B=function(t){!function SessionStorageAdapter_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&SessionStorageAdapter_setPrototypeOf(t,r)}(SessionStorageAdapter,t);var r=SessionStorageAdapter_createSuper(SessionStorageAdapter);function SessionStorageAdapter(){return function SessionStorageAdapter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SessionStorageAdapter),r.call(this,window.sessionStorage)}return SessionStorageAdapter}(M);function StorageServiceProvider_typeof(t){return StorageServiceProvider_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},StorageServiceProvider_typeof(t)}function StorageServiceProvider_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function StorageServiceProvider_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function StorageServiceProvider_setPrototypeOf(t,r){return StorageServiceProvider_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},StorageServiceProvider_setPrototypeOf(t,r)}function StorageServiceProvider_createSuper(t){var r=function StorageServiceProvider_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=StorageServiceProvider_getPrototypeOf(t);if(r){var a=StorageServiceProvider_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return StorageServiceProvider_possibleConstructorReturn(this,o)}}function StorageServiceProvider_possibleConstructorReturn(t,r){if(r&&("object"===StorageServiceProvider_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function StorageServiceProvider_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function StorageServiceProvider_getPrototypeOf(t){return StorageServiceProvider_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},StorageServiceProvider_getPrototypeOf(t)}var D=function(t){!function StorageServiceProvider_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&StorageServiceProvider_setPrototypeOf(t,r)}(StorageServiceProvider,t);var r=StorageServiceProvider_createSuper(StorageServiceProvider);function StorageServiceProvider(){return StorageServiceProvider_classCallCheck(this,StorageServiceProvider),r.apply(this,arguments)}return function StorageServiceProvider_createClass(t,r,o){return r&&StorageServiceProvider_defineProperties(t.prototype,r),o&&StorageServiceProvider_defineProperties(t,o),t}(StorageServiceProvider,[{key:"register",value:function register(){this.app.singleton("storage.local",L),this.app.singleton("storage.session",B),this.app.bind("storage").toDynamicValue((function(t){return t.container.get("storage.local")})),this.app.addBindingGetter("storage")}}]),StorageServiceProvider}(h);var U=function Field(t){!function Field_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Field),Object.assign(this,t)};function Entry_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Entry_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var G=function(){function Entry(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Entry_classCallCheck(this,Entry),this._stream=t,this._data=r,this._fresh=o;var i=new Proxy(this,{get:function get(t,r,o){return Reflect.has(t,r)?Reflect.get(t,r,o):Reflect.has(t._data,r)?Reflect.get(t._data,r):void 0},set:function set(t,r,o,i){return Reflect.has(t,r)?Reflect.set(t,r,o,i):Reflect.set(t._data,r,o)}});return i}return function Entry_createClass(t,r,o){return r&&Entry_defineProperties(t.prototype,r),o&&Entry_defineProperties(t,o),t}(Entry,[{key:"stream",get:function get(){return this._stream}},{key:"save",value:function save(){return __awaiter(this,void 0,void 0,u().mark((function _callee(){return u().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this._fresh){t.next=5;break}return t.next=4,this.http.postEntry(this._stream.id,this._data);case 4:case 7:return t.abrupt("return",!0);case 5:return t.next=7,this.http.patchEntry(this._stream.id,this._data.id,this._data);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),_callee,this,[[0,10]])})))}},{key:"validator",value:function validator(){}}]),Entry}();function EntryCollection_typeof(t){return EntryCollection_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EntryCollection_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return EntryCollection_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function EntryCollection_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return EntryCollection_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return EntryCollection_arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EntryCollection_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function EntryCollection_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function EntryCollection_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function EntryCollection_createClass(t,r,o){return r&&EntryCollection_defineProperties(t.prototype,r),o&&EntryCollection_defineProperties(t,o),t}function EntryCollection_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&EntryCollection_setPrototypeOf(t,r)}function EntryCollection_setPrototypeOf(t,r){return EntryCollection_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},EntryCollection_setPrototypeOf(t,r)}function EntryCollection_createSuper(t){var r=function EntryCollection_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=EntryCollection_getPrototypeOf(t);if(r){var a=EntryCollection_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return EntryCollection_possibleConstructorReturn(this,o)}}function EntryCollection_possibleConstructorReturn(t,r){if(r&&("object"===EntryCollection_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function EntryCollection_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function EntryCollection_getPrototypeOf(t){return EntryCollection_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},EntryCollection_getPrototypeOf(t)}__decorate([b("streams.http")],G.prototype,"http",void 0);var W=function(t){EntryCollection_inherits(EntryCollection,t);var r=EntryCollection_createSuper(EntryCollection);function EntryCollection(t,o,i){var a;return EntryCollection_classCallCheck(this,EntryCollection),(a=r.call.apply(r,[this].concat(_toConsumableArray(t)))).meta=o,a.links=i,a}return EntryCollection_createClass(EntryCollection,null,[{key:"fromResponse",value:function fromResponse(t,r){return new EntryCollection(Object.values(t.data).map((function(t){return new G(r,t,!1)})),t.meta,t.links)}}]),EntryCollection}(w),q=function(t){EntryCollection_inherits(PaginatedEntryCollection,t);var r=EntryCollection_createSuper(PaginatedEntryCollection);function PaginatedEntryCollection(t,o,i){var a;return EntryCollection_classCallCheck(this,PaginatedEntryCollection),(a=r.call.apply(r,[this].concat(_toConsumableArray(t)))).meta=o,a.links=i,a}return EntryCollection_createClass(PaginatedEntryCollection,null,[{key:"fromResponse",value:function fromResponse(t,r){return new PaginatedEntryCollection(Object.values(t.data).map((function(t){return new G(r,t,!1)})),t.meta,t.links)}}]),PaginatedEntryCollection}(w);function Criteria_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var V=[">","<","==","!=",">=","<=","!<","!>","<>"],H=["BETWEEN","EXISTS","OR","AND","NOT","IN","ALL","ANY","LIKE","IS NULL","UNIQUE"],K=[].concat(V).concat(H),$=function isOperator(t){return K.includes(t)},z=function(){function Criteria(t){!function Criteria_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Criteria),this.stream=t,this.parameters=[]}return function Criteria_createClass(t,r,o){return r&&Criteria_defineProperties(t.prototype,r),o&&Criteria_defineProperties(t,o),t}(Criteria,[{key:"find",value:function find(t){return __awaiter(this,void 0,void 0,u().mark((function _callee(){return u().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.where("id",t).first());case 1:case"end":return r.stop()}}),_callee,this)})))}},{key:"first",value:function first(){return __awaiter(this,void 0,void 0,u().mark((function _callee2(){var t;return u().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.limit(1).get();case 2:return t=r.sent,r.abrupt("return",t[0]);case 4:case"end":return r.stop()}}),_callee2,this)})))}},{key:"cache",value:function cache(){return this}},{key:"orderBy",value:function orderBy(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc";return this.addParameter("orderBy",[t,r]),this}},{key:"limit",value:function limit(t){return this.addParameter("limit",t),this}},{key:"where",value:function where(){var t,r,o,i;if(2===arguments.length?(t=arguments.length<=0?void 0:arguments[0],r="==",o=arguments.length<=1?void 0:arguments[1]):3===arguments.length?(t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]):4===arguments.length&&(t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2],i=arguments.length<=3?void 0:arguments[3]),!$(r))throw new Error('Criteria where() operator "'.concat(r,'" not valid '));return this.addParameter("where",[t,r,o,i]),this}},{key:"orWhere",value:function orWhere(){var t,r,o;if(2===arguments.length?(t=arguments.length<=0?void 0:arguments[0],r="==",o=arguments.length<=1?void 0:arguments[1]):(t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]),!$(r))throw new Error('Criteria orWhere() operator "'.concat(r,'" not valid '));return this.addParameter("where",[t,r,o,"or"]),this}},{key:"get",value:function get(){return __awaiter(this,void 0,void 0,u().mark((function _callee3(){var t,r;return u().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:return t=this.compileStatements(),o.next=3,this.http.getEntries(this.stream.id,{query:t},{});case 3:return r=o.sent,o.abrupt("return",W.fromResponse(r,this.stream));case 5:case"end":return o.stop()}}),_callee3,this)})))}},{key:"create",value:function create(t){return __awaiter(this,void 0,void 0,u().mark((function _callee4(){var r;return u().wrap((function _callee4$(o){for(;;)switch(o.prev=o.next){case 0:return r=this.newInstance(t),o.next=3,r.save();case 3:return o.abrupt("return",r);case 4:case"end":return o.stop()}}),_callee4,this)})))}},{key:"save",value:function save(t){return __awaiter(this,void 0,void 0,u().mark((function _callee5(){var r;return u().wrap((function _callee5$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.save();case 2:return r=o.sent,o.abrupt("return",r);case 4:case"end":return o.stop()}}),_callee5)})))}},{key:"delete",value:function _delete(){return this}},{key:"paginate",value:function paginate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return __awaiter(this,void 0,void 0,u().mark((function _callee6(){var o,i;return u().wrap((function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:return o=this.compileStatements(),a.next=3,this.http.getEntries(this.stream.id,{query:o},{paginate:!0,per_page:t,page:r});case 3:return i=a.sent,a.abrupt("return",q.fromResponse(i,this.stream));case 5:case"end":return a.stop()}}),_callee6,this)})))}},{key:"newInstance",value:function newInstance(t){return new G(this.stream,t,!0)}},{key:"getParameters",value:function getParameters(){return this.parameters}},{key:"setParameters",value:function setParameters(t){return this.parameters=t,this}},{key:"addParameter",value:function addParameter(t,r){return this.parameters.push({name:t,value:r}),this}},{key:"compileStatements",value:function compileStatements(){return this.parameters.map((function(t){return function _defineProperty(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}({},t.name,function ensureArray(t){return Array.isArray(t)?t:[t]}(t.value))}))}}]),Criteria}();function Streams_Repository_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}__decorate([b("streams.http")],z.prototype,"http",void 0),z=__decorate([(0,r.b2)()],z);var J=function(){function Repository(t){!function Streams_Repository_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Repository),this.stream=t}return function Streams_Repository_createClass(t,r,o){return r&&Streams_Repository_defineProperties(t.prototype,r),o&&Streams_Repository_defineProperties(t,o),t}(Repository,[{key:"all",value:function all(){return __awaiter(this,void 0,void 0,u().mark((function _callee(){var t,r,o=this;return u().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.http.getEntries(this.stream.id);case 2:return t=i.sent,r=t.data.map((function(t){return new G(o.stream,t,!1)})),i.abrupt("return",new W(r,t.meta,t.links));case 5:case"end":return i.stop()}}),_callee,this)})))}},{key:"find",value:function find(t){return __awaiter(this,void 0,void 0,u().mark((function _callee2(){var r;return u().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return r=this.stream.entries(),o.abrupt("return",r.where("id",t).first());case 2:case"end":return o.stop()}}),_callee2,this)})))}},{key:"findAll",value:function findAll(t){return __awaiter(this,void 0,void 0,u().mark((function _callee3(){var r;return u().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:return r=this.stream.entries(),o.abrupt("return",r.where("id","IN",t).get());case 2:case"end":return o.stop()}}),_callee3,this)})))}},{key:"findBy",value:function findBy(t,r){return __awaiter(this,void 0,void 0,u().mark((function _callee4(){var o;return u().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:return o=this.stream.entries(),i.abrupt("return",o.where(t,r).first());case 2:case"end":return i.stop()}}),_callee4,this)})))}},{key:"findAllWhere",value:function findAllWhere(t,r){return __awaiter(this,void 0,void 0,u().mark((function _callee5(){var o;return u().wrap((function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:return o=this.stream.entries(),i.abrupt("return",o.where(t,r).get());case 2:case"end":return i.stop()}}),_callee5,this)})))}},{key:"create",value:function create(t){return __awaiter(this,void 0,void 0,u().mark((function _callee6(){var r;return u().wrap((function _callee6$(o){for(;;)switch(o.prev=o.next){case 0:return r=this.newCriteria().newInstance(t),o.next=3,r.save();case 3:return o.abrupt("return",r);case 4:case"end":return o.stop()}}),_callee6,this)})))}},{key:"save",value:function save(t){return __awaiter(this,void 0,void 0,u().mark((function _callee7(){var r;return u().wrap((function _callee7$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.save();case 2:return r=o.sent,o.abrupt("return",r);case 4:case"end":return o.stop()}}),_callee7)})))}},{key:"delete",value:function _delete(t){return __awaiter(this,void 0,void 0,u().mark((function _callee8(){return u().wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.http.deleteEntry(this.stream.id,t.id);case 2:return r.abrupt("return",!0);case 3:case"end":return r.stop()}}),_callee8,this)})))}},{key:"truncate",value:function truncate(){return this}},{key:"newInstance",value:function newInstance(t){return this.newCriteria().newInstance(t)}},{key:"newCriteria",value:function newCriteria(){return new z(this.stream)}}]),Repository}();function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==o)return;var i,a,c=[],u=!0,l=!1;try{for(o=o.call(t);!(u=(i=o.next()).done)&&(c.push(i.value),!r||c.length!==r);u=!0);}catch(t){l=!0,a=t}finally{try{u||null==o.return||o.return()}finally{if(l)throw a}}return c}(t,r)||function Stream_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return Stream_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Stream_arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Stream_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function Stream_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}__decorate([b("streams.http")],J.prototype,"http",void 0);var Y=function(){function Stream(t,r,o){!function Stream_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Stream),this.meta=r,this.links=o,t.fields&&(this.fields=new Map(Object.entries(t.fields).map((function(t){var r=_slicedToArray(t,2),o=r[0],i=r[1];return[o,new U(i)]}))),delete t.fields),Object.assign(this,t)}return function Stream_createClass(t,r,o){return r&&Stream_defineProperties(t.prototype,r),o&&Stream_defineProperties(t,o),t}(Stream,[{key:"repository",get:function get(){return this._repository||(this._repository=new J(this)),this._repository}},{key:"entries",value:function entries(){return this.repository.newCriteria()}}]),Stream}();function FieldCollection_typeof(t){return FieldCollection_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FieldCollection_typeof(t)}function FieldCollection_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function FieldCollection_setPrototypeOf(t,r){return FieldCollection_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},FieldCollection_setPrototypeOf(t,r)}function FieldCollection_createSuper(t){var r=function FieldCollection_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=FieldCollection_getPrototypeOf(t);if(r){var a=FieldCollection_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return FieldCollection_possibleConstructorReturn(this,o)}}function FieldCollection_possibleConstructorReturn(t,r){if(r&&("object"===FieldCollection_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function FieldCollection_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function FieldCollection_getPrototypeOf(t){return FieldCollection_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},FieldCollection_getPrototypeOf(t)}var X=function(t){!function FieldCollection_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&FieldCollection_setPrototypeOf(t,r)}(FieldCollection,t);var r=FieldCollection_createSuper(FieldCollection);function FieldCollection(){return FieldCollection_classCallCheck(this,FieldCollection),r.apply(this,arguments)}return FieldCollection}(w);function Http_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Q=function(){function Http(){!function Http_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Http)}return function Http_createClass(t,r,o){return r&&Http_defineProperties(t.prototype,r),o&&Http_defineProperties(t,o),t}(Http,[{key:"getStreams",value:function getStreams(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee(){return u().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return r.params=t,o.abrupt("return",this.get("/streams",r));case 2:case"end":return o.stop()}}),_callee,this)})))}},{key:"postStream",value:function postStream(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee2(){return u().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return r.data=t,o.abrupt("return",this.post("/streams",t,r));case 2:case"end":return o.stop()}}),_callee2,this)})))}},{key:"getStream",value:function getStream(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee3(){return u().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return o.params=r,i.abrupt("return",this.get("/streams/".concat(t),o));case 2:case"end":return i.stop()}}),_callee3,this)})))}},{key:"patchStream",value:function patchStream(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee4(){return u().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:return o.params=r,i.abrupt("return",this.patch("/streams/".concat(t),o));case 2:case"end":return i.stop()}}),_callee4,this)})))}},{key:"putStream",value:function putStream(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee5(){return u().wrap((function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:return o.params=r,i.abrupt("return",this.put("/streams/".concat(t),o));case 2:case"end":return i.stop()}}),_callee5,this)})))}},{key:"deleteStream",value:function deleteStream(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee6(){return u().wrap((function _callee6$(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.delete("/streams/".concat(t),r));case 1:case"end":return o.stop()}}),_callee6,this)})))}},{key:"getEntries",value:function getEntries(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee7(){return u().wrap((function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:return i.data=r,i.params=o,a.abrupt("return",this.get("/streams/".concat(t,"/entries"),Object.assign(Object.assign({},i),{responseType:"json",headers:{"Content-Type":"application/json"}})));case 3:case"end":return a.stop()}}),_callee7,this)})))}},{key:"postEntry",value:function postEntry(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee8(){return u().wrap((function _callee8$(i){for(;;)switch(i.prev=i.next){case 0:return o.data=r,i.abrupt("return",this.post("/streams/".concat(t,"/entries"),r,o));case 2:case"end":return i.stop()}}),_callee8,this)})))}},{key:"getEntry",value:function getEntry(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee9(){return u().wrap((function _callee9$(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.get("/streams/".concat(t,"/entries/").concat(r),o));case 1:case"end":return i.stop()}}),_callee9,this)})))}},{key:"patchEntry",value:function patchEntry(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee10(){return u().wrap((function _callee10$(a){for(;;)switch(a.prev=a.next){case 0:return i.data=o,a.abrupt("return",this.patch("/streams/".concat(t,"/entries/").concat(r),i));case 2:case"end":return a.stop()}}),_callee10,this)})))}},{key:"putEntry",value:function putEntry(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee11(){return u().wrap((function _callee11$(a){for(;;)switch(a.prev=a.next){case 0:return i.data=o,a.abrupt("return",this.put("/streams/".concat(t,"/entries/").concat(r),i));case 2:case"end":return a.stop()}}),_callee11,this)})))}},{key:"deleteEntry",value:function deleteEntry(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return __awaiter(this,void 0,void 0,u().mark((function _callee12(){return u().wrap((function _callee12$(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.patch("/streams/".concat(t,"/entries/").concat(r),o));case 1:case"end":return i.stop()}}),_callee12,this)})))}},{key:"getUri",value:function getUri(t){return this.axios.getUri(t)}},{key:"get",value:function get(t,r){return __awaiter(this,void 0,void 0,u().mark((function _callee13(){return u().wrap((function _callee13$(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.request(Object.assign({url:t,method:"GET"},r||{})));case 1:case"end":return o.stop()}}),_callee13,this)})))}},{key:"delete",value:function _delete(t,r){return __awaiter(this,void 0,void 0,u().mark((function _callee14(){return u().wrap((function _callee14$(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.request(Object.assign({url:t,method:"DELETE"},r||{})));case 1:case"end":return o.stop()}}),_callee14,this)})))}},{key:"head",value:function head(t,r){return __awaiter(this,void 0,void 0,u().mark((function _callee15(){return u().wrap((function _callee15$(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.request(Object.assign({url:t,method:"HEAD"},r||{})));case 1:case"end":return o.stop()}}),_callee15,this)})))}},{key:"options",value:function options(t,r){return __awaiter(this,void 0,void 0,u().mark((function _callee16(){return u().wrap((function _callee16$(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.request(Object.assign({url:t,method:"OPTIONS"},r||{})));case 1:case"end":return o.stop()}}),_callee16,this)})))}},{key:"post",value:function post(t,r,o){return __awaiter(this,void 0,void 0,u().mark((function _callee17(){return u().wrap((function _callee17$(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.request(Object.assign({url:t,method:"POST",data:r},o||{})));case 1:case"end":return i.stop()}}),_callee17,this)})))}},{key:"put",value:function put(t,r,o){return __awaiter(this,void 0,void 0,u().mark((function _callee18(){return u().wrap((function _callee18$(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.request(Object.assign({url:t,method:"PUT",data:r},o||{})));case 1:case"end":return i.stop()}}),_callee18,this)})))}},{key:"patch",value:function patch(t,r,o){return __awaiter(this,void 0,void 0,u().mark((function _callee19(){return u().wrap((function _callee19$(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.request(Object.assign({url:t,method:"PATCH",data:r},o||{})));case 1:case"end":return i.stop()}}),_callee19,this)})))}},{key:"constructed",value:function constructed(){this.cancelTokenSource=this.Axios.CancelToken.source()}},{key:"request",value:function request(t){return __awaiter(this,void 0,void 0,u().mark((function _callee20(){var r;return u().wrap((function _callee20$(o){for(;;)switch(o.prev=o.next){case 0:return t.cancelToken=this.cancelTokenSource.token,o.prev=1,o.next=4,this.axios.request(t);case 4:return r=o.sent,r.data,r.headers,r.status,r.statusText,o.abrupt("return",r.data);case 9:throw o.prev=9,o.t0=o.catch(1),C().isCancel(o.t0),o.t0;case 13:case"end":return o.stop()}}),_callee20,this,[[1,9]])})))}}]),Http}();function Streams_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}__decorate([b("axios")],Q.prototype,"Axios",void 0),__decorate([b("http")],Q.prototype,"axios",void 0),__decorate([(0,r.zY)()],Q.prototype,"constructed",null),Q=__decorate([(0,r.b2)()],Q);var Z=function(){function Streams(){!function Streams_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Streams)}return function Streams_createClass(t,r,o){return r&&Streams_defineProperties(t.prototype,r),o&&Streams_defineProperties(t,o),t}(Streams,[{key:"all",value:function all(){return __awaiter(this,void 0,void 0,u().mark((function _callee(){var t;return u().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.http.getStreams();case 2:return t=r.sent,r.abrupt("return",t.data.map((function(t){return new Y(t)})));case 4:case"end":return r.stop()}}),_callee,this)})))}},{key:"make",value:function make(t){return __awaiter(this,void 0,void 0,u().mark((function _callee2(){var r;return u().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.http.getStream(t);case 2:return r=o.sent,o.abrupt("return",new Y(r.data,r.meta,r.links));case 4:case"end":return o.stop()}}),_callee2,this)})))}},{key:"entries",value:function entries(t){return __awaiter(this,void 0,void 0,u().mark((function _callee3(){var r;return u().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.make(t);case 2:return r=o.sent,o.abrupt("return",new z(r));case 4:case"end":return o.stop()}}),_callee3,this)})))}},{key:"repository",value:function repository(t){return __awaiter(this,void 0,void 0,u().mark((function _callee4(){var r;return u().wrap((function _callee4$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.make(t);case 2:return r=o.sent,o.abrupt("return",new J(r));case 4:case"end":return o.stop()}}),_callee4,this)})))}},{key:"collection",value:function collection(){}}]),Streams}();function StreamsServiceProvider_typeof(t){return StreamsServiceProvider_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},StreamsServiceProvider_typeof(t)}function StreamsServiceProvider_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function StreamsServiceProvider_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function StreamsServiceProvider_setPrototypeOf(t,r){return StreamsServiceProvider_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},StreamsServiceProvider_setPrototypeOf(t,r)}function StreamsServiceProvider_createSuper(t){var r=function StreamsServiceProvider_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=StreamsServiceProvider_getPrototypeOf(t);if(r){var a=StreamsServiceProvider_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return StreamsServiceProvider_possibleConstructorReturn(this,o)}}function StreamsServiceProvider_possibleConstructorReturn(t,r){if(r&&("object"===StreamsServiceProvider_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function StreamsServiceProvider_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function StreamsServiceProvider_getPrototypeOf(t){return StreamsServiceProvider_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},StreamsServiceProvider_getPrototypeOf(t)}__decorate([b("config")],Z.prototype,"config",void 0),__decorate([b("streams.http")],Z.prototype,"http",void 0),Z=__decorate([(0,r.b2)()],Z);var ee=function(t){!function StreamsServiceProvider_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&StreamsServiceProvider_setPrototypeOf(t,r)}(StreamsServiceProvider,t);var r=StreamsServiceProvider_createSuper(StreamsServiceProvider);function StreamsServiceProvider(){return StreamsServiceProvider_classCallCheck(this,StreamsServiceProvider),r.apply(this,arguments)}return function StreamsServiceProvider_createClass(t,r,o){return r&&StreamsServiceProvider_defineProperties(t.prototype,r),o&&StreamsServiceProvider_defineProperties(t,o),t}(StreamsServiceProvider,[{key:"register",value:function register(){this.app.singleton("streams",Z).addBindingGetter("streams"),this.app.singleton("streams.http",Q)}}]),StreamsServiceProvider}(h);function CoreServiceProvider_typeof(t){return CoreServiceProvider_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CoreServiceProvider_typeof(t)}function CoreServiceProvider_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function CoreServiceProvider_setPrototypeOf(t,r){return CoreServiceProvider_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},CoreServiceProvider_setPrototypeOf(t,r)}function CoreServiceProvider_createSuper(t){var r=function CoreServiceProvider_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=CoreServiceProvider_getPrototypeOf(t);if(r){var a=CoreServiceProvider_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return CoreServiceProvider_possibleConstructorReturn(this,o)}}function CoreServiceProvider_possibleConstructorReturn(t,r){if(r&&("object"===CoreServiceProvider_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function CoreServiceProvider_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function CoreServiceProvider_getPrototypeOf(t){return CoreServiceProvider_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},CoreServiceProvider_getPrototypeOf(t)}var te=function(t){!function CoreServiceProvider_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&CoreServiceProvider_setPrototypeOf(t,r)}(CoreServiceProvider,t);var r=CoreServiceProvider_createSuper(CoreServiceProvider);function CoreServiceProvider(){var t;return CoreServiceProvider_classCallCheck(this,CoreServiceProvider),(t=r.apply(this,arguments)).providers=[D,k,ee],t}return CoreServiceProvider}(h)})();var i=o.Mx,a=o.FE,c=o.SL,u=o.VR,l=o.Up,p=o.kS,d=o.rF,h=o.gN,y=o.ip,v=o.eV,g=o.e6,_=o.Pv,m=o.jg,b=o._j,w=o.UT,S=o.L9,C=o.JJ,O=o.GX,T=o.F6,E=o.VE,P=o.LP,A=o.$T,x=o.l2,I=o.iC,k=o.f3,N=o.ER,R=o.Gn;

/***/ }),

/***/ "./node_modules/alpinejs/dist/alpine.js":
/*!**********************************************!*\
  !*** ./node_modules/alpinejs/dist/alpine.js ***!
  \**********************************************/
/***/ (function(module) {

(function (global, factory) {
   true ? module.exports = factory() :
  0;
}(this, (function () { 'use strict';

  function _defineProperty(obj, key, value) {
    if (key in obj) {
      Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      });
    } else {
      obj[key] = value;
    }

    return obj;
  }

  function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);

    if (Object.getOwnPropertySymbols) {
      var symbols = Object.getOwnPropertySymbols(object);
      if (enumerableOnly) symbols = symbols.filter(function (sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
      keys.push.apply(keys, symbols);
    }

    return keys;
  }

  function _objectSpread2(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i] != null ? arguments[i] : {};

      if (i % 2) {
        ownKeys(Object(source), true).forEach(function (key) {
          _defineProperty(target, key, source[key]);
        });
      } else if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
      } else {
        ownKeys(Object(source)).forEach(function (key) {
          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
      }
    }

    return target;
  }

  // Thanks @stimulus:
  // https://github.com/stimulusjs/stimulus/blob/master/packages/%40stimulus/core/src/application.ts
  function domReady() {
    return new Promise(resolve => {
      if (document.readyState == "loading") {
        document.addEventListener("DOMContentLoaded", resolve);
      } else {
        resolve();
      }
    });
  }
  function arrayUnique(array) {
    return Array.from(new Set(array));
  }
  function isTesting() {
    return navigator.userAgent.includes("Node.js") || navigator.userAgent.includes("jsdom");
  }
  function checkedAttrLooseCompare(valueA, valueB) {
    return valueA == valueB;
  }
  function warnIfMalformedTemplate(el, directive) {
    if (el.tagName.toLowerCase() !== 'template') {
      console.warn(`Alpine: [${directive}] directive should only be added to <template> tags. See https://github.com/alpinejs/alpine#${directive}`);
    } else if (el.content.childElementCount !== 1) {
      console.warn(`Alpine: <template> tag with [${directive}] encountered with an unexpected number of root elements. Make sure <template> has a single root element. `);
    }
  }
  function kebabCase(subject) {
    return subject.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[_\s]/, '-').toLowerCase();
  }
  function camelCase(subject) {
    return subject.toLowerCase().replace(/-(\w)/g, (match, char) => char.toUpperCase());
  }
  function walk(el, callback) {
    if (callback(el) === false) return;
    let node = el.firstElementChild;

    while (node) {
      walk(node, callback);
      node = node.nextElementSibling;
    }
  }
  function debounce(func, wait) {
    var timeout;
    return function () {
      var context = this,
          args = arguments;

      var later = function later() {
        timeout = null;
        func.apply(context, args);
      };

      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }

  const handleError = (el, expression, error) => {
    console.warn(`Alpine Error: "${error}"\n\nExpression: "${expression}"\nElement:`, el);

    if (!isTesting()) {
      Object.assign(error, {
        el,
        expression
      });
      throw error;
    }
  };

  function tryCatch(cb, {
    el,
    expression
  }) {
    try {
      const value = cb();
      return value instanceof Promise ? value.catch(e => handleError(el, expression, e)) : value;
    } catch (e) {
      handleError(el, expression, e);
    }
  }

  function saferEval(el, expression, dataContext, additionalHelperVariables = {}) {
    return tryCatch(() => {
      if (typeof expression === 'function') {
        return expression.call(dataContext);
      }

      return new Function(['$data', ...Object.keys(additionalHelperVariables)], `var __alpine_result; with($data) { __alpine_result = ${expression} }; return __alpine_result`)(dataContext, ...Object.values(additionalHelperVariables));
    }, {
      el,
      expression
    });
  }
  function saferEvalNoReturn(el, expression, dataContext, additionalHelperVariables = {}) {
    return tryCatch(() => {
      if (typeof expression === 'function') {
        return Promise.resolve(expression.call(dataContext, additionalHelperVariables['$event']));
      }

      let AsyncFunction = Function;
      /* MODERN-ONLY:START */

      AsyncFunction = Object.getPrototypeOf(async function () {}).constructor;
      /* MODERN-ONLY:END */
      // For the cases when users pass only a function reference to the caller: `x-on:click="foo"`
      // Where "foo" is a function. Also, we'll pass the function the event instance when we call it.

      if (Object.keys(dataContext).includes(expression)) {
        let methodReference = new Function(['dataContext', ...Object.keys(additionalHelperVariables)], `with(dataContext) { return ${expression} }`)(dataContext, ...Object.values(additionalHelperVariables));

        if (typeof methodReference === 'function') {
          return Promise.resolve(methodReference.call(dataContext, additionalHelperVariables['$event']));
        } else {
          return Promise.resolve();
        }
      }

      return Promise.resolve(new AsyncFunction(['dataContext', ...Object.keys(additionalHelperVariables)], `with(dataContext) { ${expression} }`)(dataContext, ...Object.values(additionalHelperVariables)));
    }, {
      el,
      expression
    });
  }
  const xAttrRE = /^x-(on|bind|data|text|html|model|if|for|show|cloak|transition|ref|spread)\b/;
  function isXAttr(attr) {
    const name = replaceAtAndColonWithStandardSyntax(attr.name);
    return xAttrRE.test(name);
  }
  function getXAttrs(el, component, type) {
    let directives = Array.from(el.attributes).filter(isXAttr).map(parseHtmlAttribute); // Get an object of directives from x-spread.

    let spreadDirective = directives.filter(directive => directive.type === 'spread')[0];

    if (spreadDirective) {
      let spreadObject = saferEval(el, spreadDirective.expression, component.$data); // Add x-spread directives to the pile of existing directives.

      directives = directives.concat(Object.entries(spreadObject).map(([name, value]) => parseHtmlAttribute({
        name,
        value
      })));
    }

    if (type) return directives.filter(i => i.type === type);
    return sortDirectives(directives);
  }

  function sortDirectives(directives) {
    let directiveOrder = ['bind', 'model', 'show', 'catch-all'];
    return directives.sort((a, b) => {
      let typeA = directiveOrder.indexOf(a.type) === -1 ? 'catch-all' : a.type;
      let typeB = directiveOrder.indexOf(b.type) === -1 ? 'catch-all' : b.type;
      return directiveOrder.indexOf(typeA) - directiveOrder.indexOf(typeB);
    });
  }

  function parseHtmlAttribute({
    name,
    value
  }) {
    const normalizedName = replaceAtAndColonWithStandardSyntax(name);
    const typeMatch = normalizedName.match(xAttrRE);
    const valueMatch = normalizedName.match(/:([a-zA-Z0-9\-:]+)/);
    const modifiers = normalizedName.match(/\.[^.\]]+(?=[^\]]*$)/g) || [];
    return {
      type: typeMatch ? typeMatch[1] : null,
      value: valueMatch ? valueMatch[1] : null,
      modifiers: modifiers.map(i => i.replace('.', '')),
      expression: value
    };
  }
  function isBooleanAttr(attrName) {
    // As per HTML spec table https://html.spec.whatwg.org/multipage/indices.html#attributes-3:boolean-attribute
    // Array roughly ordered by estimated usage
    const booleanAttributes = ['disabled', 'checked', 'required', 'readonly', 'hidden', 'open', 'selected', 'autofocus', 'itemscope', 'multiple', 'novalidate', 'allowfullscreen', 'allowpaymentrequest', 'formnovalidate', 'autoplay', 'controls', 'loop', 'muted', 'playsinline', 'default', 'ismap', 'reversed', 'async', 'defer', 'nomodule'];
    return booleanAttributes.includes(attrName);
  }
  function replaceAtAndColonWithStandardSyntax(name) {
    if (name.startsWith('@')) {
      return name.replace('@', 'x-on:');
    } else if (name.startsWith(':')) {
      return name.replace(':', 'x-bind:');
    }

    return name;
  }
  function convertClassStringToArray(classList, filterFn = Boolean) {
    return classList.split(' ').filter(filterFn);
  }
  const TRANSITION_TYPE_IN = 'in';
  const TRANSITION_TYPE_OUT = 'out';
  const TRANSITION_CANCELLED = 'cancelled';
  function transitionIn(el, show, reject, component, forceSkip = false) {
    // We don't want to transition on the initial page load.
    if (forceSkip) return show();

    if (el.__x_transition && el.__x_transition.type === TRANSITION_TYPE_IN) {
      // there is already a similar transition going on, this was probably triggered by
      // a change in a different property, let's just leave the previous one doing its job
      return;
    }

    const attrs = getXAttrs(el, component, 'transition');
    const showAttr = getXAttrs(el, component, 'show')[0]; // If this is triggered by a x-show.transition.

    if (showAttr && showAttr.modifiers.includes('transition')) {
      let modifiers = showAttr.modifiers; // If x-show.transition.out, we'll skip the "in" transition.

      if (modifiers.includes('out') && !modifiers.includes('in')) return show();
      const settingBothSidesOfTransition = modifiers.includes('in') && modifiers.includes('out'); // If x-show.transition.in...out... only use "in" related modifiers for this transition.

      modifiers = settingBothSidesOfTransition ? modifiers.filter((i, index) => index < modifiers.indexOf('out')) : modifiers;
      transitionHelperIn(el, modifiers, show, reject); // Otherwise, we can assume x-transition:enter.
    } else if (attrs.some(attr => ['enter', 'enter-start', 'enter-end'].includes(attr.value))) {
      transitionClassesIn(el, component, attrs, show, reject);
    } else {
      // If neither, just show that damn thing.
      show();
    }
  }
  function transitionOut(el, hide, reject, component, forceSkip = false) {
    // We don't want to transition on the initial page load.
    if (forceSkip) return hide();

    if (el.__x_transition && el.__x_transition.type === TRANSITION_TYPE_OUT) {
      // there is already a similar transition going on, this was probably triggered by
      // a change in a different property, let's just leave the previous one doing its job
      return;
    }

    const attrs = getXAttrs(el, component, 'transition');
    const showAttr = getXAttrs(el, component, 'show')[0];

    if (showAttr && showAttr.modifiers.includes('transition')) {
      let modifiers = showAttr.modifiers;
      if (modifiers.includes('in') && !modifiers.includes('out')) return hide();
      const settingBothSidesOfTransition = modifiers.includes('in') && modifiers.includes('out');
      modifiers = settingBothSidesOfTransition ? modifiers.filter((i, index) => index > modifiers.indexOf('out')) : modifiers;
      transitionHelperOut(el, modifiers, settingBothSidesOfTransition, hide, reject);
    } else if (attrs.some(attr => ['leave', 'leave-start', 'leave-end'].includes(attr.value))) {
      transitionClassesOut(el, component, attrs, hide, reject);
    } else {
      hide();
    }
  }
  function transitionHelperIn(el, modifiers, showCallback, reject) {
    // Default values inspired by: https://material.io/design/motion/speed.html#duration
    const styleValues = {
      duration: modifierValue(modifiers, 'duration', 150),
      origin: modifierValue(modifiers, 'origin', 'center'),
      first: {
        opacity: 0,
        scale: modifierValue(modifiers, 'scale', 95)
      },
      second: {
        opacity: 1,
        scale: 100
      }
    };
    transitionHelper(el, modifiers, showCallback, () => {}, reject, styleValues, TRANSITION_TYPE_IN);
  }
  function transitionHelperOut(el, modifiers, settingBothSidesOfTransition, hideCallback, reject) {
    // Make the "out" transition .5x slower than the "in". (Visually better)
    // HOWEVER, if they explicitly set a duration for the "out" transition,
    // use that.
    const duration = settingBothSidesOfTransition ? modifierValue(modifiers, 'duration', 150) : modifierValue(modifiers, 'duration', 150) / 2;
    const styleValues = {
      duration: duration,
      origin: modifierValue(modifiers, 'origin', 'center'),
      first: {
        opacity: 1,
        scale: 100
      },
      second: {
        opacity: 0,
        scale: modifierValue(modifiers, 'scale', 95)
      }
    };
    transitionHelper(el, modifiers, () => {}, hideCallback, reject, styleValues, TRANSITION_TYPE_OUT);
  }

  function modifierValue(modifiers, key, fallback) {
    // If the modifier isn't present, use the default.
    if (modifiers.indexOf(key) === -1) return fallback; // If it IS present, grab the value after it: x-show.transition.duration.500ms

    const rawValue = modifiers[modifiers.indexOf(key) + 1];
    if (!rawValue) return fallback;

    if (key === 'scale') {
      // Check if the very next value is NOT a number and return the fallback.
      // If x-show.transition.scale, we'll use the default scale value.
      // That is how a user opts out of the opacity transition.
      if (!isNumeric(rawValue)) return fallback;
    }

    if (key === 'duration') {
      // Support x-show.transition.duration.500ms && duration.500
      let match = rawValue.match(/([0-9]+)ms/);
      if (match) return match[1];
    }

    if (key === 'origin') {
      // Support chaining origin directions: x-show.transition.top.right
      if (['top', 'right', 'left', 'center', 'bottom'].includes(modifiers[modifiers.indexOf(key) + 2])) {
        return [rawValue, modifiers[modifiers.indexOf(key) + 2]].join(' ');
      }
    }

    return rawValue;
  }

  function transitionHelper(el, modifiers, hook1, hook2, reject, styleValues, type) {
    // clear the previous transition if exists to avoid caching the wrong styles
    if (el.__x_transition) {
      el.__x_transition.cancel && el.__x_transition.cancel();
    } // If the user set these style values, we'll put them back when we're done with them.


    const opacityCache = el.style.opacity;
    const transformCache = el.style.transform;
    const transformOriginCache = el.style.transformOrigin; // If no modifiers are present: x-show.transition, we'll default to both opacity and scale.

    const noModifiers = !modifiers.includes('opacity') && !modifiers.includes('scale');
    const transitionOpacity = noModifiers || modifiers.includes('opacity');
    const transitionScale = noModifiers || modifiers.includes('scale'); // These are the explicit stages of a transition (same stages for in and for out).
    // This way you can get a birds eye view of the hooks, and the differences
    // between them.

    const stages = {
      start() {
        if (transitionOpacity) el.style.opacity = styleValues.first.opacity;
        if (transitionScale) el.style.transform = `scale(${styleValues.first.scale / 100})`;
      },

      during() {
        if (transitionScale) el.style.transformOrigin = styleValues.origin;
        el.style.transitionProperty = [transitionOpacity ? `opacity` : ``, transitionScale ? `transform` : ``].join(' ').trim();
        el.style.transitionDuration = `${styleValues.duration / 1000}s`;
        el.style.transitionTimingFunction = `cubic-bezier(0.4, 0.0, 0.2, 1)`;
      },

      show() {
        hook1();
      },

      end() {
        if (transitionOpacity) el.style.opacity = styleValues.second.opacity;
        if (transitionScale) el.style.transform = `scale(${styleValues.second.scale / 100})`;
      },

      hide() {
        hook2();
      },

      cleanup() {
        if (transitionOpacity) el.style.opacity = opacityCache;
        if (transitionScale) el.style.transform = transformCache;
        if (transitionScale) el.style.transformOrigin = transformOriginCache;
        el.style.transitionProperty = null;
        el.style.transitionDuration = null;
        el.style.transitionTimingFunction = null;
      }

    };
    transition(el, stages, type, reject);
  }

  const ensureStringExpression = (expression, el, component) => {
    return typeof expression === 'function' ? component.evaluateReturnExpression(el, expression) : expression;
  };

  function transitionClassesIn(el, component, directives, showCallback, reject) {
    const enter = convertClassStringToArray(ensureStringExpression((directives.find(i => i.value === 'enter') || {
      expression: ''
    }).expression, el, component));
    const enterStart = convertClassStringToArray(ensureStringExpression((directives.find(i => i.value === 'enter-start') || {
      expression: ''
    }).expression, el, component));
    const enterEnd = convertClassStringToArray(ensureStringExpression((directives.find(i => i.value === 'enter-end') || {
      expression: ''
    }).expression, el, component));
    transitionClasses(el, enter, enterStart, enterEnd, showCallback, () => {}, TRANSITION_TYPE_IN, reject);
  }
  function transitionClassesOut(el, component, directives, hideCallback, reject) {
    const leave = convertClassStringToArray(ensureStringExpression((directives.find(i => i.value === 'leave') || {
      expression: ''
    }).expression, el, component));
    const leaveStart = convertClassStringToArray(ensureStringExpression((directives.find(i => i.value === 'leave-start') || {
      expression: ''
    }).expression, el, component));
    const leaveEnd = convertClassStringToArray(ensureStringExpression((directives.find(i => i.value === 'leave-end') || {
      expression: ''
    }).expression, el, component));
    transitionClasses(el, leave, leaveStart, leaveEnd, () => {}, hideCallback, TRANSITION_TYPE_OUT, reject);
  }
  function transitionClasses(el, classesDuring, classesStart, classesEnd, hook1, hook2, type, reject) {
    // clear the previous transition if exists to avoid caching the wrong classes
    if (el.__x_transition) {
      el.__x_transition.cancel && el.__x_transition.cancel();
    }

    const originalClasses = el.__x_original_classes || [];
    const stages = {
      start() {
        el.classList.add(...classesStart);
      },

      during() {
        el.classList.add(...classesDuring);
      },

      show() {
        hook1();
      },

      end() {
        // Don't remove classes that were in the original class attribute.
        el.classList.remove(...classesStart.filter(i => !originalClasses.includes(i)));
        el.classList.add(...classesEnd);
      },

      hide() {
        hook2();
      },

      cleanup() {
        el.classList.remove(...classesDuring.filter(i => !originalClasses.includes(i)));
        el.classList.remove(...classesEnd.filter(i => !originalClasses.includes(i)));
      }

    };
    transition(el, stages, type, reject);
  }
  function transition(el, stages, type, reject) {
    const finish = once(() => {
      stages.hide(); // Adding an "isConnected" check, in case the callback
      // removed the element from the DOM.

      if (el.isConnected) {
        stages.cleanup();
      }

      delete el.__x_transition;
    });
    el.__x_transition = {
      // Set transition type so we can avoid clearing transition if the direction is the same
      type: type,
      // create a callback for the last stages of the transition so we can call it
      // from different point and early terminate it. Once will ensure that function
      // is only called one time.
      cancel: once(() => {
        reject(TRANSITION_CANCELLED);
        finish();
      }),
      finish,
      // This store the next animation frame so we can cancel it
      nextFrame: null
    };
    stages.start();
    stages.during();
    el.__x_transition.nextFrame = requestAnimationFrame(() => {
      // Note: Safari's transitionDuration property will list out comma separated transition durations
      // for every single transition property. Let's grab the first one and call it a day.
      let duration = Number(getComputedStyle(el).transitionDuration.replace(/,.*/, '').replace('s', '')) * 1000;

      if (duration === 0) {
        duration = Number(getComputedStyle(el).animationDuration.replace('s', '')) * 1000;
      }

      stages.show();
      el.__x_transition.nextFrame = requestAnimationFrame(() => {
        stages.end();
        setTimeout(el.__x_transition.finish, duration);
      });
    });
  }
  function isNumeric(subject) {
    return !Array.isArray(subject) && !isNaN(subject);
  } // Thanks @vuejs
  // https://github.com/vuejs/vue/blob/4de4649d9637262a9b007720b59f80ac72a5620c/src/shared/util.js

  function once(callback) {
    let called = false;
    return function () {
      if (!called) {
        called = true;
        callback.apply(this, arguments);
      }
    };
  }

  function handleForDirective(component, templateEl, expression, initialUpdate, extraVars) {
    warnIfMalformedTemplate(templateEl, 'x-for');
    let iteratorNames = typeof expression === 'function' ? parseForExpression(component.evaluateReturnExpression(templateEl, expression)) : parseForExpression(expression);
    let items = evaluateItemsAndReturnEmptyIfXIfIsPresentAndFalseOnElement(component, templateEl, iteratorNames, extraVars); // As we walk the array, we'll also walk the DOM (updating/creating as we go).

    let currentEl = templateEl;
    items.forEach((item, index) => {
      let iterationScopeVariables = getIterationScopeVariables(iteratorNames, item, index, items, extraVars());
      let currentKey = generateKeyForIteration(component, templateEl, index, iterationScopeVariables);
      let nextEl = lookAheadForMatchingKeyedElementAndMoveItIfFound(currentEl.nextElementSibling, currentKey); // If we haven't found a matching key, insert the element at the current position.

      if (!nextEl) {
        nextEl = addElementInLoopAfterCurrentEl(templateEl, currentEl); // And transition it in if it's not the first page load.

        transitionIn(nextEl, () => {}, () => {}, component, initialUpdate);
        nextEl.__x_for = iterationScopeVariables;
        component.initializeElements(nextEl, () => nextEl.__x_for); // Otherwise update the element we found.
      } else {
        // Temporarily remove the key indicator to allow the normal "updateElements" to work.
        delete nextEl.__x_for_key;
        nextEl.__x_for = iterationScopeVariables;
        component.updateElements(nextEl, () => nextEl.__x_for);
      }

      currentEl = nextEl;
      currentEl.__x_for_key = currentKey;
    });
    removeAnyLeftOverElementsFromPreviousUpdate(currentEl, component);
  } // This was taken from VueJS 2.* core. Thanks Vue!

  function parseForExpression(expression) {
    let forIteratorRE = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/;
    let stripParensRE = /^\(|\)$/g;
    let forAliasRE = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/;
    let inMatch = String(expression).match(forAliasRE);
    if (!inMatch) return;
    let res = {};
    res.items = inMatch[2].trim();
    let item = inMatch[1].trim().replace(stripParensRE, '');
    let iteratorMatch = item.match(forIteratorRE);

    if (iteratorMatch) {
      res.item = item.replace(forIteratorRE, '').trim();
      res.index = iteratorMatch[1].trim();

      if (iteratorMatch[2]) {
        res.collection = iteratorMatch[2].trim();
      }
    } else {
      res.item = item;
    }

    return res;
  }

  function getIterationScopeVariables(iteratorNames, item, index, items, extraVars) {
    // We must create a new object, so each iteration has a new scope
    let scopeVariables = extraVars ? _objectSpread2({}, extraVars) : {};
    scopeVariables[iteratorNames.item] = item;
    if (iteratorNames.index) scopeVariables[iteratorNames.index] = index;
    if (iteratorNames.collection) scopeVariables[iteratorNames.collection] = items;
    return scopeVariables;
  }

  function generateKeyForIteration(component, el, index, iterationScopeVariables) {
    let bindKeyAttribute = getXAttrs(el, component, 'bind').filter(attr => attr.value === 'key')[0]; // If the dev hasn't specified a key, just return the index of the iteration.

    if (!bindKeyAttribute) return index;
    return component.evaluateReturnExpression(el, bindKeyAttribute.expression, () => iterationScopeVariables);
  }

  function evaluateItemsAndReturnEmptyIfXIfIsPresentAndFalseOnElement(component, el, iteratorNames, extraVars) {
    let ifAttribute = getXAttrs(el, component, 'if')[0];

    if (ifAttribute && !component.evaluateReturnExpression(el, ifAttribute.expression)) {
      return [];
    }

    let items = component.evaluateReturnExpression(el, iteratorNames.items, extraVars); // This adds support for the `i in n` syntax.

    if (isNumeric(items) && items >= 0) {
      items = Array.from(Array(items).keys(), i => i + 1);
    }

    return items;
  }

  function addElementInLoopAfterCurrentEl(templateEl, currentEl) {
    let clone = document.importNode(templateEl.content, true);
    currentEl.parentElement.insertBefore(clone, currentEl.nextElementSibling);
    return currentEl.nextElementSibling;
  }

  function lookAheadForMatchingKeyedElementAndMoveItIfFound(nextEl, currentKey) {
    if (!nextEl) return; // If we are already past the x-for generated elements, we don't need to look ahead.

    if (nextEl.__x_for_key === undefined) return; // If the the key's DO match, no need to look ahead.

    if (nextEl.__x_for_key === currentKey) return nextEl; // If they don't, we'll look ahead for a match.
    // If we find it, we'll move it to the current position in the loop.

    let tmpNextEl = nextEl;

    while (tmpNextEl) {
      if (tmpNextEl.__x_for_key === currentKey) {
        return tmpNextEl.parentElement.insertBefore(tmpNextEl, nextEl);
      }

      tmpNextEl = tmpNextEl.nextElementSibling && tmpNextEl.nextElementSibling.__x_for_key !== undefined ? tmpNextEl.nextElementSibling : false;
    }
  }

  function removeAnyLeftOverElementsFromPreviousUpdate(currentEl, component) {
    var nextElementFromOldLoop = currentEl.nextElementSibling && currentEl.nextElementSibling.__x_for_key !== undefined ? currentEl.nextElementSibling : false;

    while (nextElementFromOldLoop) {
      let nextElementFromOldLoopImmutable = nextElementFromOldLoop;
      let nextSibling = nextElementFromOldLoop.nextElementSibling;
      transitionOut(nextElementFromOldLoop, () => {
        nextElementFromOldLoopImmutable.remove();
      }, () => {}, component);
      nextElementFromOldLoop = nextSibling && nextSibling.__x_for_key !== undefined ? nextSibling : false;
    }
  }

  function handleAttributeBindingDirective(component, el, attrName, expression, extraVars, attrType, modifiers) {
    var value = component.evaluateReturnExpression(el, expression, extraVars);

    if (attrName === 'value') {
      if (Alpine.ignoreFocusedForValueBinding && document.activeElement.isSameNode(el)) return; // If nested model key is undefined, set the default value to empty string.

      if (value === undefined && String(expression).match(/\./)) {
        value = '';
      }

      if (el.type === 'radio') {
        // Set radio value from x-bind:value, if no "value" attribute exists.
        // If there are any initial state values, radio will have a correct
        // "checked" value since x-bind:value is processed before x-model.
        if (el.attributes.value === undefined && attrType === 'bind') {
          el.value = value;
        } else if (attrType !== 'bind') {
          el.checked = checkedAttrLooseCompare(el.value, value);
        }
      } else if (el.type === 'checkbox') {
        // If we are explicitly binding a string to the :value, set the string,
        // If the value is a boolean, leave it alone, it will be set to "on"
        // automatically.
        if (typeof value !== 'boolean' && ![null, undefined].includes(value) && attrType === 'bind') {
          el.value = String(value);
        } else if (attrType !== 'bind') {
          if (Array.isArray(value)) {
            // I'm purposely not using Array.includes here because it's
            // strict, and because of Numeric/String mis-casting, I
            // want the "includes" to be "fuzzy".
            el.checked = value.some(val => checkedAttrLooseCompare(val, el.value));
          } else {
            el.checked = !!value;
          }
        }
      } else if (el.tagName === 'SELECT') {
        updateSelect(el, value);
      } else {
        if (el.value === value) return;
        el.value = value;
      }
    } else if (attrName === 'class') {
      if (Array.isArray(value)) {
        const originalClasses = el.__x_original_classes || [];
        el.setAttribute('class', arrayUnique(originalClasses.concat(value)).join(' '));
      } else if (typeof value === 'object') {
        // Sorting the keys / class names by their boolean value will ensure that
        // anything that evaluates to `false` and needs to remove classes is run first.
        const keysSortedByBooleanValue = Object.keys(value).sort((a, b) => value[a] - value[b]);
        keysSortedByBooleanValue.forEach(classNames => {
          if (value[classNames]) {
            convertClassStringToArray(classNames).forEach(className => el.classList.add(className));
          } else {
            convertClassStringToArray(classNames).forEach(className => el.classList.remove(className));
          }
        });
      } else {
        const originalClasses = el.__x_original_classes || [];
        const newClasses = value ? convertClassStringToArray(value) : [];
        el.setAttribute('class', arrayUnique(originalClasses.concat(newClasses)).join(' '));
      }
    } else {
      attrName = modifiers.includes('camel') ? camelCase(attrName) : attrName; // If an attribute's bound value is null, undefined or false, remove the attribute

      if ([null, undefined, false].includes(value)) {
        el.removeAttribute(attrName);
      } else {
        isBooleanAttr(attrName) ? setIfChanged(el, attrName, attrName) : setIfChanged(el, attrName, value);
      }
    }
  }

  function setIfChanged(el, attrName, value) {
    if (el.getAttribute(attrName) != value) {
      el.setAttribute(attrName, value);
    }
  }

  function updateSelect(el, value) {
    const arrayWrappedValue = [].concat(value).map(value => {
      return value + '';
    });
    Array.from(el.options).forEach(option => {
      option.selected = arrayWrappedValue.includes(option.value || option.text);
    });
  }

  function handleTextDirective(el, output, expression) {
    // If nested model key is undefined, set the default value to empty string.
    if (output === undefined && String(expression).match(/\./)) {
      output = '';
    }

    el.textContent = output;
  }

  function handleHtmlDirective(component, el, expression, extraVars) {
    el.innerHTML = component.evaluateReturnExpression(el, expression, extraVars);
  }

  function handleShowDirective(component, el, value, modifiers, initialUpdate = false) {
    const hide = () => {
      el.style.display = 'none';
      el.__x_is_shown = false;
    };

    const show = () => {
      if (el.style.length === 1 && el.style.display === 'none') {
        el.removeAttribute('style');
      } else {
        el.style.removeProperty('display');
      }

      el.__x_is_shown = true;
    };

    if (initialUpdate === true) {
      if (value) {
        show();
      } else {
        hide();
      }

      return;
    }

    const handle = (resolve, reject) => {
      if (value) {
        if (el.style.display === 'none' || el.__x_transition) {
          transitionIn(el, () => {
            show();
          }, reject, component);
        }

        resolve(() => {});
      } else {
        if (el.style.display !== 'none') {
          transitionOut(el, () => {
            resolve(() => {
              hide();
            });
          }, reject, component);
        } else {
          resolve(() => {});
        }
      }
    }; // The working of x-show is a bit complex because we need to
    // wait for any child transitions to finish before hiding
    // some element. Also, this has to be done recursively.
    // If x-show.immediate, foregoe the waiting.


    if (modifiers.includes('immediate')) {
      handle(finish => finish(), () => {});
      return;
    } // x-show is encountered during a DOM tree walk. If an element
    // we encounter is NOT a child of another x-show element we
    // can execute the previous x-show stack (if one exists).


    if (component.showDirectiveLastElement && !component.showDirectiveLastElement.contains(el)) {
      component.executeAndClearRemainingShowDirectiveStack();
    }

    component.showDirectiveStack.push(handle);
    component.showDirectiveLastElement = el;
  }

  function handleIfDirective(component, el, expressionResult, initialUpdate, extraVars) {
    warnIfMalformedTemplate(el, 'x-if');
    const elementHasAlreadyBeenAdded = el.nextElementSibling && el.nextElementSibling.__x_inserted_me === true;

    if (expressionResult && (!elementHasAlreadyBeenAdded || el.__x_transition)) {
      const clone = document.importNode(el.content, true);
      el.parentElement.insertBefore(clone, el.nextElementSibling);
      transitionIn(el.nextElementSibling, () => {}, () => {}, component, initialUpdate);
      component.initializeElements(el.nextElementSibling, extraVars);
      el.nextElementSibling.__x_inserted_me = true;
    } else if (!expressionResult && elementHasAlreadyBeenAdded) {
      transitionOut(el.nextElementSibling, () => {
        el.nextElementSibling.remove();
      }, () => {}, component, initialUpdate);
    }
  }

  function registerListener(component, el, event, modifiers, expression, extraVars = {}) {
    const options = {
      passive: modifiers.includes('passive')
    };

    if (modifiers.includes('camel')) {
      event = camelCase(event);
    }

    let handler, listenerTarget;

    if (modifiers.includes('away')) {
      listenerTarget = document;

      handler = e => {
        // Don't do anything if the click came from the element or within it.
        if (el.contains(e.target)) return; // Don't do anything if this element isn't currently visible.

        if (el.offsetWidth < 1 && el.offsetHeight < 1) return; // Now that we are sure the element is visible, AND the click
        // is from outside it, let's run the expression.

        runListenerHandler(component, expression, e, extraVars);

        if (modifiers.includes('once')) {
          document.removeEventListener(event, handler, options);
        }
      };
    } else {
      listenerTarget = modifiers.includes('window') ? window : modifiers.includes('document') ? document : el;

      handler = e => {
        // Remove this global event handler if the element that declared it
        // has been removed. It's now stale.
        if (listenerTarget === window || listenerTarget === document) {
          if (!document.body.contains(el)) {
            listenerTarget.removeEventListener(event, handler, options);
            return;
          }
        }

        if (isKeyEvent(event)) {
          if (isListeningForASpecificKeyThatHasntBeenPressed(e, modifiers)) {
            return;
          }
        }

        if (modifiers.includes('prevent')) e.preventDefault();
        if (modifiers.includes('stop')) e.stopPropagation(); // If the .self modifier isn't present, or if it is present and
        // the target element matches the element we are registering the
        // event on, run the handler

        if (!modifiers.includes('self') || e.target === el) {
          const returnValue = runListenerHandler(component, expression, e, extraVars);
          returnValue.then(value => {
            if (value === false) {
              e.preventDefault();
            } else {
              if (modifiers.includes('once')) {
                listenerTarget.removeEventListener(event, handler, options);
              }
            }
          });
        }
      };
    }

    if (modifiers.includes('debounce')) {
      let nextModifier = modifiers[modifiers.indexOf('debounce') + 1] || 'invalid-wait';
      let wait = isNumeric(nextModifier.split('ms')[0]) ? Number(nextModifier.split('ms')[0]) : 250;
      handler = debounce(handler, wait);
    }

    listenerTarget.addEventListener(event, handler, options);
  }

  function runListenerHandler(component, expression, e, extraVars) {
    return component.evaluateCommandExpression(e.target, expression, () => {
      return _objectSpread2(_objectSpread2({}, extraVars()), {}, {
        '$event': e
      });
    });
  }

  function isKeyEvent(event) {
    return ['keydown', 'keyup'].includes(event);
  }

  function isListeningForASpecificKeyThatHasntBeenPressed(e, modifiers) {
    let keyModifiers = modifiers.filter(i => {
      return !['window', 'document', 'prevent', 'stop'].includes(i);
    });

    if (keyModifiers.includes('debounce')) {
      let debounceIndex = keyModifiers.indexOf('debounce');
      keyModifiers.splice(debounceIndex, isNumeric((keyModifiers[debounceIndex + 1] || 'invalid-wait').split('ms')[0]) ? 2 : 1);
    } // If no modifier is specified, we'll call it a press.


    if (keyModifiers.length === 0) return false; // If one is passed, AND it matches the key pressed, we'll call it a press.

    if (keyModifiers.length === 1 && keyModifiers[0] === keyToModifier(e.key)) return false; // The user is listening for key combinations.

    const systemKeyModifiers = ['ctrl', 'shift', 'alt', 'meta', 'cmd', 'super'];
    const selectedSystemKeyModifiers = systemKeyModifiers.filter(modifier => keyModifiers.includes(modifier));
    keyModifiers = keyModifiers.filter(i => !selectedSystemKeyModifiers.includes(i));

    if (selectedSystemKeyModifiers.length > 0) {
      const activelyPressedKeyModifiers = selectedSystemKeyModifiers.filter(modifier => {
        // Alias "cmd" and "super" to "meta"
        if (modifier === 'cmd' || modifier === 'super') modifier = 'meta';
        return e[`${modifier}Key`];
      }); // If all the modifiers selected are pressed, ...

      if (activelyPressedKeyModifiers.length === selectedSystemKeyModifiers.length) {
        // AND the remaining key is pressed as well. It's a press.
        if (keyModifiers[0] === keyToModifier(e.key)) return false;
      }
    } // We'll call it NOT a valid keypress.


    return true;
  }

  function keyToModifier(key) {
    switch (key) {
      case '/':
        return 'slash';

      case ' ':
      case 'Spacebar':
        return 'space';

      default:
        return key && kebabCase(key);
    }
  }

  function registerModelListener(component, el, modifiers, expression, extraVars) {
    // If the element we are binding to is a select, a radio, or checkbox
    // we'll listen for the change event instead of the "input" event.
    var event = el.tagName.toLowerCase() === 'select' || ['checkbox', 'radio'].includes(el.type) || modifiers.includes('lazy') ? 'change' : 'input';
    const listenerExpression = `${expression} = rightSideOfExpression($event, ${expression})`;
    registerListener(component, el, event, modifiers, listenerExpression, () => {
      return _objectSpread2(_objectSpread2({}, extraVars()), {}, {
        rightSideOfExpression: generateModelAssignmentFunction(el, modifiers, expression)
      });
    });
  }

  function generateModelAssignmentFunction(el, modifiers, expression) {
    if (el.type === 'radio') {
      // Radio buttons only work properly when they share a name attribute.
      // People might assume we take care of that for them, because
      // they already set a shared "x-model" attribute.
      if (!el.hasAttribute('name')) el.setAttribute('name', expression);
    }

    return (event, currentValue) => {
      // Check for event.detail due to an issue where IE11 handles other events as a CustomEvent.
      if (event instanceof CustomEvent && event.detail) {
        return event.detail;
      } else if (el.type === 'checkbox') {
        // If the data we are binding to is an array, toggle its value inside the array.
        if (Array.isArray(currentValue)) {
          const newValue = modifiers.includes('number') ? safeParseNumber(event.target.value) : event.target.value;
          return event.target.checked ? currentValue.concat([newValue]) : currentValue.filter(el => !checkedAttrLooseCompare(el, newValue));
        } else {
          return event.target.checked;
        }
      } else if (el.tagName.toLowerCase() === 'select' && el.multiple) {
        return modifiers.includes('number') ? Array.from(event.target.selectedOptions).map(option => {
          const rawValue = option.value || option.text;
          return safeParseNumber(rawValue);
        }) : Array.from(event.target.selectedOptions).map(option => {
          return option.value || option.text;
        });
      } else {
        const rawValue = event.target.value;
        return modifiers.includes('number') ? safeParseNumber(rawValue) : modifiers.includes('trim') ? rawValue.trim() : rawValue;
      }
    };
  }

  function safeParseNumber(rawValue) {
    const number = rawValue ? parseFloat(rawValue) : null;
    return isNumeric(number) ? number : rawValue;
  }

  /**
   * Copyright (C) 2017 salesforce.com, inc.
   */
  const { isArray } = Array;
  const { getPrototypeOf, create: ObjectCreate, defineProperty: ObjectDefineProperty, defineProperties: ObjectDefineProperties, isExtensible, getOwnPropertyDescriptor, getOwnPropertyNames, getOwnPropertySymbols, preventExtensions, hasOwnProperty, } = Object;
  const { push: ArrayPush, concat: ArrayConcat, map: ArrayMap, } = Array.prototype;
  function isUndefined(obj) {
      return obj === undefined;
  }
  function isFunction(obj) {
      return typeof obj === 'function';
  }
  function isObject(obj) {
      return typeof obj === 'object';
  }
  const proxyToValueMap = new WeakMap();
  function registerProxy(proxy, value) {
      proxyToValueMap.set(proxy, value);
  }
  const unwrap = (replicaOrAny) => proxyToValueMap.get(replicaOrAny) || replicaOrAny;

  function wrapValue(membrane, value) {
      return membrane.valueIsObservable(value) ? membrane.getProxy(value) : value;
  }
  /**
   * Unwrap property descriptors will set value on original descriptor
   * We only need to unwrap if value is specified
   * @param descriptor external descrpitor provided to define new property on original value
   */
  function unwrapDescriptor(descriptor) {
      if (hasOwnProperty.call(descriptor, 'value')) {
          descriptor.value = unwrap(descriptor.value);
      }
      return descriptor;
  }
  function lockShadowTarget(membrane, shadowTarget, originalTarget) {
      const targetKeys = ArrayConcat.call(getOwnPropertyNames(originalTarget), getOwnPropertySymbols(originalTarget));
      targetKeys.forEach((key) => {
          let descriptor = getOwnPropertyDescriptor(originalTarget, key);
          // We do not need to wrap the descriptor if configurable
          // Because we can deal with wrapping it when user goes through
          // Get own property descriptor. There is also a chance that this descriptor
          // could change sometime in the future, so we can defer wrapping
          // until we need to
          if (!descriptor.configurable) {
              descriptor = wrapDescriptor(membrane, descriptor, wrapValue);
          }
          ObjectDefineProperty(shadowTarget, key, descriptor);
      });
      preventExtensions(shadowTarget);
  }
  class ReactiveProxyHandler {
      constructor(membrane, value) {
          this.originalTarget = value;
          this.membrane = membrane;
      }
      get(shadowTarget, key) {
          const { originalTarget, membrane } = this;
          const value = originalTarget[key];
          const { valueObserved } = membrane;
          valueObserved(originalTarget, key);
          return membrane.getProxy(value);
      }
      set(shadowTarget, key, value) {
          const { originalTarget, membrane: { valueMutated } } = this;
          const oldValue = originalTarget[key];
          if (oldValue !== value) {
              originalTarget[key] = value;
              valueMutated(originalTarget, key);
          }
          else if (key === 'length' && isArray(originalTarget)) {
              // fix for issue #236: push will add the new index, and by the time length
              // is updated, the internal length is already equal to the new length value
              // therefore, the oldValue is equal to the value. This is the forking logic
              // to support this use case.
              valueMutated(originalTarget, key);
          }
          return true;
      }
      deleteProperty(shadowTarget, key) {
          const { originalTarget, membrane: { valueMutated } } = this;
          delete originalTarget[key];
          valueMutated(originalTarget, key);
          return true;
      }
      apply(shadowTarget, thisArg, argArray) {
          /* No op */
      }
      construct(target, argArray, newTarget) {
          /* No op */
      }
      has(shadowTarget, key) {
          const { originalTarget, membrane: { valueObserved } } = this;
          valueObserved(originalTarget, key);
          return key in originalTarget;
      }
      ownKeys(shadowTarget) {
          const { originalTarget } = this;
          return ArrayConcat.call(getOwnPropertyNames(originalTarget), getOwnPropertySymbols(originalTarget));
      }
      isExtensible(shadowTarget) {
          const shadowIsExtensible = isExtensible(shadowTarget);
          if (!shadowIsExtensible) {
              return shadowIsExtensible;
          }
          const { originalTarget, membrane } = this;
          const targetIsExtensible = isExtensible(originalTarget);
          if (!targetIsExtensible) {
              lockShadowTarget(membrane, shadowTarget, originalTarget);
          }
          return targetIsExtensible;
      }
      setPrototypeOf(shadowTarget, prototype) {
      }
      getPrototypeOf(shadowTarget) {
          const { originalTarget } = this;
          return getPrototypeOf(originalTarget);
      }
      getOwnPropertyDescriptor(shadowTarget, key) {
          const { originalTarget, membrane } = this;
          const { valueObserved } = this.membrane;
          // keys looked up via hasOwnProperty need to be reactive
          valueObserved(originalTarget, key);
          let desc = getOwnPropertyDescriptor(originalTarget, key);
          if (isUndefined(desc)) {
              return desc;
          }
          const shadowDescriptor = getOwnPropertyDescriptor(shadowTarget, key);
          if (!isUndefined(shadowDescriptor)) {
              return shadowDescriptor;
          }
          // Note: by accessing the descriptor, the key is marked as observed
          // but access to the value, setter or getter (if available) cannot observe
          // mutations, just like regular methods, in which case we just do nothing.
          desc = wrapDescriptor(membrane, desc, wrapValue);
          if (!desc.configurable) {
              // If descriptor from original target is not configurable,
              // We must copy the wrapped descriptor over to the shadow target.
              // Otherwise, proxy will throw an invariant error.
              // This is our last chance to lock the value.
              // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor#Invariants
              ObjectDefineProperty(shadowTarget, key, desc);
          }
          return desc;
      }
      preventExtensions(shadowTarget) {
          const { originalTarget, membrane } = this;
          lockShadowTarget(membrane, shadowTarget, originalTarget);
          preventExtensions(originalTarget);
          return true;
      }
      defineProperty(shadowTarget, key, descriptor) {
          const { originalTarget, membrane } = this;
          const { valueMutated } = membrane;
          const { configurable } = descriptor;
          // We have to check for value in descriptor
          // because Object.freeze(proxy) calls this method
          // with only { configurable: false, writeable: false }
          // Additionally, method will only be called with writeable:false
          // if the descriptor has a value, as opposed to getter/setter
          // So we can just check if writable is present and then see if
          // value is present. This eliminates getter and setter descriptors
          if (hasOwnProperty.call(descriptor, 'writable') && !hasOwnProperty.call(descriptor, 'value')) {
              const originalDescriptor = getOwnPropertyDescriptor(originalTarget, key);
              descriptor.value = originalDescriptor.value;
          }
          ObjectDefineProperty(originalTarget, key, unwrapDescriptor(descriptor));
          if (configurable === false) {
              ObjectDefineProperty(shadowTarget, key, wrapDescriptor(membrane, descriptor, wrapValue));
          }
          valueMutated(originalTarget, key);
          return true;
      }
  }

  function wrapReadOnlyValue(membrane, value) {
      return membrane.valueIsObservable(value) ? membrane.getReadOnlyProxy(value) : value;
  }
  class ReadOnlyHandler {
      constructor(membrane, value) {
          this.originalTarget = value;
          this.membrane = membrane;
      }
      get(shadowTarget, key) {
          const { membrane, originalTarget } = this;
          const value = originalTarget[key];
          const { valueObserved } = membrane;
          valueObserved(originalTarget, key);
          return membrane.getReadOnlyProxy(value);
      }
      set(shadowTarget, key, value) {
          return false;
      }
      deleteProperty(shadowTarget, key) {
          return false;
      }
      apply(shadowTarget, thisArg, argArray) {
          /* No op */
      }
      construct(target, argArray, newTarget) {
          /* No op */
      }
      has(shadowTarget, key) {
          const { originalTarget, membrane: { valueObserved } } = this;
          valueObserved(originalTarget, key);
          return key in originalTarget;
      }
      ownKeys(shadowTarget) {
          const { originalTarget } = this;
          return ArrayConcat.call(getOwnPropertyNames(originalTarget), getOwnPropertySymbols(originalTarget));
      }
      setPrototypeOf(shadowTarget, prototype) {
      }
      getOwnPropertyDescriptor(shadowTarget, key) {
          const { originalTarget, membrane } = this;
          const { valueObserved } = membrane;
          // keys looked up via hasOwnProperty need to be reactive
          valueObserved(originalTarget, key);
          let desc = getOwnPropertyDescriptor(originalTarget, key);
          if (isUndefined(desc)) {
              return desc;
          }
          const shadowDescriptor = getOwnPropertyDescriptor(shadowTarget, key);
          if (!isUndefined(shadowDescriptor)) {
              return shadowDescriptor;
          }
          // Note: by accessing the descriptor, the key is marked as observed
          // but access to the value or getter (if available) cannot be observed,
          // just like regular methods, in which case we just do nothing.
          desc = wrapDescriptor(membrane, desc, wrapReadOnlyValue);
          if (hasOwnProperty.call(desc, 'set')) {
              desc.set = undefined; // readOnly membrane does not allow setters
          }
          if (!desc.configurable) {
              // If descriptor from original target is not configurable,
              // We must copy the wrapped descriptor over to the shadow target.
              // Otherwise, proxy will throw an invariant error.
              // This is our last chance to lock the value.
              // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor#Invariants
              ObjectDefineProperty(shadowTarget, key, desc);
          }
          return desc;
      }
      preventExtensions(shadowTarget) {
          return false;
      }
      defineProperty(shadowTarget, key, descriptor) {
          return false;
      }
  }
  function createShadowTarget(value) {
      let shadowTarget = undefined;
      if (isArray(value)) {
          shadowTarget = [];
      }
      else if (isObject(value)) {
          shadowTarget = {};
      }
      return shadowTarget;
  }
  const ObjectDotPrototype = Object.prototype;
  function defaultValueIsObservable(value) {
      // intentionally checking for null
      if (value === null) {
          return false;
      }
      // treat all non-object types, including undefined, as non-observable values
      if (typeof value !== 'object') {
          return false;
      }
      if (isArray(value)) {
          return true;
      }
      const proto = getPrototypeOf(value);
      return (proto === ObjectDotPrototype || proto === null || getPrototypeOf(proto) === null);
  }
  const defaultValueObserved = (obj, key) => {
      /* do nothing */
  };
  const defaultValueMutated = (obj, key) => {
      /* do nothing */
  };
  const defaultValueDistortion = (value) => value;
  function wrapDescriptor(membrane, descriptor, getValue) {
      const { set, get } = descriptor;
      if (hasOwnProperty.call(descriptor, 'value')) {
          descriptor.value = getValue(membrane, descriptor.value);
      }
      else {
          if (!isUndefined(get)) {
              descriptor.get = function () {
                  // invoking the original getter with the original target
                  return getValue(membrane, get.call(unwrap(this)));
              };
          }
          if (!isUndefined(set)) {
              descriptor.set = function (value) {
                  // At this point we don't have a clear indication of whether
                  // or not a valid mutation will occur, we don't have the key,
                  // and we are not sure why and how they are invoking this setter.
                  // Nevertheless we preserve the original semantics by invoking the
                  // original setter with the original target and the unwrapped value
                  set.call(unwrap(this), membrane.unwrapProxy(value));
              };
          }
      }
      return descriptor;
  }
  class ReactiveMembrane {
      constructor(options) {
          this.valueDistortion = defaultValueDistortion;
          this.valueMutated = defaultValueMutated;
          this.valueObserved = defaultValueObserved;
          this.valueIsObservable = defaultValueIsObservable;
          this.objectGraph = new WeakMap();
          if (!isUndefined(options)) {
              const { valueDistortion, valueMutated, valueObserved, valueIsObservable } = options;
              this.valueDistortion = isFunction(valueDistortion) ? valueDistortion : defaultValueDistortion;
              this.valueMutated = isFunction(valueMutated) ? valueMutated : defaultValueMutated;
              this.valueObserved = isFunction(valueObserved) ? valueObserved : defaultValueObserved;
              this.valueIsObservable = isFunction(valueIsObservable) ? valueIsObservable : defaultValueIsObservable;
          }
      }
      getProxy(value) {
          const unwrappedValue = unwrap(value);
          const distorted = this.valueDistortion(unwrappedValue);
          if (this.valueIsObservable(distorted)) {
              const o = this.getReactiveState(unwrappedValue, distorted);
              // when trying to extract the writable version of a readonly
              // we return the readonly.
              return o.readOnly === value ? value : o.reactive;
          }
          return distorted;
      }
      getReadOnlyProxy(value) {
          value = unwrap(value);
          const distorted = this.valueDistortion(value);
          if (this.valueIsObservable(distorted)) {
              return this.getReactiveState(value, distorted).readOnly;
          }
          return distorted;
      }
      unwrapProxy(p) {
          return unwrap(p);
      }
      getReactiveState(value, distortedValue) {
          const { objectGraph, } = this;
          let reactiveState = objectGraph.get(distortedValue);
          if (reactiveState) {
              return reactiveState;
          }
          const membrane = this;
          reactiveState = {
              get reactive() {
                  const reactiveHandler = new ReactiveProxyHandler(membrane, distortedValue);
                  // caching the reactive proxy after the first time it is accessed
                  const proxy = new Proxy(createShadowTarget(distortedValue), reactiveHandler);
                  registerProxy(proxy, value);
                  ObjectDefineProperty(this, 'reactive', { value: proxy });
                  return proxy;
              },
              get readOnly() {
                  const readOnlyHandler = new ReadOnlyHandler(membrane, distortedValue);
                  // caching the readOnly proxy after the first time it is accessed
                  const proxy = new Proxy(createShadowTarget(distortedValue), readOnlyHandler);
                  registerProxy(proxy, value);
                  ObjectDefineProperty(this, 'readOnly', { value: proxy });
                  return proxy;
              }
          };
          objectGraph.set(distortedValue, reactiveState);
          return reactiveState;
      }
  }
  /** version: 0.26.0 */

  function wrap(data, mutationCallback) {

    let membrane = new ReactiveMembrane({
      valueMutated(target, key) {
        mutationCallback(target, key);
      }

    });
    return {
      data: membrane.getProxy(data),
      membrane: membrane
    };
  }
  function unwrap$1(membrane, observable) {
    let unwrappedData = membrane.unwrapProxy(observable);
    let copy = {};
    Object.keys(unwrappedData).forEach(key => {
      if (['$el', '$refs', '$nextTick', '$watch'].includes(key)) return;
      copy[key] = unwrappedData[key];
    });
    return copy;
  }

  class Component {
    constructor(el, componentForClone = null) {
      this.$el = el;
      const dataAttr = this.$el.getAttribute('x-data');
      const dataExpression = dataAttr === '' ? '{}' : dataAttr;
      const initExpression = this.$el.getAttribute('x-init');
      let dataExtras = {
        $el: this.$el
      };
      let canonicalComponentElementReference = componentForClone ? componentForClone.$el : this.$el;
      Object.entries(Alpine.magicProperties).forEach(([name, callback]) => {
        Object.defineProperty(dataExtras, `$${name}`, {
          get: function get() {
            return callback(canonicalComponentElementReference);
          }
        });
      });
      this.unobservedData = componentForClone ? componentForClone.getUnobservedData() : saferEval(el, dataExpression, dataExtras);
      // Construct a Proxy-based observable. This will be used to handle reactivity.

      let {
        membrane,
        data
      } = this.wrapDataInObservable(this.unobservedData);
      this.$data = data;
      this.membrane = membrane; // After making user-supplied data methods reactive, we can now add
      // our magic properties to the original data for access.

      this.unobservedData.$el = this.$el;
      this.unobservedData.$refs = this.getRefsProxy();
      this.nextTickStack = [];

      this.unobservedData.$nextTick = callback => {
        this.nextTickStack.push(callback);
      };

      this.watchers = {};

      this.unobservedData.$watch = (property, callback) => {
        if (!this.watchers[property]) this.watchers[property] = [];
        this.watchers[property].push(callback);
      };
      /* MODERN-ONLY:START */
      // We remove this piece of code from the legacy build.
      // In IE11, we have already defined our helpers at this point.
      // Register custom magic properties.


      Object.entries(Alpine.magicProperties).forEach(([name, callback]) => {
        Object.defineProperty(this.unobservedData, `$${name}`, {
          get: function get() {
            return callback(canonicalComponentElementReference, this.$el);
          }
        });
      });
      /* MODERN-ONLY:END */

      this.showDirectiveStack = [];
      this.showDirectiveLastElement;
      componentForClone || Alpine.onBeforeComponentInitializeds.forEach(callback => callback(this));
      var initReturnedCallback; // If x-init is present AND we aren't cloning (skip x-init on clone)

      if (initExpression && !componentForClone) {
        // We want to allow data manipulation, but not trigger DOM updates just yet.
        // We haven't even initialized the elements with their Alpine bindings. I mean c'mon.
        this.pauseReactivity = true;
        initReturnedCallback = this.evaluateReturnExpression(this.$el, initExpression);
        this.pauseReactivity = false;
      } // Register all our listeners and set all our attribute bindings.
      // If we're cloning a component, the third parameter ensures no duplicate
      // event listeners are registered (the mutation observer will take care of them)


      this.initializeElements(this.$el, () => {}, componentForClone); // Use mutation observer to detect new elements being added within this component at run-time.
      // Alpine's just so darn flexible amirite?

      this.listenForNewElementsToInitialize();

      if (typeof initReturnedCallback === 'function') {
        // Run the callback returned from the "x-init" hook to allow the user to do stuff after
        // Alpine's got it's grubby little paws all over everything.
        initReturnedCallback.call(this.$data);
      }

      componentForClone || setTimeout(() => {
        Alpine.onComponentInitializeds.forEach(callback => callback(this));
      }, 0);
    }

    getUnobservedData() {
      return unwrap$1(this.membrane, this.$data);
    }

    wrapDataInObservable(data) {
      var self = this;
      let updateDom = debounce(function () {
        self.updateElements(self.$el);
      }, 0);
      return wrap(data, (target, key) => {
        if (self.watchers[key]) {
          // If there's a watcher for this specific key, run it.
          self.watchers[key].forEach(callback => callback(target[key]));
        } else if (Array.isArray(target)) {
          // Arrays are special cases, if any of the items change, we consider the array as mutated.
          Object.keys(self.watchers).forEach(fullDotNotationKey => {
            let dotNotationParts = fullDotNotationKey.split('.'); // Ignore length mutations since they would result in duplicate calls.
            // For example, when calling push, we would get a mutation for the item's key
            // and a second mutation for the length property.

            if (key === 'length') return;
            dotNotationParts.reduce((comparisonData, part) => {
              if (Object.is(target, comparisonData[part])) {
                self.watchers[fullDotNotationKey].forEach(callback => callback(target));
              }

              return comparisonData[part];
            }, self.unobservedData);
          });
        } else {
          // Let's walk through the watchers with "dot-notation" (foo.bar) and see
          // if this mutation fits any of them.
          Object.keys(self.watchers).filter(i => i.includes('.')).forEach(fullDotNotationKey => {
            let dotNotationParts = fullDotNotationKey.split('.'); // If this dot-notation watcher's last "part" doesn't match the current
            // key, then skip it early for performance reasons.

            if (key !== dotNotationParts[dotNotationParts.length - 1]) return; // Now, walk through the dot-notation "parts" recursively to find
            // a match, and call the watcher if one's found.

            dotNotationParts.reduce((comparisonData, part) => {
              if (Object.is(target, comparisonData)) {
                // Run the watchers.
                self.watchers[fullDotNotationKey].forEach(callback => callback(target[key]));
              }

              return comparisonData[part];
            }, self.unobservedData);
          });
        } // Don't react to data changes for cases like the `x-created` hook.


        if (self.pauseReactivity) return;
        updateDom();
      });
    }

    walkAndSkipNestedComponents(el, callback, initializeComponentCallback = () => {}) {
      walk(el, el => {
        // We've hit a component.
        if (el.hasAttribute('x-data')) {
          // If it's not the current one.
          if (!el.isSameNode(this.$el)) {
            // Initialize it if it's not.
            if (!el.__x) initializeComponentCallback(el); // Now we'll let that sub-component deal with itself.

            return false;
          }
        }

        return callback(el);
      });
    }

    initializeElements(rootEl, extraVars = () => {}, componentForClone = false) {
      this.walkAndSkipNestedComponents(rootEl, el => {
        // Don't touch spawns from for loop
        if (el.__x_for_key !== undefined) return false; // Don't touch spawns from if directives

        if (el.__x_inserted_me !== undefined) return false;
        this.initializeElement(el, extraVars, componentForClone ? false : true);
      }, el => {
        if (!componentForClone) el.__x = new Component(el);
      });
      this.executeAndClearRemainingShowDirectiveStack();
      this.executeAndClearNextTickStack(rootEl);
    }

    initializeElement(el, extraVars, shouldRegisterListeners = true) {
      // To support class attribute merging, we have to know what the element's
      // original class attribute looked like for reference.
      if (el.hasAttribute('class') && getXAttrs(el, this).length > 0) {
        el.__x_original_classes = convertClassStringToArray(el.getAttribute('class'));
      }

      shouldRegisterListeners && this.registerListeners(el, extraVars);
      this.resolveBoundAttributes(el, true, extraVars);
    }

    updateElements(rootEl, extraVars = () => {}) {
      this.walkAndSkipNestedComponents(rootEl, el => {
        // Don't touch spawns from for loop (and check if the root is actually a for loop in a parent, don't skip it.)
        if (el.__x_for_key !== undefined && !el.isSameNode(this.$el)) return false;
        this.updateElement(el, extraVars);
      }, el => {
        el.__x = new Component(el);
      });
      this.executeAndClearRemainingShowDirectiveStack();
      this.executeAndClearNextTickStack(rootEl);
    }

    executeAndClearNextTickStack(el) {
      // Skip spawns from alpine directives
      if (el === this.$el && this.nextTickStack.length > 0) {
        // We run the tick stack after the next frame to allow any
        // running transitions to pass the initial show stage.
        requestAnimationFrame(() => {
          while (this.nextTickStack.length > 0) {
            this.nextTickStack.shift()();
          }
        });
      }
    }

    executeAndClearRemainingShowDirectiveStack() {
      // The goal here is to start all the x-show transitions
      // and build a nested promise chain so that elements
      // only hide when the children are finished hiding.
      this.showDirectiveStack.reverse().map(handler => {
        return new Promise((resolve, reject) => {
          handler(resolve, reject);
        });
      }).reduce((promiseChain, promise) => {
        return promiseChain.then(() => {
          return promise.then(finishElement => {
            finishElement();
          });
        });
      }, Promise.resolve(() => {})).catch(e => {
        if (e !== TRANSITION_CANCELLED) throw e;
      }); // We've processed the handler stack. let's clear it.

      this.showDirectiveStack = [];
      this.showDirectiveLastElement = undefined;
    }

    updateElement(el, extraVars) {
      this.resolveBoundAttributes(el, false, extraVars);
    }

    registerListeners(el, extraVars) {
      getXAttrs(el, this).forEach(({
        type,
        value,
        modifiers,
        expression
      }) => {
        switch (type) {
          case 'on':
            registerListener(this, el, value, modifiers, expression, extraVars);
            break;

          case 'model':
            registerModelListener(this, el, modifiers, expression, extraVars);
            break;
        }
      });
    }

    resolveBoundAttributes(el, initialUpdate = false, extraVars) {
      let attrs = getXAttrs(el, this);
      attrs.forEach(({
        type,
        value,
        modifiers,
        expression
      }) => {
        switch (type) {
          case 'model':
            handleAttributeBindingDirective(this, el, 'value', expression, extraVars, type, modifiers);
            break;

          case 'bind':
            // The :key binding on an x-for is special, ignore it.
            if (el.tagName.toLowerCase() === 'template' && value === 'key') return;
            handleAttributeBindingDirective(this, el, value, expression, extraVars, type, modifiers);
            break;

          case 'text':
            var output = this.evaluateReturnExpression(el, expression, extraVars);
            handleTextDirective(el, output, expression);
            break;

          case 'html':
            handleHtmlDirective(this, el, expression, extraVars);
            break;

          case 'show':
            var output = this.evaluateReturnExpression(el, expression, extraVars);
            handleShowDirective(this, el, output, modifiers, initialUpdate);
            break;

          case 'if':
            // If this element also has x-for on it, don't process x-if.
            // We will let the "x-for" directive handle the "if"ing.
            if (attrs.some(i => i.type === 'for')) return;
            var output = this.evaluateReturnExpression(el, expression, extraVars);
            handleIfDirective(this, el, output, initialUpdate, extraVars);
            break;

          case 'for':
            handleForDirective(this, el, expression, initialUpdate, extraVars);
            break;

          case 'cloak':
            el.removeAttribute('x-cloak');
            break;
        }
      });
    }

    evaluateReturnExpression(el, expression, extraVars = () => {}) {
      return saferEval(el, expression, this.$data, _objectSpread2(_objectSpread2({}, extraVars()), {}, {
        $dispatch: this.getDispatchFunction(el)
      }));
    }

    evaluateCommandExpression(el, expression, extraVars = () => {}) {
      return saferEvalNoReturn(el, expression, this.$data, _objectSpread2(_objectSpread2({}, extraVars()), {}, {
        $dispatch: this.getDispatchFunction(el)
      }));
    }

    getDispatchFunction(el) {
      return (event, detail = {}) => {
        el.dispatchEvent(new CustomEvent(event, {
          detail,
          bubbles: true
        }));
      };
    }

    listenForNewElementsToInitialize() {
      const targetNode = this.$el;
      const observerOptions = {
        childList: true,
        attributes: true,
        subtree: true
      };
      const observer = new MutationObserver(mutations => {
        for (let i = 0; i < mutations.length; i++) {
          // Filter out mutations triggered from child components.
          const closestParentComponent = mutations[i].target.closest('[x-data]');
          if (!(closestParentComponent && closestParentComponent.isSameNode(this.$el))) continue;

          if (mutations[i].type === 'attributes' && mutations[i].attributeName === 'x-data') {
            const xAttr = mutations[i].target.getAttribute('x-data') || '{}';
            const rawData = saferEval(this.$el, xAttr, {
              $el: this.$el
            });
            Object.keys(rawData).forEach(key => {
              if (this.$data[key] !== rawData[key]) {
                this.$data[key] = rawData[key];
              }
            });
          }

          if (mutations[i].addedNodes.length > 0) {
            mutations[i].addedNodes.forEach(node => {
              if (node.nodeType !== 1 || node.__x_inserted_me) return;

              if (node.matches('[x-data]') && !node.__x) {
                node.__x = new Component(node);
                return;
              }

              this.initializeElements(node);
            });
          }
        }
      });
      observer.observe(targetNode, observerOptions);
    }

    getRefsProxy() {
      var self = this;
      var refObj = {};
      // One of the goals of this is to not hold elements in memory, but rather re-evaluate
      // the DOM when the system needs something from it. This way, the framework is flexible and
      // friendly to outside DOM changes from libraries like Vue/Livewire.
      // For this reason, I'm using an "on-demand" proxy to fake a "$refs" object.

      return new Proxy(refObj, {
        get(object, property) {
          if (property === '$isAlpineProxy') return true;
          var ref; // We can't just query the DOM because it's hard to filter out refs in
          // nested components.

          self.walkAndSkipNestedComponents(self.$el, el => {
            if (el.hasAttribute('x-ref') && el.getAttribute('x-ref') === property) {
              ref = el;
            }
          });
          return ref;
        }

      });
    }

  }

  const Alpine = {
    version: "2.8.2",
    pauseMutationObserver: false,
    magicProperties: {},
    onComponentInitializeds: [],
    onBeforeComponentInitializeds: [],
    ignoreFocusedForValueBinding: false,
    start: async function start() {
      if (!isTesting()) {
        await domReady();
      }

      this.discoverComponents(el => {
        this.initializeComponent(el);
      }); // It's easier and more performant to just support Turbolinks than listen
      // to MutationObserver mutations at the document level.

      document.addEventListener("turbolinks:load", () => {
        this.discoverUninitializedComponents(el => {
          this.initializeComponent(el);
        });
      });
      this.listenForNewUninitializedComponentsAtRunTime();
    },
    discoverComponents: function discoverComponents(callback) {
      const rootEls = document.querySelectorAll('[x-data]');
      rootEls.forEach(rootEl => {
        callback(rootEl);
      });
    },
    discoverUninitializedComponents: function discoverUninitializedComponents(callback, el = null) {
      const rootEls = (el || document).querySelectorAll('[x-data]');
      Array.from(rootEls).filter(el => el.__x === undefined).forEach(rootEl => {
        callback(rootEl);
      });
    },
    listenForNewUninitializedComponentsAtRunTime: function listenForNewUninitializedComponentsAtRunTime() {
      const targetNode = document.querySelector('body');
      const observerOptions = {
        childList: true,
        attributes: true,
        subtree: true
      };
      const observer = new MutationObserver(mutations => {
        if (this.pauseMutationObserver) return;

        for (let i = 0; i < mutations.length; i++) {
          if (mutations[i].addedNodes.length > 0) {
            mutations[i].addedNodes.forEach(node => {
              // Discard non-element nodes (like line-breaks)
              if (node.nodeType !== 1) return; // Discard any changes happening within an existing component.
              // They will take care of themselves.

              if (node.parentElement && node.parentElement.closest('[x-data]')) return;
              this.discoverUninitializedComponents(el => {
                this.initializeComponent(el);
              }, node.parentElement);
            });
          }
        }
      });
      observer.observe(targetNode, observerOptions);
    },
    initializeComponent: function initializeComponent(el) {
      if (!el.__x) {
        // Wrap in a try/catch so that we don't prevent other components
        // from initializing when one component contains an error.
        try {
          el.__x = new Component(el);
        } catch (error) {
          setTimeout(() => {
            throw error;
          }, 0);
        }
      }
    },
    clone: function clone(component, newEl) {
      if (!newEl.__x) {
        newEl.__x = new Component(newEl, component);
      }
    },
    addMagicProperty: function addMagicProperty(name, callback) {
      this.magicProperties[name] = callback;
    },
    onComponentInitialized: function onComponentInitialized(callback) {
      this.onComponentInitializeds.push(callback);
    },
    onBeforeComponentInitialized: function onBeforeComponentInitialized(callback) {
      this.onBeforeComponentInitializeds.push(callback);
    }
  };

  if (!isTesting()) {
    window.Alpine = Alpine;

    if (window.deferLoadingAlpine) {
      window.deferLoadingAlpine(function () {
        window.Alpine.start();
      });
    } else {
      window.Alpine.start();
    }
  }

  return Alpine;

})));


/***/ }),

/***/ "./resources/js/src/AppServiceProvider.js":
/*!************************************************!*\
  !*** ./resources/js/src/AppServiceProvider.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AppServiceProvider": () => (/* binding */ AppServiceProvider)
/* harmony export */ });
/* harmony import */ var _laravel_streams_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @laravel-streams/core */ "./node_modules/@laravel-streams/core/resources/public/js/index.esm.js");


class AppServiceProvider extends _laravel_streams_core__WEBPACK_IMPORTED_MODULE_0__.ServiceProvider {

    register() {
        //
    }

    boot() {
        //
    }
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*****************************!*\
  !*** ./resources/js/app.js ***!
  \*****************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AppServiceProvider": () => (/* reexport safe */ _src_AppServiceProvider__WEBPACK_IMPORTED_MODULE_0__.AppServiceProvider),
/* harmony export */   "test": () => (/* binding */ test)
/* harmony export */ });
/* harmony import */ var _src_AppServiceProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/AppServiceProvider */ "./resources/js/src/AppServiceProvider.js");
/* harmony import */ var alpinejs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! alpinejs */ "./node_modules/alpinejs/dist/alpine.js");
/* harmony import */ var alpinejs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(alpinejs__WEBPACK_IMPORTED_MODULE_1__);




const test = true;



})();

window.app = __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2pzL2FwcC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7OztBQ0RBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQzU1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNQQTs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RyZWFtcy5kZXYvLi9ub2RlX21vZHVsZXMvQGxhcmF2ZWwtc3RyZWFtcy9jb3JlL3Jlc291cmNlcy9wdWJsaWMvanMvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3N0cmVhbXMuZGV2Ly4vbm9kZV9tb2R1bGVzL2FscGluZWpzL2Rpc3QvYWxwaW5lLmpzIiwid2VicGFjazovL3N0cmVhbXMuZGV2Ly4vcmVzb3VyY2VzL2pzL3NyYy9BcHBTZXJ2aWNlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vc3RyZWFtcy5kZXYvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3RyZWFtcy5kZXYvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vc3RyZWFtcy5kZXYvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3N0cmVhbXMuZGV2L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc3RyZWFtcy5kZXYvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9zdHJlYW1zLmRldi8uL3Jlc291cmNlcy9qcy9hcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIEZvciBsaWNlbnNlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUgaW5kZXguZXNtLmpzLkxJQ0VOU0UudHh0ICovXG52YXIgdD17Nzc1NzoodCxyLG8pPT57dC5leHBvcnRzPW8oNTY2Nil9LDk2Njk6KHQscixvKT0+e3QuZXhwb3J0cz1vKDE2MDkpfSw1NDQ4Oih0LHIsbyk9Pnt2YXIgaT1vKDQ4NjcpLGE9byg2MDI2KSxjPW8oNDM3MiksdT1vKDUzMjcpLGw9byg0MDk3KSxwPW8oNDEwOSksZD1vKDc5ODUpLGg9byg1MDYxKTt0LmV4cG9ydHM9ZnVuY3Rpb24geGhyQWRhcHRlcih0KXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyLG8pe3ZhciB5PXQuZGF0YSx2PXQuaGVhZGVycyxnPXQucmVzcG9uc2VUeXBlO2kuaXNGb3JtRGF0YSh5KSYmZGVsZXRlIHZbXCJDb250ZW50LVR5cGVcIl07dmFyIF89bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKHQuYXV0aCl7dmFyIG09dC5hdXRoLnVzZXJuYW1lfHxcIlwiLGI9dC5hdXRoLnBhc3N3b3JkP3VuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudCh0LmF1dGgucGFzc3dvcmQpKTpcIlwiO3YuQXV0aG9yaXphdGlvbj1cIkJhc2ljIFwiK2J0b2EobStcIjpcIitiKX12YXIgdz1sKHQuYmFzZVVSTCx0LnVybCk7ZnVuY3Rpb24gb25sb2FkZW5kKCl7aWYoXyl7dmFyIGk9XCJnZXRBbGxSZXNwb25zZUhlYWRlcnNcImluIF8/cChfLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTpudWxsLGM9e2RhdGE6ZyYmXCJ0ZXh0XCIhPT1nJiZcImpzb25cIiE9PWc/Xy5yZXNwb25zZTpfLnJlc3BvbnNlVGV4dCxzdGF0dXM6Xy5zdGF0dXMsc3RhdHVzVGV4dDpfLnN0YXR1c1RleHQsaGVhZGVyczppLGNvbmZpZzp0LHJlcXVlc3Q6X307YShyLG8sYyksXz1udWxsfX1pZihfLm9wZW4odC5tZXRob2QudG9VcHBlckNhc2UoKSx1KHcsdC5wYXJhbXMsdC5wYXJhbXNTZXJpYWxpemVyKSwhMCksXy50aW1lb3V0PXQudGltZW91dCxcIm9ubG9hZGVuZFwiaW4gXz9fLm9ubG9hZGVuZD1vbmxvYWRlbmQ6Xy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24gaGFuZGxlTG9hZCgpe18mJjQ9PT1fLnJlYWR5U3RhdGUmJigwIT09Xy5zdGF0dXN8fF8ucmVzcG9uc2VVUkwmJjA9PT1fLnJlc3BvbnNlVVJMLmluZGV4T2YoXCJmaWxlOlwiKSkmJnNldFRpbWVvdXQob25sb2FkZW5kKX0sXy5vbmFib3J0PWZ1bmN0aW9uIGhhbmRsZUFib3J0KCl7XyYmKG8oaChcIlJlcXVlc3QgYWJvcnRlZFwiLHQsXCJFQ09OTkFCT1JURURcIixfKSksXz1udWxsKX0sXy5vbmVycm9yPWZ1bmN0aW9uIGhhbmRsZUVycm9yKCl7byhoKFwiTmV0d29yayBFcnJvclwiLHQsbnVsbCxfKSksXz1udWxsfSxfLm9udGltZW91dD1mdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCl7dmFyIHI9XCJ0aW1lb3V0IG9mIFwiK3QudGltZW91dCtcIm1zIGV4Y2VlZGVkXCI7dC50aW1lb3V0RXJyb3JNZXNzYWdlJiYocj10LnRpbWVvdXRFcnJvck1lc3NhZ2UpLG8oaChyLHQsdC50cmFuc2l0aW9uYWwmJnQudHJhbnNpdGlvbmFsLmNsYXJpZnlUaW1lb3V0RXJyb3I/XCJFVElNRURPVVRcIjpcIkVDT05OQUJPUlRFRFwiLF8pKSxfPW51bGx9LGkuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSl7dmFyIFM9KHQud2l0aENyZWRlbnRpYWxzfHxkKHcpKSYmdC54c3JmQ29va2llTmFtZT9jLnJlYWQodC54c3JmQ29va2llTmFtZSk6dm9pZCAwO1MmJih2W3QueHNyZkhlYWRlck5hbWVdPVMpfVwic2V0UmVxdWVzdEhlYWRlclwiaW4gXyYmaS5mb3JFYWNoKHYsKGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodCxyKXt2b2lkIDA9PT15JiZcImNvbnRlbnQtdHlwZVwiPT09ci50b0xvd2VyQ2FzZSgpP2RlbGV0ZSB2W3JdOl8uc2V0UmVxdWVzdEhlYWRlcihyLHQpfSkpLGkuaXNVbmRlZmluZWQodC53aXRoQ3JlZGVudGlhbHMpfHwoXy53aXRoQ3JlZGVudGlhbHM9ISF0LndpdGhDcmVkZW50aWFscyksZyYmXCJqc29uXCIhPT1nJiYoXy5yZXNwb25zZVR5cGU9dC5yZXNwb25zZVR5cGUpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQub25Eb3dubG9hZFByb2dyZXNzJiZfLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLHQub25Eb3dubG9hZFByb2dyZXNzKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm9uVXBsb2FkUHJvZ3Jlc3MmJl8udXBsb2FkJiZfLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIix0Lm9uVXBsb2FkUHJvZ3Jlc3MpLHQuY2FuY2VsVG9rZW4mJnQuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKChmdW5jdGlvbiBvbkNhbmNlbGVkKHQpe18mJihfLmFib3J0KCksbyh0KSxfPW51bGwpfSkpLHl8fCh5PW51bGwpLF8uc2VuZCh5KX0pKX19LDE2MDk6KHQscixvKT0+e3ZhciBpPW8oNDg2NyksYT1vKDE4NDkpLGM9bygzMjEpLHU9byg3MTg1KTtmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZSh0KXt2YXIgcj1uZXcgYyh0KSxvPWEoYy5wcm90b3R5cGUucmVxdWVzdCxyKTtyZXR1cm4gaS5leHRlbmQobyxjLnByb3RvdHlwZSxyKSxpLmV4dGVuZChvLHIpLG99dmFyIGw9Y3JlYXRlSW5zdGFuY2Uobyg1NjU1KSk7bC5BeGlvcz1jLGwuY3JlYXRlPWZ1bmN0aW9uIGNyZWF0ZSh0KXtyZXR1cm4gY3JlYXRlSW5zdGFuY2UodShsLmRlZmF1bHRzLHQpKX0sbC5DYW5jZWw9byg1MjYzKSxsLkNhbmNlbFRva2VuPW8oNDk3MiksbC5pc0NhbmNlbD1vKDY1MDIpLGwuYWxsPWZ1bmN0aW9uIGFsbCh0KXtyZXR1cm4gUHJvbWlzZS5hbGwodCl9LGwuc3ByZWFkPW8oODcxMyksbC5pc0F4aW9zRXJyb3I9byg2MjY4KSx0LmV4cG9ydHM9bCx0LmV4cG9ydHMuZGVmYXVsdD1sfSw1MjYzOnQ9PntmdW5jdGlvbiBDYW5jZWwodCl7dGhpcy5tZXNzYWdlPXR9Q2FuY2VsLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbiB0b1N0cmluZygpe3JldHVyblwiQ2FuY2VsXCIrKHRoaXMubWVzc2FnZT9cIjogXCIrdGhpcy5tZXNzYWdlOlwiXCIpfSxDYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX189ITAsdC5leHBvcnRzPUNhbmNlbH0sNDk3MjoodCxyLG8pPT57dmFyIGk9byg1MjYzKTtmdW5jdGlvbiBDYW5jZWxUb2tlbih0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO3ZhciByO3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHQpe3I9dH0pKTt2YXIgbz10aGlzO3QoKGZ1bmN0aW9uIGNhbmNlbCh0KXtvLnJlYXNvbnx8KG8ucmVhc29uPW5ldyBpKHQpLHIoby5yZWFzb24pKX0pKX1DYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZD1mdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCl7aWYodGhpcy5yZWFzb24pdGhyb3cgdGhpcy5yZWFzb259LENhbmNlbFRva2VuLnNvdXJjZT1mdW5jdGlvbiBzb3VyY2UoKXt2YXIgdDtyZXR1cm57dG9rZW46bmV3IENhbmNlbFRva2VuKChmdW5jdGlvbiBleGVjdXRvcihyKXt0PXJ9KSksY2FuY2VsOnR9fSx0LmV4cG9ydHM9Q2FuY2VsVG9rZW59LDY1MDI6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbiBpc0NhbmNlbCh0KXtyZXR1cm4hKCF0fHwhdC5fX0NBTkNFTF9fKX19LDMyMToodCxyLG8pPT57dmFyIGk9byg0ODY3KSxhPW8oNTMyNyksYz1vKDc4MiksdT1vKDM1NzIpLGw9byg3MTg1KSxwPW8oNDg3NSksZD1wLnZhbGlkYXRvcnM7ZnVuY3Rpb24gQXhpb3ModCl7dGhpcy5kZWZhdWx0cz10LHRoaXMuaW50ZXJjZXB0b3JzPXtyZXF1ZXN0Om5ldyBjLHJlc3BvbnNlOm5ldyBjfX1BeGlvcy5wcm90b3R5cGUucmVxdWVzdD1mdW5jdGlvbiByZXF1ZXN0KHQpe1wic3RyaW5nXCI9PXR5cGVvZiB0Pyh0PWFyZ3VtZW50c1sxXXx8e30pLnVybD1hcmd1bWVudHNbMF06dD10fHx7fSwodD1sKHRoaXMuZGVmYXVsdHMsdCkpLm1ldGhvZD90Lm1ldGhvZD10Lm1ldGhvZC50b0xvd2VyQ2FzZSgpOnRoaXMuZGVmYXVsdHMubWV0aG9kP3QubWV0aG9kPXRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk6dC5tZXRob2Q9XCJnZXRcIjt2YXIgcj10LnRyYW5zaXRpb25hbDt2b2lkIDAhPT1yJiZwLmFzc2VydE9wdGlvbnMocix7c2lsZW50SlNPTlBhcnNpbmc6ZC50cmFuc2l0aW9uYWwoZC5ib29sZWFuLFwiMS4wLjBcIiksZm9yY2VkSlNPTlBhcnNpbmc6ZC50cmFuc2l0aW9uYWwoZC5ib29sZWFuLFwiMS4wLjBcIiksY2xhcmlmeVRpbWVvdXRFcnJvcjpkLnRyYW5zaXRpb25hbChkLmJvb2xlYW4sXCIxLjAuMFwiKX0sITEpO3ZhciBvPVtdLGk9ITA7dGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhyKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiByLnJ1bldoZW4mJiExPT09ci5ydW5XaGVuKHQpfHwoaT1pJiZyLnN5bmNocm9ub3VzLG8udW5zaGlmdChyLmZ1bGZpbGxlZCxyLnJlamVjdGVkKSl9KSk7dmFyIGEsYz1bXTtpZih0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnModCl7Yy5wdXNoKHQuZnVsZmlsbGVkLHQucmVqZWN0ZWQpfSkpLCFpKXt2YXIgaD1bdSx2b2lkIDBdO2ZvcihBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShoLG8pLGg9aC5jb25jYXQoYyksYT1Qcm9taXNlLnJlc29sdmUodCk7aC5sZW5ndGg7KWE9YS50aGVuKGguc2hpZnQoKSxoLnNoaWZ0KCkpO3JldHVybiBhfWZvcih2YXIgeT10O28ubGVuZ3RoOyl7dmFyIHY9by5zaGlmdCgpLGc9by5zaGlmdCgpO3RyeXt5PXYoeSl9Y2F0Y2godCl7Zyh0KTticmVha319dHJ5e2E9dSh5KX1jYXRjaCh0KXtyZXR1cm4gUHJvbWlzZS5yZWplY3QodCl9Zm9yKDtjLmxlbmd0aDspYT1hLnRoZW4oYy5zaGlmdCgpLGMuc2hpZnQoKSk7cmV0dXJuIGF9LEF4aW9zLnByb3RvdHlwZS5nZXRVcmk9ZnVuY3Rpb24gZ2V0VXJpKHQpe3JldHVybiB0PWwodGhpcy5kZWZhdWx0cyx0KSxhKHQudXJsLHQucGFyYW1zLHQucGFyYW1zU2VyaWFsaXplcikucmVwbGFjZSgvXlxcPy8sXCJcIil9LGkuZm9yRWFjaChbXCJkZWxldGVcIixcImdldFwiLFwiaGVhZFwiLFwib3B0aW9uc1wiXSwoZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YSh0KXtBeGlvcy5wcm90b3R5cGVbdF09ZnVuY3Rpb24ocixvKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KGwob3x8e30se21ldGhvZDp0LHVybDpyLGRhdGE6KG98fHt9KS5kYXRhfSkpfX0pKSxpLmZvckVhY2goW1wicG9zdFwiLFwicHV0XCIsXCJwYXRjaFwiXSwoZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKHQpe0F4aW9zLnByb3RvdHlwZVt0XT1mdW5jdGlvbihyLG8saSl7cmV0dXJuIHRoaXMucmVxdWVzdChsKGl8fHt9LHttZXRob2Q6dCx1cmw6cixkYXRhOm99KSl9fSkpLHQuZXhwb3J0cz1BeGlvc30sNzgyOih0LHIsbyk9Pnt2YXIgaT1vKDQ4NjcpO2Z1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpe3RoaXMuaGFuZGxlcnM9W119SW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2U9ZnVuY3Rpb24gdXNlKHQscixvKXtyZXR1cm4gdGhpcy5oYW5kbGVycy5wdXNoKHtmdWxmaWxsZWQ6dCxyZWplY3RlZDpyLHN5bmNocm9ub3VzOiEhbyYmby5zeW5jaHJvbm91cyxydW5XaGVuOm8/by5ydW5XaGVuOm51bGx9KSx0aGlzLmhhbmRsZXJzLmxlbmd0aC0xfSxJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0PWZ1bmN0aW9uIGVqZWN0KHQpe3RoaXMuaGFuZGxlcnNbdF0mJih0aGlzLmhhbmRsZXJzW3RdPW51bGwpfSxJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24gZm9yRWFjaCh0KXtpLmZvckVhY2godGhpcy5oYW5kbGVycywoZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIocil7bnVsbCE9PXImJnQocil9KSl9LHQuZXhwb3J0cz1JbnRlcmNlcHRvck1hbmFnZXJ9LDQwOTc6KHQscixvKT0+e3ZhciBpPW8oMTc5MyksYT1vKDczMDMpO3QuZXhwb3J0cz1mdW5jdGlvbiBidWlsZEZ1bGxQYXRoKHQscil7cmV0dXJuIHQmJiFpKHIpP2EodCxyKTpyfX0sNTA2MToodCxyLG8pPT57dmFyIGk9byg0ODEpO3QuZXhwb3J0cz1mdW5jdGlvbiBjcmVhdGVFcnJvcih0LHIsbyxhLGMpe3ZhciB1PW5ldyBFcnJvcih0KTtyZXR1cm4gaSh1LHIsbyxhLGMpfX0sMzU3MjoodCxyLG8pPT57dmFyIGk9byg0ODY3KSxhPW8oODUyNyksYz1vKDY1MDIpLHU9byg1NjU1KTtmdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKHQpe3QuY2FuY2VsVG9rZW4mJnQuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpfXQuZXhwb3J0cz1mdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QodCl7cmV0dXJuIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQodCksdC5oZWFkZXJzPXQuaGVhZGVyc3x8e30sdC5kYXRhPWEuY2FsbCh0LHQuZGF0YSx0LmhlYWRlcnMsdC50cmFuc2Zvcm1SZXF1ZXN0KSx0LmhlYWRlcnM9aS5tZXJnZSh0LmhlYWRlcnMuY29tbW9ufHx7fSx0LmhlYWRlcnNbdC5tZXRob2RdfHx7fSx0LmhlYWRlcnMpLGkuZm9yRWFjaChbXCJkZWxldGVcIixcImdldFwiLFwiaGVhZFwiLFwicG9zdFwiLFwicHV0XCIsXCJwYXRjaFwiLFwiY29tbW9uXCJdLChmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhyKXtkZWxldGUgdC5oZWFkZXJzW3JdfSkpLCh0LmFkYXB0ZXJ8fHUuYWRhcHRlcikodCkudGhlbigoZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyKXtyZXR1cm4gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZCh0KSxyLmRhdGE9YS5jYWxsKHQsci5kYXRhLHIuaGVhZGVycyx0LnRyYW5zZm9ybVJlc3BvbnNlKSxyfSksKGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyKXtyZXR1cm4gYyhyKXx8KHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQodCksciYmci5yZXNwb25zZSYmKHIucmVzcG9uc2UuZGF0YT1hLmNhbGwodCxyLnJlc3BvbnNlLmRhdGEsci5yZXNwb25zZS5oZWFkZXJzLHQudHJhbnNmb3JtUmVzcG9uc2UpKSksUHJvbWlzZS5yZWplY3Qocil9KSl9fSw0ODE6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbiBlbmhhbmNlRXJyb3IodCxyLG8saSxhKXtyZXR1cm4gdC5jb25maWc9cixvJiYodC5jb2RlPW8pLHQucmVxdWVzdD1pLHQucmVzcG9uc2U9YSx0LmlzQXhpb3NFcnJvcj0hMCx0LnRvSlNPTj1mdW5jdGlvbiB0b0pTT04oKXtyZXR1cm57bWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixudW1iZXI6dGhpcy5udW1iZXIsZmlsZU5hbWU6dGhpcy5maWxlTmFtZSxsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW5OdW1iZXI6dGhpcy5jb2x1bW5OdW1iZXIsc3RhY2s6dGhpcy5zdGFjayxjb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGV9fSx0fX0sNzE4NToodCxyLG8pPT57dmFyIGk9byg0ODY3KTt0LmV4cG9ydHM9ZnVuY3Rpb24gbWVyZ2VDb25maWcodCxyKXtyPXJ8fHt9O3ZhciBvPXt9LGE9W1widXJsXCIsXCJtZXRob2RcIixcImRhdGFcIl0sYz1bXCJoZWFkZXJzXCIsXCJhdXRoXCIsXCJwcm94eVwiLFwicGFyYW1zXCJdLHU9W1wiYmFzZVVSTFwiLFwidHJhbnNmb3JtUmVxdWVzdFwiLFwidHJhbnNmb3JtUmVzcG9uc2VcIixcInBhcmFtc1NlcmlhbGl6ZXJcIixcInRpbWVvdXRcIixcInRpbWVvdXRNZXNzYWdlXCIsXCJ3aXRoQ3JlZGVudGlhbHNcIixcImFkYXB0ZXJcIixcInJlc3BvbnNlVHlwZVwiLFwieHNyZkNvb2tpZU5hbWVcIixcInhzcmZIZWFkZXJOYW1lXCIsXCJvblVwbG9hZFByb2dyZXNzXCIsXCJvbkRvd25sb2FkUHJvZ3Jlc3NcIixcImRlY29tcHJlc3NcIixcIm1heENvbnRlbnRMZW5ndGhcIixcIm1heEJvZHlMZW5ndGhcIixcIm1heFJlZGlyZWN0c1wiLFwidHJhbnNwb3J0XCIsXCJodHRwQWdlbnRcIixcImh0dHBzQWdlbnRcIixcImNhbmNlbFRva2VuXCIsXCJzb2NrZXRQYXRoXCIsXCJyZXNwb25zZUVuY29kaW5nXCJdLGw9W1widmFsaWRhdGVTdGF0dXNcIl07ZnVuY3Rpb24gZ2V0TWVyZ2VkVmFsdWUodCxyKXtyZXR1cm4gaS5pc1BsYWluT2JqZWN0KHQpJiZpLmlzUGxhaW5PYmplY3Qocik/aS5tZXJnZSh0LHIpOmkuaXNQbGFpbk9iamVjdChyKT9pLm1lcmdlKHt9LHIpOmkuaXNBcnJheShyKT9yLnNsaWNlKCk6cn1mdW5jdGlvbiBtZXJnZURlZXBQcm9wZXJ0aWVzKGEpe2kuaXNVbmRlZmluZWQoclthXSk/aS5pc1VuZGVmaW5lZCh0W2FdKXx8KG9bYV09Z2V0TWVyZ2VkVmFsdWUodm9pZCAwLHRbYV0pKTpvW2FdPWdldE1lcmdlZFZhbHVlKHRbYV0sclthXSl9aS5mb3JFYWNoKGEsKGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIodCl7aS5pc1VuZGVmaW5lZChyW3RdKXx8KG9bdF09Z2V0TWVyZ2VkVmFsdWUodm9pZCAwLHJbdF0pKX0pKSxpLmZvckVhY2goYyxtZXJnZURlZXBQcm9wZXJ0aWVzKSxpLmZvckVhY2godSwoZnVuY3Rpb24gZGVmYXVsdFRvQ29uZmlnMihhKXtpLmlzVW5kZWZpbmVkKHJbYV0pP2kuaXNVbmRlZmluZWQodFthXSl8fChvW2FdPWdldE1lcmdlZFZhbHVlKHZvaWQgMCx0W2FdKSk6b1thXT1nZXRNZXJnZWRWYWx1ZSh2b2lkIDAsclthXSl9KSksaS5mb3JFYWNoKGwsKGZ1bmN0aW9uIG1lcmdlKGkpe2kgaW4gcj9vW2ldPWdldE1lcmdlZFZhbHVlKHRbaV0scltpXSk6aSBpbiB0JiYob1tpXT1nZXRNZXJnZWRWYWx1ZSh2b2lkIDAsdFtpXSkpfSkpO3ZhciBwPWEuY29uY2F0KGMpLmNvbmNhdCh1KS5jb25jYXQobCksZD1PYmplY3Qua2V5cyh0KS5jb25jYXQoT2JqZWN0LmtleXMocikpLmZpbHRlcigoZnVuY3Rpb24gZmlsdGVyQXhpb3NLZXlzKHQpe3JldHVybi0xPT09cC5pbmRleE9mKHQpfSkpO3JldHVybiBpLmZvckVhY2goZCxtZXJnZURlZXBQcm9wZXJ0aWVzKSxvfX0sNjAyNjoodCxyLG8pPT57dmFyIGk9byg1MDYxKTt0LmV4cG9ydHM9ZnVuY3Rpb24gc2V0dGxlKHQscixvKXt2YXIgYT1vLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztvLnN0YXR1cyYmYSYmIWEoby5zdGF0dXMpP3IoaShcIlJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgXCIrby5zdGF0dXMsby5jb25maWcsbnVsbCxvLnJlcXVlc3QsbykpOnQobyl9fSw4NTI3Oih0LHIsbyk9Pnt2YXIgaT1vKDQ4NjcpLGE9byg1NjU1KTt0LmV4cG9ydHM9ZnVuY3Rpb24gdHJhbnNmb3JtRGF0YSh0LHIsbyl7dmFyIGM9dGhpc3x8YTtyZXR1cm4gaS5mb3JFYWNoKG8sKGZ1bmN0aW9uIHRyYW5zZm9ybShvKXt0PW8uY2FsbChjLHQscil9KSksdH19LDU2NTU6KHQscixvKT0+e3ZhciBpPW8oNDE1NSksYT1vKDQ4NjcpLGM9byg2MDE2KSx1PW8oNDgxKSxsPXtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJ9O2Z1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldCh0LHIpeyFhLmlzVW5kZWZpbmVkKHQpJiZhLmlzVW5kZWZpbmVkKHRbXCJDb250ZW50LVR5cGVcIl0pJiYodFtcIkNvbnRlbnQtVHlwZVwiXT1yKX12YXIgcD17dHJhbnNpdGlvbmFsOntzaWxlbnRKU09OUGFyc2luZzohMCxmb3JjZWRKU09OUGFyc2luZzohMCxjbGFyaWZ5VGltZW91dEVycm9yOiExfSxhZGFwdGVyOmZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCl7dmFyIHQ7cmV0dXJuKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdHx8dm9pZCAwIT09aSYmXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaSkpJiYodD1vKDU0NDgpKSx0fSgpLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QodCxyKXtyZXR1cm4gYyhyLFwiQWNjZXB0XCIpLGMocixcIkNvbnRlbnQtVHlwZVwiKSxhLmlzRm9ybURhdGEodCl8fGEuaXNBcnJheUJ1ZmZlcih0KXx8YS5pc0J1ZmZlcih0KXx8YS5pc1N0cmVhbSh0KXx8YS5pc0ZpbGUodCl8fGEuaXNCbG9iKHQpP3Q6YS5pc0FycmF5QnVmZmVyVmlldyh0KT90LmJ1ZmZlcjphLmlzVVJMU2VhcmNoUGFyYW1zKHQpPyhzZXRDb250ZW50VHlwZUlmVW5zZXQocixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIpLHQudG9TdHJpbmcoKSk6YS5pc09iamVjdCh0KXx8ciYmXCJhcHBsaWNhdGlvbi9qc29uXCI9PT1yW1wiQ29udGVudC1UeXBlXCJdPyhzZXRDb250ZW50VHlwZUlmVW5zZXQocixcImFwcGxpY2F0aW9uL2pzb25cIiksZnVuY3Rpb24gc3RyaW5naWZ5U2FmZWx5KHQscixvKXtpZihhLmlzU3RyaW5nKHQpKXRyeXtyZXR1cm4ocnx8SlNPTi5wYXJzZSkodCksYS50cmltKHQpfWNhdGNoKHQpe2lmKFwiU3ludGF4RXJyb3JcIiE9PXQubmFtZSl0aHJvdyB0fXJldHVybihvfHxKU09OLnN0cmluZ2lmeSkodCl9KHQpKTp0fV0sdHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKHQpe3ZhciByPXRoaXMudHJhbnNpdGlvbmFsLG89ciYmci5zaWxlbnRKU09OUGFyc2luZyxpPXImJnIuZm9yY2VkSlNPTlBhcnNpbmcsYz0hbyYmXCJqc29uXCI9PT10aGlzLnJlc3BvbnNlVHlwZTtpZihjfHxpJiZhLmlzU3RyaW5nKHQpJiZ0Lmxlbmd0aCl0cnl7cmV0dXJuIEpTT04ucGFyc2UodCl9Y2F0Y2godCl7aWYoYyl7aWYoXCJTeW50YXhFcnJvclwiPT09dC5uYW1lKXRocm93IHUodCx0aGlzLFwiRV9KU09OX1BBUlNFXCIpO3Rocm93IHR9fXJldHVybiB0fV0sdGltZW91dDowLHhzcmZDb29raWVOYW1lOlwiWFNSRi1UT0tFTlwiLHhzcmZIZWFkZXJOYW1lOlwiWC1YU1JGLVRPS0VOXCIsbWF4Q29udGVudExlbmd0aDotMSxtYXhCb2R5TGVuZ3RoOi0xLHZhbGlkYXRlU3RhdHVzOmZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHQpe3JldHVybiB0Pj0yMDAmJnQ8MzAwfSxoZWFkZXJzOntjb21tb246e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKlwifX19O2EuZm9yRWFjaChbXCJkZWxldGVcIixcImdldFwiLFwiaGVhZFwiXSwoZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YSh0KXtwLmhlYWRlcnNbdF09e319KSksYS5mb3JFYWNoKFtcInBvc3RcIixcInB1dFwiLFwicGF0Y2hcIl0sKGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YSh0KXtwLmhlYWRlcnNbdF09YS5tZXJnZShsKX0pKSx0LmV4cG9ydHM9cH0sMTg0OTp0PT57dC5leHBvcnRzPWZ1bmN0aW9uIGJpbmQodCxyKXtyZXR1cm4gZnVuY3Rpb24gd3JhcCgpe2Zvcih2YXIgbz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksaT0wO2k8by5sZW5ndGg7aSsrKW9baV09YXJndW1lbnRzW2ldO3JldHVybiB0LmFwcGx5KHIsbyl9fX0sNTMyNzoodCxyLG8pPT57dmFyIGk9byg0ODY3KTtmdW5jdGlvbiBlbmNvZGUodCl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh0KS5yZXBsYWNlKC8lM0EvZ2ksXCI6XCIpLnJlcGxhY2UoLyUyNC9nLFwiJFwiKS5yZXBsYWNlKC8lMkMvZ2ksXCIsXCIpLnJlcGxhY2UoLyUyMC9nLFwiK1wiKS5yZXBsYWNlKC8lNUIvZ2ksXCJbXCIpLnJlcGxhY2UoLyU1RC9naSxcIl1cIil9dC5leHBvcnRzPWZ1bmN0aW9uIGJ1aWxkVVJMKHQscixvKXtpZighcilyZXR1cm4gdDt2YXIgYTtpZihvKWE9byhyKTtlbHNlIGlmKGkuaXNVUkxTZWFyY2hQYXJhbXMocikpYT1yLnRvU3RyaW5nKCk7ZWxzZXt2YXIgYz1bXTtpLmZvckVhY2gociwoZnVuY3Rpb24gc2VyaWFsaXplKHQscil7bnVsbCE9dCYmKGkuaXNBcnJheSh0KT9yKz1cIltdXCI6dD1bdF0saS5mb3JFYWNoKHQsKGZ1bmN0aW9uIHBhcnNlVmFsdWUodCl7aS5pc0RhdGUodCk/dD10LnRvSVNPU3RyaW5nKCk6aS5pc09iamVjdCh0KSYmKHQ9SlNPTi5zdHJpbmdpZnkodCkpLGMucHVzaChlbmNvZGUocikrXCI9XCIrZW5jb2RlKHQpKX0pKSl9KSksYT1jLmpvaW4oXCImXCIpfWlmKGEpe3ZhciB1PXQuaW5kZXhPZihcIiNcIik7LTEhPT11JiYodD10LnNsaWNlKDAsdSkpLHQrPSgtMT09PXQuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCIpK2F9cmV0dXJuIHR9fSw3MzAzOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24gY29tYmluZVVSTHModCxyKXtyZXR1cm4gcj90LnJlcGxhY2UoL1xcLyskLyxcIlwiKStcIi9cIityLnJlcGxhY2UoL15cXC8rLyxcIlwiKTp0fX0sNDM3MjoodCxyLG8pPT57dmFyIGk9byg0ODY3KTt0LmV4cG9ydHM9aS5pc1N0YW5kYXJkQnJvd3NlckVudigpP2Z1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpe3JldHVybnt3cml0ZTpmdW5jdGlvbiB3cml0ZSh0LHIsbyxhLGMsdSl7dmFyIGw9W107bC5wdXNoKHQrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHIpKSxpLmlzTnVtYmVyKG8pJiZsLnB1c2goXCJleHBpcmVzPVwiK25ldyBEYXRlKG8pLnRvR01UU3RyaW5nKCkpLGkuaXNTdHJpbmcoYSkmJmwucHVzaChcInBhdGg9XCIrYSksaS5pc1N0cmluZyhjKSYmbC5wdXNoKFwiZG9tYWluPVwiK2MpLCEwPT09dSYmbC5wdXNoKFwic2VjdXJlXCIpLGRvY3VtZW50LmNvb2tpZT1sLmpvaW4oXCI7IFwiKX0scmVhZDpmdW5jdGlvbiByZWFkKHQpe3ZhciByPWRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKFwiKF58O1xcXFxzKikoXCIrdCtcIik9KFteO10qKVwiKSk7cmV0dXJuIHI/ZGVjb2RlVVJJQ29tcG9uZW50KHJbM10pOm51bGx9LHJlbW92ZTpmdW5jdGlvbiByZW1vdmUodCl7dGhpcy53cml0ZSh0LFwiXCIsRGF0ZS5ub3coKS04NjRlNSl9fX0oKTp7d3JpdGU6ZnVuY3Rpb24gd3JpdGUoKXt9LHJlYWQ6ZnVuY3Rpb24gcmVhZCgpe3JldHVybiBudWxsfSxyZW1vdmU6ZnVuY3Rpb24gcmVtb3ZlKCl7fX19LDE3OTM6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbiBpc0Fic29sdXRlVVJMKHQpe3JldHVybi9eKFthLXpdW2EtelxcZFxcK1xcLVxcLl0qOik/XFwvXFwvL2kudGVzdCh0KX19LDYyNjg6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbiBpc0F4aW9zRXJyb3IodCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQmJiEwPT09dC5pc0F4aW9zRXJyb3J9fSw3OTg1Oih0LHIsbyk9Pnt2YXIgaT1vKDQ4NjcpO3QuZXhwb3J0cz1pLmlzU3RhbmRhcmRCcm93c2VyRW52KCk/ZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCl7dmFyIHQscj0vKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7ZnVuY3Rpb24gcmVzb2x2ZVVSTCh0KXt2YXIgaT10O3JldHVybiByJiYoby5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsaSksaT1vLmhyZWYpLG8uc2V0QXR0cmlidXRlKFwiaHJlZlwiLGkpLHtocmVmOm8uaHJlZixwcm90b2NvbDpvLnByb3RvY29sP28ucHJvdG9jb2wucmVwbGFjZSgvOiQvLFwiXCIpOlwiXCIsaG9zdDpvLmhvc3Qsc2VhcmNoOm8uc2VhcmNoP28uc2VhcmNoLnJlcGxhY2UoL15cXD8vLFwiXCIpOlwiXCIsaGFzaDpvLmhhc2g/by5oYXNoLnJlcGxhY2UoL14jLyxcIlwiKTpcIlwiLGhvc3RuYW1lOm8uaG9zdG5hbWUscG9ydDpvLnBvcnQscGF0aG5hbWU6XCIvXCI9PT1vLnBhdGhuYW1lLmNoYXJBdCgwKT9vLnBhdGhuYW1lOlwiL1wiK28ucGF0aG5hbWV9fXJldHVybiB0PXJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyKXt2YXIgbz1pLmlzU3RyaW5nKHIpP3Jlc29sdmVVUkwocik6cjtyZXR1cm4gby5wcm90b2NvbD09PXQucHJvdG9jb2wmJm8uaG9zdD09PXQuaG9zdH19KCk6ZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCl7cmV0dXJuITB9fSw2MDE2Oih0LHIsbyk9Pnt2YXIgaT1vKDQ4NjcpO3QuZXhwb3J0cz1mdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKHQscil7aS5mb3JFYWNoKHQsKGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIobyxpKXtpIT09ciYmaS50b1VwcGVyQ2FzZSgpPT09ci50b1VwcGVyQ2FzZSgpJiYodFtyXT1vLGRlbGV0ZSB0W2ldKX0pKX19LDQxMDk6KHQscixvKT0+e3ZhciBpPW8oNDg2NyksYT1bXCJhZ2VcIixcImF1dGhvcml6YXRpb25cIixcImNvbnRlbnQtbGVuZ3RoXCIsXCJjb250ZW50LXR5cGVcIixcImV0YWdcIixcImV4cGlyZXNcIixcImZyb21cIixcImhvc3RcIixcImlmLW1vZGlmaWVkLXNpbmNlXCIsXCJpZi11bm1vZGlmaWVkLXNpbmNlXCIsXCJsYXN0LW1vZGlmaWVkXCIsXCJsb2NhdGlvblwiLFwibWF4LWZvcndhcmRzXCIsXCJwcm94eS1hdXRob3JpemF0aW9uXCIsXCJyZWZlcmVyXCIsXCJyZXRyeS1hZnRlclwiLFwidXNlci1hZ2VudFwiXTt0LmV4cG9ydHM9ZnVuY3Rpb24gcGFyc2VIZWFkZXJzKHQpe3ZhciByLG8sYyx1PXt9O3JldHVybiB0PyhpLmZvckVhY2godC5zcGxpdChcIlxcblwiKSwoZnVuY3Rpb24gcGFyc2VyKHQpe2lmKGM9dC5pbmRleE9mKFwiOlwiKSxyPWkudHJpbSh0LnN1YnN0cigwLGMpKS50b0xvd2VyQ2FzZSgpLG89aS50cmltKHQuc3Vic3RyKGMrMSkpLHIpe2lmKHVbcl0mJmEuaW5kZXhPZihyKT49MClyZXR1cm47dVtyXT1cInNldC1jb29raWVcIj09PXI/KHVbcl0/dVtyXTpbXSkuY29uY2F0KFtvXSk6dVtyXT91W3JdK1wiLCBcIitvOm99fSkpLHUpOnV9fSw4NzEzOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24gc3ByZWFkKHQpe3JldHVybiBmdW5jdGlvbiB3cmFwKHIpe3JldHVybiB0LmFwcGx5KG51bGwscil9fX0sNDg3NToodCxyLG8pPT57dmFyIGk9byg4NTkzKSxhPXt9O1tcIm9iamVjdFwiLFwiYm9vbGVhblwiLFwibnVtYmVyXCIsXCJmdW5jdGlvblwiLFwic3RyaW5nXCIsXCJzeW1ib2xcIl0uZm9yRWFjaCgoZnVuY3Rpb24odCxyKXthW3RdPWZ1bmN0aW9uIHZhbGlkYXRvcihvKXtyZXR1cm4gdHlwZW9mIG89PT10fHxcImFcIisocjwxP1wibiBcIjpcIiBcIikrdH19KSk7dmFyIGM9e30sdT1pLnZlcnNpb24uc3BsaXQoXCIuXCIpO2Z1bmN0aW9uIGlzT2xkZXJWZXJzaW9uKHQscil7Zm9yKHZhciBvPXI/ci5zcGxpdChcIi5cIik6dSxpPXQuc3BsaXQoXCIuXCIpLGE9MDthPDM7YSsrKXtpZihvW2FdPmlbYV0pcmV0dXJuITA7aWYob1thXTxpW2FdKXJldHVybiExfXJldHVybiExfWEudHJhbnNpdGlvbmFsPWZ1bmN0aW9uIHRyYW5zaXRpb25hbCh0LHIsbyl7dmFyIGE9ciYmaXNPbGRlclZlcnNpb24ocik7ZnVuY3Rpb24gZm9ybWF0TWVzc2FnZSh0LHIpe3JldHVyblwiW0F4aW9zIHZcIitpLnZlcnNpb24rXCJdIFRyYW5zaXRpb25hbCBvcHRpb24gJ1wiK3QrXCInXCIrcisobz9cIi4gXCIrbzpcIlwiKX1yZXR1cm4gZnVuY3Rpb24obyxpLHUpe2lmKCExPT09dCl0aHJvdyBuZXcgRXJyb3IoZm9ybWF0TWVzc2FnZShpLFwiIGhhcyBiZWVuIHJlbW92ZWQgaW4gXCIrcikpO3JldHVybiBhJiYhY1tpXSYmKGNbaV09ITAsY29uc29sZS53YXJuKGZvcm1hdE1lc3NhZ2UoaSxcIiBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHZcIityK1wiIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlXCIpKSksIXR8fHQobyxpLHUpfX0sdC5leHBvcnRzPXtpc09sZGVyVmVyc2lvbixhc3NlcnRPcHRpb25zOmZ1bmN0aW9uIGFzc2VydE9wdGlvbnModCxyLG8pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0XCIpO2Zvcih2YXIgaT1PYmplY3Qua2V5cyh0KSxhPWkubGVuZ3RoO2EtLSA+MDspe3ZhciBjPWlbYV0sdT1yW2NdO2lmKHUpe3ZhciBsPXRbY10scD12b2lkIDA9PT1sfHx1KGwsYyx0KTtpZighMCE9PXApdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9wdGlvbiBcIitjK1wiIG11c3QgYmUgXCIrcCl9ZWxzZSBpZighMCE9PW8pdGhyb3cgRXJyb3IoXCJVbmtub3duIG9wdGlvbiBcIitjKX19LHZhbGlkYXRvcnM6YX19LDQ4Njc6KHQscixvKT0+e3ZhciBpPW8oMTg0OSksYT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIGlzQXJyYXkodCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09YS5jYWxsKHQpfWZ1bmN0aW9uIGlzVW5kZWZpbmVkKHQpe3JldHVybiB2b2lkIDA9PT10fWZ1bmN0aW9uIGlzT2JqZWN0KHQpe3JldHVybiBudWxsIT09dCYmXCJvYmplY3RcIj09dHlwZW9mIHR9ZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh0KXtpZihcIltvYmplY3QgT2JqZWN0XVwiIT09YS5jYWxsKHQpKXJldHVybiExO3ZhciByPU9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtyZXR1cm4gbnVsbD09PXJ8fHI9PT1PYmplY3QucHJvdG90eXBlfWZ1bmN0aW9uIGlzRnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09YS5jYWxsKHQpfWZ1bmN0aW9uIGZvckVhY2godCxyKXtpZihudWxsIT10KWlmKFwib2JqZWN0XCIhPXR5cGVvZiB0JiYodD1bdF0pLGlzQXJyYXkodCkpZm9yKHZhciBvPTAsaT10Lmxlbmd0aDtvPGk7bysrKXIuY2FsbChudWxsLHRbb10sbyx0KTtlbHNlIGZvcih2YXIgYSBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGEpJiZyLmNhbGwobnVsbCx0W2FdLGEsdCl9dC5leHBvcnRzPXtpc0FycmF5LGlzQXJyYXlCdWZmZXI6ZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1hLmNhbGwodCl9LGlzQnVmZmVyOmZ1bmN0aW9uIGlzQnVmZmVyKHQpe3JldHVybiBudWxsIT09dCYmIWlzVW5kZWZpbmVkKHQpJiZudWxsIT09dC5jb25zdHJ1Y3RvciYmIWlzVW5kZWZpbmVkKHQuY29uc3RydWN0b3IpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNvbnN0cnVjdG9yLmlzQnVmZmVyJiZ0LmNvbnN0cnVjdG9yLmlzQnVmZmVyKHQpfSxpc0Zvcm1EYXRhOmZ1bmN0aW9uIGlzRm9ybURhdGEodCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEZvcm1EYXRhJiZ0IGluc3RhbmNlb2YgRm9ybURhdGF9LGlzQXJyYXlCdWZmZXJWaWV3OmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHQpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmQXJyYXlCdWZmZXIuaXNWaWV3P0FycmF5QnVmZmVyLmlzVmlldyh0KTp0JiZ0LmJ1ZmZlciYmdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcn0saXNTdHJpbmc6ZnVuY3Rpb24gaXNTdHJpbmcodCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR9LGlzTnVtYmVyOmZ1bmN0aW9uIGlzTnVtYmVyKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0fSxpc09iamVjdCxpc1BsYWluT2JqZWN0LGlzVW5kZWZpbmVkLGlzRGF0ZTpmdW5jdGlvbiBpc0RhdGUodCl7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT1hLmNhbGwodCl9LGlzRmlsZTpmdW5jdGlvbiBpc0ZpbGUodCl7cmV0dXJuXCJbb2JqZWN0IEZpbGVdXCI9PT1hLmNhbGwodCl9LGlzQmxvYjpmdW5jdGlvbiBpc0Jsb2IodCl7cmV0dXJuXCJbb2JqZWN0IEJsb2JdXCI9PT1hLmNhbGwodCl9LGlzRnVuY3Rpb24saXNTdHJlYW06ZnVuY3Rpb24gaXNTdHJlYW0odCl7cmV0dXJuIGlzT2JqZWN0KHQpJiZpc0Z1bmN0aW9uKHQucGlwZSl9LGlzVVJMU2VhcmNoUGFyYW1zOmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHQpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBVUkxTZWFyY2hQYXJhbXMmJnQgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXN9LGlzU3RhbmRhcmRCcm93c2VyRW52OmZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCl7cmV0dXJuKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuYXZpZ2F0b3J8fFwiUmVhY3ROYXRpdmVcIiE9PW5hdmlnYXRvci5wcm9kdWN0JiZcIk5hdGl2ZVNjcmlwdFwiIT09bmF2aWdhdG9yLnByb2R1Y3QmJlwiTlNcIiE9PW5hdmlnYXRvci5wcm9kdWN0KSYmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCl9LGZvckVhY2gsbWVyZ2U6ZnVuY3Rpb24gbWVyZ2UoKXt2YXIgdD17fTtmdW5jdGlvbiBhc3NpZ25WYWx1ZShyLG8pe2lzUGxhaW5PYmplY3QodFtvXSkmJmlzUGxhaW5PYmplY3Qocik/dFtvXT1tZXJnZSh0W29dLHIpOmlzUGxhaW5PYmplY3Qocik/dFtvXT1tZXJnZSh7fSxyKTppc0FycmF5KHIpP3Rbb109ci5zbGljZSgpOnRbb109cn1mb3IodmFyIHI9MCxvPWFyZ3VtZW50cy5sZW5ndGg7cjxvO3IrKylmb3JFYWNoKGFyZ3VtZW50c1tyXSxhc3NpZ25WYWx1ZSk7cmV0dXJuIHR9LGV4dGVuZDpmdW5jdGlvbiBleHRlbmQodCxyLG8pe3JldHVybiBmb3JFYWNoKHIsKGZ1bmN0aW9uIGFzc2lnblZhbHVlKHIsYSl7dFthXT1vJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiByP2kocixvKTpyfSkpLHR9LHRyaW06ZnVuY3Rpb24gdHJpbSh0KXtyZXR1cm4gdC50cmltP3QudHJpbSgpOnQucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0sc3RyaXBCT006ZnVuY3Rpb24gc3RyaXBCT00odCl7cmV0dXJuIDY1Mjc5PT09dC5jaGFyQ29kZUF0KDApJiYodD10LnNsaWNlKDEpKSx0fX19LDEyMjc6KHQscixvKT0+e3ZhciBpPW8oNDE1NSk7ci5mb3JtYXRBcmdzPWZ1bmN0aW9uIGZvcm1hdEFyZ3Mocil7aWYoclswXT0odGhpcy51c2VDb2xvcnM/XCIlY1wiOlwiXCIpK3RoaXMubmFtZXNwYWNlKyh0aGlzLnVzZUNvbG9ycz9cIiAlY1wiOlwiIFwiKStyWzBdKyh0aGlzLnVzZUNvbG9ycz9cIiVjIFwiOlwiIFwiKStcIitcIit0LmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKSwhdGhpcy51c2VDb2xvcnMpcmV0dXJuO2NvbnN0IG89XCJjb2xvcjogXCIrdGhpcy5jb2xvcjtyLnNwbGljZSgxLDAsbyxcImNvbG9yOiBpbmhlcml0XCIpO2xldCBpPTAsYT0wO3JbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCh0PT57XCIlJVwiIT09dCYmKGkrKyxcIiVjXCI9PT10JiYoYT1pKSl9KSksci5zcGxpY2UoYSwwLG8pfSxyLnNhdmU9ZnVuY3Rpb24gc2F2ZSh0KXt0cnl7dD9yLnN0b3JhZ2Uuc2V0SXRlbShcImRlYnVnXCIsdCk6ci5zdG9yYWdlLnJlbW92ZUl0ZW0oXCJkZWJ1Z1wiKX1jYXRjaCh0KXt9fSxyLmxvYWQ9ZnVuY3Rpb24gbG9hZCgpe2xldCB0O3RyeXt0PXIuc3RvcmFnZS5nZXRJdGVtKFwiZGVidWdcIil9Y2F0Y2godCl7fSF0JiZ2b2lkIDAhPT1pJiZcImVudlwiaW4gaSYmKHQ9aS5lbnYuREVCVUcpO3JldHVybiB0fSxyLnVzZUNvbG9ycz1mdW5jdGlvbiB1c2VDb2xvcnMoKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucHJvY2VzcyYmKFwicmVuZGVyZXJcIj09PXdpbmRvdy5wcm9jZXNzLnR5cGV8fHdpbmRvdy5wcm9jZXNzLl9fbndqcykpcmV0dXJuITA7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLnVzZXJBZ2VudCYmbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKXJldHVybiExO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5XZWJraXRBcHBlYXJhbmNlfHxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuY29uc29sZSYmKHdpbmRvdy5jb25zb2xlLmZpcmVidWd8fHdpbmRvdy5jb25zb2xlLmV4Y2VwdGlvbiYmd2luZG93LmNvbnNvbGUudGFibGUpfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50JiZuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSYmcGFyc2VJbnQoUmVnRXhwLiQxLDEwKT49MzF8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJm5hdmlnYXRvci51c2VyQWdlbnQmJm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKX0sci5zdG9yYWdlPWZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpe3RyeXtyZXR1cm4gbG9jYWxTdG9yYWdlfWNhdGNoKHQpe319KCksci5kZXN0cm95PSgoKT0+e2xldCB0PSExO3JldHVybigpPT57dHx8KHQ9ITAsY29uc29sZS53YXJuKFwiSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLlwiKSl9fSkoKSxyLmNvbG9ycz1bXCIjMDAwMENDXCIsXCIjMDAwMEZGXCIsXCIjMDAzM0NDXCIsXCIjMDAzM0ZGXCIsXCIjMDA2NkNDXCIsXCIjMDA2NkZGXCIsXCIjMDA5OUNDXCIsXCIjMDA5OUZGXCIsXCIjMDBDQzAwXCIsXCIjMDBDQzMzXCIsXCIjMDBDQzY2XCIsXCIjMDBDQzk5XCIsXCIjMDBDQ0NDXCIsXCIjMDBDQ0ZGXCIsXCIjMzMwMENDXCIsXCIjMzMwMEZGXCIsXCIjMzMzM0NDXCIsXCIjMzMzM0ZGXCIsXCIjMzM2NkNDXCIsXCIjMzM2NkZGXCIsXCIjMzM5OUNDXCIsXCIjMzM5OUZGXCIsXCIjMzNDQzAwXCIsXCIjMzNDQzMzXCIsXCIjMzNDQzY2XCIsXCIjMzNDQzk5XCIsXCIjMzNDQ0NDXCIsXCIjMzNDQ0ZGXCIsXCIjNjYwMENDXCIsXCIjNjYwMEZGXCIsXCIjNjYzM0NDXCIsXCIjNjYzM0ZGXCIsXCIjNjZDQzAwXCIsXCIjNjZDQzMzXCIsXCIjOTkwMENDXCIsXCIjOTkwMEZGXCIsXCIjOTkzM0NDXCIsXCIjOTkzM0ZGXCIsXCIjOTlDQzAwXCIsXCIjOTlDQzMzXCIsXCIjQ0MwMDAwXCIsXCIjQ0MwMDMzXCIsXCIjQ0MwMDY2XCIsXCIjQ0MwMDk5XCIsXCIjQ0MwMENDXCIsXCIjQ0MwMEZGXCIsXCIjQ0MzMzAwXCIsXCIjQ0MzMzMzXCIsXCIjQ0MzMzY2XCIsXCIjQ0MzMzk5XCIsXCIjQ0MzM0NDXCIsXCIjQ0MzM0ZGXCIsXCIjQ0M2NjAwXCIsXCIjQ0M2NjMzXCIsXCIjQ0M5OTAwXCIsXCIjQ0M5OTMzXCIsXCIjQ0NDQzAwXCIsXCIjQ0NDQzMzXCIsXCIjRkYwMDAwXCIsXCIjRkYwMDMzXCIsXCIjRkYwMDY2XCIsXCIjRkYwMDk5XCIsXCIjRkYwMENDXCIsXCIjRkYwMEZGXCIsXCIjRkYzMzAwXCIsXCIjRkYzMzMzXCIsXCIjRkYzMzY2XCIsXCIjRkYzMzk5XCIsXCIjRkYzM0NDXCIsXCIjRkYzM0ZGXCIsXCIjRkY2NjAwXCIsXCIjRkY2NjMzXCIsXCIjRkY5OTAwXCIsXCIjRkY5OTMzXCIsXCIjRkZDQzAwXCIsXCIjRkZDQzMzXCJdLHIubG9nPWNvbnNvbGUuZGVidWd8fGNvbnNvbGUubG9nfHwoKCk9Pnt9KSx0LmV4cG9ydHM9bygyNDQ3KShyKTtjb25zdHtmb3JtYXR0ZXJzOmF9PXQuZXhwb3J0czthLmo9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBKU09OLnN0cmluZ2lmeSh0KX1jYXRjaCh0KXtyZXR1cm5cIltVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiBcIit0Lm1lc3NhZ2V9fX0sMjQ0NzoodCxyLG8pPT57dC5leHBvcnRzPWZ1bmN0aW9uIHNldHVwKHQpe2Z1bmN0aW9uIGNyZWF0ZURlYnVnKHQpe2xldCByLG8saSxhPW51bGw7ZnVuY3Rpb24gZGVidWcoLi4udCl7aWYoIWRlYnVnLmVuYWJsZWQpcmV0dXJuO2NvbnN0IG89ZGVidWcsaT1OdW1iZXIobmV3IERhdGUpLGE9aS0ocnx8aSk7by5kaWZmPWEsby5wcmV2PXIsby5jdXJyPWkscj1pLHRbMF09Y3JlYXRlRGVidWcuY29lcmNlKHRbMF0pLFwic3RyaW5nXCIhPXR5cGVvZiB0WzBdJiZ0LnVuc2hpZnQoXCIlT1wiKTtsZXQgYz0wO3RbMF09dFswXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywoKHIsaSk9PntpZihcIiUlXCI9PT1yKXJldHVyblwiJVwiO2MrKztjb25zdCBhPWNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbaV07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYSl7Y29uc3QgaT10W2NdO3I9YS5jYWxsKG8saSksdC5zcGxpY2UoYywxKSxjLS19cmV0dXJuIHJ9KSksY3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKG8sdCk7KG8ubG9nfHxjcmVhdGVEZWJ1Zy5sb2cpLmFwcGx5KG8sdCl9cmV0dXJuIGRlYnVnLm5hbWVzcGFjZT10LGRlYnVnLnVzZUNvbG9ycz1jcmVhdGVEZWJ1Zy51c2VDb2xvcnMoKSxkZWJ1Zy5jb2xvcj1jcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcih0KSxkZWJ1Zy5leHRlbmQ9ZXh0ZW5kLGRlYnVnLmRlc3Ryb3k9Y3JlYXRlRGVidWcuZGVzdHJveSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsXCJlbmFibGVkXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiExLGdldDooKT0+bnVsbCE9PWE/YToobyE9PWNyZWF0ZURlYnVnLm5hbWVzcGFjZXMmJihvPWNyZWF0ZURlYnVnLm5hbWVzcGFjZXMsaT1jcmVhdGVEZWJ1Zy5lbmFibGVkKHQpKSxpKSxzZXQ6dD0+e2E9dH19KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjcmVhdGVEZWJ1Zy5pbml0JiZjcmVhdGVEZWJ1Zy5pbml0KGRlYnVnKSxkZWJ1Z31mdW5jdGlvbiBleHRlbmQodCxyKXtjb25zdCBvPWNyZWF0ZURlYnVnKHRoaXMubmFtZXNwYWNlKyh2b2lkIDA9PT1yP1wiOlwiOnIpK3QpO3JldHVybiBvLmxvZz10aGlzLmxvZyxvfWZ1bmN0aW9uIHRvTmFtZXNwYWNlKHQpe3JldHVybiB0LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIsdC50b1N0cmluZygpLmxlbmd0aC0yKS5yZXBsYWNlKC9cXC5cXCpcXD8kLyxcIipcIil9cmV0dXJuIGNyZWF0ZURlYnVnLmRlYnVnPWNyZWF0ZURlYnVnLGNyZWF0ZURlYnVnLmRlZmF1bHQ9Y3JlYXRlRGVidWcsY3JlYXRlRGVidWcuY29lcmNlPWZ1bmN0aW9uIGNvZXJjZSh0KXtpZih0IGluc3RhbmNlb2YgRXJyb3IpcmV0dXJuIHQuc3RhY2t8fHQubWVzc2FnZTtyZXR1cm4gdH0sY3JlYXRlRGVidWcuZGlzYWJsZT1mdW5jdGlvbiBkaXNhYmxlKCl7Y29uc3QgdD1bLi4uY3JlYXRlRGVidWcubmFtZXMubWFwKHRvTmFtZXNwYWNlKSwuLi5jcmVhdGVEZWJ1Zy5za2lwcy5tYXAodG9OYW1lc3BhY2UpLm1hcCgodD0+XCItXCIrdCkpXS5qb2luKFwiLFwiKTtyZXR1cm4gY3JlYXRlRGVidWcuZW5hYmxlKFwiXCIpLHR9LGNyZWF0ZURlYnVnLmVuYWJsZT1mdW5jdGlvbiBlbmFibGUodCl7bGV0IHI7Y3JlYXRlRGVidWcuc2F2ZSh0KSxjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzPXQsY3JlYXRlRGVidWcubmFtZXM9W10sY3JlYXRlRGVidWcuc2tpcHM9W107Y29uc3Qgbz0oXCJzdHJpbmdcIj09dHlwZW9mIHQ/dDpcIlwiKS5zcGxpdCgvW1xccyxdKy8pLGk9by5sZW5ndGg7Zm9yKHI9MDtyPGk7cisrKW9bcl0mJihcIi1cIj09PSh0PW9bcl0ucmVwbGFjZSgvXFwqL2csXCIuKj9cIikpWzBdP2NyZWF0ZURlYnVnLnNraXBzLnB1c2gobmV3IFJlZ0V4cChcIl5cIit0LnN1YnN0cigxKStcIiRcIikpOmNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobmV3IFJlZ0V4cChcIl5cIit0K1wiJFwiKSkpfSxjcmVhdGVEZWJ1Zy5lbmFibGVkPWZ1bmN0aW9uIGVuYWJsZWQodCl7aWYoXCIqXCI9PT10W3QubGVuZ3RoLTFdKXJldHVybiEwO2xldCByLG87Zm9yKHI9MCxvPWNyZWF0ZURlYnVnLnNraXBzLmxlbmd0aDtyPG87cisrKWlmKGNyZWF0ZURlYnVnLnNraXBzW3JdLnRlc3QodCkpcmV0dXJuITE7Zm9yKHI9MCxvPWNyZWF0ZURlYnVnLm5hbWVzLmxlbmd0aDtyPG87cisrKWlmKGNyZWF0ZURlYnVnLm5hbWVzW3JdLnRlc3QodCkpcmV0dXJuITA7cmV0dXJuITF9LGNyZWF0ZURlYnVnLmh1bWFuaXplPW8oNzgyNCksY3JlYXRlRGVidWcuZGVzdHJveT1mdW5jdGlvbiBkZXN0cm95KCl7Y29uc29sZS53YXJuKFwiSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLlwiKX0sT2JqZWN0LmtleXModCkuZm9yRWFjaCgocj0+e2NyZWF0ZURlYnVnW3JdPXRbcl19KSksY3JlYXRlRGVidWcubmFtZXM9W10sY3JlYXRlRGVidWcuc2tpcHM9W10sY3JlYXRlRGVidWcuZm9ybWF0dGVycz17fSxjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcj1mdW5jdGlvbiBzZWxlY3RDb2xvcih0KXtsZXQgcj0wO2ZvcihsZXQgbz0wO288dC5sZW5ndGg7bysrKXI9KHI8PDUpLXIrdC5jaGFyQ29kZUF0KG8pLHJ8PTA7cmV0dXJuIGNyZWF0ZURlYnVnLmNvbG9yc1tNYXRoLmFicyhyKSVjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXX0sY3JlYXRlRGVidWcuZW5hYmxlKGNyZWF0ZURlYnVnLmxvYWQoKSksY3JlYXRlRGVidWd9fSw2Mzg3Oih0LHIsbyk9Pnt2YXIgaSxhPW8oNDE1NSk7IWZ1bmN0aW9uKGMpe3ZhciB1PU9iamVjdC5oYXNPd25Qcm9wZXJ0eSxsPUFycmF5LmlzQXJyYXk/QXJyYXkuaXNBcnJheTpmdW5jdGlvbiBfaXNBcnJheSh0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9LHA9XCJvYmplY3RcIj09dHlwZW9mIGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEubmV4dFRpY2ssZD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wsaD1cIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCx5PVwiZnVuY3Rpb25cIj09dHlwZW9mIHNldEltbWVkaWF0ZT9zZXRJbW1lZGlhdGU6c2V0VGltZW91dCx2PWQ/aCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5vd25LZXlzP1JlZmxlY3Qub3duS2V5czpmdW5jdGlvbih0KXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KTtyZXR1cm4gci5wdXNoLmFwcGx5KHIsT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KSkscn06T2JqZWN0LmtleXM7ZnVuY3Rpb24gaW5pdCgpe3RoaXMuX2V2ZW50cz17fSx0aGlzLl9jb25mJiZjb25maWd1cmUuY2FsbCh0aGlzLHRoaXMuX2NvbmYpfWZ1bmN0aW9uIGNvbmZpZ3VyZSh0KXt0JiYodGhpcy5fY29uZj10LHQuZGVsaW1pdGVyJiYodGhpcy5kZWxpbWl0ZXI9dC5kZWxpbWl0ZXIpLHQubWF4TGlzdGVuZXJzIT09YyYmKHRoaXMuX21heExpc3RlbmVycz10Lm1heExpc3RlbmVycyksdC53aWxkY2FyZCYmKHRoaXMud2lsZGNhcmQ9dC53aWxkY2FyZCksdC5uZXdMaXN0ZW5lciYmKHRoaXMuX25ld0xpc3RlbmVyPXQubmV3TGlzdGVuZXIpLHQucmVtb3ZlTGlzdGVuZXImJih0aGlzLl9yZW1vdmVMaXN0ZW5lcj10LnJlbW92ZUxpc3RlbmVyKSx0LnZlcmJvc2VNZW1vcnlMZWFrJiYodGhpcy52ZXJib3NlTWVtb3J5TGVhaz10LnZlcmJvc2VNZW1vcnlMZWFrKSx0Lmlnbm9yZUVycm9ycyYmKHRoaXMuaWdub3JlRXJyb3JzPXQuaWdub3JlRXJyb3JzKSx0aGlzLndpbGRjYXJkJiYodGhpcy5saXN0ZW5lclRyZWU9e30pKX1mdW5jdGlvbiBsb2dQb3NzaWJsZU1lbW9yeUxlYWsodCxyKXt2YXIgbz1cIihub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuIFwiK3QrXCIgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC5cIjtpZih0aGlzLnZlcmJvc2VNZW1vcnlMZWFrJiYobys9XCIgRXZlbnQgbmFtZTogXCIrcitcIi5cIiksdm9pZCAwIT09YSYmYS5lbWl0V2FybmluZyl7dmFyIGk9bmV3IEVycm9yKG8pO2kubmFtZT1cIk1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZ1wiLGkuZW1pdHRlcj10aGlzLGkuY291bnQ9dCxhLmVtaXRXYXJuaW5nKGkpfWVsc2UgY29uc29sZS5lcnJvcihvKSxjb25zb2xlLnRyYWNlJiZjb25zb2xlLnRyYWNlKCl9dmFyIHRvQXJyYXk9ZnVuY3Rpb24odCxyLG8pe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg7c3dpdGNoKGkpe2Nhc2UgMDpyZXR1cm5bXTtjYXNlIDE6cmV0dXJuW3RdO2Nhc2UgMjpyZXR1cm5bdCxyXTtjYXNlIDM6cmV0dXJuW3QscixvXTtkZWZhdWx0OmZvcih2YXIgYT1uZXcgQXJyYXkoaSk7aS0tOylhW2ldPWFyZ3VtZW50c1tpXTtyZXR1cm4gYX19O2Z1bmN0aW9uIHRvT2JqZWN0KHQscil7Zm9yKHZhciBvPXt9LGk9dC5sZW5ndGgsYT1yP3ZhbHVlLmxlbmd0aDowLHU9MDt1PGk7dSsrKW9bdFt1XV09dTxhP3JbdV06YztyZXR1cm4gb31mdW5jdGlvbiBUYXJnZXRPYnNlcnZlcih0LHIsbyl7dmFyIGksYTtpZih0aGlzLl9lbWl0dGVyPXQsdGhpcy5fdGFyZ2V0PXIsdGhpcy5fbGlzdGVuZXJzPXt9LHRoaXMuX2xpc3RlbmVyc0NvdW50PTAsKG8ub258fG8ub2ZmKSYmKGk9by5vbixhPW8ub2ZmKSxyLmFkZEV2ZW50TGlzdGVuZXI/KGk9ci5hZGRFdmVudExpc3RlbmVyLGE9ci5yZW1vdmVFdmVudExpc3RlbmVyKTpyLmFkZExpc3RlbmVyPyhpPXIuYWRkTGlzdGVuZXIsYT1yLnJlbW92ZUxpc3RlbmVyKTpyLm9uJiYoaT1yLm9uLGE9ci5vZmYpLCFpJiYhYSl0aHJvdyBFcnJvcihcInRhcmdldCBkb2VzIG5vdCBpbXBsZW1lbnQgYW55IGtub3duIGV2ZW50IEFQSVwiKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBpKXRocm93IFR5cGVFcnJvcihcIm9uIG1ldGhvZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYSl0aHJvdyBUeXBlRXJyb3IoXCJvZmYgbWV0aG9kIG11c3QgYmUgYSBmdW5jdGlvblwiKTt0aGlzLl9vbj1pLHRoaXMuX29mZj1hO3ZhciBjPXQuX29ic2VydmVycztjP2MucHVzaCh0aGlzKTp0Ll9vYnNlcnZlcnM9W3RoaXNdfWZ1bmN0aW9uIHJlc29sdmVPcHRpb25zKHQscixvLGkpe3ZhciBhPU9iamVjdC5hc3NpZ24oe30scik7aWYoIXQpcmV0dXJuIGE7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKFwib3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdFwiKTt2YXIgbCxwLGQsaD1PYmplY3Qua2V5cyh0KSx5PWgubGVuZ3RoO2Z1bmN0aW9uIHJlamVjdCh0KXt0aHJvdyBFcnJvcignSW52YWxpZCBcIicrbCsnXCIgb3B0aW9uIHZhbHVlJysodD9cIi4gUmVhc29uOiBcIit0OlwiXCIpKX1mb3IodmFyIHY9MDt2PHk7disrKXtpZihsPWhbdl0sIWkmJiF1LmNhbGwocixsKSl0aHJvdyBFcnJvcignVW5rbm93biBcIicrbCsnXCIgb3B0aW9uJyk7KHA9dFtsXSkhPT1jJiYoZD1vW2xdLGFbbF09ZD9kKHAscmVqZWN0KTpwKX1yZXR1cm4gYX1mdW5jdGlvbiBjb25zdHJ1Y3RvclJlZHVjZXIodCxyKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0Lmhhc093blByb3BlcnR5KFwicHJvdG90eXBlXCIpfHxyKFwidmFsdWUgbXVzdCBiZSBhIGNvbnN0cnVjdG9yXCIpLHR9ZnVuY3Rpb24gbWFrZVR5cGVSZWR1Y2VyKHQpe3ZhciByPVwidmFsdWUgbXVzdCBiZSB0eXBlIG9mIFwiK3Quam9pbihcInxcIiksbz10Lmxlbmd0aCxpPXRbMF0sYT10WzFdO3JldHVybiAxPT09bz9mdW5jdGlvbih0LG8pe2lmKHR5cGVvZiB0PT09aSlyZXR1cm4gdDtvKHIpfToyPT09bz9mdW5jdGlvbih0LG8pe3ZhciBjPXR5cGVvZiB0O2lmKGM9PT1pfHxjPT09YSlyZXR1cm4gdDtvKHIpfTpmdW5jdGlvbihpLGEpe2Zvcih2YXIgYz10eXBlb2YgaSx1PW87dS0tID4wOylpZihjPT09dFt1XSlyZXR1cm4gaTthKHIpfX1PYmplY3QuYXNzaWduKFRhcmdldE9ic2VydmVyLnByb3RvdHlwZSx7c3Vic2NyaWJlOmZ1bmN0aW9uKHQscixvKXt2YXIgaT10aGlzLGE9dGhpcy5fdGFyZ2V0LGM9dGhpcy5fZW1pdHRlcix1PXRoaXMuX2xpc3RlbmVycyxoYW5kbGVyPWZ1bmN0aW9uKCl7dmFyIGk9dG9BcnJheS5hcHBseShudWxsLGFyZ3VtZW50cyksdT17ZGF0YTppLG5hbWU6cixvcmlnaW5hbDp0fTtpZihvKXt2YXIgbD1vLmNhbGwoYSx1KTshMSE9PWwmJmMuZW1pdC5hcHBseShjLFt1Lm5hbWVdLmNvbmNhdChpKSl9ZWxzZSBjLmVtaXQuYXBwbHkoYyxbcl0uY29uY2F0KGkpKX07aWYodVt0XSl0aHJvdyBFcnJvcihcIkV2ZW50ICdcIit0K1wiJyBpcyBhbHJlYWR5IGxpc3RlbmluZ1wiKTt0aGlzLl9saXN0ZW5lcnNDb3VudCsrLGMuX25ld0xpc3RlbmVyJiZjLl9yZW1vdmVMaXN0ZW5lciYmIWkuX29uTmV3TGlzdGVuZXI/KHRoaXMuX29uTmV3TGlzdGVuZXI9ZnVuY3Rpb24obyl7bz09PXImJm51bGw9PT11W3RdJiYodVt0XT1oYW5kbGVyLGkuX29uLmNhbGwoYSx0LGhhbmRsZXIpKX0sYy5vbihcIm5ld0xpc3RlbmVyXCIsdGhpcy5fb25OZXdMaXN0ZW5lciksdGhpcy5fb25SZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihvKXtvPT09ciYmIWMuaGFzTGlzdGVuZXJzKG8pJiZ1W3RdJiYodVt0XT1udWxsLGkuX29mZi5jYWxsKGEsdCxoYW5kbGVyKSl9LHVbdF09bnVsbCxjLm9uKFwicmVtb3ZlTGlzdGVuZXJcIix0aGlzLl9vblJlbW92ZUxpc3RlbmVyKSk6KHVbdF09aGFuZGxlcixpLl9vbi5jYWxsKGEsdCxoYW5kbGVyKSl9LHVuc3Vic2NyaWJlOmZ1bmN0aW9uKHQpe3ZhciByLG8saSxhPXRoaXMsYz10aGlzLl9saXN0ZW5lcnMsdT10aGlzLl9lbWl0dGVyLGw9dGhpcy5fb2ZmLHA9dGhpcy5fdGFyZ2V0O2lmKHQmJlwic3RyaW5nXCIhPXR5cGVvZiB0KXRocm93IFR5cGVFcnJvcihcImV2ZW50IG11c3QgYmUgYSBzdHJpbmdcIik7ZnVuY3Rpb24gY2xlYXJSZWZzKCl7YS5fb25OZXdMaXN0ZW5lciYmKHUub2ZmKFwibmV3TGlzdGVuZXJcIixhLl9vbk5ld0xpc3RlbmVyKSx1Lm9mZihcInJlbW92ZUxpc3RlbmVyXCIsYS5fb25SZW1vdmVMaXN0ZW5lciksYS5fb25OZXdMaXN0ZW5lcj1udWxsLGEuX29uUmVtb3ZlTGlzdGVuZXI9bnVsbCk7dmFyIHQ9ZmluZFRhcmdldEluZGV4LmNhbGwodSxhKTt1Ll9vYnNlcnZlcnMuc3BsaWNlKHQsMSl9aWYodCl7aWYoIShyPWNbdF0pKXJldHVybjtsLmNhbGwocCx0LHIpLGRlbGV0ZSBjW3RdLC0tdGhpcy5fbGlzdGVuZXJzQ291bnR8fGNsZWFyUmVmcygpfWVsc2V7Zm9yKGk9KG89dihjKSkubGVuZ3RoO2ktLSA+MDspdD1vW2ldLGwuY2FsbChwLHQsY1t0XSk7dGhpcy5fbGlzdGVuZXJzPXt9LHRoaXMuX2xpc3RlbmVyc0NvdW50PTAsY2xlYXJSZWZzKCl9fX0pO3ZhciBnPW1ha2VUeXBlUmVkdWNlcihbXCJmdW5jdGlvblwiXSksXz1tYWtlVHlwZVJlZHVjZXIoW1wib2JqZWN0XCIsXCJmdW5jdGlvblwiXSk7ZnVuY3Rpb24gbWFrZUNhbmNlbGFibGVQcm9taXNlKHQscixvKXt2YXIgaSxhLGMsdT0wLGw9bmV3IHQoKGZ1bmN0aW9uKHAsZCxoKXtmdW5jdGlvbiBjbGVhbnVwKCl7YSYmKGE9bnVsbCksdSYmKGNsZWFyVGltZW91dCh1KSx1PTApfW89cmVzb2x2ZU9wdGlvbnMobyx7dGltZW91dDowLG92ZXJsb2FkOiExfSx7dGltZW91dDpmdW5jdGlvbih0LHIpe3JldHVybihcIm51bWJlclwiIT10eXBlb2YodCo9MSl8fHQ8MHx8IU51bWJlci5pc0Zpbml0ZSh0KSkmJnIoXCJ0aW1lb3V0IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIiksdH19KSxpPSFvLm92ZXJsb2FkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnByb3RvdHlwZS5jYW5jZWwmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGg7dmFyIF9yZXNvbHZlPWZ1bmN0aW9uKHQpe2NsZWFudXAoKSxwKHQpfSxfcmVqZWN0PWZ1bmN0aW9uKHQpe2NsZWFudXAoKSxkKHQpfTtpP3IoX3Jlc29sdmUsX3JlamVjdCxoKTooYT1bZnVuY3Rpb24odCl7X3JlamVjdCh0fHxFcnJvcihcImNhbmNlbGVkXCIpKX1dLHIoX3Jlc29sdmUsX3JlamVjdCwoZnVuY3Rpb24odCl7aWYoYyl0aHJvdyBFcnJvcihcIlVuYWJsZSB0byBzdWJzY3JpYmUgb24gY2FuY2VsIGV2ZW50IGFzeW5jaHJvbm91c2x5XCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKFwib25DYW5jZWwgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO2EucHVzaCh0KX0pKSxjPSEwKSxvLnRpbWVvdXQ+MCYmKHU9c2V0VGltZW91dCgoZnVuY3Rpb24oKXt2YXIgdD1FcnJvcihcInRpbWVvdXRcIik7dC5jb2RlPVwiRVRJTUVET1VUXCIsdT0wLGwuY2FuY2VsKHQpLGQodCl9KSxvLnRpbWVvdXQpKX0pKTtyZXR1cm4gaXx8KGwuY2FuY2VsPWZ1bmN0aW9uKHQpe2lmKGEpe2Zvcih2YXIgcj1hLmxlbmd0aCxvPTE7bzxyO28rKylhW29dKHQpO2FbMF0odCksYT1udWxsfX0pLGx9ZnVuY3Rpb24gZmluZFRhcmdldEluZGV4KHQpe3ZhciByPXRoaXMuX29ic2VydmVycztpZighcilyZXR1cm4tMTtmb3IodmFyIG89ci5sZW5ndGgsaT0wO2k8bztpKyspaWYocltpXS5fdGFyZ2V0PT09dClyZXR1cm4gaTtyZXR1cm4tMX1mdW5jdGlvbiBzZWFyY2hMaXN0ZW5lclRyZWUodCxyLG8saSxhKXtpZighbylyZXR1cm4gbnVsbDtpZigwPT09aSl7dmFyIGM9dHlwZW9mIHI7aWYoXCJzdHJpbmdcIj09PWMpe3ZhciB1LGwscD0wLGQ9MCxoPXRoaXMuZGVsaW1pdGVyLHk9aC5sZW5ndGg7aWYoLTEhPT0obD1yLmluZGV4T2YoaCkpKXt1PW5ldyBBcnJheSg1KTtkb3t1W3ArK109ci5zbGljZShkLGwpLGQ9bCt5fXdoaWxlKC0xIT09KGw9ci5pbmRleE9mKGgsZCkpKTt1W3ArK109ci5zbGljZShkKSxyPXUsYT1wfWVsc2Ugcj1bcl0sYT0xfWVsc2VcIm9iamVjdFwiPT09Yz9hPXIubGVuZ3RoOihyPVtyXSxhPTEpfXZhciBnLF8sbSxiLHcsUyxDLE89bnVsbCxUPXJbaV0sRT1yW2krMV07aWYoaT09PWEmJm8uX2xpc3RlbmVycylyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBvLl9saXN0ZW5lcnM/KHQmJnQucHVzaChvLl9saXN0ZW5lcnMpLFtvXSk6KHQmJnQucHVzaC5hcHBseSh0LG8uX2xpc3RlbmVycyksW29dKTtpZihcIipcIj09PVQpe2ZvcihsPShTPXYobykpLmxlbmd0aDtsLS0gPjA7KVwiX2xpc3RlbmVyc1wiIT09KGc9U1tsXSkmJihDPXNlYXJjaExpc3RlbmVyVHJlZSh0LHIsb1tnXSxpKzEsYSkpJiYoTz9PLnB1c2guYXBwbHkoTyxDKTpPPUMpO3JldHVybiBPfWlmKFwiKipcIj09PVQpe2Zvcigodz1pKzE9PT1hfHxpKzI9PT1hJiZcIipcIj09PUUpJiZvLl9saXN0ZW5lcnMmJihPPXNlYXJjaExpc3RlbmVyVHJlZSh0LHIsbyxhLGEpKSxsPShTPXYobykpLmxlbmd0aDtsLS0gPjA7KVwiX2xpc3RlbmVyc1wiIT09KGc9U1tsXSkmJihcIipcIj09PWd8fFwiKipcIj09PWc/KG9bZ10uX2xpc3RlbmVycyYmIXcmJihDPXNlYXJjaExpc3RlbmVyVHJlZSh0LHIsb1tnXSxhLGEpKSYmKE8/Ty5wdXNoLmFwcGx5KE8sQyk6Tz1DKSxDPXNlYXJjaExpc3RlbmVyVHJlZSh0LHIsb1tnXSxpLGEpKTpDPXNlYXJjaExpc3RlbmVyVHJlZSh0LHIsb1tnXSxnPT09RT9pKzI6aSxhKSxDJiYoTz9PLnB1c2guYXBwbHkoTyxDKTpPPUMpKTtyZXR1cm4gT31pZihvW1RdJiYoTz1zZWFyY2hMaXN0ZW5lclRyZWUodCxyLG9bVF0saSsxLGEpKSwoXz1vW1wiKlwiXSkmJnNlYXJjaExpc3RlbmVyVHJlZSh0LHIsXyxpKzEsYSksbT1vW1wiKipcIl0paWYoaTxhKWZvcihtLl9saXN0ZW5lcnMmJnNlYXJjaExpc3RlbmVyVHJlZSh0LHIsbSxhLGEpLGw9KFM9dihtKSkubGVuZ3RoO2wtLSA+MDspXCJfbGlzdGVuZXJzXCIhPT0oZz1TW2xdKSYmKGc9PT1FP3NlYXJjaExpc3RlbmVyVHJlZSh0LHIsbVtnXSxpKzIsYSk6Zz09PVQ/c2VhcmNoTGlzdGVuZXJUcmVlKHQscixtW2ddLGkrMSxhKTooKGI9e30pW2ddPW1bZ10sc2VhcmNoTGlzdGVuZXJUcmVlKHQscix7XCIqKlwiOmJ9LGkrMSxhKSkpO2Vsc2UgbS5fbGlzdGVuZXJzP3NlYXJjaExpc3RlbmVyVHJlZSh0LHIsbSxhLGEpOm1bXCIqXCJdJiZtW1wiKlwiXS5fbGlzdGVuZXJzJiZzZWFyY2hMaXN0ZW5lclRyZWUodCxyLG1bXCIqXCJdLGEsYSk7cmV0dXJuIE99ZnVuY3Rpb24gZ3Jvd0xpc3RlbmVyVHJlZSh0LHIsbyl7dmFyIGksYSxjPTAsdT0wLGw9dGhpcy5kZWxpbWl0ZXIscD1sLmxlbmd0aDtpZihcInN0cmluZ1wiPT10eXBlb2YgdClpZigtMSE9PShpPXQuaW5kZXhPZihsKSkpe2E9bmV3IEFycmF5KDUpO2Rve2FbYysrXT10LnNsaWNlKHUsaSksdT1pK3B9d2hpbGUoLTEhPT0oaT10LmluZGV4T2YobCx1KSkpO2FbYysrXT10LnNsaWNlKHUpfWVsc2UgYT1bdF0sYz0xO2Vsc2UgYT10LGM9dC5sZW5ndGg7aWYoYz4xKWZvcihpPTA7aSsxPGM7aSsrKWlmKFwiKipcIj09PWFbaV0mJlwiKipcIj09PWFbaSsxXSlyZXR1cm47dmFyIGQsaD10aGlzLmxpc3RlbmVyVHJlZTtmb3IoaT0wO2k8YztpKyspaWYoaD1oW2Q9YVtpXV18fChoW2RdPXt9KSxpPT09Yy0xKXJldHVybiBoLl9saXN0ZW5lcnM/KFwiZnVuY3Rpb25cIj09dHlwZW9mIGguX2xpc3RlbmVycyYmKGguX2xpc3RlbmVycz1baC5fbGlzdGVuZXJzXSksbz9oLl9saXN0ZW5lcnMudW5zaGlmdChyKTpoLl9saXN0ZW5lcnMucHVzaChyKSwhaC5fbGlzdGVuZXJzLndhcm5lZCYmdGhpcy5fbWF4TGlzdGVuZXJzPjAmJmguX2xpc3RlbmVycy5sZW5ndGg+dGhpcy5fbWF4TGlzdGVuZXJzJiYoaC5fbGlzdGVuZXJzLndhcm5lZD0hMCxsb2dQb3NzaWJsZU1lbW9yeUxlYWsuY2FsbCh0aGlzLGguX2xpc3RlbmVycy5sZW5ndGgsZCkpKTpoLl9saXN0ZW5lcnM9ciwhMDtyZXR1cm4hMH1mdW5jdGlvbiBjb2xsZWN0VHJlZUV2ZW50cyh0LHIsbyxpKXtmb3IodmFyIGEsYyx1LGwscD12KHQpLGQ9cC5sZW5ndGgsaD10Ll9saXN0ZW5lcnM7ZC0tID4wOylhPXRbYz1wW2RdXSx1PVwiX2xpc3RlbmVyc1wiPT09Yz9vOm8/by5jb25jYXQoYyk6W2NdLGw9aXx8XCJzeW1ib2xcIj09dHlwZW9mIGMsaCYmci5wdXNoKGw/dTp1LmpvaW4odGhpcy5kZWxpbWl0ZXIpKSxcIm9iamVjdFwiPT10eXBlb2YgYSYmY29sbGVjdFRyZWVFdmVudHMuY2FsbCh0aGlzLGEscix1LGwpO3JldHVybiByfWZ1bmN0aW9uIHJlY3Vyc2l2ZWx5R2FyYmFnZUNvbGxlY3QodCl7Zm9yKHZhciByLG8saSxhPXYodCksYz1hLmxlbmd0aDtjLS0gPjA7KShyPXRbbz1hW2NdXSkmJihpPSEwLFwiX2xpc3RlbmVyc1wiPT09b3x8cmVjdXJzaXZlbHlHYXJiYWdlQ29sbGVjdChyKXx8ZGVsZXRlIHRbb10pO3JldHVybiBpfWZ1bmN0aW9uIExpc3RlbmVyKHQscixvKXt0aGlzLmVtaXR0ZXI9dCx0aGlzLmV2ZW50PXIsdGhpcy5saXN0ZW5lcj1vfWZ1bmN0aW9uIHNldHVwTGlzdGVuZXIodCxyLG8pe2lmKCEwPT09byl1PSEwO2Vsc2UgaWYoITE9PT1vKWk9ITA7ZWxzZXtpZighb3x8XCJvYmplY3RcIiE9dHlwZW9mIG8pdGhyb3cgVHlwZUVycm9yKFwib3B0aW9ucyBzaG91bGQgYmUgYW4gb2JqZWN0IG9yIHRydWVcIik7dmFyIGk9by5hc3luYyx1PW8ucHJvbWlzaWZ5LGw9by5uZXh0VGljayxkPW8ub2JqZWN0aWZ5fWlmKGl8fGx8fHUpe3ZhciBoPXIsdj1yLl9vcmlnaW58fHI7aWYobCYmIXApdGhyb3cgRXJyb3IoXCJwcm9jZXNzLm5leHRUaWNrIGlzIG5vdCBzdXBwb3J0ZWRcIik7dT09PWMmJih1PVwiQXN5bmNGdW5jdGlvblwiPT09ci5jb25zdHJ1Y3Rvci5uYW1lKSxyPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLHI9dGhpcyxvPXRoaXMuZXZlbnQ7cmV0dXJuIHU/bD9Qcm9taXNlLnJlc29sdmUoKTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7eSh0KX0pKS50aGVuKChmdW5jdGlvbigpe3JldHVybiByLmV2ZW50PW8saC5hcHBseShyLHQpfSkpOihsP2EubmV4dFRpY2s6eSkoKGZ1bmN0aW9uKCl7ci5ldmVudD1vLGguYXBwbHkocix0KX0pKX0sci5fYXN5bmM9ITAsci5fb3JpZ2luPXZ9cmV0dXJuW3IsZD9uZXcgTGlzdGVuZXIodGhpcyx0LHIpOnRoaXNdfWZ1bmN0aW9uIEV2ZW50RW1pdHRlcih0KXt0aGlzLl9ldmVudHM9e30sdGhpcy5fbmV3TGlzdGVuZXI9ITEsdGhpcy5fcmVtb3ZlTGlzdGVuZXI9ITEsdGhpcy52ZXJib3NlTWVtb3J5TGVhaz0hMSxjb25maWd1cmUuY2FsbCh0aGlzLHQpfUxpc3RlbmVyLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbWl0dGVyLm9mZih0aGlzLmV2ZW50LHRoaXMubGlzdGVuZXIpLHRoaXN9LEV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIyPUV2ZW50RW1pdHRlcixFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlblRvPWZ1bmN0aW9uKHQscixvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IoXCJ0YXJnZXQgbXVzdHMgYmUgYW4gb2JqZWN0XCIpO3ZhciBpPXRoaXM7ZnVuY3Rpb24gbGlzdGVuKHIpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiByKXRocm93IFR5cGVFcnJvcihcImV2ZW50cyBtdXN0IGJlIGFuIG9iamVjdFwiKTt2YXIgYSxjPW8ucmVkdWNlcnMsdT1maW5kVGFyZ2V0SW5kZXguY2FsbChpLHQpO2E9LTE9PT11P25ldyBUYXJnZXRPYnNlcnZlcihpLHQsbyk6aS5fb2JzZXJ2ZXJzW3VdO2Zvcih2YXIgbCxwPXYociksZD1wLmxlbmd0aCxoPVwiZnVuY3Rpb25cIj09dHlwZW9mIGMseT0wO3k8ZDt5KyspbD1wW3ldLGEuc3Vic2NyaWJlKGwscltsXXx8bCxoP2M6YyYmY1tsXSl9cmV0dXJuIG89cmVzb2x2ZU9wdGlvbnMobyx7b246YyxvZmY6YyxyZWR1Y2VyczpjfSx7b246ZyxvZmY6ZyxyZWR1Y2VyczpffSksbChyKT9saXN0ZW4odG9PYmplY3QocikpOmxpc3RlbihcInN0cmluZ1wiPT10eXBlb2Ygcj90b09iamVjdChyLnNwbGl0KC9cXHMrLykpOnIpLHRoaXN9LEV2ZW50RW1pdHRlci5wcm90b3R5cGUuc3RvcExpc3RlbmluZ1RvPWZ1bmN0aW9uKHQscil7dmFyIG89dGhpcy5fb2JzZXJ2ZXJzO2lmKCFvKXJldHVybiExO3ZhciBpLGE9by5sZW5ndGgsYz0hMTtpZih0JiZcIm9iamVjdFwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IoXCJ0YXJnZXQgc2hvdWxkIGJlIGFuIG9iamVjdFwiKTtmb3IoO2EtLSA+MDspaT1vW2FdLHQmJmkuX3RhcmdldCE9PXR8fChpLnVuc3Vic2NyaWJlKHIpLGM9ITApO3JldHVybiBjfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLmRlbGltaXRlcj1cIi5cIixFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbih0KXt0IT09YyYmKHRoaXMuX21heExpc3RlbmVycz10LHRoaXMuX2NvbmZ8fCh0aGlzLl9jb25mPXt9KSx0aGlzLl9jb25mLm1heExpc3RlbmVycz10KX0sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50PVwiXCIsRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQscixvKXtyZXR1cm4gdGhpcy5fb25jZSh0LHIsITEsbyl9LEV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbih0LHIsbyl7cmV0dXJuIHRoaXMuX29uY2UodCxyLCEwLG8pfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9vbmNlPWZ1bmN0aW9uKHQscixvLGkpe3JldHVybiB0aGlzLl9tYW55KHQsMSxyLG8saSl9LEV2ZW50RW1pdHRlci5wcm90b3R5cGUubWFueT1mdW5jdGlvbih0LHIsbyxpKXtyZXR1cm4gdGhpcy5fbWFueSh0LHIsbywhMSxpKX0sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kTWFueT1mdW5jdGlvbih0LHIsbyxpKXtyZXR1cm4gdGhpcy5fbWFueSh0LHIsbywhMCxpKX0sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWFueT1mdW5jdGlvbih0LHIsbyxpLGEpe3ZhciBjPXRoaXM7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbyl0aHJvdyBuZXcgRXJyb3IoXCJtYW55IG9ubHkgYWNjZXB0cyBpbnN0YW5jZXMgb2YgRnVuY3Rpb25cIik7ZnVuY3Rpb24gbGlzdGVuZXIoKXtyZXR1cm4gMD09LS1yJiZjLm9mZih0LGxpc3RlbmVyKSxvLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbGlzdGVuZXIuX29yaWdpbj1vLHRoaXMuX29uKHQsbGlzdGVuZXIsaSxhKX0sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2V2ZW50cyYmIXRoaXMuX2FsbClyZXR1cm4hMTt0aGlzLl9ldmVudHN8fGluaXQuY2FsbCh0aGlzKTt2YXIgdCxyLG8saSxhLGMsdT1hcmd1bWVudHNbMF0sbD10aGlzLndpbGRjYXJkO2lmKFwibmV3TGlzdGVuZXJcIj09PXUmJiF0aGlzLl9uZXdMaXN0ZW5lciYmIXRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilyZXR1cm4hMTtpZihsJiYodD11LFwibmV3TGlzdGVuZXJcIiE9PXUmJlwicmVtb3ZlTGlzdGVuZXJcIiE9PXUmJlwib2JqZWN0XCI9PXR5cGVvZiB1KSl7aWYobz11Lmxlbmd0aCxkKWZvcihpPTA7aTxvO2krKylpZihcInN5bWJvbFwiPT10eXBlb2YgdVtpXSl7Yz0hMDticmVha31jfHwodT11LmpvaW4odGhpcy5kZWxpbWl0ZXIpKX12YXIgcCxoPWFyZ3VtZW50cy5sZW5ndGg7aWYodGhpcy5fYWxsJiZ0aGlzLl9hbGwubGVuZ3RoKWZvcihpPTAsbz0ocD10aGlzLl9hbGwuc2xpY2UoKSkubGVuZ3RoO2k8bztpKyspc3dpdGNoKHRoaXMuZXZlbnQ9dSxoKXtjYXNlIDE6cFtpXS5jYWxsKHRoaXMsdSk7YnJlYWs7Y2FzZSAyOnBbaV0uY2FsbCh0aGlzLHUsYXJndW1lbnRzWzFdKTticmVhaztjYXNlIDM6cFtpXS5jYWxsKHRoaXMsdSxhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKTticmVhaztkZWZhdWx0OnBbaV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfWlmKGwpcD1bXSxzZWFyY2hMaXN0ZW5lclRyZWUuY2FsbCh0aGlzLHAsdCx0aGlzLmxpc3RlbmVyVHJlZSwwLG8pO2Vsc2V7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YocD10aGlzLl9ldmVudHNbdV0pKXtzd2l0Y2godGhpcy5ldmVudD11LGgpe2Nhc2UgMTpwLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSAyOnAuY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSk7YnJlYWs7Y2FzZSAzOnAuY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pO2JyZWFrO2RlZmF1bHQ6Zm9yKHI9bmV3IEFycmF5KGgtMSksYT0xO2E8aDthKyspclthLTFdPWFyZ3VtZW50c1thXTtwLmFwcGx5KHRoaXMscil9cmV0dXJuITB9cCYmKHA9cC5zbGljZSgpKX1pZihwJiZwLmxlbmd0aCl7aWYoaD4zKWZvcihyPW5ldyBBcnJheShoLTEpLGE9MTthPGg7YSsrKXJbYS0xXT1hcmd1bWVudHNbYV07Zm9yKGk9MCxvPXAubGVuZ3RoO2k8bztpKyspc3dpdGNoKHRoaXMuZXZlbnQ9dSxoKXtjYXNlIDE6cFtpXS5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgMjpwW2ldLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pO2JyZWFrO2Nhc2UgMzpwW2ldLmNhbGwodGhpcyxhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKTticmVhaztkZWZhdWx0OnBbaV0uYXBwbHkodGhpcyxyKX1yZXR1cm4hMH1pZighdGhpcy5pZ25vcmVFcnJvcnMmJiF0aGlzLl9hbGwmJlwiZXJyb3JcIj09PXUpdGhyb3cgYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBFcnJvcj9hcmd1bWVudHNbMV06bmV3IEVycm9yKFwiVW5jYXVnaHQsIHVuc3BlY2lmaWVkICdlcnJvcicgZXZlbnQuXCIpO3JldHVybiEhdGhpcy5fYWxsfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXRBc3luYz1mdW5jdGlvbigpe2lmKCF0aGlzLl9ldmVudHMmJiF0aGlzLl9hbGwpcmV0dXJuITE7dGhpcy5fZXZlbnRzfHxpbml0LmNhbGwodGhpcyk7dmFyIHQscixvLGksYSxjLHU9YXJndW1lbnRzWzBdLGw9dGhpcy53aWxkY2FyZDtpZihcIm5ld0xpc3RlbmVyXCI9PT11JiYhdGhpcy5fbmV3TGlzdGVuZXImJiF0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZShbITFdKTtpZihsJiYodD11LFwibmV3TGlzdGVuZXJcIiE9PXUmJlwicmVtb3ZlTGlzdGVuZXJcIiE9PXUmJlwib2JqZWN0XCI9PXR5cGVvZiB1KSl7aWYoaT11Lmxlbmd0aCxkKWZvcihhPTA7YTxpO2ErKylpZihcInN5bWJvbFwiPT10eXBlb2YgdVthXSl7cj0hMDticmVha31yfHwodT11LmpvaW4odGhpcy5kZWxpbWl0ZXIpKX12YXIgcCxoPVtdLHk9YXJndW1lbnRzLmxlbmd0aDtpZih0aGlzLl9hbGwpZm9yKGE9MCxpPXRoaXMuX2FsbC5sZW5ndGg7YTxpO2ErKylzd2l0Y2godGhpcy5ldmVudD11LHkpe2Nhc2UgMTpoLnB1c2godGhpcy5fYWxsW2FdLmNhbGwodGhpcyx1KSk7YnJlYWs7Y2FzZSAyOmgucHVzaCh0aGlzLl9hbGxbYV0uY2FsbCh0aGlzLHUsYXJndW1lbnRzWzFdKSk7YnJlYWs7Y2FzZSAzOmgucHVzaCh0aGlzLl9hbGxbYV0uY2FsbCh0aGlzLHUsYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSkpO2JyZWFrO2RlZmF1bHQ6aC5wdXNoKHRoaXMuX2FsbFthXS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfWlmKGw/KHA9W10sc2VhcmNoTGlzdGVuZXJUcmVlLmNhbGwodGhpcyxwLHQsdGhpcy5saXN0ZW5lclRyZWUsMCkpOnA9dGhpcy5fZXZlbnRzW3VdLFwiZnVuY3Rpb25cIj09dHlwZW9mIHApc3dpdGNoKHRoaXMuZXZlbnQ9dSx5KXtjYXNlIDE6aC5wdXNoKHAuY2FsbCh0aGlzKSk7YnJlYWs7Y2FzZSAyOmgucHVzaChwLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pKTticmVhaztjYXNlIDM6aC5wdXNoKHAuY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pKTticmVhaztkZWZhdWx0OmZvcihvPW5ldyBBcnJheSh5LTEpLGM9MTtjPHk7YysrKW9bYy0xXT1hcmd1bWVudHNbY107aC5wdXNoKHAuYXBwbHkodGhpcyxvKSl9ZWxzZSBpZihwJiZwLmxlbmd0aCl7aWYocD1wLnNsaWNlKCkseT4zKWZvcihvPW5ldyBBcnJheSh5LTEpLGM9MTtjPHk7YysrKW9bYy0xXT1hcmd1bWVudHNbY107Zm9yKGE9MCxpPXAubGVuZ3RoO2E8aTthKyspc3dpdGNoKHRoaXMuZXZlbnQ9dSx5KXtjYXNlIDE6aC5wdXNoKHBbYV0uY2FsbCh0aGlzKSk7YnJlYWs7Y2FzZSAyOmgucHVzaChwW2FdLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pKTticmVhaztjYXNlIDM6aC5wdXNoKHBbYV0uY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pKTticmVhaztkZWZhdWx0OmgucHVzaChwW2FdLmFwcGx5KHRoaXMsbykpfX1lbHNlIGlmKCF0aGlzLmlnbm9yZUVycm9ycyYmIXRoaXMuX2FsbCYmXCJlcnJvclwiPT09dSlyZXR1cm4gYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBFcnJvcj9Qcm9taXNlLnJlamVjdChhcmd1bWVudHNbMV0pOlByb21pc2UucmVqZWN0KFwiVW5jYXVnaHQsIHVuc3BlY2lmaWVkICdlcnJvcicgZXZlbnQuXCIpO3JldHVybiBQcm9taXNlLmFsbChoKX0sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LHIsbyl7cmV0dXJuIHRoaXMuX29uKHQsciwhMSxvKX0sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXI9ZnVuY3Rpb24odCxyLG8pe3JldHVybiB0aGlzLl9vbih0LHIsITAsbyl9LEV2ZW50RW1pdHRlci5wcm90b3R5cGUub25Bbnk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29uQW55KHQsITEpfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRBbnk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29uQW55KHQsITApfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyPUV2ZW50RW1pdHRlci5wcm90b3R5cGUub24sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fb25Bbnk9ZnVuY3Rpb24odCxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcihcIm9uQW55IG9ubHkgYWNjZXB0cyBpbnN0YW5jZXMgb2YgRnVuY3Rpb25cIik7cmV0dXJuIHRoaXMuX2FsbHx8KHRoaXMuX2FsbD1bXSkscj90aGlzLl9hbGwudW5zaGlmdCh0KTp0aGlzLl9hbGwucHVzaCh0KSx0aGlzfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9vbj1mdW5jdGlvbih0LHIsbyxpKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXJldHVybiB0aGlzLl9vbkFueSh0LHIpLHRoaXM7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoXCJvbiBvbmx5IGFjY2VwdHMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uXCIpO3RoaXMuX2V2ZW50c3x8aW5pdC5jYWxsKHRoaXMpO3ZhciBhLHU9dGhpcztyZXR1cm4gaSE9PWMmJihyPShhPXNldHVwTGlzdGVuZXIuY2FsbCh0aGlzLHQscixpKSlbMF0sdT1hWzFdKSx0aGlzLl9uZXdMaXN0ZW5lciYmdGhpcy5lbWl0KFwibmV3TGlzdGVuZXJcIix0LHIpLHRoaXMud2lsZGNhcmQ/KGdyb3dMaXN0ZW5lclRyZWUuY2FsbCh0aGlzLHQscixvKSx1KToodGhpcy5fZXZlbnRzW3RdPyhcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLl9ldmVudHNbdF0mJih0aGlzLl9ldmVudHNbdF09W3RoaXMuX2V2ZW50c1t0XV0pLG8/dGhpcy5fZXZlbnRzW3RdLnVuc2hpZnQocik6dGhpcy5fZXZlbnRzW3RdLnB1c2gociksIXRoaXMuX2V2ZW50c1t0XS53YXJuZWQmJnRoaXMuX21heExpc3RlbmVycz4wJiZ0aGlzLl9ldmVudHNbdF0ubGVuZ3RoPnRoaXMuX21heExpc3RlbmVycyYmKHRoaXMuX2V2ZW50c1t0XS53YXJuZWQ9ITAsbG9nUG9zc2libGVNZW1vcnlMZWFrLmNhbGwodGhpcyx0aGlzLl9ldmVudHNbdF0ubGVuZ3RoLHQpKSk6dGhpcy5fZXZlbnRzW3RdPXIsdSl9LEV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKHQscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoXCJyZW1vdmVMaXN0ZW5lciBvbmx5IHRha2VzIGluc3RhbmNlcyBvZiBGdW5jdGlvblwiKTt2YXIgbyxpPVtdO2lmKHRoaXMud2lsZGNhcmQpe3ZhciBhPVwic3RyaW5nXCI9PXR5cGVvZiB0P3Quc3BsaXQodGhpcy5kZWxpbWl0ZXIpOnQuc2xpY2UoKTtpZighKGk9c2VhcmNoTGlzdGVuZXJUcmVlLmNhbGwodGhpcyxudWxsLGEsdGhpcy5saXN0ZW5lclRyZWUsMCkpKXJldHVybiB0aGlzfWVsc2V7aWYoIXRoaXMuX2V2ZW50c1t0XSlyZXR1cm4gdGhpcztvPXRoaXMuX2V2ZW50c1t0XSxpLnB1c2goe19saXN0ZW5lcnM6b30pfWZvcih2YXIgYz0wO2M8aS5sZW5ndGg7YysrKXt2YXIgdT1pW2NdO2lmKG89dS5fbGlzdGVuZXJzLGwobykpe2Zvcih2YXIgcD0tMSxkPTAsaD1vLmxlbmd0aDtkPGg7ZCsrKWlmKG9bZF09PT1yfHxvW2RdLmxpc3RlbmVyJiZvW2RdLmxpc3RlbmVyPT09cnx8b1tkXS5fb3JpZ2luJiZvW2RdLl9vcmlnaW49PT1yKXtwPWQ7YnJlYWt9aWYocDwwKWNvbnRpbnVlO3JldHVybiB0aGlzLndpbGRjYXJkP3UuX2xpc3RlbmVycy5zcGxpY2UocCwxKTp0aGlzLl9ldmVudHNbdF0uc3BsaWNlKHAsMSksMD09PW8ubGVuZ3RoJiYodGhpcy53aWxkY2FyZD9kZWxldGUgdS5fbGlzdGVuZXJzOmRlbGV0ZSB0aGlzLl9ldmVudHNbdF0pLHRoaXMuX3JlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLHQsciksdGhpc30obz09PXJ8fG8ubGlzdGVuZXImJm8ubGlzdGVuZXI9PT1yfHxvLl9vcmlnaW4mJm8uX29yaWdpbj09PXIpJiYodGhpcy53aWxkY2FyZD9kZWxldGUgdS5fbGlzdGVuZXJzOmRlbGV0ZSB0aGlzLl9ldmVudHNbdF0sdGhpcy5fcmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsdCxyKSl9cmV0dXJuIHRoaXMubGlzdGVuZXJUcmVlJiZyZWN1cnNpdmVseUdhcmJhZ2VDb2xsZWN0KHRoaXMubGlzdGVuZXJUcmVlKSx0aGlzfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZkFueT1mdW5jdGlvbih0KXt2YXIgcixvPTAsaT0wO2lmKHQmJnRoaXMuX2FsbCYmdGhpcy5fYWxsLmxlbmd0aD4wKXtmb3Iobz0wLGk9KHI9dGhpcy5fYWxsKS5sZW5ndGg7bzxpO28rKylpZih0PT09cltvXSlyZXR1cm4gci5zcGxpY2UobywxKSx0aGlzLl9yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJBbnlcIix0KSx0aGlzfWVsc2V7aWYocj10aGlzLl9hbGwsdGhpcy5fcmVtb3ZlTGlzdGVuZXIpZm9yKG89MCxpPXIubGVuZ3RoO288aTtvKyspdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJBbnlcIixyW29dKTt0aGlzLl9hbGw9W119cmV0dXJuIHRoaXN9LEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYsRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7aWYodD09PWMpcmV0dXJuIXRoaXMuX2V2ZW50c3x8aW5pdC5jYWxsKHRoaXMpLHRoaXM7aWYodGhpcy53aWxkY2FyZCl7dmFyIHIsbz1zZWFyY2hMaXN0ZW5lclRyZWUuY2FsbCh0aGlzLG51bGwsdCx0aGlzLmxpc3RlbmVyVHJlZSwwKTtpZighbylyZXR1cm4gdGhpcztmb3Iocj0wO3I8by5sZW5ndGg7cisrKW9bcl0uX2xpc3RlbmVycz1udWxsO3RoaXMubGlzdGVuZXJUcmVlJiZyZWN1cnNpdmVseUdhcmJhZ2VDb2xsZWN0KHRoaXMubGlzdGVuZXJUcmVlKX1lbHNlIHRoaXMuX2V2ZW50cyYmKHRoaXMuX2V2ZW50c1t0XT1udWxsKTtyZXR1cm4gdGhpc30sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24odCl7dmFyIHIsbyxpLGEsdSxsPXRoaXMuX2V2ZW50cztpZih0PT09Yyl7aWYodGhpcy53aWxkY2FyZCl0aHJvdyBFcnJvcihcImV2ZW50IG5hbWUgcmVxdWlyZWQgZm9yIHdpbGRjYXJkIGVtaXR0ZXJcIik7aWYoIWwpcmV0dXJuW107Zm9yKGE9KHI9dihsKSkubGVuZ3RoLGk9W107YS0tID4wOylcImZ1bmN0aW9uXCI9PXR5cGVvZihvPWxbclthXV0pP2kucHVzaChvKTppLnB1c2guYXBwbHkoaSxvKTtyZXR1cm4gaX1pZih0aGlzLndpbGRjYXJkKXtpZighKHU9dGhpcy5saXN0ZW5lclRyZWUpKXJldHVybltdO3ZhciBwPVtdLGQ9XCJzdHJpbmdcIj09dHlwZW9mIHQ/dC5zcGxpdCh0aGlzLmRlbGltaXRlcik6dC5zbGljZSgpO3JldHVybiBzZWFyY2hMaXN0ZW5lclRyZWUuY2FsbCh0aGlzLHAsZCx1LDApLHB9cmV0dXJuIGwmJihvPWxbdF0pP1wiZnVuY3Rpb25cIj09dHlwZW9mIG8/W29dOm86W119LEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbih0KXt2YXIgcj10aGlzLl9ldmVudHM7cmV0dXJuIHRoaXMud2lsZGNhcmQ/Y29sbGVjdFRyZWVFdmVudHMuY2FsbCh0aGlzLHRoaXMubGlzdGVuZXJUcmVlLFtdLG51bGwsdCk6cj92KHIpOltdfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGlzdGVuZXJzKHQpLmxlbmd0aH0sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7aWYodGhpcy53aWxkY2FyZCl7dmFyIHI9W10sbz1cInN0cmluZ1wiPT10eXBlb2YgdD90LnNwbGl0KHRoaXMuZGVsaW1pdGVyKTp0LnNsaWNlKCk7cmV0dXJuIHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMscixvLHRoaXMubGlzdGVuZXJUcmVlLDApLHIubGVuZ3RoPjB9dmFyIGk9dGhpcy5fZXZlbnRzLGE9dGhpcy5fYWxsO3JldHVybiEhKGEmJmEubGVuZ3RofHxpJiYodD09PWM/dihpKS5sZW5ndGg6aVt0XSkpfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyc0FueT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbGw/dGhpcy5fYWxsOltdfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLndhaXRGb3I9ZnVuY3Rpb24odCxyKXt2YXIgbz10aGlzLGk9dHlwZW9mIHI7cmV0dXJuXCJudW1iZXJcIj09PWk/cj17dGltZW91dDpyfTpcImZ1bmN0aW9uXCI9PT1pJiYocj17ZmlsdGVyOnJ9KSxtYWtlQ2FuY2VsYWJsZVByb21pc2UoKHI9cmVzb2x2ZU9wdGlvbnMocix7dGltZW91dDowLGZpbHRlcjpjLGhhbmRsZUVycm9yOiExLFByb21pc2Usb3ZlcmxvYWQ6ITF9LHtmaWx0ZXI6ZyxQcm9taXNlOmNvbnN0cnVjdG9yUmVkdWNlcn0pKS5Qcm9taXNlLChmdW5jdGlvbihpLGEsYyl7ZnVuY3Rpb24gbGlzdGVuZXIoKXt2YXIgYz1yLmZpbHRlcjtpZighY3x8Yy5hcHBseShvLGFyZ3VtZW50cykpaWYoby5vZmYodCxsaXN0ZW5lciksci5oYW5kbGVFcnJvcil7dmFyIHU9YXJndW1lbnRzWzBdO3U/YSh1KTppKHRvQXJyYXkuYXBwbHkobnVsbCxhcmd1bWVudHMpLnNsaWNlKDEpKX1lbHNlIGkodG9BcnJheS5hcHBseShudWxsLGFyZ3VtZW50cykpfWMoKGZ1bmN0aW9uKCl7by5vZmYodCxsaXN0ZW5lcil9KSksby5fb24odCxsaXN0ZW5lciwhMSl9KSx7dGltZW91dDpyLnRpbWVvdXQsb3ZlcmxvYWQ6ci5vdmVybG9hZH0pfTt2YXIgbT1FdmVudEVtaXR0ZXIucHJvdG90eXBlO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEV2ZW50RW1pdHRlcix7ZGVmYXVsdE1heExpc3RlbmVyczp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG0uX21heExpc3RlbmVyc30sc2V0OmZ1bmN0aW9uKHQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fE51bWJlci5pc05hTih0KSl0aHJvdyBUeXBlRXJyb3IoXCJuIG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyXCIpO20uX21heExpc3RlbmVycz10fSxlbnVtZXJhYmxlOiEwfSxvbmNlOnt2YWx1ZTpmdW5jdGlvbiBvbmNlKHQscixvKXtyZXR1cm4gbWFrZUNhbmNlbGFibGVQcm9taXNlKChvPXJlc29sdmVPcHRpb25zKG8se1Byb21pc2UsdGltZW91dDowLG92ZXJsb2FkOiExfSx7UHJvbWlzZTpjb25zdHJ1Y3RvclJlZHVjZXJ9KSkuUHJvbWlzZSwoZnVuY3Rpb24obyxpLGEpe3ZhciBjO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuYWRkRXZlbnRMaXN0ZW5lcilyZXR1cm4gYz1mdW5jdGlvbigpe28odG9BcnJheS5hcHBseShudWxsLGFyZ3VtZW50cykpfSxhKChmdW5jdGlvbigpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihyLGMpfSkpLHZvaWQgdC5hZGRFdmVudExpc3RlbmVyKHIsYyx7b25jZTohMH0pO3ZhciB1LGV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oKXt1JiZ0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIix1KSxvKHRvQXJyYXkuYXBwbHkobnVsbCxhcmd1bWVudHMpKX07XCJlcnJvclwiIT09ciYmKHU9ZnVuY3Rpb24obyl7dC5yZW1vdmVMaXN0ZW5lcihyLGV2ZW50TGlzdGVuZXIpLGkobyl9LHQub25jZShcImVycm9yXCIsdSkpLGEoKGZ1bmN0aW9uKCl7dSYmdC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsdSksdC5yZW1vdmVMaXN0ZW5lcihyLGV2ZW50TGlzdGVuZXIpfSkpLHQub25jZShyLGV2ZW50TGlzdGVuZXIpfSkse3RpbWVvdXQ6by50aW1lb3V0LG92ZXJsb2FkOm8ub3ZlcmxvYWR9KX0sd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG0se19tYXhMaXN0ZW5lcnM6e3ZhbHVlOjEwLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0sX29ic2VydmVyczp7dmFsdWU6bnVsbCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksKGk9ZnVuY3Rpb24oKXtyZXR1cm4gRXZlbnRFbWl0dGVyfS5jYWxsKHIsbyxyLHQpKT09PWN8fCh0LmV4cG9ydHM9aSl9KCl9LDczNzU6KHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1TeW1ib2wuZm9yKFwiSU5KRUNUSU9OXCIpO2Z1bmN0aW9uIF9wcm94eUdldHRlcih0LHIsaSxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24gZ2V0dGVyKCl7cmV0dXJuIGEmJiFSZWZsZWN0Lmhhc01ldGFkYXRhKG8sdGhpcyxyKSYmUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShvLGkoKSx0aGlzLHIpLFJlZmxlY3QuaGFzTWV0YWRhdGEobyx0aGlzLHIpP1JlZmxlY3QuZ2V0TWV0YWRhdGEobyx0aGlzLHIpOmkoKX0sc2V0OmZ1bmN0aW9uIHNldHRlcih0KXtSZWZsZWN0LmRlZmluZU1ldGFkYXRhKG8sdCx0aGlzLHIpfX0pfXIubWFrZVByb3BlcnR5SW5qZWN0RGVjb3JhdG9yPWZ1bmN0aW9uIG1ha2VQcm9wZXJ0eUluamVjdERlY29yYXRvcih0LHIpe3JldHVybiBmdW5jdGlvbihvKXtyZXR1cm4gZnVuY3Rpb24oaSxhKXtfcHJveHlHZXR0ZXIoaSxhLChmdW5jdGlvbigpe3JldHVybiB0LmdldChvKX0pLHIpfX19LHIubWFrZVByb3BlcnR5SW5qZWN0TmFtZWREZWNvcmF0b3I9ZnVuY3Rpb24gbWFrZVByb3BlcnR5SW5qZWN0TmFtZWREZWNvcmF0b3IodCxyKXtyZXR1cm4gZnVuY3Rpb24obyxpKXtyZXR1cm4gZnVuY3Rpb24oYSxjKXtfcHJveHlHZXR0ZXIoYSxjLChmdW5jdGlvbigpe3JldHVybiB0LmdldE5hbWVkKG8saSl9KSxyKX19fSxyLm1ha2VQcm9wZXJ0eUluamVjdFRhZ2dlZERlY29yYXRvcj1mdW5jdGlvbiBtYWtlUHJvcGVydHlJbmplY3RUYWdnZWREZWNvcmF0b3IodCxyKXtyZXR1cm4gZnVuY3Rpb24obyxpLGEpe3JldHVybiBmdW5jdGlvbihjLHUpe19wcm94eUdldHRlcihjLHUsKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0VGFnZ2VkKG8saSxhKX0pLHIpfX19LHIubWFrZVByb3BlcnR5TXVsdGlJbmplY3REZWNvcmF0b3I9ZnVuY3Rpb24gbWFrZVByb3BlcnR5TXVsdGlJbmplY3REZWNvcmF0b3IodCxyKXtyZXR1cm4gZnVuY3Rpb24obyl7cmV0dXJuIGZ1bmN0aW9uKGksYSl7X3Byb3h5R2V0dGVyKGksYSwoZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXRBbGwobyl9KSxyKX19fX0sNDg3OToodCxyLG8pPT57dmFyIGk9byg3Mzc1KTtyLlo9ZnVuY3Rpb24gZ2V0RGVjb3JhdG9ycyh0LHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj0hMCkse2xhenlJbmplY3Q6aS5tYWtlUHJvcGVydHlJbmplY3REZWNvcmF0b3IodCxyKSxsYXp5SW5qZWN0TmFtZWQ6aS5tYWtlUHJvcGVydHlJbmplY3ROYW1lZERlY29yYXRvcih0LHIpLGxhenlJbmplY3RUYWdnZWQ6aS5tYWtlUHJvcGVydHlJbmplY3RUYWdnZWREZWNvcmF0b3IodCxyKSxsYXp5TXVsdGlJbmplY3Q6aS5tYWtlUHJvcGVydHlNdWx0aUluamVjdERlY29yYXRvcih0LHIpfX19LDk5MzQ6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIudGFnUHJvcGVydHk9ci50YWdQYXJhbWV0ZXI9ci5kZWNvcmF0ZT12b2lkIDA7dmFyIGk9byg2Njc0KSxhPW8oNjg2Nyk7ZnVuY3Rpb24gX3RhZ1BhcmFtZXRlck9yUHJvcGVydHkodCxyLG8sYSxjKXt2YXIgdT17fSxsPVwibnVtYmVyXCI9PXR5cGVvZiBjLHA9dm9pZCAwIT09YyYmbD9jLnRvU3RyaW5nKCk6bztpZihsJiZ2b2lkIDAhPT1vKXRocm93IG5ldyBFcnJvcihpLklOVkFMSURfREVDT1JBVE9SX09QRVJBVElPTik7UmVmbGVjdC5oYXNPd25NZXRhZGF0YSh0LHIpJiYodT1SZWZsZWN0LmdldE1ldGFkYXRhKHQscikpO3ZhciBkPXVbcF07aWYoQXJyYXkuaXNBcnJheShkKSlmb3IodmFyIGg9MCx5PWQ7aDx5Lmxlbmd0aDtoKyspe3ZhciB2PXlbaF07aWYodi5rZXk9PT1hLmtleSl0aHJvdyBuZXcgRXJyb3IoaS5EVVBMSUNBVEVEX01FVEFEQVRBK1wiIFwiK3Yua2V5LnRvU3RyaW5nKCkpfWVsc2UgZD1bXTtkLnB1c2goYSksdVtwXT1kLFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEodCx1LHIpfWZ1bmN0aW9uIF9kZWNvcmF0ZSh0LHIpe1JlZmxlY3QuZGVjb3JhdGUodCxyKX1mdW5jdGlvbiBfcGFyYW0odCxyKXtyZXR1cm4gZnVuY3Rpb24obyxpKXtyKG8saSx0KX19ci50YWdQYXJhbWV0ZXI9ZnVuY3Rpb24gdGFnUGFyYW1ldGVyKHQscixvLGkpe190YWdQYXJhbWV0ZXJPclByb3BlcnR5KGEuVEFHR0VELHQscixpLG8pfSxyLnRhZ1Byb3BlcnR5PWZ1bmN0aW9uIHRhZ1Byb3BlcnR5KHQscixvKXtfdGFnUGFyYW1ldGVyT3JQcm9wZXJ0eShhLlRBR0dFRF9QUk9QLHQuY29uc3RydWN0b3IscixvKX0sci5kZWNvcmF0ZT1mdW5jdGlvbiBkZWNvcmF0ZSh0LHIsbyl7XCJudW1iZXJcIj09dHlwZW9mIG8/X2RlY29yYXRlKFtfcGFyYW0obyx0KV0scik6XCJzdHJpbmdcIj09dHlwZW9mIG8/UmVmbGVjdC5kZWNvcmF0ZShbdF0scixvKTpfZGVjb3JhdGUoW3RdLHIpfX0sNTc0NDoodCxyLG8pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5pbmplY3Q9ci5MYXp5U2VydmljZUlkZW50aWZlcj12b2lkIDA7dmFyIGk9byg2Njc0KSxhPW8oNjg2NyksYz1vKDc3MzgpLHU9byg5OTM0KSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gTGF6eVNlcnZpY2VJZGVudGlmZXIodCl7dGhpcy5fY2I9dH1yZXR1cm4gTGF6eVNlcnZpY2VJZGVudGlmZXIucHJvdG90eXBlLnVud3JhcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYigpfSxMYXp5U2VydmljZUlkZW50aWZlcn0oKTtyLkxhenlTZXJ2aWNlSWRlbnRpZmVyPWwsci5pbmplY3Q9ZnVuY3Rpb24gaW5qZWN0KHQpe3JldHVybiBmdW5jdGlvbihyLG8sbCl7aWYodm9pZCAwPT09dCl0aHJvdyBuZXcgRXJyb3IoaS5VTkRFRklORURfSU5KRUNUX0FOTk9UQVRJT04oci5uYW1lKSk7dmFyIHA9bmV3IGMuTWV0YWRhdGEoYS5JTkpFQ1RfVEFHLHQpO1wibnVtYmVyXCI9PXR5cGVvZiBsP3UudGFnUGFyYW1ldGVyKHIsbyxsLHApOnUudGFnUHJvcGVydHkocixvLHApfX19LDQzMTU6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuaW5qZWN0YWJsZT12b2lkIDA7dmFyIGk9byg2Njc0KSxhPW8oNjg2Nyk7ci5pbmplY3RhYmxlPWZ1bmN0aW9uIGluamVjdGFibGUoKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYoUmVmbGVjdC5oYXNPd25NZXRhZGF0YShhLlBBUkFNX1RZUEVTLHQpKXRocm93IG5ldyBFcnJvcihpLkRVUExJQ0FURURfSU5KRUNUQUJMRV9ERUNPUkFUT1IpO3ZhciByPVJlZmxlY3QuZ2V0TWV0YWRhdGEoYS5ERVNJR05fUEFSQU1fVFlQRVMsdCl8fFtdO3JldHVybiBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGEuUEFSQU1fVFlQRVMscix0KSx0fX19LDE2OTM6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIubXVsdGlJbmplY3Q9dm9pZCAwO3ZhciBpPW8oNjg2NyksYT1vKDc3MzgpLGM9byg5OTM0KTtyLm11bHRpSW5qZWN0PWZ1bmN0aW9uIG11bHRpSW5qZWN0KHQpe3JldHVybiBmdW5jdGlvbihyLG8sdSl7dmFyIGw9bmV3IGEuTWV0YWRhdGEoaS5NVUxUSV9JTkpFQ1RfVEFHLHQpO1wibnVtYmVyXCI9PXR5cGVvZiB1P2MudGFnUGFyYW1ldGVyKHIsbyx1LGwpOmMudGFnUHJvcGVydHkocixvLGwpfX19LDgwODU6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIubmFtZWQ9dm9pZCAwO3ZhciBpPW8oNjg2NyksYT1vKDc3MzgpLGM9byg5OTM0KTtyLm5hbWVkPWZ1bmN0aW9uIG5hbWVkKHQpe3JldHVybiBmdW5jdGlvbihyLG8sdSl7dmFyIGw9bmV3IGEuTWV0YWRhdGEoaS5OQU1FRF9UQUcsdCk7XCJudW1iZXJcIj09dHlwZW9mIHU/Yy50YWdQYXJhbWV0ZXIocixvLHUsbCk6Yy50YWdQcm9wZXJ0eShyLG8sbCl9fX0sNjUxNToodCxyLG8pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5vcHRpb25hbD12b2lkIDA7dmFyIGk9byg2ODY3KSxhPW8oNzczOCksYz1vKDk5MzQpO3Iub3B0aW9uYWw9ZnVuY3Rpb24gb3B0aW9uYWwoKXtyZXR1cm4gZnVuY3Rpb24odCxyLG8pe3ZhciB1PW5ldyBhLk1ldGFkYXRhKGkuT1BUSU9OQUxfVEFHLCEwKTtcIm51bWJlclwiPT10eXBlb2Ygbz9jLnRhZ1BhcmFtZXRlcih0LHIsbyx1KTpjLnRhZ1Byb3BlcnR5KHQscix1KX19fSw3MDE0Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLnBvc3RDb25zdHJ1Y3Q9dm9pZCAwO3ZhciBpPW8oNjY3NCksYT1vKDY4NjcpLGM9byg3NzM4KTtyLnBvc3RDb25zdHJ1Y3Q9ZnVuY3Rpb24gcG9zdENvbnN0cnVjdCgpe3JldHVybiBmdW5jdGlvbih0LHIsbyl7dmFyIHU9bmV3IGMuTWV0YWRhdGEoYS5QT1NUX0NPTlNUUlVDVCxyKTtpZihSZWZsZWN0Lmhhc093bk1ldGFkYXRhKGEuUE9TVF9DT05TVFJVQ1QsdC5jb25zdHJ1Y3RvcikpdGhyb3cgbmV3IEVycm9yKGkuTVVMVElQTEVfUE9TVF9DT05TVFJVQ1RfTUVUSE9EUyk7UmVmbGVjdC5kZWZpbmVNZXRhZGF0YShhLlBPU1RfQ09OU1RSVUNULHUsdC5jb25zdHJ1Y3Rvcil9fX0sMjA1MjoodCxyLG8pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci50YWdnZWQ9dm9pZCAwO3ZhciBpPW8oNzczOCksYT1vKDk5MzQpO3IudGFnZ2VkPWZ1bmN0aW9uIHRhZ2dlZCh0LHIpe3JldHVybiBmdW5jdGlvbihvLGMsdSl7dmFyIGw9bmV3IGkuTWV0YWRhdGEodCxyKTtcIm51bWJlclwiPT10eXBlb2YgdT9hLnRhZ1BhcmFtZXRlcihvLGMsdSxsKTphLnRhZ1Byb3BlcnR5KG8sYyxsKX19fSw1NjM4Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLnRhcmdldE5hbWU9dm9pZCAwO3ZhciBpPW8oNjg2NyksYT1vKDc3MzgpLGM9byg5OTM0KTtyLnRhcmdldE5hbWU9ZnVuY3Rpb24gdGFyZ2V0TmFtZSh0KXtyZXR1cm4gZnVuY3Rpb24ocixvLHUpe3ZhciBsPW5ldyBhLk1ldGFkYXRhKGkuTkFNRV9UQUcsdCk7Yy50YWdQYXJhbWV0ZXIocixvLHUsbCl9fX0sNjc1NzoodCxyLG8pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci51bm1hbmFnZWQ9dm9pZCAwO3ZhciBpPW8oNjg2NyksYT1vKDc3MzgpLGM9byg5OTM0KTtyLnVubWFuYWdlZD1mdW5jdGlvbiB1bm1hbmFnZWQoKXtyZXR1cm4gZnVuY3Rpb24odCxyLG8pe3ZhciB1PW5ldyBhLk1ldGFkYXRhKGkuVU5NQU5BR0VEX1RBRywhMCk7Yy50YWdQYXJhbWV0ZXIodCxyLG8sdSl9fX0sNDI5MDoodCxyLG8pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5CaW5kaW5nPXZvaWQgMDt2YXIgaT1vKDg0MjEpLGE9byg3NzkxKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQmluZGluZyh0LHIpe3RoaXMuaWQ9YS5pZCgpLHRoaXMuYWN0aXZhdGVkPSExLHRoaXMuc2VydmljZUlkZW50aWZpZXI9dCx0aGlzLnNjb3BlPXIsdGhpcy50eXBlPWkuQmluZGluZ1R5cGVFbnVtLkludmFsaWQsdGhpcy5jb25zdHJhaW50PWZ1bmN0aW9uKHQpe3JldHVybiEwfSx0aGlzLmltcGxlbWVudGF0aW9uVHlwZT1udWxsLHRoaXMuY2FjaGU9bnVsbCx0aGlzLmZhY3Rvcnk9bnVsbCx0aGlzLnByb3ZpZGVyPW51bGwsdGhpcy5vbkFjdGl2YXRpb249bnVsbCx0aGlzLmR5bmFtaWNWYWx1ZT1udWxsfXJldHVybiBCaW5kaW5nLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciB0PW5ldyBCaW5kaW5nKHRoaXMuc2VydmljZUlkZW50aWZpZXIsdGhpcy5zY29wZSk7cmV0dXJuIHQuYWN0aXZhdGVkPXQuc2NvcGU9PT1pLkJpbmRpbmdTY29wZUVudW0uU2luZ2xldG9uJiZ0aGlzLmFjdGl2YXRlZCx0LmltcGxlbWVudGF0aW9uVHlwZT10aGlzLmltcGxlbWVudGF0aW9uVHlwZSx0LmR5bmFtaWNWYWx1ZT10aGlzLmR5bmFtaWNWYWx1ZSx0LnNjb3BlPXRoaXMuc2NvcGUsdC50eXBlPXRoaXMudHlwZSx0LmZhY3Rvcnk9dGhpcy5mYWN0b3J5LHQucHJvdmlkZXI9dGhpcy5wcm92aWRlcix0LmNvbnN0cmFpbnQ9dGhpcy5jb25zdHJhaW50LHQub25BY3RpdmF0aW9uPXRoaXMub25BY3RpdmF0aW9uLHQuY2FjaGU9dGhpcy5jYWNoZSx0fSxCaW5kaW5nfSgpO3IuQmluZGluZz1jfSwzMTg0Oih0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5CaW5kaW5nQ291bnQ9dm9pZCAwO3IuQmluZGluZ0NvdW50PXtNdWx0aXBsZUJpbmRpbmdzQXZhaWxhYmxlOjIsTm9CaW5kaW5nc0F2YWlsYWJsZTowLE9ubHlPbmVCaW5kaW5nQXZhaWxhYmxlOjF9fSw2Njc0Oih0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5TVEFDS19PVkVSRkxPVz1yLkNJUkNVTEFSX0RFUEVOREVOQ1lfSU5fRkFDVE9SWT1yLlBPU1RfQ09OU1RSVUNUX0VSUk9SPXIuTVVMVElQTEVfUE9TVF9DT05TVFJVQ1RfTUVUSE9EUz1yLkNPTlRBSU5FUl9PUFRJT05TX0lOVkFMSURfU0tJUF9CQVNFX0NIRUNLPXIuQ09OVEFJTkVSX09QVElPTlNfSU5WQUxJRF9BVVRPX0JJTkRfSU5KRUNUQUJMRT1yLkNPTlRBSU5FUl9PUFRJT05TX0lOVkFMSURfREVGQVVMVF9TQ09QRT1yLkNPTlRBSU5FUl9PUFRJT05TX01VU1RfQkVfQU5fT0JKRUNUPXIuQVJHVU1FTlRTX0xFTkdUSF9NSVNNQVRDSD1yLklOVkFMSURfREVDT1JBVE9SX09QRVJBVElPTj1yLklOVkFMSURfVE9fU0VMRl9WQUxVRT1yLklOVkFMSURfRlVOQ1RJT05fQklORElORz1yLklOVkFMSURfTUlERExFV0FSRV9SRVRVUk49ci5OT19NT1JFX1NOQVBTSE9UU19BVkFJTEFCTEU9ci5JTlZBTElEX0JJTkRJTkdfVFlQRT1yLk5PVF9JTVBMRU1FTlRFRD1yLkNJUkNVTEFSX0RFUEVOREVOQ1k9ci5VTkRFRklORURfSU5KRUNUX0FOTk9UQVRJT049ci5NSVNTSU5HX0lOSkVDVF9BTk5PVEFUSU9OPXIuTUlTU0lOR19JTkpFQ1RBQkxFX0FOTk9UQVRJT049ci5OT1RfUkVHSVNURVJFRD1yLkNBTk5PVF9VTkJJTkQ9ci5BTUJJR1VPVVNfTUFUQ0g9ci5LRVlfTk9UX0ZPVU5EPXIuTlVMTF9BUkdVTUVOVD1yLkRVUExJQ0FURURfTUVUQURBVEE9ci5EVVBMSUNBVEVEX0lOSkVDVEFCTEVfREVDT1JBVE9SPXZvaWQgMCxyLkRVUExJQ0FURURfSU5KRUNUQUJMRV9ERUNPUkFUT1I9XCJDYW5ub3QgYXBwbHkgQGluamVjdGFibGUgZGVjb3JhdG9yIG11bHRpcGxlIHRpbWVzLlwiLHIuRFVQTElDQVRFRF9NRVRBREFUQT1cIk1ldGFkYXRhIGtleSB3YXMgdXNlZCBtb3JlIHRoYW4gb25jZSBpbiBhIHBhcmFtZXRlcjpcIixyLk5VTExfQVJHVU1FTlQ9XCJOVUxMIGFyZ3VtZW50XCIsci5LRVlfTk9UX0ZPVU5EPVwiS2V5IE5vdCBGb3VuZFwiLHIuQU1CSUdVT1VTX01BVENIPVwiQW1iaWd1b3VzIG1hdGNoIGZvdW5kIGZvciBzZXJ2aWNlSWRlbnRpZmllcjpcIixyLkNBTk5PVF9VTkJJTkQ9XCJDb3VsZCBub3QgdW5iaW5kIHNlcnZpY2VJZGVudGlmaWVyOlwiLHIuTk9UX1JFR0lTVEVSRUQ9XCJObyBtYXRjaGluZyBiaW5kaW5ncyBmb3VuZCBmb3Igc2VydmljZUlkZW50aWZpZXI6XCIsci5NSVNTSU5HX0lOSkVDVEFCTEVfQU5OT1RBVElPTj1cIk1pc3NpbmcgcmVxdWlyZWQgQGluamVjdGFibGUgYW5ub3RhdGlvbiBpbjpcIixyLk1JU1NJTkdfSU5KRUNUX0FOTk9UQVRJT049XCJNaXNzaW5nIHJlcXVpcmVkIEBpbmplY3Qgb3IgQG11bHRpSW5qZWN0IGFubm90YXRpb24gaW46XCI7ci5VTkRFRklORURfSU5KRUNUX0FOTk9UQVRJT049ZnVuY3Rpb24odCl7cmV0dXJuXCJAaW5qZWN0IGNhbGxlZCB3aXRoIHVuZGVmaW5lZCB0aGlzIGNvdWxkIG1lYW4gdGhhdCB0aGUgY2xhc3MgXCIrdCtcIiBoYXMgYSBjaXJjdWxhciBkZXBlbmRlbmN5IHByb2JsZW0uIFlvdSBjYW4gdXNlIGEgTGF6eVNlcnZpY2VJZGVudGlmZXIgdG8gIG92ZXJjb21lIHRoaXMgbGltaXRhdGlvbi5cIn0sci5DSVJDVUxBUl9ERVBFTkRFTkNZPVwiQ2lyY3VsYXIgZGVwZW5kZW5jeSBmb3VuZDpcIixyLk5PVF9JTVBMRU1FTlRFRD1cIlNvcnJ5LCB0aGlzIGZlYXR1cmUgaXMgbm90IGZ1bGx5IGltcGxlbWVudGVkIHlldC5cIixyLklOVkFMSURfQklORElOR19UWVBFPVwiSW52YWxpZCBiaW5kaW5nIHR5cGU6XCIsci5OT19NT1JFX1NOQVBTSE9UU19BVkFJTEFCTEU9XCJObyBzbmFwc2hvdCBhdmFpbGFibGUgdG8gcmVzdG9yZS5cIixyLklOVkFMSURfTUlERExFV0FSRV9SRVRVUk49XCJJbnZhbGlkIHJldHVybiB0eXBlIGluIG1pZGRsZXdhcmUuIE1pZGRsZXdhcmUgbXVzdCByZXR1cm4hXCIsci5JTlZBTElEX0ZVTkNUSU9OX0JJTkRJTkc9XCJWYWx1ZSBwcm92aWRlZCB0byBmdW5jdGlvbiBiaW5kaW5nIG11c3QgYmUgYSBmdW5jdGlvbiFcIixyLklOVkFMSURfVE9fU0VMRl9WQUxVRT1cIlRoZSB0b1NlbGYgZnVuY3Rpb24gY2FuIG9ubHkgYmUgYXBwbGllZCB3aGVuIGEgY29uc3RydWN0b3IgaXMgdXNlZCBhcyBzZXJ2aWNlIGlkZW50aWZpZXJcIixyLklOVkFMSURfREVDT1JBVE9SX09QRVJBVElPTj1cIlRoZSBAaW5qZWN0IEBtdWx0aUluamVjdCBAdGFnZ2VkIGFuZCBAbmFtZWQgZGVjb3JhdG9ycyBtdXN0IGJlIGFwcGxpZWQgdG8gdGhlIHBhcmFtZXRlcnMgb2YgYSBjbGFzcyBjb25zdHJ1Y3RvciBvciBhIGNsYXNzIHByb3BlcnR5LlwiO3IuQVJHVU1FTlRTX0xFTkdUSF9NSVNNQVRDSD1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTtyZXR1cm5cIlRoZSBudW1iZXIgb2YgY29uc3RydWN0b3IgYXJndW1lbnRzIGluIHRoZSBkZXJpdmVkIGNsYXNzIFwiK3RbMF0rXCIgbXVzdCBiZSA+PSB0aGFuIHRoZSBudW1iZXIgb2YgY29uc3RydWN0b3IgYXJndW1lbnRzIG9mIGl0cyBiYXNlIGNsYXNzLlwifSxyLkNPTlRBSU5FUl9PUFRJT05TX01VU1RfQkVfQU5fT0JKRUNUPVwiSW52YWxpZCBDb250YWluZXIgY29uc3RydWN0b3IgYXJndW1lbnQuIENvbnRhaW5lciBvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0LlwiLHIuQ09OVEFJTkVSX09QVElPTlNfSU5WQUxJRF9ERUZBVUxUX1NDT1BFPVwiSW52YWxpZCBDb250YWluZXIgb3B0aW9uLiBEZWZhdWx0IHNjb3BlIG11c3QgYmUgYSBzdHJpbmcgKCdzaW5nbGV0b24nIG9yICd0cmFuc2llbnQnKS5cIixyLkNPTlRBSU5FUl9PUFRJT05TX0lOVkFMSURfQVVUT19CSU5EX0lOSkVDVEFCTEU9XCJJbnZhbGlkIENvbnRhaW5lciBvcHRpb24uIEF1dG8gYmluZCBpbmplY3RhYmxlIG11c3QgYmUgYSBib29sZWFuXCIsci5DT05UQUlORVJfT1BUSU9OU19JTlZBTElEX1NLSVBfQkFTRV9DSEVDSz1cIkludmFsaWQgQ29udGFpbmVyIG9wdGlvbi4gU2tpcCBiYXNlIGNoZWNrIG11c3QgYmUgYSBib29sZWFuXCIsci5NVUxUSVBMRV9QT1NUX0NPTlNUUlVDVF9NRVRIT0RTPVwiQ2Fubm90IGFwcGx5IEBwb3N0Q29uc3RydWN0IGRlY29yYXRvciBtdWx0aXBsZSB0aW1lcyBpbiB0aGUgc2FtZSBjbGFzc1wiO3IuUE9TVF9DT05TVFJVQ1RfRVJST1I9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10scj0wO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuXCJAcG9zdENvbnN0cnVjdCBlcnJvciBpbiBjbGFzcyBcIit0WzBdK1wiOiBcIit0WzFdfTtyLkNJUkNVTEFSX0RFUEVOREVOQ1lfSU5fRkFDVE9SWT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTtyZXR1cm5cIkl0IGxvb2tzIGxpa2UgdGhlcmUgaXMgYSBjaXJjdWxhciBkZXBlbmRlbmN5IGluIG9uZSBvZiB0aGUgJ1wiK3RbMF0rXCInIGJpbmRpbmdzLiBQbGVhc2UgaW52ZXN0aWdhdGUgYmluZGluZ3Mgd2l0aHNlcnZpY2UgaWRlbnRpZmllciAnXCIrdFsxXStcIicuXCJ9LHIuU1RBQ0tfT1ZFUkZMT1c9XCJNYXhpbXVtIGNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwifSw4NDIxOih0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5UYXJnZXRUeXBlRW51bT1yLkJpbmRpbmdUeXBlRW51bT1yLkJpbmRpbmdTY29wZUVudW09dm9pZCAwO3IuQmluZGluZ1Njb3BlRW51bT17UmVxdWVzdDpcIlJlcXVlc3RcIixTaW5nbGV0b246XCJTaW5nbGV0b25cIixUcmFuc2llbnQ6XCJUcmFuc2llbnRcIn07ci5CaW5kaW5nVHlwZUVudW09e0NvbnN0YW50VmFsdWU6XCJDb25zdGFudFZhbHVlXCIsQ29uc3RydWN0b3I6XCJDb25zdHJ1Y3RvclwiLER5bmFtaWNWYWx1ZTpcIkR5bmFtaWNWYWx1ZVwiLEZhY3Rvcnk6XCJGYWN0b3J5XCIsRnVuY3Rpb246XCJGdW5jdGlvblwiLEluc3RhbmNlOlwiSW5zdGFuY2VcIixJbnZhbGlkOlwiSW52YWxpZFwiLFByb3ZpZGVyOlwiUHJvdmlkZXJcIn07ci5UYXJnZXRUeXBlRW51bT17Q2xhc3NQcm9wZXJ0eTpcIkNsYXNzUHJvcGVydHlcIixDb25zdHJ1Y3RvckFyZ3VtZW50OlwiQ29uc3RydWN0b3JBcmd1bWVudFwiLFZhcmlhYmxlOlwiVmFyaWFibGVcIn19LDY4Njc6KHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLk5PTl9DVVNUT01fVEFHX0tFWVM9ci5QT1NUX0NPTlNUUlVDVD1yLkRFU0lHTl9QQVJBTV9UWVBFUz1yLlBBUkFNX1RZUEVTPXIuVEFHR0VEX1BST1A9ci5UQUdHRUQ9ci5NVUxUSV9JTkpFQ1RfVEFHPXIuSU5KRUNUX1RBRz1yLk9QVElPTkFMX1RBRz1yLlVOTUFOQUdFRF9UQUc9ci5OQU1FX1RBRz1yLk5BTUVEX1RBRz12b2lkIDAsci5OQU1FRF9UQUc9XCJuYW1lZFwiLHIuTkFNRV9UQUc9XCJuYW1lXCIsci5VTk1BTkFHRURfVEFHPVwidW5tYW5hZ2VkXCIsci5PUFRJT05BTF9UQUc9XCJvcHRpb25hbFwiLHIuSU5KRUNUX1RBRz1cImluamVjdFwiLHIuTVVMVElfSU5KRUNUX1RBRz1cIm11bHRpX2luamVjdFwiLHIuVEFHR0VEPVwiaW52ZXJzaWZ5OnRhZ2dlZFwiLHIuVEFHR0VEX1BST1A9XCJpbnZlcnNpZnk6dGFnZ2VkX3Byb3BzXCIsci5QQVJBTV9UWVBFUz1cImludmVyc2lmeTpwYXJhbXR5cGVzXCIsci5ERVNJR05fUEFSQU1fVFlQRVM9XCJkZXNpZ246cGFyYW10eXBlc1wiLHIuUE9TVF9DT05TVFJVQ1Q9XCJwb3N0X2NvbnN0cnVjdFwiLHIuTk9OX0NVU1RPTV9UQUdfS0VZUz1mdW5jdGlvbiBnZXROb25DdXN0b21UYWdLZXlzKCl7cmV0dXJuW3IuSU5KRUNUX1RBRyxyLk1VTFRJX0lOSkVDVF9UQUcsci5OQU1FX1RBRyxyLlVOTUFOQUdFRF9UQUcsci5OQU1FRF9UQUcsci5PUFRJT05BTF9UQUddfSgpfSwxMzg5OmZ1bmN0aW9uKHQscixvKXt2YXIgaT10aGlzJiZ0aGlzLl9fYXdhaXRlcnx8ZnVuY3Rpb24odCxyLG8saSl7cmV0dXJuIG5ldyhvfHwobz1Qcm9taXNlKSkoKGZ1bmN0aW9uKGEsYyl7ZnVuY3Rpb24gZnVsZmlsbGVkKHQpe3RyeXtzdGVwKGkubmV4dCh0KSl9Y2F0Y2godCl7Yyh0KX19ZnVuY3Rpb24gcmVqZWN0ZWQodCl7dHJ5e3N0ZXAoaS50aHJvdyh0KSl9Y2F0Y2godCl7Yyh0KX19ZnVuY3Rpb24gc3RlcCh0KXt0LmRvbmU/YSh0LnZhbHVlKTpmdW5jdGlvbiBhZG9wdCh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIG8/dDpuZXcgbygoZnVuY3Rpb24ocil7cih0KX0pKX0odC52YWx1ZSkudGhlbihmdWxmaWxsZWQscmVqZWN0ZWQpfXN0ZXAoKGk9aS5hcHBseSh0LHJ8fFtdKSkubmV4dCgpKX0pKX0sYT10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbih0LHIpe3ZhciBvLGksYSxjLHU9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmYVswXSl0aHJvdyBhWzFdO3JldHVybiBhWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGM9e25leHQ6dmVyYigwKSx0aHJvdzp2ZXJiKDEpLHJldHVybjp2ZXJiKDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihjW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLGM7ZnVuY3Rpb24gdmVyYihjKXtyZXR1cm4gZnVuY3Rpb24obCl7cmV0dXJuIGZ1bmN0aW9uIHN0ZXAoYyl7aWYobyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO3U7KXRyeXtpZihvPTEsaSYmKGE9MiZjWzBdP2kucmV0dXJuOmNbMF0/aS50aHJvd3x8KChhPWkucmV0dXJuKSYmYS5jYWxsKGkpLDApOmkubmV4dCkmJiEoYT1hLmNhbGwoaSxjWzFdKSkuZG9uZSlyZXR1cm4gYTtzd2l0Y2goaT0wLGEmJihjPVsyJmNbMF0sYS52YWx1ZV0pLGNbMF0pe2Nhc2UgMDpjYXNlIDE6YT1jO2JyZWFrO2Nhc2UgNDpyZXR1cm4gdS5sYWJlbCsrLHt2YWx1ZTpjWzFdLGRvbmU6ITF9O2Nhc2UgNTp1LmxhYmVsKyssaT1jWzFdLGM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpjPXUub3BzLnBvcCgpLHUudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoYT11LnRyeXMsKGE9YS5sZW5ndGg+MCYmYVthLmxlbmd0aC0xXSl8fDYhPT1jWzBdJiYyIT09Y1swXSkpe3U9MDtjb250aW51ZX1pZigzPT09Y1swXSYmKCFhfHxjWzFdPmFbMF0mJmNbMV08YVszXSkpe3UubGFiZWw9Y1sxXTticmVha31pZig2PT09Y1swXSYmdS5sYWJlbDxhWzFdKXt1LmxhYmVsPWFbMV0sYT1jO2JyZWFrfWlmKGEmJnUubGFiZWw8YVsyXSl7dS5sYWJlbD1hWzJdLHUub3BzLnB1c2goYyk7YnJlYWt9YVsyXSYmdS5vcHMucG9wKCksdS50cnlzLnBvcCgpO2NvbnRpbnVlfWM9ci5jYWxsKHQsdSl9Y2F0Y2godCl7Yz1bNix0XSxpPTB9ZmluYWxseXtvPWE9MH1pZig1JmNbMF0pdGhyb3cgY1sxXTtyZXR1cm57dmFsdWU6Y1swXT9jWzFdOnZvaWQgMCxkb25lOiEwfX0oW2MsbF0pfX19LGM9dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbih0LHIpe2Zvcih2YXIgbz0wLGk9ci5sZW5ndGgsYT10Lmxlbmd0aDtvPGk7bysrLGErKyl0W2FdPXJbb107cmV0dXJuIHR9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuQ29udGFpbmVyPXZvaWQgMDt2YXIgdT1vKDQyOTApLGw9byg2Njc0KSxwPW8oODQyMSksZD1vKDY4NjcpLGg9bygxMzc3KSx5PW8oNjMxMSksdj1vKDE5MjcpLGc9bygxODYwKSxfPW8oNzc5MSksbT1vKDU4MDApLGI9byg1NzAwKSx3PW8oMTc1KSxTPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQ29udGFpbmVyKHQpe3RoaXMuX2FwcGxpZWRNaWRkbGV3YXJlPVtdO3ZhciByPXR8fHt9O2lmKFwib2JqZWN0XCIhPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcihcIlwiK2wuQ09OVEFJTkVSX09QVElPTlNfTVVTVF9CRV9BTl9PQkpFQ1QpO2lmKHZvaWQgMD09PXIuZGVmYXVsdFNjb3BlKXIuZGVmYXVsdFNjb3BlPXAuQmluZGluZ1Njb3BlRW51bS5UcmFuc2llbnQ7ZWxzZSBpZihyLmRlZmF1bHRTY29wZSE9PXAuQmluZGluZ1Njb3BlRW51bS5TaW5nbGV0b24mJnIuZGVmYXVsdFNjb3BlIT09cC5CaW5kaW5nU2NvcGVFbnVtLlRyYW5zaWVudCYmci5kZWZhdWx0U2NvcGUhPT1wLkJpbmRpbmdTY29wZUVudW0uUmVxdWVzdCl0aHJvdyBuZXcgRXJyb3IoXCJcIitsLkNPTlRBSU5FUl9PUFRJT05TX0lOVkFMSURfREVGQVVMVF9TQ09QRSk7aWYodm9pZCAwPT09ci5hdXRvQmluZEluamVjdGFibGUpci5hdXRvQmluZEluamVjdGFibGU9ITE7ZWxzZSBpZihcImJvb2xlYW5cIiE9dHlwZW9mIHIuYXV0b0JpbmRJbmplY3RhYmxlKXRocm93IG5ldyBFcnJvcihcIlwiK2wuQ09OVEFJTkVSX09QVElPTlNfSU5WQUxJRF9BVVRPX0JJTkRfSU5KRUNUQUJMRSk7aWYodm9pZCAwPT09ci5za2lwQmFzZUNsYXNzQ2hlY2tzKXIuc2tpcEJhc2VDbGFzc0NoZWNrcz0hMTtlbHNlIGlmKFwiYm9vbGVhblwiIT10eXBlb2Ygci5za2lwQmFzZUNsYXNzQ2hlY2tzKXRocm93IG5ldyBFcnJvcihcIlwiK2wuQ09OVEFJTkVSX09QVElPTlNfSU5WQUxJRF9TS0lQX0JBU0VfQ0hFQ0spO3RoaXMub3B0aW9ucz17YXV0b0JpbmRJbmplY3RhYmxlOnIuYXV0b0JpbmRJbmplY3RhYmxlLGRlZmF1bHRTY29wZTpyLmRlZmF1bHRTY29wZSxza2lwQmFzZUNsYXNzQ2hlY2tzOnIuc2tpcEJhc2VDbGFzc0NoZWNrc30sdGhpcy5pZD1fLmlkKCksdGhpcy5fYmluZGluZ0RpY3Rpb25hcnk9bmV3IHcuTG9va3VwLHRoaXMuX3NuYXBzaG90cz1bXSx0aGlzLl9taWRkbGV3YXJlPW51bGwsdGhpcy5wYXJlbnQ9bnVsbCx0aGlzLl9tZXRhZGF0YVJlYWRlcj1uZXcgaC5NZXRhZGF0YVJlYWRlcn1yZXR1cm4gQ29udGFpbmVyLm1lcmdlPWZ1bmN0aW9uKHQscil7Zm9yKHZhciBvPVtdLGk9MjtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKW9baS0yXT1hcmd1bWVudHNbaV07dmFyIGE9bmV3IENvbnRhaW5lcix1PWMoW3Qscl0sbykubWFwKChmdW5jdGlvbih0KXtyZXR1cm4geS5nZXRCaW5kaW5nRGljdGlvbmFyeSh0KX0pKSxsPXkuZ2V0QmluZGluZ0RpY3Rpb25hcnkoYSk7ZnVuY3Rpb24gY29weURpY3Rpb25hcnkodCxyKXt0LnRyYXZlcnNlKChmdW5jdGlvbih0LG8pe28uZm9yRWFjaCgoZnVuY3Rpb24odCl7ci5hZGQodC5zZXJ2aWNlSWRlbnRpZmllcix0LmNsb25lKCkpfSkpfSkpfXJldHVybiB1LmZvckVhY2goKGZ1bmN0aW9uKHQpe2NvcHlEaWN0aW9uYXJ5KHQsbCl9KSksYX0sQ29udGFpbmVyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLHI9MDtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbcl09YXJndW1lbnRzW3JdO2Zvcih2YXIgbz10aGlzLl9nZXRDb250YWluZXJNb2R1bGVIZWxwZXJzRmFjdG9yeSgpLGk9MCxhPXQ7aTxhLmxlbmd0aDtpKyspe3ZhciBjPWFbaV0sdT1vKGMuaWQpO2MucmVnaXN0cnkodS5iaW5kRnVuY3Rpb24sdS51bmJpbmRGdW5jdGlvbix1LmlzYm91bmRGdW5jdGlvbix1LnJlYmluZEZ1bmN0aW9uKX19LENvbnRhaW5lci5wcm90b3R5cGUubG9hZEFzeW5jPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLHI9MDtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbcl09YXJndW1lbnRzW3JdO3JldHVybiBpKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixvLGksYyx1O3JldHVybiBhKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cj10aGlzLl9nZXRDb250YWluZXJNb2R1bGVIZWxwZXJzRmFjdG9yeSgpLG89MCxpPXQsYS5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gbzxpLmxlbmd0aD8oYz1pW29dLHU9cihjLmlkKSxbNCxjLnJlZ2lzdHJ5KHUuYmluZEZ1bmN0aW9uLHUudW5iaW5kRnVuY3Rpb24sdS5pc2JvdW5kRnVuY3Rpb24sdS5yZWJpbmRGdW5jdGlvbildKTpbMyw0XTtjYXNlIDI6YS5zZW50KCksYS5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gbysrLFszLDFdO2Nhc2UgNDpyZXR1cm5bMl19fSkpfSkpfSxDb250YWluZXIucHJvdG90eXBlLnVubG9hZD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLHI9W10sbz0wO288YXJndW1lbnRzLmxlbmd0aDtvKyspcltvXT1hcmd1bWVudHNbb107dmFyIGNvbmRpdGlvbkZhY3Rvcnk9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiByLm1vZHVsZUlkPT09dH19O3IuZm9yRWFjaCgoZnVuY3Rpb24ocil7dmFyIG89Y29uZGl0aW9uRmFjdG9yeShyLmlkKTt0Ll9iaW5kaW5nRGljdGlvbmFyeS5yZW1vdmVCeUNvbmRpdGlvbihvKX0pKX0sQ29udGFpbmVyLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMub3B0aW9ucy5kZWZhdWx0U2NvcGV8fHAuQmluZGluZ1Njb3BlRW51bS5UcmFuc2llbnQsbz1uZXcgdS5CaW5kaW5nKHQscik7cmV0dXJuIHRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5LmFkZCh0LG8pLG5ldyBnLkJpbmRpbmdUb1N5bnRheChvKX0sQ29udGFpbmVyLnByb3RvdHlwZS5yZWJpbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudW5iaW5kKHQpLHRoaXMuYmluZCh0KX0sQ29udGFpbmVyLnByb3RvdHlwZS51bmJpbmQ9ZnVuY3Rpb24odCl7dHJ5e3RoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5LnJlbW92ZSh0KX1jYXRjaChyKXt0aHJvdyBuZXcgRXJyb3IobC5DQU5OT1RfVU5CSU5EK1wiIFwiK20uZ2V0U2VydmljZUlkZW50aWZpZXJBc1N0cmluZyh0KSl9fSxDb250YWluZXIucHJvdG90eXBlLnVuYmluZEFsbD1mdW5jdGlvbigpe3RoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5PW5ldyB3Lkxvb2t1cH0sQ29udGFpbmVyLnByb3RvdHlwZS5pc0JvdW5kPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5Lmhhc0tleSh0KTtyZXR1cm4hciYmdGhpcy5wYXJlbnQmJihyPXRoaXMucGFyZW50LmlzQm91bmQodCkpLHJ9LENvbnRhaW5lci5wcm90b3R5cGUuaXNCb3VuZE5hbWVkPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuaXNCb3VuZFRhZ2dlZCh0LGQuTkFNRURfVEFHLHIpfSxDb250YWluZXIucHJvdG90eXBlLmlzQm91bmRUYWdnZWQ9ZnVuY3Rpb24odCxyLG8pe3ZhciBpPSExO2lmKHRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5Lmhhc0tleSh0KSl7dmFyIGE9dGhpcy5fYmluZGluZ0RpY3Rpb25hcnkuZ2V0KHQpLGM9eS5jcmVhdGVNb2NrUmVxdWVzdCh0aGlzLHQscixvKTtpPWEuc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29uc3RyYWludChjKX0pKX1yZXR1cm4haSYmdGhpcy5wYXJlbnQmJihpPXRoaXMucGFyZW50LmlzQm91bmRUYWdnZWQodCxyLG8pKSxpfSxDb250YWluZXIucHJvdG90eXBlLnNuYXBzaG90PWZ1bmN0aW9uKCl7dGhpcy5fc25hcHNob3RzLnB1c2goYi5Db250YWluZXJTbmFwc2hvdC5vZih0aGlzLl9iaW5kaW5nRGljdGlvbmFyeS5jbG9uZSgpLHRoaXMuX21pZGRsZXdhcmUpKX0sQ29udGFpbmVyLnByb3RvdHlwZS5yZXN0b3JlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fc25hcHNob3RzLnBvcCgpO2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKGwuTk9fTU9SRV9TTkFQU0hPVFNfQVZBSUxBQkxFKTt0aGlzLl9iaW5kaW5nRGljdGlvbmFyeT10LmJpbmRpbmdzLHRoaXMuX21pZGRsZXdhcmU9dC5taWRkbGV3YXJlfSxDb250YWluZXIucHJvdG90eXBlLmNyZWF0ZUNoaWxkPWZ1bmN0aW9uKHQpe3ZhciByPW5ldyBDb250YWluZXIodHx8dGhpcy5vcHRpb25zKTtyZXR1cm4gci5wYXJlbnQ9dGhpcyxyfSxDb250YWluZXIucHJvdG90eXBlLmFwcGx5TWlkZGxld2FyZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTt0aGlzLl9hcHBsaWVkTWlkZGxld2FyZT10aGlzLl9hcHBsaWVkTWlkZGxld2FyZS5jb25jYXQodCk7dmFyIG89dGhpcy5fbWlkZGxld2FyZT90aGlzLl9taWRkbGV3YXJlOnRoaXMuX3BsYW5BbmRSZXNvbHZlKCk7dGhpcy5fbWlkZGxld2FyZT10LnJlZHVjZSgoZnVuY3Rpb24odCxyKXtyZXR1cm4gcih0KX0pLG8pfSxDb250YWluZXIucHJvdG90eXBlLmFwcGx5Q3VzdG9tTWV0YWRhdGFSZWFkZXI9ZnVuY3Rpb24odCl7dGhpcy5fbWV0YWRhdGFSZWFkZXI9dH0sQ29udGFpbmVyLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2dldCghMSwhMSxwLlRhcmdldFR5cGVFbnVtLlZhcmlhYmxlLHQpfSxDb250YWluZXIucHJvdG90eXBlLmdldFRhZ2dlZD1mdW5jdGlvbih0LHIsbyl7cmV0dXJuIHRoaXMuX2dldCghMSwhMSxwLlRhcmdldFR5cGVFbnVtLlZhcmlhYmxlLHQscixvKX0sQ29udGFpbmVyLnByb3RvdHlwZS5nZXROYW1lZD1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLmdldFRhZ2dlZCh0LGQuTkFNRURfVEFHLHIpfSxDb250YWluZXIucHJvdG90eXBlLmdldEFsbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZ2V0KCEwLCEwLHAuVGFyZ2V0VHlwZUVudW0uVmFyaWFibGUsdCl9LENvbnRhaW5lci5wcm90b3R5cGUuZ2V0QWxsVGFnZ2VkPWZ1bmN0aW9uKHQscixvKXtyZXR1cm4gdGhpcy5fZ2V0KCExLCEwLHAuVGFyZ2V0VHlwZUVudW0uVmFyaWFibGUsdCxyLG8pfSxDb250YWluZXIucHJvdG90eXBlLmdldEFsbE5hbWVkPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuZ2V0QWxsVGFnZ2VkKHQsZC5OQU1FRF9UQUcscil9LENvbnRhaW5lci5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt2YXIgcj10aGlzLmNyZWF0ZUNoaWxkKCk7cmV0dXJuIHIuYmluZCh0KS50b1NlbGYoKSx0aGlzLl9hcHBsaWVkTWlkZGxld2FyZS5mb3JFYWNoKChmdW5jdGlvbih0KXtyLmFwcGx5TWlkZGxld2FyZSh0KX0pKSxyLmdldCh0KX0sQ29udGFpbmVyLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyTW9kdWxlSGVscGVyc0ZhY3Rvcnk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHNldE1vZHVsZUlkPWZ1bmN0aW9uKHQscil7dC5fYmluZGluZy5tb2R1bGVJZD1yfSxnZXRSZWJpbmRGdW5jdGlvbj1mdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9dC5yZWJpbmQuYmluZCh0KShvKTtyZXR1cm4gc2V0TW9kdWxlSWQoaSxyKSxpfX07cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybntiaW5kRnVuY3Rpb246KG89cixmdW5jdGlvbihyKXt2YXIgaT10LmJpbmQuYmluZCh0KShyKTtyZXR1cm4gc2V0TW9kdWxlSWQoaSxvKSxpfSksaXNib3VuZEZ1bmN0aW9uOmZ1bmN0aW9uKHIpe3JldHVybiB0LmlzQm91bmQuYmluZCh0KShyKX0scmViaW5kRnVuY3Rpb246Z2V0UmViaW5kRnVuY3Rpb24ociksdW5iaW5kRnVuY3Rpb246ZnVuY3Rpb24ocil7dC51bmJpbmQuYmluZCh0KShyKX19O3ZhciBvfX0sQ29udGFpbmVyLnByb3RvdHlwZS5fZ2V0PWZ1bmN0aW9uKHQscixvLGksYSxjKXt2YXIgdT1udWxsLHA9e2F2b2lkQ29uc3RyYWludHM6dCxjb250ZXh0SW50ZXJjZXB0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGlzTXVsdGlJbmplY3Q6cixrZXk6YSxzZXJ2aWNlSWRlbnRpZmllcjppLHRhcmdldFR5cGU6byx2YWx1ZTpjfTtpZih0aGlzLl9taWRkbGV3YXJlKXtpZihudWxsPT0odT10aGlzLl9taWRkbGV3YXJlKHApKSl0aHJvdyBuZXcgRXJyb3IobC5JTlZBTElEX01JRERMRVdBUkVfUkVUVVJOKX1lbHNlIHU9dGhpcy5fcGxhbkFuZFJlc29sdmUoKShwKTtyZXR1cm4gdX0sQ29udGFpbmVyLnByb3RvdHlwZS5fcGxhbkFuZFJlc29sdmU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz15LnBsYW4odC5fbWV0YWRhdGFSZWFkZXIsdCxyLmlzTXVsdGlJbmplY3Qsci50YXJnZXRUeXBlLHIuc2VydmljZUlkZW50aWZpZXIsci5rZXksci52YWx1ZSxyLmF2b2lkQ29uc3RyYWludHMpO3JldHVybiBvPXIuY29udGV4dEludGVyY2VwdG9yKG8pLHYucmVzb2x2ZShvKX19LENvbnRhaW5lcn0oKTtyLkNvbnRhaW5lcj1TfSwzMjQ0Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLkFzeW5jQ29udGFpbmVyTW9kdWxlPXIuQ29udGFpbmVyTW9kdWxlPXZvaWQgMDt2YXIgaT1vKDc3OTEpLGE9ZnVuY3Rpb24gYSh0KXt0aGlzLmlkPWkuaWQoKSx0aGlzLnJlZ2lzdHJ5PXR9O3IuQ29udGFpbmVyTW9kdWxlPWE7dmFyIGM9ZnVuY3Rpb24gYyh0KXt0aGlzLmlkPWkuaWQoKSx0aGlzLnJlZ2lzdHJ5PXR9O3IuQXN5bmNDb250YWluZXJNb2R1bGU9Y30sNTcwMDoodCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuQ29udGFpbmVyU25hcHNob3Q9dm9pZCAwO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQ29udGFpbmVyU25hcHNob3QoKXt9cmV0dXJuIENvbnRhaW5lclNuYXBzaG90Lm9mPWZ1bmN0aW9uKHQscil7dmFyIG89bmV3IENvbnRhaW5lclNuYXBzaG90O3JldHVybiBvLmJpbmRpbmdzPXQsby5taWRkbGV3YXJlPXIsb30sQ29udGFpbmVyU25hcHNob3R9KCk7ci5Db250YWluZXJTbmFwc2hvdD1vfSwxNzU6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuTG9va3VwPXZvaWQgMDt2YXIgaT1vKDY2NzQpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBMb29rdXAoKXt0aGlzLl9tYXA9bmV3IE1hcH1yZXR1cm4gTG9va3VwLnByb3RvdHlwZS5nZXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwfSxMb29rdXAucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LHIpe2lmKG51bGw9PXQpdGhyb3cgbmV3IEVycm9yKGkuTlVMTF9BUkdVTUVOVCk7aWYobnVsbD09cil0aHJvdyBuZXcgRXJyb3IoaS5OVUxMX0FSR1VNRU5UKTt2YXIgbz10aGlzLl9tYXAuZ2V0KHQpO3ZvaWQgMCE9PW8/KG8ucHVzaChyKSx0aGlzLl9tYXAuc2V0KHQsbykpOnRoaXMuX21hcC5zZXQodCxbcl0pfSxMb29rdXAucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtpZihudWxsPT10KXRocm93IG5ldyBFcnJvcihpLk5VTExfQVJHVU1FTlQpO3ZhciByPXRoaXMuX21hcC5nZXQodCk7aWYodm9pZCAwIT09cilyZXR1cm4gcjt0aHJvdyBuZXcgRXJyb3IoaS5LRVlfTk9UX0ZPVU5EKX0sTG9va3VwLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7aWYobnVsbD09dCl0aHJvdyBuZXcgRXJyb3IoaS5OVUxMX0FSR1VNRU5UKTtpZighdGhpcy5fbWFwLmRlbGV0ZSh0KSl0aHJvdyBuZXcgRXJyb3IoaS5LRVlfTk9UX0ZPVU5EKX0sTG9va3VwLnByb3RvdHlwZS5yZW1vdmVCeUNvbmRpdGlvbj1mdW5jdGlvbih0KXt2YXIgcj10aGlzO3RoaXMuX21hcC5mb3JFYWNoKChmdW5jdGlvbihvLGkpe3ZhciBhPW8uZmlsdGVyKChmdW5jdGlvbihyKXtyZXR1cm4hdChyKX0pKTthLmxlbmd0aD4wP3IuX21hcC5zZXQoaSxhKTpyLl9tYXAuZGVsZXRlKGkpfSkpfSxMb29rdXAucHJvdG90eXBlLmhhc0tleT1mdW5jdGlvbih0KXtpZihudWxsPT10KXRocm93IG5ldyBFcnJvcihpLk5VTExfQVJHVU1FTlQpO3JldHVybiB0aGlzLl9tYXAuaGFzKHQpfSxMb29rdXAucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IExvb2t1cDtyZXR1cm4gdGhpcy5fbWFwLmZvckVhY2goKGZ1bmN0aW9uKHIsbyl7ci5mb3JFYWNoKChmdW5jdGlvbihyKXtyZXR1cm4gdC5hZGQobyxyLmNsb25lKCkpfSkpfSkpLHR9LExvb2t1cC5wcm90b3R5cGUudHJhdmVyc2U9ZnVuY3Rpb24odCl7dGhpcy5fbWFwLmZvckVhY2goKGZ1bmN0aW9uKHIsbyl7dChvLHIpfSkpfSxMb29rdXB9KCk7ci5Mb29rdXA9YX0sNjcwMDoodCxyLG8pPT57ci5HVz1yLnpZPXIuTlQ9ci5iMj1yLkxzPXIuVzI9dm9pZCAwLG8oNjg2Nyk7dmFyIGk9bygxMzg5KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlcyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkuQ29udGFpbmVyfX0pO3ZhciBhPW8oODQyMSk7dmFyIGM9bygzMjQ0KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkxzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuQXN5bmNDb250YWluZXJNb2R1bGV9fSk7dmFyIHU9byg0MzE1KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImIyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuaW5qZWN0YWJsZX19KTt2YXIgbD1vKDIwNTIpO3ZhciBwPW8oODA4NSk7dmFyIGQ9byg1NzQ0KTt2YXIgaD1vKDY1MTUpO3ZhciB5PW8oNjc1Nyk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJOVFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB5LnVubWFuYWdlZH19KTt2YXIgdj1vKDE2OTMpO3ZhciBnPW8oNTYzOCk7dmFyIF89byg3MDE0KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcInpZXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIF8ucG9zdENvbnN0cnVjdH19KTt2YXIgbT1vKDEzNzcpO3ZhciBiPW8oNzc5MSk7dmFyIHc9byg5OTM0KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdXXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHcuZGVjb3JhdGV9fSk7dmFyIFM9byg3NTgpO3ZhciBDPW8oNTgwMCk7dmFyIE89byg2MDApfSw1MjI4Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLkNvbnRleHQ9dm9pZCAwO3ZhciBpPW8oNzc5MSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIENvbnRleHQodCl7dGhpcy5pZD1pLmlkKCksdGhpcy5jb250YWluZXI9dH1yZXR1cm4gQ29udGV4dC5wcm90b3R5cGUuYWRkUGxhbj1mdW5jdGlvbih0KXt0aGlzLnBsYW49dH0sQ29udGV4dC5wcm90b3R5cGUuc2V0Q3VycmVudFJlcXVlc3Q9ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50UmVxdWVzdD10fSxDb250ZXh0fSgpO3IuQ29udGV4dD1hfSw3NzM4Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLk1ldGFkYXRhPXZvaWQgMDt2YXIgaT1vKDY4NjcpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBNZXRhZGF0YSh0LHIpe3RoaXMua2V5PXQsdGhpcy52YWx1ZT1yfXJldHVybiBNZXRhZGF0YS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rZXk9PT1pLk5BTUVEX1RBRz9cIm5hbWVkOiBcIit0aGlzLnZhbHVlLnRvU3RyaW5nKCkrXCIgXCI6XCJ0YWdnZWQ6IHsga2V5OlwiK3RoaXMua2V5LnRvU3RyaW5nKCkrXCIsIHZhbHVlOiBcIit0aGlzLnZhbHVlK1wiIH1cIn0sTWV0YWRhdGF9KCk7ci5NZXRhZGF0YT1hfSwxMzc3Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLk1ldGFkYXRhUmVhZGVyPXZvaWQgMDt2YXIgaT1vKDY4NjcpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBNZXRhZGF0YVJlYWRlcigpe31yZXR1cm4gTWV0YWRhdGFSZWFkZXIucHJvdG90eXBlLmdldENvbnN0cnVjdG9yTWV0YWRhdGE9ZnVuY3Rpb24odCl7cmV0dXJue2NvbXBpbGVyR2VuZXJhdGVkTWV0YWRhdGE6UmVmbGVjdC5nZXRNZXRhZGF0YShpLlBBUkFNX1RZUEVTLHQpLHVzZXJHZW5lcmF0ZWRNZXRhZGF0YTpSZWZsZWN0LmdldE1ldGFkYXRhKGkuVEFHR0VELHQpfHx7fX19LE1ldGFkYXRhUmVhZGVyLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzTWV0YWRhdGE9ZnVuY3Rpb24odCl7cmV0dXJuIFJlZmxlY3QuZ2V0TWV0YWRhdGEoaS5UQUdHRURfUFJPUCx0KXx8W119LE1ldGFkYXRhUmVhZGVyfSgpO3IuTWV0YWRhdGFSZWFkZXI9YX0sNTMxNDoodCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuUGxhbj12b2lkIDA7dmFyIG89ZnVuY3Rpb24gbyh0LHIpe3RoaXMucGFyZW50Q29udGV4dD10LHRoaXMucm9vdFJlcXVlc3Q9cn07ci5QbGFuPW99LDYzMTE6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuZ2V0QmluZGluZ0RpY3Rpb25hcnk9ci5jcmVhdGVNb2NrUmVxdWVzdD1yLnBsYW49dm9pZCAwO3ZhciBpPW8oMzE4NCksYT1vKDY2NzQpLGM9byg4NDIxKSx1PW8oNjg2NyksbD1vKDUyNjUpLHA9byg1ODAwKSxkPW8oNTIyOCksaD1vKDc3MzgpLHk9byg1MzE0KSx2PW8oNmUzKSxnPW8oNjc0OCksXz1vKDg5MjQpO2Z1bmN0aW9uIGdldEJpbmRpbmdEaWN0aW9uYXJ5KHQpe3JldHVybiB0Ll9iaW5kaW5nRGljdGlvbmFyeX1mdW5jdGlvbiBfZ2V0QWN0aXZlQmluZGluZ3ModCxyLG8sYyx1KXt2YXIgbD1nZXRCaW5kaW5ncyhvLmNvbnRhaW5lcix1LnNlcnZpY2VJZGVudGlmaWVyKSxkPVtdO3JldHVybiBsLmxlbmd0aD09PWkuQmluZGluZ0NvdW50Lk5vQmluZGluZ3NBdmFpbGFibGUmJm8uY29udGFpbmVyLm9wdGlvbnMuYXV0b0JpbmRJbmplY3RhYmxlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB1LnNlcnZpY2VJZGVudGlmaWVyJiZ0LmdldENvbnN0cnVjdG9yTWV0YWRhdGEodS5zZXJ2aWNlSWRlbnRpZmllcikuY29tcGlsZXJHZW5lcmF0ZWRNZXRhZGF0YSYmKG8uY29udGFpbmVyLmJpbmQodS5zZXJ2aWNlSWRlbnRpZmllcikudG9TZWxmKCksbD1nZXRCaW5kaW5ncyhvLmNvbnRhaW5lcix1LnNlcnZpY2VJZGVudGlmaWVyKSksZD1yP2w6bC5maWx0ZXIoKGZ1bmN0aW9uKHQpe3ZhciByPW5ldyBnLlJlcXVlc3QodC5zZXJ2aWNlSWRlbnRpZmllcixvLGMsdCx1KTtyZXR1cm4gdC5jb25zdHJhaW50KHIpfSkpLGZ1bmN0aW9uIF92YWxpZGF0ZUFjdGl2ZUJpbmRpbmdDb3VudCh0LHIsbyxjKXtzd2l0Y2goci5sZW5ndGgpe2Nhc2UgaS5CaW5kaW5nQ291bnQuTm9CaW5kaW5nc0F2YWlsYWJsZTppZihvLmlzT3B0aW9uYWwoKSlyZXR1cm4gcjt2YXIgdT1wLmdldFNlcnZpY2VJZGVudGlmaWVyQXNTdHJpbmcodCksbD1hLk5PVF9SRUdJU1RFUkVEO3Rocm93IGwrPXAubGlzdE1ldGFkYXRhRm9yVGFyZ2V0KHUsbyksbCs9cC5saXN0UmVnaXN0ZXJlZEJpbmRpbmdzRm9yU2VydmljZUlkZW50aWZpZXIoYyx1LGdldEJpbmRpbmdzKSxuZXcgRXJyb3IobCk7Y2FzZSBpLkJpbmRpbmdDb3VudC5Pbmx5T25lQmluZGluZ0F2YWlsYWJsZTppZighby5pc0FycmF5KCkpcmV0dXJuIHI7Y2FzZSBpLkJpbmRpbmdDb3VudC5NdWx0aXBsZUJpbmRpbmdzQXZhaWxhYmxlOmRlZmF1bHQ6aWYoby5pc0FycmF5KCkpcmV0dXJuIHI7dT1wLmdldFNlcnZpY2VJZGVudGlmaWVyQXNTdHJpbmcodCksbD1hLkFNQklHVU9VU19NQVRDSCtcIiBcIit1O3Rocm93IGwrPXAubGlzdFJlZ2lzdGVyZWRCaW5kaW5nc0ZvclNlcnZpY2VJZGVudGlmaWVyKGMsdSxnZXRCaW5kaW5ncyksbmV3IEVycm9yKGwpfX0odS5zZXJ2aWNlSWRlbnRpZmllcixkLHUsby5jb250YWluZXIpLGR9ZnVuY3Rpb24gX2NyZWF0ZVN1YlJlcXVlc3RzKHQscixvLGksdSxsKXt2YXIgcCxkO2lmKG51bGw9PT11KXtwPV9nZXRBY3RpdmVCaW5kaW5ncyh0LHIsaSxudWxsLGwpLGQ9bmV3IGcuUmVxdWVzdChvLGksbnVsbCxwLGwpO3ZhciBoPW5ldyB5LlBsYW4oaSxkKTtpLmFkZFBsYW4oaCl9ZWxzZSBwPV9nZXRBY3RpdmVCaW5kaW5ncyh0LHIsaSx1LGwpLGQ9dS5hZGRDaGlsZFJlcXVlc3QobC5zZXJ2aWNlSWRlbnRpZmllcixwLGwpO3AuZm9yRWFjaCgoZnVuY3Rpb24ocil7dmFyIG89bnVsbDtpZihsLmlzQXJyYXkoKSlvPWQuYWRkQ2hpbGRSZXF1ZXN0KHIuc2VydmljZUlkZW50aWZpZXIscixsKTtlbHNle2lmKHIuY2FjaGUpcmV0dXJuO289ZH1pZihyLnR5cGU9PT1jLkJpbmRpbmdUeXBlRW51bS5JbnN0YW5jZSYmbnVsbCE9PXIuaW1wbGVtZW50YXRpb25UeXBlKXt2YXIgdT12LmdldERlcGVuZGVuY2llcyh0LHIuaW1wbGVtZW50YXRpb25UeXBlKTtpZighaS5jb250YWluZXIub3B0aW9ucy5za2lwQmFzZUNsYXNzQ2hlY2tzKXt2YXIgcD12LmdldEJhc2VDbGFzc0RlcGVuZGVuY3lDb3VudCh0LHIuaW1wbGVtZW50YXRpb25UeXBlKTtpZih1Lmxlbmd0aDxwKXt2YXIgaD1hLkFSR1VNRU5UU19MRU5HVEhfTUlTTUFUQ0godi5nZXRGdW5jdGlvbk5hbWUoci5pbXBsZW1lbnRhdGlvblR5cGUpKTt0aHJvdyBuZXcgRXJyb3IoaCl9fXUuZm9yRWFjaCgoZnVuY3Rpb24ocil7X2NyZWF0ZVN1YlJlcXVlc3RzKHQsITEsci5zZXJ2aWNlSWRlbnRpZmllcixpLG8scil9KSl9fSkpfWZ1bmN0aW9uIGdldEJpbmRpbmdzKHQscil7dmFyIG89W10saT1nZXRCaW5kaW5nRGljdGlvbmFyeSh0KTtyZXR1cm4gaS5oYXNLZXkocik/bz1pLmdldChyKTpudWxsIT09dC5wYXJlbnQmJihvPWdldEJpbmRpbmdzKHQucGFyZW50LHIpKSxvfXIuZ2V0QmluZGluZ0RpY3Rpb25hcnk9Z2V0QmluZGluZ0RpY3Rpb25hcnksci5wbGFuPWZ1bmN0aW9uIHBsYW4odCxyLG8saSxhLGMseSx2KXt2b2lkIDA9PT12JiYodj0hMSk7dmFyIGc9bmV3IGQuQ29udGV4dChyKSxtPWZ1bmN0aW9uIF9jcmVhdGVUYXJnZXQodCxyLG8saSxhLGMpe3ZhciBsPXQ/dS5NVUxUSV9JTkpFQ1RfVEFHOnUuSU5KRUNUX1RBRyxwPW5ldyBoLk1ldGFkYXRhKGwsbyksZD1uZXcgXy5UYXJnZXQocixpLG8scCk7aWYodm9pZCAwIT09YSl7dmFyIHk9bmV3IGguTWV0YWRhdGEoYSxjKTtkLm1ldGFkYXRhLnB1c2goeSl9cmV0dXJuIGR9KG8saSxhLFwiXCIsYyx5KTt0cnl7cmV0dXJuIF9jcmVhdGVTdWJSZXF1ZXN0cyh0LHYsYSxnLG51bGwsbSksZ31jYXRjaCh0KXt0aHJvdyBsLmlzU3RhY2tPdmVyZmxvd0V4ZXB0aW9uKHQpJiZnLnBsYW4mJnAuY2lyY3VsYXJEZXBlbmRlbmN5VG9FeGNlcHRpb24oZy5wbGFuLnJvb3RSZXF1ZXN0KSx0fX0sci5jcmVhdGVNb2NrUmVxdWVzdD1mdW5jdGlvbiBjcmVhdGVNb2NrUmVxdWVzdCh0LHIsbyxpKXt2YXIgYT1uZXcgXy5UYXJnZXQoYy5UYXJnZXRUeXBlRW51bS5WYXJpYWJsZSxcIlwiLHIsbmV3IGguTWV0YWRhdGEobyxpKSksdT1uZXcgZC5Db250ZXh0KHQpO3JldHVybiBuZXcgZy5SZXF1ZXN0KHIsdSxudWxsLFtdLGEpfX0sODQ2MDoodCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuUXVlcnlhYmxlU3RyaW5nPXZvaWQgMDt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIFF1ZXJ5YWJsZVN0cmluZyh0KXt0aGlzLnN0cj10fXJldHVybiBRdWVyeWFibGVTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGg9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10aGlzLnN0ci5pbmRleE9mKHQpfSxRdWVyeWFibGVTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoPWZ1bmN0aW9uKHQpe3ZhciByLG89dC5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKTtyZXR1cm4gcj10aGlzLnN0ci5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKSx0aGlzLnN0YXJ0c1dpdGguY2FsbCh7c3RyOnJ9LG8pfSxRdWVyeWFibGVTdHJpbmcucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHQpe3JldHVybi0xIT09dGhpcy5zdHIuaW5kZXhPZih0KX0sUXVlcnlhYmxlU3RyaW5nLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RyPT09dH0sUXVlcnlhYmxlU3RyaW5nLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cn0sUXVlcnlhYmxlU3RyaW5nfSgpO3IuUXVlcnlhYmxlU3RyaW5nPW99LDZlMzpmdW5jdGlvbih0LHIsbyl7dmFyIGk9dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbih0LHIpe2Zvcih2YXIgbz0wLGk9ci5sZW5ndGgsYT10Lmxlbmd0aDtvPGk7bysrLGErKyl0W2FdPXJbb107cmV0dXJuIHR9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuZ2V0RnVuY3Rpb25OYW1lPXIuZ2V0QmFzZUNsYXNzRGVwZW5kZW5jeUNvdW50PXIuZ2V0RGVwZW5kZW5jaWVzPXZvaWQgMDt2YXIgYT1vKDU3NDQpLGM9byg2Njc0KSx1PW8oODQyMSksbD1vKDY4NjcpLHA9byg1ODAwKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImdldEZ1bmN0aW9uTmFtZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBwLmdldEZ1bmN0aW9uTmFtZX19KTt2YXIgZD1vKDg5MjQpO2Z1bmN0aW9uIGdldFRhcmdldHModCxyLG8sYSl7dmFyIHU9dC5nZXRDb25zdHJ1Y3Rvck1ldGFkYXRhKG8pLGw9dS5jb21waWxlckdlbmVyYXRlZE1ldGFkYXRhO2lmKHZvaWQgMD09PWwpe3ZhciBwPWMuTUlTU0lOR19JTkpFQ1RBQkxFX0FOTk9UQVRJT04rXCIgXCIrcitcIi5cIjt0aHJvdyBuZXcgRXJyb3IocCl9dmFyIGQ9dS51c2VyR2VuZXJhdGVkTWV0YWRhdGEsaD1PYmplY3Qua2V5cyhkKSx5PTA9PT1vLmxlbmd0aCYmaC5sZW5ndGg+MCx2PWgubGVuZ3RoPm8ubGVuZ3RoLGc9ZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JBcmdzQXNUYXJnZXRzKHQscixvLGksYSl7Zm9yKHZhciBjPVtdLHU9MDt1PGE7dSsrKXt2YXIgbD1nZXRDb25zdHJ1Y3RvckFyZ3NBc1RhcmdldCh1LHQscixvLGkpO251bGwhPT1sJiZjLnB1c2gobCl9cmV0dXJuIGN9KGEscixsLGQseXx8dj9oLmxlbmd0aDpvLmxlbmd0aCksXz1nZXRDbGFzc1Byb3BzQXNUYXJnZXRzKHQsbyk7cmV0dXJuIGkoaShbXSxnKSxfKX1mdW5jdGlvbiBnZXRDb25zdHJ1Y3RvckFyZ3NBc1RhcmdldCh0LHIsbyxpLGwpe3ZhciBwPWxbdC50b1N0cmluZygpXXx8W10saD1mb3JtYXRUYXJnZXRNZXRhZGF0YShwKSx5PSEwIT09aC51bm1hbmFnZWQsdj1pW3RdLGc9aC5pbmplY3R8fGgubXVsdGlJbmplY3Q7aWYoKHY9Z3x8dilpbnN0YW5jZW9mIGEuTGF6eVNlcnZpY2VJZGVudGlmZXImJih2PXYudW53cmFwKCkpLHkpe2lmKCFyJiYodj09PU9iamVjdHx8dj09PUZ1bmN0aW9ufHx2b2lkIDA9PT12KSl7dmFyIF89Yy5NSVNTSU5HX0lOSkVDVF9BTk5PVEFUSU9OK1wiIGFyZ3VtZW50IFwiK3QrXCIgaW4gY2xhc3MgXCIrbytcIi5cIjt0aHJvdyBuZXcgRXJyb3IoXyl9dmFyIG09bmV3IGQuVGFyZ2V0KHUuVGFyZ2V0VHlwZUVudW0uQ29uc3RydWN0b3JBcmd1bWVudCxoLnRhcmdldE5hbWUsdik7cmV0dXJuIG0ubWV0YWRhdGE9cCxtfXJldHVybiBudWxsfWZ1bmN0aW9uIGdldENsYXNzUHJvcHNBc1RhcmdldHModCxyKXtmb3IodmFyIG89dC5nZXRQcm9wZXJ0aWVzTWV0YWRhdGEociksYT1bXSxjPTAsbD1PYmplY3Qua2V5cyhvKTtjPGwubGVuZ3RoO2MrKyl7dmFyIHA9bFtjXSxoPW9bcF0seT1mb3JtYXRUYXJnZXRNZXRhZGF0YShvW3BdKSx2PXkudGFyZ2V0TmFtZXx8cCxnPXkuaW5qZWN0fHx5Lm11bHRpSW5qZWN0LF89bmV3IGQuVGFyZ2V0KHUuVGFyZ2V0VHlwZUVudW0uQ2xhc3NQcm9wZXJ0eSx2LGcpO18ubWV0YWRhdGE9aCxhLnB1c2goXyl9dmFyIG09T2JqZWN0LmdldFByb3RvdHlwZU9mKHIucHJvdG90eXBlKS5jb25zdHJ1Y3RvcjtpZihtIT09T2JqZWN0KXt2YXIgYj1nZXRDbGFzc1Byb3BzQXNUYXJnZXRzKHQsbSk7YT1pKGkoW10sYSksYil9cmV0dXJuIGF9ZnVuY3Rpb24gZm9ybWF0VGFyZ2V0TWV0YWRhdGEodCl7dmFyIHI9e307cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7clt0LmtleS50b1N0cmluZygpXT10LnZhbHVlfSkpLHtpbmplY3Q6cltsLklOSkVDVF9UQUddLG11bHRpSW5qZWN0OnJbbC5NVUxUSV9JTkpFQ1RfVEFHXSx0YXJnZXROYW1lOnJbbC5OQU1FX1RBR10sdW5tYW5hZ2VkOnJbbC5VTk1BTkFHRURfVEFHXX19ci5nZXREZXBlbmRlbmNpZXM9ZnVuY3Rpb24gZ2V0RGVwZW5kZW5jaWVzKHQscil7cmV0dXJuIGdldFRhcmdldHModCxwLmdldEZ1bmN0aW9uTmFtZShyKSxyLCExKX0sci5nZXRCYXNlQ2xhc3NEZXBlbmRlbmN5Q291bnQ9ZnVuY3Rpb24gZ2V0QmFzZUNsYXNzRGVwZW5kZW5jeUNvdW50KHQscil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKHIucHJvdG90eXBlKS5jb25zdHJ1Y3RvcjtpZihvIT09T2JqZWN0KXt2YXIgaT1nZXRUYXJnZXRzKHQscC5nZXRGdW5jdGlvbk5hbWUobyksbywhMCksYT1pLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQubWV0YWRhdGEuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXk9PT1sLlVOTUFOQUdFRF9UQUd9KSl9KSksYz1bXS5jb25jYXQuYXBwbHkoW10sYSkubGVuZ3RoLHU9aS5sZW5ndGgtYztyZXR1cm4gdT4wP3U6Z2V0QmFzZUNsYXNzRGVwZW5kZW5jeUNvdW50KHQsbyl9cmV0dXJuIDB9fSw2NzQ4Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLlJlcXVlc3Q9dm9pZCAwO3ZhciBpPW8oNzc5MSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIFJlcXVlc3QodCxyLG8sYSxjKXt0aGlzLmlkPWkuaWQoKSx0aGlzLnNlcnZpY2VJZGVudGlmaWVyPXQsdGhpcy5wYXJlbnRDb250ZXh0PXIsdGhpcy5wYXJlbnRSZXF1ZXN0PW8sdGhpcy50YXJnZXQ9Yyx0aGlzLmNoaWxkUmVxdWVzdHM9W10sdGhpcy5iaW5kaW5ncz1BcnJheS5pc0FycmF5KGEpP2E6W2FdLHRoaXMucmVxdWVzdFNjb3BlPW51bGw9PT1vP25ldyBNYXA6bnVsbH1yZXR1cm4gUmVxdWVzdC5wcm90b3R5cGUuYWRkQ2hpbGRSZXF1ZXN0PWZ1bmN0aW9uKHQscixvKXt2YXIgaT1uZXcgUmVxdWVzdCh0LHRoaXMucGFyZW50Q29udGV4dCx0aGlzLHIsbyk7cmV0dXJuIHRoaXMuY2hpbGRSZXF1ZXN0cy5wdXNoKGkpLGl9LFJlcXVlc3R9KCk7ci5SZXF1ZXN0PWF9LDg5MjQ6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuVGFyZ2V0PXZvaWQgMDt2YXIgaT1vKDY4NjcpLGE9byg3NzkxKSxjPW8oNzczOCksdT1vKDg0NjApLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBUYXJnZXQodCxyLG8sbCl7dGhpcy5pZD1hLmlkKCksdGhpcy50eXBlPXQsdGhpcy5zZXJ2aWNlSWRlbnRpZmllcj1vLHRoaXMubmFtZT1uZXcgdS5RdWVyeWFibGVTdHJpbmcocnx8XCJcIiksdGhpcy5tZXRhZGF0YT1uZXcgQXJyYXk7dmFyIHA9bnVsbDtcInN0cmluZ1wiPT10eXBlb2YgbD9wPW5ldyBjLk1ldGFkYXRhKGkuTkFNRURfVEFHLGwpOmwgaW5zdGFuY2VvZiBjLk1ldGFkYXRhJiYocD1sKSxudWxsIT09cCYmdGhpcy5tZXRhZGF0YS5wdXNoKHApfXJldHVybiBUYXJnZXQucHJvdG90eXBlLmhhc1RhZz1mdW5jdGlvbih0KXtmb3IodmFyIHI9MCxvPXRoaXMubWV0YWRhdGE7cjxvLmxlbmd0aDtyKyspe2lmKG9bcl0ua2V5PT09dClyZXR1cm4hMH1yZXR1cm4hMX0sVGFyZ2V0LnByb3RvdHlwZS5pc0FycmF5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzVGFnKGkuTVVMVElfSU5KRUNUX1RBRyl9LFRhcmdldC5wcm90b3R5cGUubWF0Y2hlc0FycmF5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1hdGNoZXNUYWcoaS5NVUxUSV9JTkpFQ1RfVEFHKSh0KX0sVGFyZ2V0LnByb3RvdHlwZS5pc05hbWVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzVGFnKGkuTkFNRURfVEFHKX0sVGFyZ2V0LnByb3RvdHlwZS5pc1RhZ2dlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1ldGFkYXRhLnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiBpLk5PTl9DVVNUT01fVEFHX0tFWVMuZXZlcnkoKGZ1bmN0aW9uKHIpe3JldHVybiB0LmtleSE9PXJ9KSl9KSl9LFRhcmdldC5wcm90b3R5cGUuaXNPcHRpb25hbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hdGNoZXNUYWcoaS5PUFRJT05BTF9UQUcpKCEwKX0sVGFyZ2V0LnByb3RvdHlwZS5nZXROYW1lZFRhZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTmFtZWQoKT90aGlzLm1ldGFkYXRhLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5PT09aS5OQU1FRF9UQUd9KSlbMF06bnVsbH0sVGFyZ2V0LnByb3RvdHlwZS5nZXRDdXN0b21UYWdzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNUYWdnZWQoKT90aGlzLm1ldGFkYXRhLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIGkuTk9OX0NVU1RPTV9UQUdfS0VZUy5ldmVyeSgoZnVuY3Rpb24ocil7cmV0dXJuIHQua2V5IT09cn0pKX0pKTpudWxsfSxUYXJnZXQucHJvdG90eXBlLm1hdGNoZXNOYW1lZFRhZz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tYXRjaGVzVGFnKGkuTkFNRURfVEFHKSh0KX0sVGFyZ2V0LnByb3RvdHlwZS5tYXRjaGVzVGFnPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKG8pe2Zvcih2YXIgaT0wLGE9ci5tZXRhZGF0YTtpPGEubGVuZ3RoO2krKyl7dmFyIGM9YVtpXTtpZihjLmtleT09PXQmJmMudmFsdWU9PT1vKXJldHVybiEwfXJldHVybiExfX0sVGFyZ2V0fSgpO3IuVGFyZ2V0PWx9LDIyNzk6ZnVuY3Rpb24odCxyLG8pe3ZhciBpPXRoaXMmJnRoaXMuX19zcHJlYWRBcnJheXx8ZnVuY3Rpb24odCxyKXtmb3IodmFyIG89MCxpPXIubGVuZ3RoLGE9dC5sZW5ndGg7bzxpO28rKyxhKyspdFthXT1yW29dO3JldHVybiB0fTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLnJlc29sdmVJbnN0YW5jZT12b2lkIDA7dmFyIGE9byg2Njc0KSxjPW8oODQyMSksdT1vKDY4NjcpO3IucmVzb2x2ZUluc3RhbmNlPWZ1bmN0aW9uIHJlc29sdmVJbnN0YW5jZSh0LHIsbyl7dmFyIGw9bnVsbDtyZXR1cm4gbD1yLmxlbmd0aD4wP2Z1bmN0aW9uIF9pbmplY3RQcm9wZXJ0aWVzKHQscixvKXt2YXIgaT1yLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10LnRhcmdldCYmdC50YXJnZXQudHlwZT09PWMuVGFyZ2V0VHlwZUVudW0uQ2xhc3NQcm9wZXJ0eX0pKSxhPWkubWFwKG8pO3JldHVybiBpLmZvckVhY2goKGZ1bmN0aW9uKHIsbyl7dmFyIGk7aT1yLnRhcmdldC5uYW1lLnZhbHVlKCk7dmFyIGM9YVtvXTt0W2ldPWN9KSksdH0obD1mdW5jdGlvbiBfY3JlYXRlSW5zdGFuY2UodCxyKXtyZXR1cm4gbmV3KHQuYmluZC5hcHBseSh0LGkoW3ZvaWQgMF0scikpKX0odCxyLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10LnRhcmdldCYmdC50YXJnZXQudHlwZT09PWMuVGFyZ2V0VHlwZUVudW0uQ29uc3RydWN0b3JBcmd1bWVudH0pKS5tYXAobykpLHIsbyk6bmV3IHQsZnVuY3Rpb24gX3Bvc3RDb25zdHJ1Y3QodCxyKXtpZihSZWZsZWN0Lmhhc01ldGFkYXRhKHUuUE9TVF9DT05TVFJVQ1QsdCkpe3ZhciBvPVJlZmxlY3QuZ2V0TWV0YWRhdGEodS5QT1NUX0NPTlNUUlVDVCx0KTt0cnl7cltvLnZhbHVlXSgpfWNhdGNoKHIpe3Rocm93IG5ldyBFcnJvcihhLlBPU1RfQ09OU1RSVUNUX0VSUk9SKHQubmFtZSxyLm1lc3NhZ2UpKX19fSh0LGwpLGx9fSwxOTI3Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLnJlc29sdmU9dm9pZCAwO3ZhciBpPW8oNjY3NCksYT1vKDg0MjEpLGM9byg1MjY1KSx1PW8oNTgwMCksbD1vKDIyNzkpLGludm9rZUZhY3Rvcnk9ZnVuY3Rpb24odCxyLG8pe3RyeXtyZXR1cm4gbygpfWNhdGNoKG8pe3Rocm93IGMuaXNTdGFja092ZXJmbG93RXhlcHRpb24obyk/bmV3IEVycm9yKGkuQ0lSQ1VMQVJfREVQRU5ERU5DWV9JTl9GQUNUT1JZKHQsci50b1N0cmluZygpKSk6b319LF9yZXNvbHZlUmVxdWVzdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24ocil7ci5wYXJlbnRDb250ZXh0LnNldEN1cnJlbnRSZXF1ZXN0KHIpO3ZhciBvPXIuYmluZGluZ3MsYz1yLmNoaWxkUmVxdWVzdHMscD1yLnRhcmdldCYmci50YXJnZXQuaXNBcnJheSgpLGQ9IShyLnBhcmVudFJlcXVlc3QmJnIucGFyZW50UmVxdWVzdC50YXJnZXQmJnIudGFyZ2V0JiZyLnBhcmVudFJlcXVlc3QudGFyZ2V0Lm1hdGNoZXNBcnJheShyLnRhcmdldC5zZXJ2aWNlSWRlbnRpZmllcikpO2lmKHAmJmQpcmV0dXJuIGMubWFwKChmdW5jdGlvbihyKXtyZXR1cm4gX3Jlc29sdmVSZXF1ZXN0KHQpKHIpfSkpO3ZhciBoPW51bGw7aWYoIXIudGFyZ2V0LmlzT3B0aW9uYWwoKXx8MCE9PW8ubGVuZ3RoKXt2YXIgeT1vWzBdLHY9eS5zY29wZT09PWEuQmluZGluZ1Njb3BlRW51bS5TaW5nbGV0b24sZz15LnNjb3BlPT09YS5CaW5kaW5nU2NvcGVFbnVtLlJlcXVlc3Q7aWYodiYmeS5hY3RpdmF0ZWQpcmV0dXJuIHkuY2FjaGU7aWYoZyYmbnVsbCE9PXQmJnQuaGFzKHkuaWQpKXJldHVybiB0LmdldCh5LmlkKTtpZih5LnR5cGU9PT1hLkJpbmRpbmdUeXBlRW51bS5Db25zdGFudFZhbHVlKWg9eS5jYWNoZSx5LmFjdGl2YXRlZD0hMDtlbHNlIGlmKHkudHlwZT09PWEuQmluZGluZ1R5cGVFbnVtLkZ1bmN0aW9uKWg9eS5jYWNoZSx5LmFjdGl2YXRlZD0hMDtlbHNlIGlmKHkudHlwZT09PWEuQmluZGluZ1R5cGVFbnVtLkNvbnN0cnVjdG9yKWg9eS5pbXBsZW1lbnRhdGlvblR5cGU7ZWxzZSBpZih5LnR5cGU9PT1hLkJpbmRpbmdUeXBlRW51bS5EeW5hbWljVmFsdWUmJm51bGwhPT15LmR5bmFtaWNWYWx1ZSloPWludm9rZUZhY3RvcnkoXCJ0b0R5bmFtaWNWYWx1ZVwiLHkuc2VydmljZUlkZW50aWZpZXIsKGZ1bmN0aW9uKCl7cmV0dXJuIHkuZHluYW1pY1ZhbHVlKHIucGFyZW50Q29udGV4dCl9KSk7ZWxzZSBpZih5LnR5cGU9PT1hLkJpbmRpbmdUeXBlRW51bS5GYWN0b3J5JiZudWxsIT09eS5mYWN0b3J5KWg9aW52b2tlRmFjdG9yeShcInRvRmFjdG9yeVwiLHkuc2VydmljZUlkZW50aWZpZXIsKGZ1bmN0aW9uKCl7cmV0dXJuIHkuZmFjdG9yeShyLnBhcmVudENvbnRleHQpfSkpO2Vsc2UgaWYoeS50eXBlPT09YS5CaW5kaW5nVHlwZUVudW0uUHJvdmlkZXImJm51bGwhPT15LnByb3ZpZGVyKWg9aW52b2tlRmFjdG9yeShcInRvUHJvdmlkZXJcIix5LnNlcnZpY2VJZGVudGlmaWVyLChmdW5jdGlvbigpe3JldHVybiB5LnByb3ZpZGVyKHIucGFyZW50Q29udGV4dCl9KSk7ZWxzZXtpZih5LnR5cGUhPT1hLkJpbmRpbmdUeXBlRW51bS5JbnN0YW5jZXx8bnVsbD09PXkuaW1wbGVtZW50YXRpb25UeXBlKXt2YXIgXz11LmdldFNlcnZpY2VJZGVudGlmaWVyQXNTdHJpbmcoci5zZXJ2aWNlSWRlbnRpZmllcik7dGhyb3cgbmV3IEVycm9yKGkuSU5WQUxJRF9CSU5ESU5HX1RZUEUrXCIgXCIrXyl9aD1sLnJlc29sdmVJbnN0YW5jZSh5LmltcGxlbWVudGF0aW9uVHlwZSxjLF9yZXNvbHZlUmVxdWVzdCh0KSl9cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgeS5vbkFjdGl2YXRpb24mJihoPXkub25BY3RpdmF0aW9uKHIucGFyZW50Q29udGV4dCxoKSksdiYmKHkuY2FjaGU9aCx5LmFjdGl2YXRlZD0hMCksZyYmbnVsbCE9PXQmJiF0Lmhhcyh5LmlkKSYmdC5zZXQoeS5pZCxoKSxofX19O3IucmVzb2x2ZT1mdW5jdGlvbiByZXNvbHZlKHQpe3JldHVybiBfcmVzb2x2ZVJlcXVlc3QodC5wbGFuLnJvb3RSZXF1ZXN0LnJlcXVlc3RTY29wZSkodC5wbGFuLnJvb3RSZXF1ZXN0KX19LDMzNjY6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuQmluZGluZ0luU3ludGF4PXZvaWQgMDt2YXIgaT1vKDg0MjEpLGE9bygxMzI1KSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQmluZGluZ0luU3ludGF4KHQpe3RoaXMuX2JpbmRpbmc9dH1yZXR1cm4gQmluZGluZ0luU3ludGF4LnByb3RvdHlwZS5pblJlcXVlc3RTY29wZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaW5kaW5nLnNjb3BlPWkuQmluZGluZ1Njb3BlRW51bS5SZXF1ZXN0LG5ldyBhLkJpbmRpbmdXaGVuT25TeW50YXgodGhpcy5fYmluZGluZyl9LEJpbmRpbmdJblN5bnRheC5wcm90b3R5cGUuaW5TaW5nbGV0b25TY29wZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaW5kaW5nLnNjb3BlPWkuQmluZGluZ1Njb3BlRW51bS5TaW5nbGV0b24sbmV3IGEuQmluZGluZ1doZW5PblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ0luU3ludGF4LnByb3RvdHlwZS5pblRyYW5zaWVudFNjb3BlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcuc2NvcGU9aS5CaW5kaW5nU2NvcGVFbnVtLlRyYW5zaWVudCxuZXcgYS5CaW5kaW5nV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nSW5TeW50YXh9KCk7ci5CaW5kaW5nSW5TeW50YXg9Y30sOTgxMjoodCxyLG8pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5CaW5kaW5nSW5XaGVuT25TeW50YXg9dm9pZCAwO3ZhciBpPW8oMzM2NiksYT1vKDE4MTEpLGM9byg4MzcwKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQmluZGluZ0luV2hlbk9uU3ludGF4KHQpe3RoaXMuX2JpbmRpbmc9dCx0aGlzLl9iaW5kaW5nV2hlblN5bnRheD1uZXcgYy5CaW5kaW5nV2hlblN5bnRheCh0aGlzLl9iaW5kaW5nKSx0aGlzLl9iaW5kaW5nT25TeW50YXg9bmV3IGEuQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpLHRoaXMuX2JpbmRpbmdJblN5bnRheD1uZXcgaS5CaW5kaW5nSW5TeW50YXgodCl9cmV0dXJuIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUuaW5SZXF1ZXN0U2NvcGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmluZGluZ0luU3ludGF4LmluUmVxdWVzdFNjb3BlKCl9LEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUuaW5TaW5nbGV0b25TY29wZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaW5kaW5nSW5TeW50YXguaW5TaW5nbGV0b25TY29wZSgpfSxCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLmluVHJhbnNpZW50U2NvcGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmluZGluZ0luU3ludGF4LmluVHJhbnNpZW50U2NvcGUoKX0sQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuKHQpfSxCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXROYW1lZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlblRhcmdldE5hbWVkKHQpfSxCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXRJc0RlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlblRhcmdldElzRGVmYXVsdCgpfSxCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXRUYWdnZWQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlblRhcmdldFRhZ2dlZCh0LHIpfSxCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5JbmplY3RlZEludG89ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5JbmplY3RlZEludG8odCl9LEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlblBhcmVudE5hbWVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuUGFyZW50TmFtZWQodCl9LEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlblBhcmVudFRhZ2dlZD1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuUGFyZW50VGFnZ2VkKHQscil9LEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9ySXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5BbnlBbmNlc3RvcklzKHQpfSxCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9ySXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5Ob0FuY2VzdG9ySXModCl9LEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9yTmFtZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5BbnlBbmNlc3Rvck5hbWVkKHQpfSxCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5BbnlBbmNlc3RvclRhZ2dlZD1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuQW55QW5jZXN0b3JUYWdnZWQodCxyKX0sQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuTm9BbmNlc3Rvck5hbWVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuTm9BbmNlc3Rvck5hbWVkKHQpfSxCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9yVGFnZ2VkPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5Ob0FuY2VzdG9yVGFnZ2VkKHQscil9LEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9yTWF0Y2hlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbkFueUFuY2VzdG9yTWF0Y2hlcyh0KX0sQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuTm9BbmNlc3Rvck1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5Ob0FuY2VzdG9yTWF0Y2hlcyh0KX0sQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS5vbkFjdGl2YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdPblN5bnRheC5vbkFjdGl2YXRpb24odCl9LEJpbmRpbmdJbldoZW5PblN5bnRheH0oKTtyLkJpbmRpbmdJbldoZW5PblN5bnRheD11fSwxODExOih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLkJpbmRpbmdPblN5bnRheD12b2lkIDA7dmFyIGk9byg4MzcwKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQmluZGluZ09uU3ludGF4KHQpe3RoaXMuX2JpbmRpbmc9dH1yZXR1cm4gQmluZGluZ09uU3ludGF4LnByb3RvdHlwZS5vbkFjdGl2YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcub25BY3RpdmF0aW9uPXQsbmV3IGkuQmluZGluZ1doZW5TeW50YXgodGhpcy5fYmluZGluZyl9LEJpbmRpbmdPblN5bnRheH0oKTtyLkJpbmRpbmdPblN5bnRheD1hfSwxODYwOih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLkJpbmRpbmdUb1N5bnRheD12b2lkIDA7dmFyIGk9byg2Njc0KSxhPW8oODQyMSksYz1vKDk4MTIpLHU9bygxMzI1KSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQmluZGluZ1RvU3ludGF4KHQpe3RoaXMuX2JpbmRpbmc9dH1yZXR1cm4gQmluZGluZ1RvU3ludGF4LnByb3RvdHlwZS50bz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZy50eXBlPWEuQmluZGluZ1R5cGVFbnVtLkluc3RhbmNlLHRoaXMuX2JpbmRpbmcuaW1wbGVtZW50YXRpb25UeXBlPXQsbmV3IGMuQmluZGluZ0luV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvU2VsZj1mdW5jdGlvbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMuX2JpbmRpbmcuc2VydmljZUlkZW50aWZpZXIpdGhyb3cgbmV3IEVycm9yKFwiXCIraS5JTlZBTElEX1RPX1NFTEZfVkFMVUUpO3ZhciB0PXRoaXMuX2JpbmRpbmcuc2VydmljZUlkZW50aWZpZXI7cmV0dXJuIHRoaXMudG8odCl9LEJpbmRpbmdUb1N5bnRheC5wcm90b3R5cGUudG9Db25zdGFudFZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nLnR5cGU9YS5CaW5kaW5nVHlwZUVudW0uQ29uc3RhbnRWYWx1ZSx0aGlzLl9iaW5kaW5nLmNhY2hlPXQsdGhpcy5fYmluZGluZy5keW5hbWljVmFsdWU9bnVsbCx0aGlzLl9iaW5kaW5nLmltcGxlbWVudGF0aW9uVHlwZT1udWxsLHRoaXMuX2JpbmRpbmcuc2NvcGU9YS5CaW5kaW5nU2NvcGVFbnVtLlNpbmdsZXRvbixuZXcgdS5CaW5kaW5nV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvRHluYW1pY1ZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nLnR5cGU9YS5CaW5kaW5nVHlwZUVudW0uRHluYW1pY1ZhbHVlLHRoaXMuX2JpbmRpbmcuY2FjaGU9bnVsbCx0aGlzLl9iaW5kaW5nLmR5bmFtaWNWYWx1ZT10LHRoaXMuX2JpbmRpbmcuaW1wbGVtZW50YXRpb25UeXBlPW51bGwsbmV3IGMuQmluZGluZ0luV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvQ29uc3RydWN0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcudHlwZT1hLkJpbmRpbmdUeXBlRW51bS5Db25zdHJ1Y3Rvcix0aGlzLl9iaW5kaW5nLmltcGxlbWVudGF0aW9uVHlwZT10LHRoaXMuX2JpbmRpbmcuc2NvcGU9YS5CaW5kaW5nU2NvcGVFbnVtLlNpbmdsZXRvbixuZXcgdS5CaW5kaW5nV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvRmFjdG9yeT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZy50eXBlPWEuQmluZGluZ1R5cGVFbnVtLkZhY3RvcnksdGhpcy5fYmluZGluZy5mYWN0b3J5PXQsdGhpcy5fYmluZGluZy5zY29wZT1hLkJpbmRpbmdTY29wZUVudW0uU2luZ2xldG9uLG5ldyB1LkJpbmRpbmdXaGVuT25TeW50YXgodGhpcy5fYmluZGluZyl9LEJpbmRpbmdUb1N5bnRheC5wcm90b3R5cGUudG9GdW5jdGlvbj1mdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcihpLklOVkFMSURfRlVOQ1RJT05fQklORElORyk7dmFyIHI9dGhpcy50b0NvbnN0YW50VmFsdWUodCk7cmV0dXJuIHRoaXMuX2JpbmRpbmcudHlwZT1hLkJpbmRpbmdUeXBlRW51bS5GdW5jdGlvbix0aGlzLl9iaW5kaW5nLnNjb3BlPWEuQmluZGluZ1Njb3BlRW51bS5TaW5nbGV0b24scn0sQmluZGluZ1RvU3ludGF4LnByb3RvdHlwZS50b0F1dG9GYWN0b3J5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nLnR5cGU9YS5CaW5kaW5nVHlwZUVudW0uRmFjdG9yeSx0aGlzLl9iaW5kaW5nLmZhY3Rvcnk9ZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHIuY29udGFpbmVyLmdldCh0KX19LHRoaXMuX2JpbmRpbmcuc2NvcGU9YS5CaW5kaW5nU2NvcGVFbnVtLlNpbmdsZXRvbixuZXcgdS5CaW5kaW5nV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvUHJvdmlkZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcudHlwZT1hLkJpbmRpbmdUeXBlRW51bS5Qcm92aWRlcix0aGlzLl9iaW5kaW5nLnByb3ZpZGVyPXQsdGhpcy5fYmluZGluZy5zY29wZT1hLkJpbmRpbmdTY29wZUVudW0uU2luZ2xldG9uLG5ldyB1LkJpbmRpbmdXaGVuT25TeW50YXgodGhpcy5fYmluZGluZyl9LEJpbmRpbmdUb1N5bnRheC5wcm90b3R5cGUudG9TZXJ2aWNlPWZ1bmN0aW9uKHQpe3RoaXMudG9EeW5hbWljVmFsdWUoKGZ1bmN0aW9uKHIpe3JldHVybiByLmNvbnRhaW5lci5nZXQodCl9KSl9LEJpbmRpbmdUb1N5bnRheH0oKTtyLkJpbmRpbmdUb1N5bnRheD1sfSwxMzI1Oih0LHIsbyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLkJpbmRpbmdXaGVuT25TeW50YXg9dm9pZCAwO3ZhciBpPW8oMTgxMSksYT1vKDgzNzApLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBCaW5kaW5nV2hlbk9uU3ludGF4KHQpe3RoaXMuX2JpbmRpbmc9dCx0aGlzLl9iaW5kaW5nV2hlblN5bnRheD1uZXcgYS5CaW5kaW5nV2hlblN5bnRheCh0aGlzLl9iaW5kaW5nKSx0aGlzLl9iaW5kaW5nT25TeW50YXg9bmV3IGkuQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpfXJldHVybiBCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuKHQpfSxCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuVGFyZ2V0TmFtZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5UYXJnZXROYW1lZCh0KX0sQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlblRhcmdldElzRGVmYXVsdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuVGFyZ2V0SXNEZWZhdWx0KCl9LEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXRUYWdnZWQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlblRhcmdldFRhZ2dlZCh0LHIpfSxCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuSW5qZWN0ZWRJbnRvPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuSW5qZWN0ZWRJbnRvKHQpfSxCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuUGFyZW50TmFtZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5QYXJlbnROYW1lZCh0KX0sQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlblBhcmVudFRhZ2dlZD1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuUGFyZW50VGFnZ2VkKHQscil9LEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5BbnlBbmNlc3RvcklzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuQW55QW5jZXN0b3JJcyh0KX0sQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlbk5vQW5jZXN0b3JJcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbk5vQW5jZXN0b3JJcyh0KX0sQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9yTmFtZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5BbnlBbmNlc3Rvck5hbWVkKHQpfSxCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuQW55QW5jZXN0b3JUYWdnZWQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbkFueUFuY2VzdG9yVGFnZ2VkKHQscil9LEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9yTmFtZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5Ob0FuY2VzdG9yTmFtZWQodCl9LEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9yVGFnZ2VkPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5Ob0FuY2VzdG9yVGFnZ2VkKHQscil9LEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5BbnlBbmNlc3Rvck1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5BbnlBbmNlc3Rvck1hdGNoZXModCl9LEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9yTWF0Y2hlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbk5vQW5jZXN0b3JNYXRjaGVzKHQpfSxCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS5vbkFjdGl2YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmdPblN5bnRheC5vbkFjdGl2YXRpb24odCl9LEJpbmRpbmdXaGVuT25TeW50YXh9KCk7ci5CaW5kaW5nV2hlbk9uU3ludGF4PWN9LDgzNzA6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuQmluZGluZ1doZW5TeW50YXg9dm9pZCAwO3ZhciBpPW8oMTgxMSksYT1vKDc1OCksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIEJpbmRpbmdXaGVuU3ludGF4KHQpe3RoaXMuX2JpbmRpbmc9dH1yZXR1cm4gQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludD10LG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXROYW1lZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZy5jb25zdHJhaW50PWEubmFtZWRDb25zdHJhaW50KHQpLG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXRJc0RlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmluZGluZy5jb25zdHJhaW50PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dC50YXJnZXQmJiF0LnRhcmdldC5pc05hbWVkKCkmJiF0LnRhcmdldC5pc1RhZ2dlZCgpfSxuZXcgaS5CaW5kaW5nT25TeW50YXgodGhpcy5fYmluZGluZyl9LEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuVGFyZ2V0VGFnZ2VkPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludD1hLnRhZ2dlZENvbnN0cmFpbnQodCkociksbmV3IGkuQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nV2hlblN5bnRheC5wcm90b3R5cGUud2hlbkluamVjdGVkSW50bz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZy5jb25zdHJhaW50PWZ1bmN0aW9uKHIpe3JldHVybiBhLnR5cGVDb25zdHJhaW50KHQpKHIucGFyZW50UmVxdWVzdCl9LG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5QYXJlbnROYW1lZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmluZGluZy5jb25zdHJhaW50PWZ1bmN0aW9uKHIpe3JldHVybiBhLm5hbWVkQ29uc3RyYWludCh0KShyLnBhcmVudFJlcXVlc3QpfSxuZXcgaS5CaW5kaW5nT25TeW50YXgodGhpcy5fYmluZGluZyl9LEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuUGFyZW50VGFnZ2VkPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludD1mdW5jdGlvbihvKXtyZXR1cm4gYS50YWdnZWRDb25zdHJhaW50KHQpKHIpKG8ucGFyZW50UmVxdWVzdCl9LG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5BbnlBbmNlc3RvcklzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQ9ZnVuY3Rpb24ocil7cmV0dXJuIGEudHJhdmVyc2VBbmNlcnN0b3JzKHIsYS50eXBlQ29uc3RyYWludCh0KSl9LG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9ySXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludD1mdW5jdGlvbihyKXtyZXR1cm4hYS50cmF2ZXJzZUFuY2Vyc3RvcnMocixhLnR5cGVDb25zdHJhaW50KHQpKX0sbmV3IGkuQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nV2hlblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9yTmFtZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludD1mdW5jdGlvbihyKXtyZXR1cm4gYS50cmF2ZXJzZUFuY2Vyc3RvcnMocixhLm5hbWVkQ29uc3RyYWludCh0KSl9LG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9yTmFtZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludD1mdW5jdGlvbihyKXtyZXR1cm4hYS50cmF2ZXJzZUFuY2Vyc3RvcnMocixhLm5hbWVkQ29uc3RyYWludCh0KSl9LG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5BbnlBbmNlc3RvclRhZ2dlZD1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQ9ZnVuY3Rpb24obyl7cmV0dXJuIGEudHJhdmVyc2VBbmNlcnN0b3JzKG8sYS50YWdnZWRDb25zdHJhaW50KHQpKHIpKX0sbmV3IGkuQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nV2hlblN5bnRheC5wcm90b3R5cGUud2hlbk5vQW5jZXN0b3JUYWdnZWQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdGhpcy5fYmluZGluZy5jb25zdHJhaW50PWZ1bmN0aW9uKG8pe3JldHVybiFhLnRyYXZlcnNlQW5jZXJzdG9ycyhvLGEudGFnZ2VkQ29uc3RyYWludCh0KShyKSl9LG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5BbnlBbmNlc3Rvck1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludD1mdW5jdGlvbihyKXtyZXR1cm4gYS50cmF2ZXJzZUFuY2Vyc3RvcnMocix0KX0sbmV3IGkuQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpfSxCaW5kaW5nV2hlblN5bnRheC5wcm90b3R5cGUud2hlbk5vQW5jZXN0b3JNYXRjaGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQ9ZnVuY3Rpb24ocil7cmV0dXJuIWEudHJhdmVyc2VBbmNlcnN0b3JzKHIsdCl9LG5ldyBpLkJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKX0sQmluZGluZ1doZW5TeW50YXh9KCk7ci5CaW5kaW5nV2hlblN5bnRheD1jfSw3NTg6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIudHlwZUNvbnN0cmFpbnQ9ci5uYW1lZENvbnN0cmFpbnQ9ci50YWdnZWRDb25zdHJhaW50PXIudHJhdmVyc2VBbmNlcnN0b3JzPXZvaWQgMDt2YXIgaT1vKDY4NjcpLGE9byg3NzM4KSx0cmF2ZXJzZUFuY2Vyc3RvcnM9ZnVuY3Rpb24odCxyKXt2YXIgbz10LnBhcmVudFJlcXVlc3Q7cmV0dXJuIG51bGwhPT1vJiYoISFyKG8pfHx0cmF2ZXJzZUFuY2Vyc3RvcnMobyxyKSl9O3IudHJhdmVyc2VBbmNlcnN0b3JzPXRyYXZlcnNlQW5jZXJzdG9yczt2YXIgdGFnZ2VkQ29uc3RyYWludD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGNvbnN0cmFpbnQ9ZnVuY3Rpb24obyl7cmV0dXJuIG51bGwhPT1vJiZudWxsIT09by50YXJnZXQmJm8udGFyZ2V0Lm1hdGNoZXNUYWcodCkocil9O3JldHVybiBjb25zdHJhaW50Lm1ldGFEYXRhPW5ldyBhLk1ldGFkYXRhKHQsciksY29uc3RyYWludH19O3IudGFnZ2VkQ29uc3RyYWludD10YWdnZWRDb25zdHJhaW50O3ZhciBjPXRhZ2dlZENvbnN0cmFpbnQoaS5OQU1FRF9UQUcpO3IubmFtZWRDb25zdHJhaW50PWM7ci50eXBlQ29uc3RyYWludD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89bnVsbDtpZihudWxsIT09cil7aWYobz1yLmJpbmRpbmdzWzBdLFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiBvLnNlcnZpY2VJZGVudGlmaWVyPT09dDt2YXIgaT1yLmJpbmRpbmdzWzBdLmltcGxlbWVudGF0aW9uVHlwZTtyZXR1cm4gdD09PWl9cmV0dXJuITF9fX0sNjAwOih0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5tdWx0aUJpbmRUb1NlcnZpY2U9dm9pZCAwO3IubXVsdGlCaW5kVG9TZXJ2aWNlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG89W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspb1tpXT1hcmd1bWVudHNbaV07cmV0dXJuIG8uZm9yRWFjaCgoZnVuY3Rpb24obyl7cmV0dXJuIHQuYmluZChvKS50b1NlcnZpY2Uocil9KSl9fX19LDUyNjU6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuaXNTdGFja092ZXJmbG93RXhlcHRpb249dm9pZCAwO3ZhciBpPW8oNjY3NCk7ci5pc1N0YWNrT3ZlcmZsb3dFeGVwdGlvbj1mdW5jdGlvbiBpc1N0YWNrT3ZlcmZsb3dFeGVwdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFJhbmdlRXJyb3J8fHQubWVzc2FnZT09PWkuU1RBQ0tfT1ZFUkZMT1d9fSw3NzkxOih0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5pZD12b2lkIDA7dmFyIG89MDtyLmlkPWZ1bmN0aW9uIGlkKCl7cmV0dXJuIG8rK319LDU4MDA6KHQscixvKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuY2lyY3VsYXJEZXBlbmRlbmN5VG9FeGNlcHRpb249ci5saXN0TWV0YWRhdGFGb3JUYXJnZXQ9ci5saXN0UmVnaXN0ZXJlZEJpbmRpbmdzRm9yU2VydmljZUlkZW50aWZpZXI9ci5nZXRTZXJ2aWNlSWRlbnRpZmllckFzU3RyaW5nPXIuZ2V0RnVuY3Rpb25OYW1lPXZvaWQgMDt2YXIgaT1vKDY2NzQpO2Z1bmN0aW9uIGdldFNlcnZpY2VJZGVudGlmaWVyQXNTdHJpbmcodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD90Lm5hbWU6XCJzeW1ib2xcIj09dHlwZW9mIHQ/dC50b1N0cmluZygpOnR9ZnVuY3Rpb24gYWxyZWFkeURlcGVuZGVuY3lDaGFpbih0LHIpe3JldHVybiBudWxsIT09dC5wYXJlbnRSZXF1ZXN0JiYodC5wYXJlbnRSZXF1ZXN0LnNlcnZpY2VJZGVudGlmaWVyPT09cnx8YWxyZWFkeURlcGVuZGVuY3lDaGFpbih0LnBhcmVudFJlcXVlc3QscikpfWZ1bmN0aW9uIGdldEZ1bmN0aW9uTmFtZSh0KXtpZih0Lm5hbWUpcmV0dXJuIHQubmFtZTt2YXIgcj10LnRvU3RyaW5nKCksbz1yLm1hdGNoKC9eZnVuY3Rpb25cXHMqKFteXFxzKF0rKS8pO3JldHVybiBvP29bMV06XCJBbm9ueW1vdXMgZnVuY3Rpb246IFwiK3J9ci5nZXRTZXJ2aWNlSWRlbnRpZmllckFzU3RyaW5nPWdldFNlcnZpY2VJZGVudGlmaWVyQXNTdHJpbmcsci5saXN0UmVnaXN0ZXJlZEJpbmRpbmdzRm9yU2VydmljZUlkZW50aWZpZXI9ZnVuY3Rpb24gbGlzdFJlZ2lzdGVyZWRCaW5kaW5nc0ZvclNlcnZpY2VJZGVudGlmaWVyKHQscixvKXt2YXIgaT1cIlwiLGE9byh0LHIpO3JldHVybiAwIT09YS5sZW5ndGgmJihpPVwiXFxuUmVnaXN0ZXJlZCBiaW5kaW5nczpcIixhLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciByPVwiT2JqZWN0XCI7bnVsbCE9PXQuaW1wbGVtZW50YXRpb25UeXBlJiYocj1nZXRGdW5jdGlvbk5hbWUodC5pbXBsZW1lbnRhdGlvblR5cGUpKSxpPWkrXCJcXG4gXCIrcix0LmNvbnN0cmFpbnQubWV0YURhdGEmJihpPWkrXCIgLSBcIit0LmNvbnN0cmFpbnQubWV0YURhdGEpfSkpKSxpfSxyLmNpcmN1bGFyRGVwZW5kZW5jeVRvRXhjZXB0aW9uPWZ1bmN0aW9uIGNpcmN1bGFyRGVwZW5kZW5jeVRvRXhjZXB0aW9uKHQpe3QuY2hpbGRSZXF1ZXN0cy5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihhbHJlYWR5RGVwZW5kZW5jeUNoYWluKHQsdC5zZXJ2aWNlSWRlbnRpZmllcikpe3ZhciByPWZ1bmN0aW9uIGRlcGVuZGVuY3lDaGFpblRvU3RyaW5nKHQpe3JldHVybiBmdW5jdGlvbiBfY3JlYXRlU3RyaW5nQXJyKHQscil7dm9pZCAwPT09ciYmKHI9W10pO3ZhciBvPWdldFNlcnZpY2VJZGVudGlmaWVyQXNTdHJpbmcodC5zZXJ2aWNlSWRlbnRpZmllcik7cmV0dXJuIHIucHVzaChvKSxudWxsIT09dC5wYXJlbnRSZXF1ZXN0P19jcmVhdGVTdHJpbmdBcnIodC5wYXJlbnRSZXF1ZXN0LHIpOnJ9KHQpLnJldmVyc2UoKS5qb2luKFwiIC0tXFx4M2UgXCIpfSh0KTt0aHJvdyBuZXcgRXJyb3IoaS5DSVJDVUxBUl9ERVBFTkRFTkNZK1wiIFwiK3IpfWNpcmN1bGFyRGVwZW5kZW5jeVRvRXhjZXB0aW9uKHQpfSkpfSxyLmxpc3RNZXRhZGF0YUZvclRhcmdldD1mdW5jdGlvbiBsaXN0TWV0YWRhdGFGb3JUYXJnZXQodCxyKXtpZihyLmlzVGFnZ2VkKCl8fHIuaXNOYW1lZCgpKXt2YXIgbz1cIlwiLGk9ci5nZXROYW1lZFRhZygpLGE9ci5nZXRDdXN0b21UYWdzKCk7cmV0dXJuIG51bGwhPT1pJiYobys9aS50b1N0cmluZygpK1wiXFxuXCIpLG51bGwhPT1hJiZhLmZvckVhY2goKGZ1bmN0aW9uKHQpe28rPXQudG9TdHJpbmcoKStcIlxcblwifSkpLFwiIFwiK3QrXCJcXG4gXCIrdCtcIiAtIFwiK299cmV0dXJuXCIgXCIrdH0sci5nZXRGdW5jdGlvbk5hbWU9Z2V0RnVuY3Rpb25OYW1lfSw2OTYxOih0LHIsbyk9Pnt2YXIgaSxhPWZ1bmN0aW9uKCl7dmFyIHQ9U3RyaW5nLmZyb21DaGFyQ29kZSxyPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIixvPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLSRcIixpPXt9O2Z1bmN0aW9uIGdldEJhc2VWYWx1ZSh0LHIpe2lmKCFpW3RdKXtpW3RdPXt9O2Zvcih2YXIgbz0wO288dC5sZW5ndGg7bysrKWlbdF1bdC5jaGFyQXQobyldPW99cmV0dXJuIGlbdF1bcl19dmFyIGE9e2NvbXByZXNzVG9CYXNlNjQ6ZnVuY3Rpb24odCl7aWYobnVsbD09dClyZXR1cm5cIlwiO3ZhciBvPWEuX2NvbXByZXNzKHQsNiwoZnVuY3Rpb24odCl7cmV0dXJuIHIuY2hhckF0KHQpfSkpO3N3aXRjaChvLmxlbmd0aCU0KXtkZWZhdWx0OnJldHVybiBvO2Nhc2UgMTpyZXR1cm4gbytcIj09PVwiO2Nhc2UgMjpyZXR1cm4gbytcIj09XCI7Y2FzZSAzOnJldHVybiBvK1wiPVwifX0sZGVjb21wcmVzc0Zyb21CYXNlNjQ6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/XCJcIjpcIlwiPT10P251bGw6YS5fZGVjb21wcmVzcyh0Lmxlbmd0aCwzMiwoZnVuY3Rpb24obyl7cmV0dXJuIGdldEJhc2VWYWx1ZShyLHQuY2hhckF0KG8pKX0pKX0sY29tcHJlc3NUb1VURjE2OmZ1bmN0aW9uKHIpe3JldHVybiBudWxsPT1yP1wiXCI6YS5fY29tcHJlc3MociwxNSwoZnVuY3Rpb24ocil7cmV0dXJuIHQociszMil9KSkrXCIgXCJ9LGRlY29tcHJlc3NGcm9tVVRGMTY6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/XCJcIjpcIlwiPT10P251bGw6YS5fZGVjb21wcmVzcyh0Lmxlbmd0aCwxNjM4NCwoZnVuY3Rpb24ocil7cmV0dXJuIHQuY2hhckNvZGVBdChyKS0zMn0pKX0sY29tcHJlc3NUb1VpbnQ4QXJyYXk6ZnVuY3Rpb24odCl7Zm9yKHZhciByPWEuY29tcHJlc3ModCksbz1uZXcgVWludDhBcnJheSgyKnIubGVuZ3RoKSxpPTAsYz1yLmxlbmd0aDtpPGM7aSsrKXt2YXIgdT1yLmNoYXJDb2RlQXQoaSk7b1syKmldPXU+Pj44LG9bMippKzFdPXUlMjU2fXJldHVybiBvfSxkZWNvbXByZXNzRnJvbVVpbnQ4QXJyYXk6ZnVuY3Rpb24ocil7aWYobnVsbD09cilyZXR1cm4gYS5kZWNvbXByZXNzKHIpO2Zvcih2YXIgbz1uZXcgQXJyYXkoci5sZW5ndGgvMiksaT0wLGM9by5sZW5ndGg7aTxjO2krKylvW2ldPTI1NipyWzIqaV0rclsyKmkrMV07dmFyIHU9W107cmV0dXJuIG8uZm9yRWFjaCgoZnVuY3Rpb24ocil7dS5wdXNoKHQocikpfSkpLGEuZGVjb21wcmVzcyh1LmpvaW4oXCJcIikpfSxjb21wcmVzc1RvRW5jb2RlZFVSSUNvbXBvbmVudDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD9cIlwiOmEuX2NvbXByZXNzKHQsNiwoZnVuY3Rpb24odCl7cmV0dXJuIG8uY2hhckF0KHQpfSkpfSxkZWNvbXByZXNzRnJvbUVuY29kZWRVUklDb21wb25lbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/XCJcIjpcIlwiPT10P251bGw6KHQ9dC5yZXBsYWNlKC8gL2csXCIrXCIpLGEuX2RlY29tcHJlc3ModC5sZW5ndGgsMzIsKGZ1bmN0aW9uKHIpe3JldHVybiBnZXRCYXNlVmFsdWUobyx0LmNoYXJBdChyKSl9KSkpfSxjb21wcmVzczpmdW5jdGlvbihyKXtyZXR1cm4gYS5fY29tcHJlc3MociwxNiwoZnVuY3Rpb24ocil7cmV0dXJuIHQocil9KSl9LF9jb21wcmVzczpmdW5jdGlvbih0LHIsbyl7aWYobnVsbD09dClyZXR1cm5cIlwiO3ZhciBpLGEsYyx1PXt9LGw9e30scD1cIlwiLGQ9XCJcIixoPVwiXCIseT0yLHY9MyxnPTIsXz1bXSxtPTAsYj0wO2ZvcihjPTA7Yzx0Lmxlbmd0aDtjKz0xKWlmKHA9dC5jaGFyQXQoYyksT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHUscCl8fCh1W3BdPXYrKyxsW3BdPSEwKSxkPWgrcCxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodSxkKSloPWQ7ZWxzZXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobCxoKSl7aWYoaC5jaGFyQ29kZUF0KDApPDI1Nil7Zm9yKGk9MDtpPGc7aSsrKW08PD0xLGI9PXItMT8oYj0wLF8ucHVzaChvKG0pKSxtPTApOmIrKztmb3IoYT1oLmNoYXJDb2RlQXQoMCksaT0wO2k8ODtpKyspbT1tPDwxfDEmYSxiPT1yLTE/KGI9MCxfLnB1c2gobyhtKSksbT0wKTpiKyssYT4+PTF9ZWxzZXtmb3IoYT0xLGk9MDtpPGc7aSsrKW09bTw8MXxhLGI9PXItMT8oYj0wLF8ucHVzaChvKG0pKSxtPTApOmIrKyxhPTA7Zm9yKGE9aC5jaGFyQ29kZUF0KDApLGk9MDtpPDE2O2krKyltPW08PDF8MSZhLGI9PXItMT8oYj0wLF8ucHVzaChvKG0pKSxtPTApOmIrKyxhPj49MX0wPT0tLXkmJih5PU1hdGgucG93KDIsZyksZysrKSxkZWxldGUgbFtoXX1lbHNlIGZvcihhPXVbaF0saT0wO2k8ZztpKyspbT1tPDwxfDEmYSxiPT1yLTE/KGI9MCxfLnB1c2gobyhtKSksbT0wKTpiKyssYT4+PTE7MD09LS15JiYoeT1NYXRoLnBvdygyLGcpLGcrKyksdVtkXT12KyssaD1TdHJpbmcocCl9aWYoXCJcIiE9PWgpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChsLGgpKXtpZihoLmNoYXJDb2RlQXQoMCk8MjU2KXtmb3IoaT0wO2k8ZztpKyspbTw8PTEsYj09ci0xPyhiPTAsXy5wdXNoKG8obSkpLG09MCk6YisrO2ZvcihhPWguY2hhckNvZGVBdCgwKSxpPTA7aTw4O2krKyltPW08PDF8MSZhLGI9PXItMT8oYj0wLF8ucHVzaChvKG0pKSxtPTApOmIrKyxhPj49MX1lbHNle2ZvcihhPTEsaT0wO2k8ZztpKyspbT1tPDwxfGEsYj09ci0xPyhiPTAsXy5wdXNoKG8obSkpLG09MCk6YisrLGE9MDtmb3IoYT1oLmNoYXJDb2RlQXQoMCksaT0wO2k8MTY7aSsrKW09bTw8MXwxJmEsYj09ci0xPyhiPTAsXy5wdXNoKG8obSkpLG09MCk6YisrLGE+Pj0xfTA9PS0teSYmKHk9TWF0aC5wb3coMixnKSxnKyspLGRlbGV0ZSBsW2hdfWVsc2UgZm9yKGE9dVtoXSxpPTA7aTxnO2krKyltPW08PDF8MSZhLGI9PXItMT8oYj0wLF8ucHVzaChvKG0pKSxtPTApOmIrKyxhPj49MTswPT0tLXkmJih5PU1hdGgucG93KDIsZyksZysrKX1mb3IoYT0yLGk9MDtpPGc7aSsrKW09bTw8MXwxJmEsYj09ci0xPyhiPTAsXy5wdXNoKG8obSkpLG09MCk6YisrLGE+Pj0xO2Zvcig7Oyl7aWYobTw8PTEsYj09ci0xKXtfLnB1c2gobyhtKSk7YnJlYWt9YisrfXJldHVybiBfLmpvaW4oXCJcIil9LGRlY29tcHJlc3M6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/XCJcIjpcIlwiPT10P251bGw6YS5fZGVjb21wcmVzcyh0Lmxlbmd0aCwzMjc2OCwoZnVuY3Rpb24ocil7cmV0dXJuIHQuY2hhckNvZGVBdChyKX0pKX0sX2RlY29tcHJlc3M6ZnVuY3Rpb24ocixvLGkpe3ZhciBhLGMsdSxsLHAsZCxoLHk9W10sdj00LGc9NCxfPTMsbT1cIlwiLGI9W10sdz17dmFsOmkoMCkscG9zaXRpb246byxpbmRleDoxfTtmb3IoYT0wO2E8MzthKz0xKXlbYV09YTtmb3IodT0wLHA9TWF0aC5wb3coMiwyKSxkPTE7ZCE9cDspbD13LnZhbCZ3LnBvc2l0aW9uLHcucG9zaXRpb24+Pj0xLDA9PXcucG9zaXRpb24mJih3LnBvc2l0aW9uPW8sdy52YWw9aSh3LmluZGV4KyspKSx1fD0obD4wPzE6MCkqZCxkPDw9MTtzd2l0Y2godSl7Y2FzZSAwOmZvcih1PTAscD1NYXRoLnBvdygyLDgpLGQ9MTtkIT1wOylsPXcudmFsJncucG9zaXRpb24sdy5wb3NpdGlvbj4+PTEsMD09dy5wb3NpdGlvbiYmKHcucG9zaXRpb249byx3LnZhbD1pKHcuaW5kZXgrKykpLHV8PShsPjA/MTowKSpkLGQ8PD0xO2g9dCh1KTticmVhaztjYXNlIDE6Zm9yKHU9MCxwPU1hdGgucG93KDIsMTYpLGQ9MTtkIT1wOylsPXcudmFsJncucG9zaXRpb24sdy5wb3NpdGlvbj4+PTEsMD09dy5wb3NpdGlvbiYmKHcucG9zaXRpb249byx3LnZhbD1pKHcuaW5kZXgrKykpLHV8PShsPjA/MTowKSpkLGQ8PD0xO2g9dCh1KTticmVhaztjYXNlIDI6cmV0dXJuXCJcIn1mb3IoeVszXT1oLGM9aCxiLnB1c2goaCk7Oyl7aWYody5pbmRleD5yKXJldHVyblwiXCI7Zm9yKHU9MCxwPU1hdGgucG93KDIsXyksZD0xO2QhPXA7KWw9dy52YWwmdy5wb3NpdGlvbix3LnBvc2l0aW9uPj49MSwwPT13LnBvc2l0aW9uJiYody5wb3NpdGlvbj1vLHcudmFsPWkody5pbmRleCsrKSksdXw9KGw+MD8xOjApKmQsZDw8PTE7c3dpdGNoKGg9dSl7Y2FzZSAwOmZvcih1PTAscD1NYXRoLnBvdygyLDgpLGQ9MTtkIT1wOylsPXcudmFsJncucG9zaXRpb24sdy5wb3NpdGlvbj4+PTEsMD09dy5wb3NpdGlvbiYmKHcucG9zaXRpb249byx3LnZhbD1pKHcuaW5kZXgrKykpLHV8PShsPjA/MTowKSpkLGQ8PD0xO3lbZysrXT10KHUpLGg9Zy0xLHYtLTticmVhaztjYXNlIDE6Zm9yKHU9MCxwPU1hdGgucG93KDIsMTYpLGQ9MTtkIT1wOylsPXcudmFsJncucG9zaXRpb24sdy5wb3NpdGlvbj4+PTEsMD09dy5wb3NpdGlvbiYmKHcucG9zaXRpb249byx3LnZhbD1pKHcuaW5kZXgrKykpLHV8PShsPjA/MTowKSpkLGQ8PD0xO3lbZysrXT10KHUpLGg9Zy0xLHYtLTticmVhaztjYXNlIDI6cmV0dXJuIGIuam9pbihcIlwiKX1pZigwPT12JiYodj1NYXRoLnBvdygyLF8pLF8rKykseVtoXSltPXlbaF07ZWxzZXtpZihoIT09ZylyZXR1cm4gbnVsbDttPWMrYy5jaGFyQXQoMCl9Yi5wdXNoKG0pLHlbZysrXT1jK20uY2hhckF0KDApLGM9bSwwPT0tLXYmJih2PU1hdGgucG93KDIsXyksXysrKX19fTtyZXR1cm4gYX0oKTt2b2lkIDA9PT0oaT1mdW5jdGlvbigpe3JldHVybiBhfS5jYWxsKHIsbyxyLHQpKXx8KHQuZXhwb3J0cz1pKX0sNzgyNDp0PT57dmFyIHI9MWUzLG89NjAqcixpPTYwKm8sYT0yNCppLGM9NyphLHU9MzY1LjI1KmE7ZnVuY3Rpb24gcGx1cmFsKHQscixvLGkpe3ZhciBhPXI+PTEuNSpvO3JldHVybiBNYXRoLnJvdW5kKHQvbykrXCIgXCIraSsoYT9cInNcIjpcIlwiKX10LmV4cG9ydHM9ZnVuY3Rpb24odCxsKXtsPWx8fHt9O3ZhciBwPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PT1wJiZ0Lmxlbmd0aD4wKXJldHVybiBmdW5jdGlvbiBwYXJzZSh0KXtpZigodD1TdHJpbmcodCkpLmxlbmd0aD4xMDApcmV0dXJuO3ZhciBsPS9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyh0KTtpZighbClyZXR1cm47dmFyIHA9cGFyc2VGbG9hdChsWzFdKTtzd2l0Y2goKGxbMl18fFwibXNcIikudG9Mb3dlckNhc2UoKSl7Y2FzZVwieWVhcnNcIjpjYXNlXCJ5ZWFyXCI6Y2FzZVwieXJzXCI6Y2FzZVwieXJcIjpjYXNlXCJ5XCI6cmV0dXJuIHAqdTtjYXNlXCJ3ZWVrc1wiOmNhc2VcIndlZWtcIjpjYXNlXCJ3XCI6cmV0dXJuIHAqYztjYXNlXCJkYXlzXCI6Y2FzZVwiZGF5XCI6Y2FzZVwiZFwiOnJldHVybiBwKmE7Y2FzZVwiaG91cnNcIjpjYXNlXCJob3VyXCI6Y2FzZVwiaHJzXCI6Y2FzZVwiaHJcIjpjYXNlXCJoXCI6cmV0dXJuIHAqaTtjYXNlXCJtaW51dGVzXCI6Y2FzZVwibWludXRlXCI6Y2FzZVwibWluc1wiOmNhc2VcIm1pblwiOmNhc2VcIm1cIjpyZXR1cm4gcCpvO2Nhc2VcInNlY29uZHNcIjpjYXNlXCJzZWNvbmRcIjpjYXNlXCJzZWNzXCI6Y2FzZVwic2VjXCI6Y2FzZVwic1wiOnJldHVybiBwKnI7Y2FzZVwibWlsbGlzZWNvbmRzXCI6Y2FzZVwibWlsbGlzZWNvbmRcIjpjYXNlXCJtc2Vjc1wiOmNhc2VcIm1zZWNcIjpjYXNlXCJtc1wiOnJldHVybiBwO2RlZmF1bHQ6cmV0dXJufX0odCk7aWYoXCJudW1iZXJcIj09PXAmJmlzRmluaXRlKHQpKXJldHVybiBsLmxvbmc/ZnVuY3Rpb24gZm10TG9uZyh0KXt2YXIgYz1NYXRoLmFicyh0KTtpZihjPj1hKXJldHVybiBwbHVyYWwodCxjLGEsXCJkYXlcIik7aWYoYz49aSlyZXR1cm4gcGx1cmFsKHQsYyxpLFwiaG91clwiKTtpZihjPj1vKXJldHVybiBwbHVyYWwodCxjLG8sXCJtaW51dGVcIik7aWYoYz49cilyZXR1cm4gcGx1cmFsKHQsYyxyLFwic2Vjb25kXCIpO3JldHVybiB0K1wiIG1zXCJ9KHQpOmZ1bmN0aW9uIGZtdFNob3J0KHQpe3ZhciBjPU1hdGguYWJzKHQpO2lmKGM+PWEpcmV0dXJuIE1hdGgucm91bmQodC9hKStcImRcIjtpZihjPj1pKXJldHVybiBNYXRoLnJvdW5kKHQvaSkrXCJoXCI7aWYoYz49bylyZXR1cm4gTWF0aC5yb3VuZCh0L28pK1wibVwiO2lmKGM+PXIpcmV0dXJuIE1hdGgucm91bmQodC9yKStcInNcIjtyZXR1cm4gdCtcIm1zXCJ9KHQpO3Rocm93IG5ldyBFcnJvcihcInZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9XCIrSlNPTi5zdHJpbmdpZnkodCkpfX0sNDE1NTp0PT57dmFyIHIsbyxpPXQuZXhwb3J0cz17fTtmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCl7dGhyb3cgbmV3IEVycm9yKFwic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0KCl7dGhyb3cgbmV3IEVycm9yKFwiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIHJ1blRpbWVvdXQodCl7aWYocj09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQodCwwKTtpZigocj09PWRlZmF1bHRTZXRUaW1vdXR8fCFyKSYmc2V0VGltZW91dClyZXR1cm4gcj1zZXRUaW1lb3V0LHNldFRpbWVvdXQodCwwKTt0cnl7cmV0dXJuIHIodCwwKX1jYXRjaChvKXt0cnl7cmV0dXJuIHIuY2FsbChudWxsLHQsMCl9Y2F0Y2gobyl7cmV0dXJuIHIuY2FsbCh0aGlzLHQsMCl9fX0hZnVuY3Rpb24oKXt0cnl7cj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBzZXRUaW1lb3V0P3NldFRpbWVvdXQ6ZGVmYXVsdFNldFRpbW91dH1jYXRjaCh0KXtyPWRlZmF1bHRTZXRUaW1vdXR9dHJ5e289XCJmdW5jdGlvblwiPT10eXBlb2YgY2xlYXJUaW1lb3V0P2NsZWFyVGltZW91dDpkZWZhdWx0Q2xlYXJUaW1lb3V0fWNhdGNoKHQpe289ZGVmYXVsdENsZWFyVGltZW91dH19KCk7dmFyIGEsYz1bXSx1PSExLGw9LTE7ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCl7dSYmYSYmKHU9ITEsYS5sZW5ndGg/Yz1hLmNvbmNhdChjKTpsPS0xLGMubGVuZ3RoJiZkcmFpblF1ZXVlKCkpfWZ1bmN0aW9uIGRyYWluUXVldWUoKXtpZighdSl7dmFyIHQ9cnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO3U9ITA7Zm9yKHZhciByPWMubGVuZ3RoO3I7KXtmb3IoYT1jLGM9W107KytsPHI7KWEmJmFbbF0ucnVuKCk7bD0tMSxyPWMubGVuZ3RofWE9bnVsbCx1PSExLGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dCh0KXtpZihvPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQodCk7aWYoKG89PT1kZWZhdWx0Q2xlYXJUaW1lb3V0fHwhbykmJmNsZWFyVGltZW91dClyZXR1cm4gbz1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KHQpO3RyeXtyZXR1cm4gbyh0KX1jYXRjaChyKXt0cnl7cmV0dXJuIG8uY2FsbChudWxsLHQpfWNhdGNoKHIpe3JldHVybiBvLmNhbGwodGhpcyx0KX19fSh0KX19ZnVuY3Rpb24gSXRlbSh0LHIpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1yfWZ1bmN0aW9uIG5vb3AoKXt9aS5uZXh0VGljaz1mdW5jdGlvbih0KXt2YXIgcj1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBvPTE7bzxhcmd1bWVudHMubGVuZ3RoO28rKylyW28tMV09YXJndW1lbnRzW29dO2MucHVzaChuZXcgSXRlbSh0LHIpKSwxIT09Yy5sZW5ndGh8fHV8fHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSl9LEl0ZW0ucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LGkudGl0bGU9XCJicm93c2VyXCIsaS5icm93c2VyPSEwLGkuZW52PXt9LGkuYXJndj1bXSxpLnZlcnNpb249XCJcIixpLnZlcnNpb25zPXt9LGkub249bm9vcCxpLmFkZExpc3RlbmVyPW5vb3AsaS5vbmNlPW5vb3AsaS5vZmY9bm9vcCxpLnJlbW92ZUxpc3RlbmVyPW5vb3AsaS5yZW1vdmVBbGxMaXN0ZW5lcnM9bm9vcCxpLmVtaXQ9bm9vcCxpLnByZXBlbmRMaXN0ZW5lcj1ub29wLGkucHJlcGVuZE9uY2VMaXN0ZW5lcj1ub29wLGkubGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybltdfSxpLmJpbmRpbmc9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGkuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LGkuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSxpLnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSw4NjYwOih0LHIsbyk9Pnt2YXIgaSxhPW8oNDE1NSk7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbihyKXt2YXIgaT1cIm9iamVjdFwiPT10eXBlb2Ygby5nP28uZzpcIm9iamVjdFwiPT10eXBlb2Ygc2VsZj9zZWxmOlwib2JqZWN0XCI9PXR5cGVvZiB0aGlzP3RoaXM6RnVuY3Rpb24oXCJyZXR1cm4gdGhpcztcIikoKSxjPW1ha2VFeHBvcnRlcih0KTtmdW5jdGlvbiBtYWtlRXhwb3J0ZXIodCxyKXtyZXR1cm4gZnVuY3Rpb24obyxpKXtcImZ1bmN0aW9uXCIhPXR5cGVvZiB0W29dJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxvLHtjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6aX0pLHImJnIobyxpKX19dm9pZCAwPT09aS5SZWZsZWN0P2kuUmVmbGVjdD10OmM9bWFrZUV4cG9ydGVyKGkuUmVmbGVjdCxjKSxmdW5jdGlvbih0KXt2YXIgcj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sLGk9byYmdm9pZCAwIT09U3ltYm9sLnRvUHJpbWl0aXZlP1N5bWJvbC50b1ByaW1pdGl2ZTpcIkBAdG9QcmltaXRpdmVcIixjPW8mJnZvaWQgMCE9PVN5bWJvbC5pdGVyYXRvcj9TeW1ib2wuaXRlcmF0b3I6XCJAQGl0ZXJhdG9yXCIsdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuY3JlYXRlLGw9e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5LHA9IXUmJiFsLGQ9e2NyZWF0ZTp1P2Z1bmN0aW9uKCl7cmV0dXJuIE1ha2VEaWN0aW9uYXJ5KE9iamVjdC5jcmVhdGUobnVsbCkpfTpsP2Z1bmN0aW9uKCl7cmV0dXJuIE1ha2VEaWN0aW9uYXJ5KHtfX3Byb3RvX186bnVsbH0pfTpmdW5jdGlvbigpe3JldHVybiBNYWtlRGljdGlvbmFyeSh7fSl9LGhhczpwP2Z1bmN0aW9uKHQsbyl7cmV0dXJuIHIuY2FsbCh0LG8pfTpmdW5jdGlvbih0LHIpe3JldHVybiByIGluIHR9LGdldDpwP2Z1bmN0aW9uKHQsbyl7cmV0dXJuIHIuY2FsbCh0LG8pP3Rbb106dm9pZCAwfTpmdW5jdGlvbih0LHIpe3JldHVybiB0W3JdfX0saD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoRnVuY3Rpb24pLHk9XCJvYmplY3RcIj09dHlwZW9mIGEmJmEuZW52JiZcInRydWVcIj09PWEuZW52LlJFRkxFQ1RfTUVUQURBVEFfVVNFX01BUF9QT0xZRklMTCx2PXl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIE1hcHx8XCJmdW5jdGlvblwiIT10eXBlb2YgTWFwLnByb3RvdHlwZS5lbnRyaWVzP0NyZWF0ZU1hcFBvbHlmaWxsKCk6TWFwLGc9eXx8XCJmdW5jdGlvblwiIT10eXBlb2YgU2V0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBTZXQucHJvdG90eXBlLmVudHJpZXM/Q3JlYXRlU2V0UG9seWZpbGwoKTpTZXQsXz1uZXcoeXx8XCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcD9DcmVhdGVXZWFrTWFwUG9seWZpbGwoKTpXZWFrTWFwKTtmdW5jdGlvbiBkZWNvcmF0ZSh0LHIsbyxpKXtpZihJc1VuZGVmaW5lZChvKSl7aWYoIUlzQXJyYXkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcjtpZighSXNDb25zdHJ1Y3RvcihyKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBEZWNvcmF0ZUNvbnN0cnVjdG9yKHQscil9aWYoIUlzQXJyYXkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcjtpZighSXNPYmplY3QocikpdGhyb3cgbmV3IFR5cGVFcnJvcjtpZighSXNPYmplY3QoaSkmJiFJc1VuZGVmaW5lZChpKSYmIUlzTnVsbChpKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBJc051bGwoaSkmJihpPXZvaWQgMCksRGVjb3JhdGVQcm9wZXJ0eSh0LHIsbz1Ub1Byb3BlcnR5S2V5KG8pLGkpfWZ1bmN0aW9uIG1ldGFkYXRhKHQscil7ZnVuY3Rpb24gZGVjb3JhdG9yKG8saSl7aWYoIUlzT2JqZWN0KG8pKXRocm93IG5ldyBUeXBlRXJyb3I7aWYoIUlzVW5kZWZpbmVkKGkpJiYhSXNQcm9wZXJ0eUtleShpKSl0aHJvdyBuZXcgVHlwZUVycm9yO09yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEodCxyLG8saSl9cmV0dXJuIGRlY29yYXRvcn1mdW5jdGlvbiBkZWZpbmVNZXRhZGF0YSh0LHIsbyxpKXtpZighSXNPYmplY3QobykpdGhyb3cgbmV3IFR5cGVFcnJvcjtyZXR1cm4gSXNVbmRlZmluZWQoaSl8fChpPVRvUHJvcGVydHlLZXkoaSkpLE9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEodCxyLG8saSl9ZnVuY3Rpb24gaGFzTWV0YWRhdGEodCxyLG8pe2lmKCFJc09iamVjdChyKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBJc1VuZGVmaW5lZChvKXx8KG89VG9Qcm9wZXJ0eUtleShvKSksT3JkaW5hcnlIYXNNZXRhZGF0YSh0LHIsbyl9ZnVuY3Rpb24gaGFzT3duTWV0YWRhdGEodCxyLG8pe2lmKCFJc09iamVjdChyKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBJc1VuZGVmaW5lZChvKXx8KG89VG9Qcm9wZXJ0eUtleShvKSksT3JkaW5hcnlIYXNPd25NZXRhZGF0YSh0LHIsbyl9ZnVuY3Rpb24gZ2V0TWV0YWRhdGEodCxyLG8pe2lmKCFJc09iamVjdChyKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBJc1VuZGVmaW5lZChvKXx8KG89VG9Qcm9wZXJ0eUtleShvKSksT3JkaW5hcnlHZXRNZXRhZGF0YSh0LHIsbyl9ZnVuY3Rpb24gZ2V0T3duTWV0YWRhdGEodCxyLG8pe2lmKCFJc09iamVjdChyKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBJc1VuZGVmaW5lZChvKXx8KG89VG9Qcm9wZXJ0eUtleShvKSksT3JkaW5hcnlHZXRPd25NZXRhZGF0YSh0LHIsbyl9ZnVuY3Rpb24gZ2V0TWV0YWRhdGFLZXlzKHQscil7aWYoIUlzT2JqZWN0KHQpKXRocm93IG5ldyBUeXBlRXJyb3I7cmV0dXJuIElzVW5kZWZpbmVkKHIpfHwocj1Ub1Byb3BlcnR5S2V5KHIpKSxPcmRpbmFyeU1ldGFkYXRhS2V5cyh0LHIpfWZ1bmN0aW9uIGdldE93bk1ldGFkYXRhS2V5cyh0LHIpe2lmKCFJc09iamVjdCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBJc1VuZGVmaW5lZChyKXx8KHI9VG9Qcm9wZXJ0eUtleShyKSksT3JkaW5hcnlPd25NZXRhZGF0YUtleXModCxyKX1mdW5jdGlvbiBkZWxldGVNZXRhZGF0YSh0LHIsbyl7aWYoIUlzT2JqZWN0KHIpKXRocm93IG5ldyBUeXBlRXJyb3I7SXNVbmRlZmluZWQobyl8fChvPVRvUHJvcGVydHlLZXkobykpO3ZhciBpPUdldE9yQ3JlYXRlTWV0YWRhdGFNYXAocixvLCExKTtpZihJc1VuZGVmaW5lZChpKSlyZXR1cm4hMTtpZighaS5kZWxldGUodCkpcmV0dXJuITE7aWYoaS5zaXplPjApcmV0dXJuITA7dmFyIGE9Xy5nZXQocik7cmV0dXJuIGEuZGVsZXRlKG8pLGEuc2l6ZT4wfHxfLmRlbGV0ZShyKSwhMH1mdW5jdGlvbiBEZWNvcmF0ZUNvbnN0cnVjdG9yKHQscil7Zm9yKHZhciBvPXQubGVuZ3RoLTE7bz49MDstLW8pe3ZhciBpPSgwLHRbb10pKHIpO2lmKCFJc1VuZGVmaW5lZChpKSYmIUlzTnVsbChpKSl7aWYoIUlzQ29uc3RydWN0b3IoaSkpdGhyb3cgbmV3IFR5cGVFcnJvcjtyPWl9fXJldHVybiByfWZ1bmN0aW9uIERlY29yYXRlUHJvcGVydHkodCxyLG8saSl7Zm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDstLWEpe3ZhciBjPSgwLHRbYV0pKHIsbyxpKTtpZighSXNVbmRlZmluZWQoYykmJiFJc051bGwoYykpe2lmKCFJc09iamVjdChjKSl0aHJvdyBuZXcgVHlwZUVycm9yO2k9Y319cmV0dXJuIGl9ZnVuY3Rpb24gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0LHIsbyl7dmFyIGk9Xy5nZXQodCk7aWYoSXNVbmRlZmluZWQoaSkpe2lmKCFvKXJldHVybjtpPW5ldyB2LF8uc2V0KHQsaSl9dmFyIGE9aS5nZXQocik7aWYoSXNVbmRlZmluZWQoYSkpe2lmKCFvKXJldHVybjthPW5ldyB2LGkuc2V0KHIsYSl9cmV0dXJuIGF9ZnVuY3Rpb24gT3JkaW5hcnlIYXNNZXRhZGF0YSh0LHIsbyl7aWYoT3JkaW5hcnlIYXNPd25NZXRhZGF0YSh0LHIsbykpcmV0dXJuITA7dmFyIGk9T3JkaW5hcnlHZXRQcm90b3R5cGVPZihyKTtyZXR1cm4hSXNOdWxsKGkpJiZPcmRpbmFyeUhhc01ldGFkYXRhKHQsaSxvKX1mdW5jdGlvbiBPcmRpbmFyeUhhc093bk1ldGFkYXRhKHQscixvKXt2YXIgaT1HZXRPckNyZWF0ZU1ldGFkYXRhTWFwKHIsbywhMSk7cmV0dXJuIUlzVW5kZWZpbmVkKGkpJiZUb0Jvb2xlYW4oaS5oYXModCkpfWZ1bmN0aW9uIE9yZGluYXJ5R2V0TWV0YWRhdGEodCxyLG8pe2lmKE9yZGluYXJ5SGFzT3duTWV0YWRhdGEodCxyLG8pKXJldHVybiBPcmRpbmFyeUdldE93bk1ldGFkYXRhKHQscixvKTt2YXIgaT1PcmRpbmFyeUdldFByb3RvdHlwZU9mKHIpO3JldHVybiBJc051bGwoaSk/dm9pZCAwOk9yZGluYXJ5R2V0TWV0YWRhdGEodCxpLG8pfWZ1bmN0aW9uIE9yZGluYXJ5R2V0T3duTWV0YWRhdGEodCxyLG8pe3ZhciBpPUdldE9yQ3JlYXRlTWV0YWRhdGFNYXAocixvLCExKTtpZighSXNVbmRlZmluZWQoaSkpcmV0dXJuIGkuZ2V0KHQpfWZ1bmN0aW9uIE9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEodCxyLG8saSl7R2V0T3JDcmVhdGVNZXRhZGF0YU1hcChvLGksITApLnNldCh0LHIpfWZ1bmN0aW9uIE9yZGluYXJ5TWV0YWRhdGFLZXlzKHQscil7dmFyIG89T3JkaW5hcnlPd25NZXRhZGF0YUtleXModCxyKSxpPU9yZGluYXJ5R2V0UHJvdG90eXBlT2YodCk7aWYobnVsbD09PWkpcmV0dXJuIG87dmFyIGE9T3JkaW5hcnlNZXRhZGF0YUtleXMoaSxyKTtpZihhLmxlbmd0aDw9MClyZXR1cm4gbztpZihvLmxlbmd0aDw9MClyZXR1cm4gYTtmb3IodmFyIGM9bmV3IGcsdT1bXSxsPTAscD1vO2w8cC5sZW5ndGg7bCsrKXt2YXIgZD1wW2xdO2MuaGFzKGQpfHwoYy5hZGQoZCksdS5wdXNoKGQpKX1mb3IodmFyIGg9MCx5PWE7aDx5Lmxlbmd0aDtoKyspe2Q9eVtoXTtjLmhhcyhkKXx8KGMuYWRkKGQpLHUucHVzaChkKSl9cmV0dXJuIHV9ZnVuY3Rpb24gT3JkaW5hcnlPd25NZXRhZGF0YUtleXModCxyKXt2YXIgbz1bXSxpPUdldE9yQ3JlYXRlTWV0YWRhdGFNYXAodCxyLCExKTtpZihJc1VuZGVmaW5lZChpKSlyZXR1cm4gbztmb3IodmFyIGE9R2V0SXRlcmF0b3IoaS5rZXlzKCkpLGM9MDs7KXt2YXIgdT1JdGVyYXRvclN0ZXAoYSk7aWYoIXUpcmV0dXJuIG8ubGVuZ3RoPWMsbzt2YXIgbD1JdGVyYXRvclZhbHVlKHUpO3RyeXtvW2NdPWx9Y2F0Y2godCl7dHJ5e0l0ZXJhdG9yQ2xvc2UoYSl9ZmluYWxseXt0aHJvdyB0fX1jKyt9fWZ1bmN0aW9uIFR5cGUodCl7aWYobnVsbD09PXQpcmV0dXJuIDE7c3dpdGNoKHR5cGVvZiB0KXtjYXNlXCJ1bmRlZmluZWRcIjpyZXR1cm4gMDtjYXNlXCJib29sZWFuXCI6cmV0dXJuIDI7Y2FzZVwic3RyaW5nXCI6cmV0dXJuIDM7Y2FzZVwic3ltYm9sXCI6cmV0dXJuIDQ7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIDU7Y2FzZVwib2JqZWN0XCI6cmV0dXJuIG51bGw9PT10PzE6NjtkZWZhdWx0OnJldHVybiA2fX1mdW5jdGlvbiBJc1VuZGVmaW5lZCh0KXtyZXR1cm4gdm9pZCAwPT09dH1mdW5jdGlvbiBJc051bGwodCl7cmV0dXJuIG51bGw9PT10fWZ1bmN0aW9uIElzU3ltYm9sKHQpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIElzT2JqZWN0KHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0P251bGwhPT10OlwiZnVuY3Rpb25cIj09dHlwZW9mIHR9ZnVuY3Rpb24gVG9QcmltaXRpdmUodCxyKXtzd2l0Y2goVHlwZSh0KSl7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6Y2FzZSAzOmNhc2UgNDpjYXNlIDU6cmV0dXJuIHR9dmFyIG89Mz09PXI/XCJzdHJpbmdcIjo1PT09cj9cIm51bWJlclwiOlwiZGVmYXVsdFwiLGE9R2V0TWV0aG9kKHQsaSk7aWYodm9pZCAwIT09YSl7dmFyIGM9YS5jYWxsKHQsbyk7aWYoSXNPYmplY3QoYykpdGhyb3cgbmV3IFR5cGVFcnJvcjtyZXR1cm4gY31yZXR1cm4gT3JkaW5hcnlUb1ByaW1pdGl2ZSh0LFwiZGVmYXVsdFwiPT09bz9cIm51bWJlclwiOm8pfWZ1bmN0aW9uIE9yZGluYXJ5VG9QcmltaXRpdmUodCxyKXtpZihcInN0cmluZ1wiPT09cil7dmFyIG89dC50b1N0cmluZztpZihJc0NhbGxhYmxlKG8pKWlmKCFJc09iamVjdChhPW8uY2FsbCh0KSkpcmV0dXJuIGE7aWYoSXNDYWxsYWJsZShpPXQudmFsdWVPZikpaWYoIUlzT2JqZWN0KGE9aS5jYWxsKHQpKSlyZXR1cm4gYX1lbHNle3ZhciBpO2lmKElzQ2FsbGFibGUoaT10LnZhbHVlT2YpKWlmKCFJc09iamVjdChhPWkuY2FsbCh0KSkpcmV0dXJuIGE7dmFyIGEsYz10LnRvU3RyaW5nO2lmKElzQ2FsbGFibGUoYykpaWYoIUlzT2JqZWN0KGE9Yy5jYWxsKHQpKSlyZXR1cm4gYX10aHJvdyBuZXcgVHlwZUVycm9yfWZ1bmN0aW9uIFRvQm9vbGVhbih0KXtyZXR1cm4hIXR9ZnVuY3Rpb24gVG9TdHJpbmcodCl7cmV0dXJuXCJcIit0fWZ1bmN0aW9uIFRvUHJvcGVydHlLZXkodCl7dmFyIHI9VG9QcmltaXRpdmUodCwzKTtyZXR1cm4gSXNTeW1ib2wocik/cjpUb1N0cmluZyhyKX1mdW5jdGlvbiBJc0FycmF5KHQpe3JldHVybiBBcnJheS5pc0FycmF5P0FycmF5LmlzQXJyYXkodCk6dCBpbnN0YW5jZW9mIE9iamVjdD90IGluc3RhbmNlb2YgQXJyYXk6XCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWZ1bmN0aW9uIElzQ2FsbGFibGUodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdH1mdW5jdGlvbiBJc0NvbnN0cnVjdG9yKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR9ZnVuY3Rpb24gSXNQcm9wZXJ0eUtleSh0KXtzd2l0Y2goVHlwZSh0KSl7Y2FzZSAzOmNhc2UgNDpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX1mdW5jdGlvbiBHZXRNZXRob2QodCxyKXt2YXIgbz10W3JdO2lmKG51bGwhPW8pe2lmKCFJc0NhbGxhYmxlKG8pKXRocm93IG5ldyBUeXBlRXJyb3I7cmV0dXJuIG99fWZ1bmN0aW9uIEdldEl0ZXJhdG9yKHQpe3ZhciByPUdldE1ldGhvZCh0LGMpO2lmKCFJc0NhbGxhYmxlKHIpKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIG89ci5jYWxsKHQpO2lmKCFJc09iamVjdChvKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBvfWZ1bmN0aW9uIEl0ZXJhdG9yVmFsdWUodCl7cmV0dXJuIHQudmFsdWV9ZnVuY3Rpb24gSXRlcmF0b3JTdGVwKHQpe3ZhciByPXQubmV4dCgpO3JldHVybiFyLmRvbmUmJnJ9ZnVuY3Rpb24gSXRlcmF0b3JDbG9zZSh0KXt2YXIgcj10LnJldHVybjtyJiZyLmNhbGwodCl9ZnVuY3Rpb24gT3JkaW5hcnlHZXRQcm90b3R5cGVPZih0KXt2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdHx8dD09PWgpcmV0dXJuIHI7aWYociE9PWgpcmV0dXJuIHI7dmFyIG89dC5wcm90b3R5cGUsaT1vJiZPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09aXx8aT09PU9iamVjdC5wcm90b3R5cGUpcmV0dXJuIHI7dmFyIGE9aS5jb25zdHJ1Y3RvcjtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiBhfHxhPT09dD9yOmF9ZnVuY3Rpb24gQ3JlYXRlTWFwUG9seWZpbGwoKXt2YXIgdD17fSxyPVtdLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBNYXBJdGVyYXRvcih0LHIsbyl7dGhpcy5faW5kZXg9MCx0aGlzLl9rZXlzPXQsdGhpcy5fdmFsdWVzPXIsdGhpcy5fc2VsZWN0b3I9b31yZXR1cm4gTWFwSXRlcmF0b3IucHJvdG90eXBlW1wiQEBpdGVyYXRvclwiXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxNYXBJdGVyYXRvci5wcm90b3R5cGVbY109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sTWFwSXRlcmF0b3IucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9pbmRleDtpZih0Pj0wJiZ0PHRoaXMuX2tleXMubGVuZ3RoKXt2YXIgbz10aGlzLl9zZWxlY3Rvcih0aGlzLl9rZXlzW3RdLHRoaXMuX3ZhbHVlc1t0XSk7cmV0dXJuIHQrMT49dGhpcy5fa2V5cy5sZW5ndGg/KHRoaXMuX2luZGV4PS0xLHRoaXMuX2tleXM9cix0aGlzLl92YWx1ZXM9cik6dGhpcy5faW5kZXgrKyx7dmFsdWU6byxkb25lOiExfX1yZXR1cm57dmFsdWU6dm9pZCAwLGRvbmU6ITB9fSxNYXBJdGVyYXRvci5wcm90b3R5cGUudGhyb3c9ZnVuY3Rpb24odCl7dGhyb3cgdGhpcy5faW5kZXg+PTAmJih0aGlzLl9pbmRleD0tMSx0aGlzLl9rZXlzPXIsdGhpcy5fdmFsdWVzPXIpLHR9LE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5yZXR1cm49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2luZGV4Pj0wJiYodGhpcy5faW5kZXg9LTEsdGhpcy5fa2V5cz1yLHRoaXMuX3ZhbHVlcz1yKSx7dmFsdWU6dCxkb25lOiEwfX0sTWFwSXRlcmF0b3J9KCk7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gTWFwKCl7dGhpcy5fa2V5cz1bXSx0aGlzLl92YWx1ZXM9W10sdGhpcy5fY2FjaGVLZXk9dCx0aGlzLl9jYWNoZUluZGV4PS0yfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFwLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleXMubGVuZ3RofSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE1hcC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9maW5kKHQsITEpPj0wfSxNYXAucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgcj10aGlzLl9maW5kKHQsITEpO3JldHVybiByPj0wP3RoaXMuX3ZhbHVlc1tyXTp2b2lkIDB9LE1hcC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQscil7dmFyIG89dGhpcy5fZmluZCh0LCEwKTtyZXR1cm4gdGhpcy5fdmFsdWVzW29dPXIsdGhpc30sTWFwLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24ocil7dmFyIG89dGhpcy5fZmluZChyLCExKTtpZihvPj0wKXtmb3IodmFyIGk9dGhpcy5fa2V5cy5sZW5ndGgsYT1vKzE7YTxpO2ErKyl0aGlzLl9rZXlzW2EtMV09dGhpcy5fa2V5c1thXSx0aGlzLl92YWx1ZXNbYS0xXT10aGlzLl92YWx1ZXNbYV07cmV0dXJuIHRoaXMuX2tleXMubGVuZ3RoLS0sdGhpcy5fdmFsdWVzLmxlbmd0aC0tLHI9PT10aGlzLl9jYWNoZUtleSYmKHRoaXMuX2NhY2hlS2V5PXQsdGhpcy5fY2FjaGVJbmRleD0tMiksITB9cmV0dXJuITF9LE1hcC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9rZXlzLmxlbmd0aD0wLHRoaXMuX3ZhbHVlcy5sZW5ndGg9MCx0aGlzLl9jYWNoZUtleT10LHRoaXMuX2NhY2hlSW5kZXg9LTJ9LE1hcC5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3JldHVybiBuZXcgbyh0aGlzLl9rZXlzLHRoaXMuX3ZhbHVlcyxnZXRLZXkpfSxNYXAucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3JldHVybiBuZXcgbyh0aGlzLl9rZXlzLHRoaXMuX3ZhbHVlcyxnZXRWYWx1ZSl9LE1hcC5wcm90b3R5cGUuZW50cmllcz1mdW5jdGlvbigpe3JldHVybiBuZXcgbyh0aGlzLl9rZXlzLHRoaXMuX3ZhbHVlcyxnZXRFbnRyeSl9LE1hcC5wcm90b3R5cGVbXCJAQGl0ZXJhdG9yXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfSxNYXAucHJvdG90eXBlW2NdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfSxNYXAucHJvdG90eXBlLl9maW5kPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuX2NhY2hlS2V5IT09dCYmKHRoaXMuX2NhY2hlSW5kZXg9dGhpcy5fa2V5cy5pbmRleE9mKHRoaXMuX2NhY2hlS2V5PXQpKSx0aGlzLl9jYWNoZUluZGV4PDAmJnImJih0aGlzLl9jYWNoZUluZGV4PXRoaXMuX2tleXMubGVuZ3RoLHRoaXMuX2tleXMucHVzaCh0KSx0aGlzLl92YWx1ZXMucHVzaCh2b2lkIDApKSx0aGlzLl9jYWNoZUluZGV4fSxNYXB9KCk7ZnVuY3Rpb24gZ2V0S2V5KHQscil7cmV0dXJuIHR9ZnVuY3Rpb24gZ2V0VmFsdWUodCxyKXtyZXR1cm4gcn1mdW5jdGlvbiBnZXRFbnRyeSh0LHIpe3JldHVyblt0LHJdfX1mdW5jdGlvbiBDcmVhdGVTZXRQb2x5ZmlsbCgpe3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIFNldCgpe3RoaXMuX21hcD1uZXcgdn1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldC5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAuc2l6ZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxTZXQucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbWFwLmhhcyh0KX0sU2V0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21hcC5zZXQodCx0KSx0aGlzfSxTZXQucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbWFwLmRlbGV0ZSh0KX0sU2V0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX21hcC5jbGVhcigpfSxTZXQucHJvdG90eXBlLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwLmtleXMoKX0sU2V0LnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwLnZhbHVlcygpfSxTZXQucHJvdG90eXBlLmVudHJpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwLmVudHJpZXMoKX0sU2V0LnByb3RvdHlwZVtcIkBAaXRlcmF0b3JcIl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rZXlzKCl9LFNldC5wcm90b3R5cGVbY109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rZXlzKCl9LFNldH0oKX1mdW5jdGlvbiBDcmVhdGVXZWFrTWFwUG9seWZpbGwoKXt2YXIgdD0xNixvPWQuY3JlYXRlKCksaT1DcmVhdGVVbmlxdWVLZXkoKTtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiBXZWFrTWFwKCl7dGhpcy5fa2V5PUNyZWF0ZVVuaXF1ZUtleSgpfXJldHVybiBXZWFrTWFwLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7dmFyIHI9R2V0T3JDcmVhdGVXZWFrTWFwVGFibGUodCwhMSk7cmV0dXJuIHZvaWQgMCE9PXImJmQuaGFzKHIsdGhpcy5fa2V5KX0sV2Vha01hcC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciByPUdldE9yQ3JlYXRlV2Vha01hcFRhYmxlKHQsITEpO3JldHVybiB2b2lkIDAhPT1yP2QuZ2V0KHIsdGhpcy5fa2V5KTp2b2lkIDB9LFdlYWtNYXAucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LHIpe3JldHVybiBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0LCEwKVt0aGlzLl9rZXldPXIsdGhpc30sV2Vha01hcC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciByPUdldE9yQ3JlYXRlV2Vha01hcFRhYmxlKHQsITEpO3JldHVybiB2b2lkIDAhPT1yJiZkZWxldGUgclt0aGlzLl9rZXldfSxXZWFrTWFwLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2tleT1DcmVhdGVVbmlxdWVLZXkoKX0sV2Vha01hcH0oKTtmdW5jdGlvbiBDcmVhdGVVbmlxdWVLZXkoKXt2YXIgdDtkb3t0PVwiQEBXZWFrTWFwQEBcIitDcmVhdGVVVUlEKCl9d2hpbGUoZC5oYXMobyx0KSk7cmV0dXJuIG9bdF09ITAsdH1mdW5jdGlvbiBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0LG8pe2lmKCFyLmNhbGwodCxpKSl7aWYoIW8pcmV0dXJuO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkse3ZhbHVlOmQuY3JlYXRlKCl9KX1yZXR1cm4gdFtpXX1mdW5jdGlvbiBGaWxsUmFuZG9tQnl0ZXModCxyKXtmb3IodmFyIG89MDtvPHI7KytvKXRbb109MjU1Kk1hdGgucmFuZG9tKCl8MDtyZXR1cm4gdH1mdW5jdGlvbiBHZW5SYW5kb21CeXRlcyh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBVaW50OEFycmF5P1widW5kZWZpbmVkXCIhPXR5cGVvZiBjcnlwdG8/Y3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSh0KSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1zQ3J5cHRvP21zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSh0KSk6RmlsbFJhbmRvbUJ5dGVzKG5ldyBVaW50OEFycmF5KHQpLHQpOkZpbGxSYW5kb21CeXRlcyhuZXcgQXJyYXkodCksdCl9ZnVuY3Rpb24gQ3JlYXRlVVVJRCgpe3ZhciByPUdlblJhbmRvbUJ5dGVzKHQpO3JbNl09Nzkmcls2XXw2NCxyWzhdPTE5MSZyWzhdfDEyODtmb3IodmFyIG89XCJcIixpPTA7aTx0OysraSl7dmFyIGE9cltpXTs0IT09aSYmNiE9PWkmJjghPT1pfHwobys9XCItXCIpLGE8MTYmJihvKz1cIjBcIiksbys9YS50b1N0cmluZygxNikudG9Mb3dlckNhc2UoKX1yZXR1cm4gb319ZnVuY3Rpb24gTWFrZURpY3Rpb25hcnkodCl7cmV0dXJuIHQuX189dm9pZCAwLGRlbGV0ZSB0Ll9fLHR9dChcImRlY29yYXRlXCIsZGVjb3JhdGUpLHQoXCJtZXRhZGF0YVwiLG1ldGFkYXRhKSx0KFwiZGVmaW5lTWV0YWRhdGFcIixkZWZpbmVNZXRhZGF0YSksdChcImhhc01ldGFkYXRhXCIsaGFzTWV0YWRhdGEpLHQoXCJoYXNPd25NZXRhZGF0YVwiLGhhc093bk1ldGFkYXRhKSx0KFwiZ2V0TWV0YWRhdGFcIixnZXRNZXRhZGF0YSksdChcImdldE93bk1ldGFkYXRhXCIsZ2V0T3duTWV0YWRhdGEpLHQoXCJnZXRNZXRhZGF0YUtleXNcIixnZXRNZXRhZGF0YUtleXMpLHQoXCJnZXRPd25NZXRhZGF0YUtleXNcIixnZXRPd25NZXRhZGF0YUtleXMpLHQoXCJkZWxldGVNZXRhZGF0YVwiLGRlbGV0ZU1ldGFkYXRhKX0oYyl9KCl9KGl8fChpPXt9KSl9LDU2NjY6dD0+e3ZhciByPWZ1bmN0aW9uKHQpe3ZhciByLG89T2JqZWN0LnByb3RvdHlwZSxpPW8uaGFzT3duUHJvcGVydHksYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LGM9YS5pdGVyYXRvcnx8XCJAQGl0ZXJhdG9yXCIsdT1hLmFzeW5jSXRlcmF0b3J8fFwiQEBhc3luY0l0ZXJhdG9yXCIsbD1hLnRvU3RyaW5nVGFnfHxcIkBAdG9TdHJpbmdUYWdcIjtmdW5jdGlvbiBkZWZpbmUodCxyLG8pe3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHt2YWx1ZTpvLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSksdFtyXX10cnl7ZGVmaW5lKHt9LFwiXCIpfWNhdGNoKHQpe2RlZmluZT1mdW5jdGlvbih0LHIsbyl7cmV0dXJuIHRbcl09b319ZnVuY3Rpb24gd3JhcCh0LHIsbyxpKXt2YXIgYT1yJiZyLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvcj9yOkdlbmVyYXRvcixjPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLHU9bmV3IENvbnRleHQoaXx8W10pO3JldHVybiBjLl9pbnZva2U9ZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZCh0LHIsbyl7dmFyIGk9cDtyZXR1cm4gZnVuY3Rpb24gaW52b2tlKGEsYyl7aWYoaT09PWgpdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtpZihpPT09eSl7aWYoXCJ0aHJvd1wiPT09YSl0aHJvdyBjO3JldHVybiBkb25lUmVzdWx0KCl9Zm9yKG8ubWV0aG9kPWEsby5hcmc9Yzs7KXt2YXIgdT1vLmRlbGVnYXRlO2lmKHUpe3ZhciBsPW1heWJlSW52b2tlRGVsZWdhdGUodSxvKTtpZihsKXtpZihsPT09diljb250aW51ZTtyZXR1cm4gbH19aWYoXCJuZXh0XCI9PT1vLm1ldGhvZClvLnNlbnQ9by5fc2VudD1vLmFyZztlbHNlIGlmKFwidGhyb3dcIj09PW8ubWV0aG9kKXtpZihpPT09cCl0aHJvdyBpPXksby5hcmc7by5kaXNwYXRjaEV4Y2VwdGlvbihvLmFyZyl9ZWxzZVwicmV0dXJuXCI9PT1vLm1ldGhvZCYmby5hYnJ1cHQoXCJyZXR1cm5cIixvLmFyZyk7aT1oO3ZhciBnPXRyeUNhdGNoKHQscixvKTtpZihcIm5vcm1hbFwiPT09Zy50eXBlKXtpZihpPW8uZG9uZT95OmQsZy5hcmc9PT12KWNvbnRpbnVlO3JldHVybnt2YWx1ZTpnLmFyZyxkb25lOm8uZG9uZX19XCJ0aHJvd1wiPT09Zy50eXBlJiYoaT15LG8ubWV0aG9kPVwidGhyb3dcIixvLmFyZz1nLmFyZyl9fX0odCxvLHUpLGN9ZnVuY3Rpb24gdHJ5Q2F0Y2godCxyLG8pe3RyeXtyZXR1cm57dHlwZTpcIm5vcm1hbFwiLGFyZzp0LmNhbGwocixvKX19Y2F0Y2godCl7cmV0dXJue3R5cGU6XCJ0aHJvd1wiLGFyZzp0fX19dC53cmFwPXdyYXA7dmFyIHA9XCJzdXNwZW5kZWRTdGFydFwiLGQ9XCJzdXNwZW5kZWRZaWVsZFwiLGg9XCJleGVjdXRpbmdcIix5PVwiY29tcGxldGVkXCIsdj17fTtmdW5jdGlvbiBHZW5lcmF0b3IoKXt9ZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKXt9ZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKXt9dmFyIGc9e307ZGVmaW5lKGcsYywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKTt2YXIgXz1PYmplY3QuZ2V0UHJvdG90eXBlT2YsbT1fJiZfKF8odmFsdWVzKFtdKSkpO20mJm0hPT1vJiZpLmNhbGwobSxjKSYmKGc9bSk7dmFyIGI9R2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlPUdlbmVyYXRvci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnKTtmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHModCl7W1wibmV4dFwiLFwidGhyb3dcIixcInJldHVyblwiXS5mb3JFYWNoKChmdW5jdGlvbihyKXtkZWZpbmUodCxyLChmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKHIsdCl9KSl9KSl9ZnVuY3Rpb24gQXN5bmNJdGVyYXRvcih0LHIpe2Z1bmN0aW9uIGludm9rZShvLGEsYyx1KXt2YXIgbD10cnlDYXRjaCh0W29dLHQsYSk7aWYoXCJ0aHJvd1wiIT09bC50eXBlKXt2YXIgcD1sLmFyZyxkPXAudmFsdWU7cmV0dXJuIGQmJlwib2JqZWN0XCI9PXR5cGVvZiBkJiZpLmNhbGwoZCxcIl9fYXdhaXRcIik/ci5yZXNvbHZlKGQuX19hd2FpdCkudGhlbigoZnVuY3Rpb24odCl7aW52b2tlKFwibmV4dFwiLHQsYyx1KX0pLChmdW5jdGlvbih0KXtpbnZva2UoXCJ0aHJvd1wiLHQsYyx1KX0pKTpyLnJlc29sdmUoZCkudGhlbigoZnVuY3Rpb24odCl7cC52YWx1ZT10LGMocCl9KSwoZnVuY3Rpb24odCl7cmV0dXJuIGludm9rZShcInRocm93XCIsdCxjLHUpfSkpfXUobC5hcmcpfXZhciBvO3RoaXMuX2ludm9rZT1mdW5jdGlvbiBlbnF1ZXVlKHQsaSl7ZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKXtyZXR1cm4gbmV3IHIoKGZ1bmN0aW9uKHIsbyl7aW52b2tlKHQsaSxyLG8pfSkpfXJldHVybiBvPW8/by50aGVuKGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKTpjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpfX1mdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKHQsbyl7dmFyIGk9dC5pdGVyYXRvcltvLm1ldGhvZF07aWYoaT09PXIpe2lmKG8uZGVsZWdhdGU9bnVsbCxcInRocm93XCI9PT1vLm1ldGhvZCl7aWYodC5pdGVyYXRvci5yZXR1cm4mJihvLm1ldGhvZD1cInJldHVyblwiLG8uYXJnPXIsbWF5YmVJbnZva2VEZWxlZ2F0ZSh0LG8pLFwidGhyb3dcIj09PW8ubWV0aG9kKSlyZXR1cm4gdjtvLm1ldGhvZD1cInRocm93XCIsby5hcmc9bmV3IFR5cGVFcnJvcihcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIil9cmV0dXJuIHZ9dmFyIGE9dHJ5Q2F0Y2goaSx0Lml0ZXJhdG9yLG8uYXJnKTtpZihcInRocm93XCI9PT1hLnR5cGUpcmV0dXJuIG8ubWV0aG9kPVwidGhyb3dcIixvLmFyZz1hLmFyZyxvLmRlbGVnYXRlPW51bGwsdjt2YXIgYz1hLmFyZztyZXR1cm4gYz9jLmRvbmU/KG9bdC5yZXN1bHROYW1lXT1jLnZhbHVlLG8ubmV4dD10Lm5leHRMb2MsXCJyZXR1cm5cIiE9PW8ubWV0aG9kJiYoby5tZXRob2Q9XCJuZXh0XCIsby5hcmc9ciksby5kZWxlZ2F0ZT1udWxsLHYpOmM6KG8ubWV0aG9kPVwidGhyb3dcIixvLmFyZz1uZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksby5kZWxlZ2F0ZT1udWxsLHYpfWZ1bmN0aW9uIHB1c2hUcnlFbnRyeSh0KXt2YXIgcj17dHJ5TG9jOnRbMF19OzEgaW4gdCYmKHIuY2F0Y2hMb2M9dFsxXSksMiBpbiB0JiYoci5maW5hbGx5TG9jPXRbMl0sci5hZnRlckxvYz10WzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaChyKX1mdW5jdGlvbiByZXNldFRyeUVudHJ5KHQpe3ZhciByPXQuY29tcGxldGlvbnx8e307ci50eXBlPVwibm9ybWFsXCIsZGVsZXRlIHIuYXJnLHQuY29tcGxldGlvbj1yfWZ1bmN0aW9uIENvbnRleHQodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOlwicm9vdFwifV0sdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiB2YWx1ZXModCl7aWYodCl7dmFyIG89dFtjXTtpZihvKXJldHVybiBvLmNhbGwodCk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5uZXh0KXJldHVybiB0O2lmKCFpc05hTih0Lmxlbmd0aCkpe3ZhciBhPS0xLHU9ZnVuY3Rpb24gbmV4dCgpe2Zvcig7KythPHQubGVuZ3RoOylpZihpLmNhbGwodCxhKSlyZXR1cm4gbmV4dC52YWx1ZT10W2FdLG5leHQuZG9uZT0hMSxuZXh0O3JldHVybiBuZXh0LnZhbHVlPXIsbmV4dC5kb25lPSEwLG5leHR9O3JldHVybiB1Lm5leHQ9dX19cmV0dXJue25leHQ6ZG9uZVJlc3VsdH19ZnVuY3Rpb24gZG9uZVJlc3VsdCgpe3JldHVybnt2YWx1ZTpyLGRvbmU6ITB9fXJldHVybiBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGU9R2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsZGVmaW5lKGIsXCJjb25zdHJ1Y3RvclwiLEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKSxkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsXCJjb25zdHJ1Y3RvclwiLEdlbmVyYXRvckZ1bmN0aW9uKSxHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZT1kZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsbCxcIkdlbmVyYXRvckZ1bmN0aW9uXCIpLHQuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbih0KXt2YXIgcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yO3JldHVybiEhciYmKHI9PT1HZW5lcmF0b3JGdW5jdGlvbnx8XCJHZW5lcmF0b3JGdW5jdGlvblwiPT09KHIuZGlzcGxheU5hbWV8fHIubmFtZSkpfSx0Lm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk6KHQuX19wcm90b19fPUdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLGRlZmluZSh0LGwsXCJHZW5lcmF0b3JGdW5jdGlvblwiKSksdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiKSx0fSx0LmF3cmFwPWZ1bmN0aW9uKHQpe3JldHVybntfX2F3YWl0OnR9fSxkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpLGRlZmluZShBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSx1LChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHQuQXN5bmNJdGVyYXRvcj1Bc3luY0l0ZXJhdG9yLHQuYXN5bmM9ZnVuY3Rpb24ocixvLGksYSxjKXt2b2lkIDA9PT1jJiYoYz1Qcm9taXNlKTt2YXIgdT1uZXcgQXN5bmNJdGVyYXRvcih3cmFwKHIsbyxpLGEpLGMpO3JldHVybiB0LmlzR2VuZXJhdG9yRnVuY3Rpb24obyk/dTp1Lm5leHQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6dS5uZXh0KCl9KSl9LGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhiKSxkZWZpbmUoYixsLFwiR2VuZXJhdG9yXCIpLGRlZmluZShiLGMsKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSksZGVmaW5lKGIsXCJ0b1N0cmluZ1wiLChmdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBHZW5lcmF0b3JdXCJ9KSksdC5rZXlzPWZ1bmN0aW9uKHQpe3ZhciByPVtdO2Zvcih2YXIgbyBpbiB0KXIucHVzaChvKTtyZXR1cm4gci5yZXZlcnNlKCksZnVuY3Rpb24gbmV4dCgpe2Zvcig7ci5sZW5ndGg7KXt2YXIgbz1yLnBvcCgpO2lmKG8gaW4gdClyZXR1cm4gbmV4dC52YWx1ZT1vLG5leHQuZG9uZT0hMSxuZXh0fXJldHVybiBuZXh0LmRvbmU9ITAsbmV4dH19LHQudmFsdWVzPXZhbHVlcyxDb250ZXh0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6Q29udGV4dCxyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD1yLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9XCJuZXh0XCIsdGhpcy5hcmc9cix0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KSwhdClmb3IodmFyIG8gaW4gdGhpcylcInRcIj09PW8uY2hhckF0KDApJiZpLmNhbGwodGhpcyxvKSYmIWlzTmFOKCtvLnNsaWNlKDEpKSYmKHRoaXNbb109cil9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIHQ9dGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247aWYoXCJ0aHJvd1wiPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSl0aHJvdyB0O3ZhciBvPXRoaXM7ZnVuY3Rpb24gaGFuZGxlKGksYSl7cmV0dXJuIHUudHlwZT1cInRocm93XCIsdS5hcmc9dCxvLm5leHQ9aSxhJiYoby5tZXRob2Q9XCJuZXh0XCIsby5hcmc9ciksISFhfWZvcih2YXIgYT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7YT49MDstLWEpe3ZhciBjPXRoaXMudHJ5RW50cmllc1thXSx1PWMuY29tcGxldGlvbjtpZihcInJvb3RcIj09PWMudHJ5TG9jKXJldHVybiBoYW5kbGUoXCJlbmRcIik7aWYoYy50cnlMb2M8PXRoaXMucHJldil7dmFyIGw9aS5jYWxsKGMsXCJjYXRjaExvY1wiKSxwPWkuY2FsbChjLFwiZmluYWxseUxvY1wiKTtpZihsJiZwKXtpZih0aGlzLnByZXY8Yy5jYXRjaExvYylyZXR1cm4gaGFuZGxlKGMuY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxjLmZpbmFsbHlMb2MpcmV0dXJuIGhhbmRsZShjLmZpbmFsbHlMb2MpfWVsc2UgaWYobCl7aWYodGhpcy5wcmV2PGMuY2F0Y2hMb2MpcmV0dXJuIGhhbmRsZShjLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFwKXRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO2lmKHRoaXMucHJldjxjLmZpbmFsbHlMb2MpcmV0dXJuIGhhbmRsZShjLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxyKXtmb3IodmFyIG89dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO28+PTA7LS1vKXt2YXIgYT10aGlzLnRyeUVudHJpZXNbb107aWYoYS50cnlMb2M8PXRoaXMucHJldiYmaS5jYWxsKGEsXCJmaW5hbGx5TG9jXCIpJiZ0aGlzLnByZXY8YS5maW5hbGx5TG9jKXt2YXIgYz1hO2JyZWFrfX1jJiYoXCJicmVha1wiPT09dHx8XCJjb250aW51ZVwiPT09dCkmJmMudHJ5TG9jPD1yJiZyPD1jLmZpbmFsbHlMb2MmJihjPW51bGwpO3ZhciB1PWM/Yy5jb21wbGV0aW9uOnt9O3JldHVybiB1LnR5cGU9dCx1LmFyZz1yLGM/KHRoaXMubWV0aG9kPVwibmV4dFwiLHRoaXMubmV4dD1jLmZpbmFsbHlMb2Msdik6dGhpcy5jb21wbGV0ZSh1KX0sY29tcGxldGU6ZnVuY3Rpb24odCxyKXtpZihcInRocm93XCI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuXCJicmVha1wiPT09dC50eXBlfHxcImNvbnRpbnVlXCI9PT10LnR5cGU/dGhpcy5uZXh0PXQuYXJnOlwicmV0dXJuXCI9PT10LnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz10LmFyZyx0aGlzLm1ldGhvZD1cInJldHVyblwiLHRoaXMubmV4dD1cImVuZFwiKTpcIm5vcm1hbFwiPT09dC50eXBlJiZyJiYodGhpcy5uZXh0PXIpLHZ9LGZpbmlzaDpmdW5jdGlvbih0KXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbcl07aWYoby5maW5hbGx5TG9jPT09dClyZXR1cm4gdGhpcy5jb21wbGV0ZShvLmNvbXBsZXRpb24sby5hZnRlckxvYykscmVzZXRUcnlFbnRyeShvKSx2fX0sY2F0Y2g6ZnVuY3Rpb24odCl7Zm9yKHZhciByPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIG89dGhpcy50cnlFbnRyaWVzW3JdO2lmKG8udHJ5TG9jPT09dCl7dmFyIGk9by5jb21wbGV0aW9uO2lmKFwidGhyb3dcIj09PWkudHlwZSl7dmFyIGE9aS5hcmc7cmVzZXRUcnlFbnRyeShvKX1yZXR1cm4gYX19dGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKHQsbyxpKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6dmFsdWVzKHQpLHJlc3VsdE5hbWU6byxuZXh0TG9jOml9LFwibmV4dFwiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz1yKSx2fX0sdH0odC5leHBvcnRzKTt0cnl7cmVnZW5lcmF0b3JSdW50aW1lPXJ9Y2F0Y2godCl7XCJvYmplY3RcIj09dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9cjpGdW5jdGlvbihcInJcIixcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocil9fSw4NTkzOnQ9Pnt0LmV4cG9ydHM9SlNPTi5wYXJzZSgne1wiX2Zyb21cIjpcImF4aW9zQF4wLjIxLjRcIixcIl9pZFwiOlwiYXhpb3NAMC4yMS40XCIsXCJfaW5CdW5kbGVcIjpmYWxzZSxcIl9pbnRlZ3JpdHlcIjpcInNoYTUxMi11dDV2ZXdraXU4ampHQmRxcE00NFh4anVDanE5TEFLZUhWbW9WZkhWenk4ZUhneHhxOFNiQVZRTm92REE4bVZpMDVrUDBFYS9uL1V6Y1NIY1RKUWZOZz09XCIsXCJfbG9jYXRpb25cIjpcIi9heGlvc1wiLFwiX3BoYW50b21DaGlsZHJlblwiOnt9LFwiX3JlcXVlc3RlZFwiOntcInR5cGVcIjpcInJhbmdlXCIsXCJyZWdpc3RyeVwiOnRydWUsXCJyYXdcIjpcImF4aW9zQF4wLjIxLjRcIixcIm5hbWVcIjpcImF4aW9zXCIsXCJlc2NhcGVkTmFtZVwiOlwiYXhpb3NcIixcInJhd1NwZWNcIjpcIl4wLjIxLjRcIixcInNhdmVTcGVjXCI6bnVsbCxcImZldGNoU3BlY1wiOlwiXjAuMjEuNFwifSxcIl9yZXF1aXJlZEJ5XCI6W1wiL1wiXSxcIl9yZXNvbHZlZFwiOlwiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvYXhpb3MvLS9heGlvcy0wLjIxLjQudGd6XCIsXCJfc2hhc3VtXCI6XCJjNjdiOTBkYzA1NjhlNWMxY2YyYjBiODU4YzQzYmEyOGUyZWRhNTc1XCIsXCJfc3BlY1wiOlwiYXhpb3NAXjAuMjEuNFwiLFwiX3doZXJlXCI6XCIvaG9tZS9yYWRpYy9wcm9qZWN0cy9zdHJlYW1zL3BhY2thZ2VzL3N0cmVhbXMvY29yZVwiLFwiYXV0aG9yXCI6e1wibmFtZVwiOlwiTWF0dCBaYWJyaXNraWVcIn0sXCJicm93c2VyXCI6e1wiLi9saWIvYWRhcHRlcnMvaHR0cC5qc1wiOlwiLi9saWIvYWRhcHRlcnMveGhyLmpzXCJ9LFwiYnVnc1wiOntcInVybFwiOlwiaHR0cHM6Ly9naXRodWIuY29tL2F4aW9zL2F4aW9zL2lzc3Vlc1wifSxcImJ1bmRsZURlcGVuZGVuY2llc1wiOmZhbHNlLFwiYnVuZGxlc2l6ZVwiOlt7XCJwYXRoXCI6XCIuL2Rpc3QvYXhpb3MubWluLmpzXCIsXCJ0aHJlc2hvbGRcIjpcIjVrQlwifV0sXCJkZXBlbmRlbmNpZXNcIjp7XCJmb2xsb3ctcmVkaXJlY3RzXCI6XCJeMS4xNC4wXCJ9LFwiZGVwcmVjYXRlZFwiOmZhbHNlLFwiZGVzY3JpcHRpb25cIjpcIlByb21pc2UgYmFzZWQgSFRUUCBjbGllbnQgZm9yIHRoZSBicm93c2VyIGFuZCBub2RlLmpzXCIsXCJkZXZEZXBlbmRlbmNpZXNcIjp7XCJjb3ZlcmFsbHNcIjpcIl4zLjAuMFwiLFwiZXM2LXByb21pc2VcIjpcIl40LjIuNFwiLFwiZ3J1bnRcIjpcIl4xLjMuMFwiLFwiZ3J1bnQtYmFubmVyXCI6XCJeMC42LjBcIixcImdydW50LWNsaVwiOlwiXjEuMi4wXCIsXCJncnVudC1jb250cmliLWNsZWFuXCI6XCJeMS4xLjBcIixcImdydW50LWNvbnRyaWItd2F0Y2hcIjpcIl4xLjAuMFwiLFwiZ3J1bnQtZXNsaW50XCI6XCJeMjMuMC4wXCIsXCJncnVudC1rYXJtYVwiOlwiXjQuMC4wXCIsXCJncnVudC1tb2NoYS10ZXN0XCI6XCJeMC4xMy4zXCIsXCJncnVudC10c1wiOlwiXjYuMC4wLWJldGEuMTlcIixcImdydW50LXdlYnBhY2tcIjpcIl40LjAuMlwiLFwiaXN0YW5idWwtaW5zdHJ1bWVudGVyLWxvYWRlclwiOlwiXjEuMC4wXCIsXCJqYXNtaW5lLWNvcmVcIjpcIl4yLjQuMVwiLFwia2FybWFcIjpcIl42LjMuMlwiLFwia2FybWEtY2hyb21lLWxhdW5jaGVyXCI6XCJeMy4xLjBcIixcImthcm1hLWZpcmVmb3gtbGF1bmNoZXJcIjpcIl4yLjEuMFwiLFwia2FybWEtamFzbWluZVwiOlwiXjEuMS4xXCIsXCJrYXJtYS1qYXNtaW5lLWFqYXhcIjpcIl4wLjEuMTNcIixcImthcm1hLXNhZmFyaS1sYXVuY2hlclwiOlwiXjEuMC4wXCIsXCJrYXJtYS1zYXVjZS1sYXVuY2hlclwiOlwiXjQuMy42XCIsXCJrYXJtYS1zaW5vblwiOlwiXjEuMC41XCIsXCJrYXJtYS1zb3VyY2VtYXAtbG9hZGVyXCI6XCJeMC4zLjhcIixcImthcm1hLXdlYnBhY2tcIjpcIl40LjAuMlwiLFwibG9hZC1ncnVudC10YXNrc1wiOlwiXjMuNS4yXCIsXCJtaW5pbWlzdFwiOlwiXjEuMi4wXCIsXCJtb2NoYVwiOlwiXjguMi4xXCIsXCJzaW5vblwiOlwiXjQuNS4wXCIsXCJ0ZXJzZXItd2VicGFjay1wbHVnaW5cIjpcIl40LjIuM1wiLFwidHlwZXNjcmlwdFwiOlwiXjQuMC41XCIsXCJ1cmwtc2VhcmNoLXBhcmFtc1wiOlwiXjAuMTAuMFwiLFwid2VicGFja1wiOlwiXjQuNDQuMlwiLFwid2VicGFjay1kZXYtc2VydmVyXCI6XCJeMy4xMS4wXCJ9LFwiaG9tZXBhZ2VcIjpcImh0dHBzOi8vYXhpb3MtaHR0cC5jb21cIixcImpzZGVsaXZyXCI6XCJkaXN0L2F4aW9zLm1pbi5qc1wiLFwia2V5d29yZHNcIjpbXCJ4aHJcIixcImh0dHBcIixcImFqYXhcIixcInByb21pc2VcIixcIm5vZGVcIl0sXCJsaWNlbnNlXCI6XCJNSVRcIixcIm1haW5cIjpcImluZGV4LmpzXCIsXCJuYW1lXCI6XCJheGlvc1wiLFwicmVwb3NpdG9yeVwiOntcInR5cGVcIjpcImdpdFwiLFwidXJsXCI6XCJnaXQraHR0cHM6Ly9naXRodWIuY29tL2F4aW9zL2F4aW9zLmdpdFwifSxcInNjcmlwdHNcIjp7XCJidWlsZFwiOlwiTk9ERV9FTlY9cHJvZHVjdGlvbiBncnVudCBidWlsZFwiLFwiY292ZXJhbGxzXCI6XCJjYXQgY292ZXJhZ2UvbGNvdi5pbmZvIHwgLi9ub2RlX21vZHVsZXMvY292ZXJhbGxzL2Jpbi9jb3ZlcmFsbHMuanNcIixcImV4YW1wbGVzXCI6XCJub2RlIC4vZXhhbXBsZXMvc2VydmVyLmpzXCIsXCJmaXhcIjpcImVzbGludCAtLWZpeCBsaWIvKiovKi5qc1wiLFwicG9zdHZlcnNpb25cIjpcImdpdCBwdXNoICYmIGdpdCBwdXNoIC0tdGFnc1wiLFwicHJldmVyc2lvblwiOlwibnBtIHRlc3RcIixcInN0YXJ0XCI6XCJub2RlIC4vc2FuZGJveC9zZXJ2ZXIuanNcIixcInRlc3RcIjpcImdydW50IHRlc3RcIixcInZlcnNpb25cIjpcIm5wbSBydW4gYnVpbGQgJiYgZ3J1bnQgdmVyc2lvbiAmJiBnaXQgYWRkIC1BIGRpc3QgJiYgZ2l0IGFkZCBDSEFOR0VMT0cubWQgYm93ZXIuanNvbiBwYWNrYWdlLmpzb25cIn0sXCJ0eXBpbmdzXCI6XCIuL2luZGV4LmQudHNcIixcInVucGtnXCI6XCJkaXN0L2F4aW9zLm1pbi5qc1wiLFwidmVyc2lvblwiOlwiMC4yMS40XCJ9Jyl9fSxyPXt9O2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obyl7dmFyIGk9cltvXTtpZih2b2lkIDAhPT1pKXJldHVybiBpLmV4cG9ydHM7dmFyIGE9cltvXT17ZXhwb3J0czp7fX07cmV0dXJuIHRbb10uY2FsbChhLmV4cG9ydHMsYSxhLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksYS5leHBvcnRzfV9fd2VicGFja19yZXF1aXJlX18ubj10PT57dmFyIHI9dCYmdC5fX2VzTW9kdWxlPygpPT50LmRlZmF1bHQ6KCk9PnQ7cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChyLHthOnJ9KSxyfSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQ9KHQscik9Pntmb3IodmFyIG8gaW4gcilfX3dlYnBhY2tfcmVxdWlyZV9fLm8ocixvKSYmIV9fd2VicGFja19yZXF1aXJlX18ubyh0LG8pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxvLHtlbnVtZXJhYmxlOiEwLGdldDpyW29dfSl9LF9fd2VicGFja19yZXF1aXJlX18uZz1mdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBnbG9iYWxUaGlzKXJldHVybiBnbG9iYWxUaGlzO3RyeXtyZXR1cm4gdGhpc3x8bmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKX1jYXRjaCh0KXtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93KXJldHVybiB3aW5kb3d9fSgpLF9fd2VicGFja19yZXF1aXJlX18ubz0odCxyKT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscik7dmFyIG89e307KCgpPT57X193ZWJwYWNrX3JlcXVpcmVfXy5kKG8se014OigpPT5fLEZFOigpPT53LFNMOigpPT50ZSxWUjooKT0+eixVcDooKT0+aSxrUzooKT0+RyxyRjooKT0+VyxnTjooKT0+VSxpcDooKT0+WCxlVjooKT0+USxlNjooKT0+ayxQdjooKT0+TCxqZzooKT0+cSxfajooKT0+SixVVDooKT0+aCxMOTooKT0+QixKSjooKT0+TSxHWDooKT0+RCxGNjooKT0+WSxWRTooKT0+WixMUDooKT0+ZWUsJFQ6KCk9PmosbDI6KCk9Pm0saUM6KCk9PlYsZjM6KCk9PmIsRVI6KCk9PkgsR246KCk9Pkt9KTtfX3dlYnBhY2tfcmVxdWlyZV9fKDg2NjApO2Z1bmN0aW9uIF9fZGVjb3JhdGUodCxyLG8saSl7dmFyIGEsYz1hcmd1bWVudHMubGVuZ3RoLHU9YzwzP3I6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsbyk6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSl1PVJlZmxlY3QuZGVjb3JhdGUodCxyLG8saSk7ZWxzZSBmb3IodmFyIGw9dC5sZW5ndGgtMTtsPj0wO2wtLSkoYT10W2xdKSYmKHU9KGM8Mz9hKHUpOmM+Mz9hKHIsbyx1KTphKHIsbykpfHx1KTtyZXR1cm4gYz4zJiZ1JiZPYmplY3QuZGVmaW5lUHJvcGVydHkocixvLHUpLHV9ZnVuY3Rpb24gX19hd2FpdGVyKHQscixvLGkpe3JldHVybiBuZXcob3x8KG89UHJvbWlzZSkpKChmdW5jdGlvbihhLGMpe2Z1bmN0aW9uIGZ1bGZpbGxlZCh0KXt0cnl7c3RlcChpLm5leHQodCkpfWNhdGNoKHQpe2ModCl9fWZ1bmN0aW9uIHJlamVjdGVkKHQpe3RyeXtzdGVwKGkudGhyb3codCkpfWNhdGNoKHQpe2ModCl9fWZ1bmN0aW9uIHN0ZXAodCl7dC5kb25lP2EodC52YWx1ZSk6ZnVuY3Rpb24gYWRvcHQodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBvP3Q6bmV3IG8oKGZ1bmN0aW9uKHIpe3IodCl9KSl9KHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLHJlamVjdGVkKX1zdGVwKChpPWkuYXBwbHkodCxyfHxbXSkpLm5leHQoKSl9KSl9T2JqZWN0LmNyZWF0ZTtPYmplY3QuY3JlYXRlO3ZhciB0PV9fd2VicGFja19yZXF1aXJlX18oNjM4Nykscj1fX3dlYnBhY2tfcmVxdWlyZV9fKDY3MDApO2Z1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbiBfdHlwZW9mKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LF90eXBlb2YodCl9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModCxyKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fWZ1bmN0aW9uIF9nZXQodCxyLG8pe3JldHVybiBfZ2V0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZWZsZWN0JiZSZWZsZWN0LmdldD9SZWZsZWN0LmdldDpmdW5jdGlvbiBfZ2V0KHQscixvKXt2YXIgaT1mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZSh0LHIpe2Zvcig7IU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiZudWxsIT09KHQ9X2dldFByb3RvdHlwZU9mKHQpKTspO3JldHVybiB0fSh0LHIpO2lmKGkpe3ZhciBhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxyKTtyZXR1cm4gYS5nZXQ/YS5nZXQuY2FsbChvKTphLnZhbHVlfX0sX2dldCh0LHIsb3x8dCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiB0Ll9fcHJvdG9fXz1yLHR9LF9zZXRQcm90b3R5cGVPZih0LHIpfWZ1bmN0aW9uIF9jcmVhdGVTdXBlcih0KXt2YXIgcj1mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCl7dmFyIG8saT1fZ2V0UHJvdG90eXBlT2YodCk7aWYocil7dmFyIGE9X2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yO289UmVmbGVjdC5jb25zdHJ1Y3QoaSxhcmd1bWVudHMsYSl9ZWxzZSBvPWkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLG8pfX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LHIpe2lmKHImJihcIm9iamVjdFwiPT09X3R5cGVvZihyKXx8XCJmdW5jdGlvblwiPT10eXBlb2YgcikpcmV0dXJuIHI7aWYodm9pZCAwIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7cmV0dXJuIGZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQodCl7aWYodm9pZCAwPT09dCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIHR9KHQpfWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKHQpe3JldHVybiB0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpfSxfZ2V0UHJvdG90eXBlT2YodCl9KDAsci5HVykoKDAsci5iMikoKSx0LkV2ZW50RW1pdHRlcjIpO3ZhciBpPWZ1bmN0aW9uKHQpeyFmdW5jdGlvbiBfaW5oZXJpdHModCxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyJiZyLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHImJl9zZXRQcm90b3R5cGVPZih0LHIpfShEaXNwYXRjaGVyLHQpO3ZhciByPV9jcmVhdGVTdXBlcihEaXNwYXRjaGVyKTtmdW5jdGlvbiBEaXNwYXRjaGVyKHQpe3ZhciBvO3JldHVybiBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLERpc3BhdGNoZXIpLChvPXIuY2FsbCh0aGlzLHt3aWxkY2FyZDohMCxkZWxpbWl0ZXI6XCI6XCJ9KSkuYW55TGlzdGVuZXJzPVtdLG99cmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyh0LHIsbyl7cmV0dXJuIHImJl9kZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLHIpLG8mJl9kZWZpbmVQcm9wZXJ0aWVzKHQsbyksdH0oRGlzcGF0Y2hlcixbe2tleTpcImVtaXRcIix2YWx1ZTpmdW5jdGlvbiBlbWl0KHQpe2Zvcih2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsaT1uZXcgQXJyYXkobz4xP28tMTowKSxhPTE7YTxvO2ErKylpW2EtMV09YXJndW1lbnRzW2FdO3ZhciBjPShyPV9nZXQoX2dldFByb3RvdHlwZU9mKERpc3BhdGNoZXIucHJvdG90eXBlKSxcImVtaXRcIix0aGlzKSkuY2FsbC5hcHBseShyLFt0aGlzLHRdLmNvbmNhdChpKSk7cmV0dXJuIHRoaXMuYW55TGlzdGVuZXJzLmZvckVhY2goKGZ1bmN0aW9uKHIpe3JldHVybiByLmFwcGx5KHZvaWQgMCxbdF0uY29uY2F0KGkpKX0pKSxjfX0se2tleTpcImFueVwiLHZhbHVlOmZ1bmN0aW9uIGFueSh0KXt0aGlzLmFueUxpc3RlbmVycy5wdXNoKHQpfX1dKSxEaXNwYXRjaGVyfSh0LkV2ZW50RW1pdHRlcjIpO2k9X19kZWNvcmF0ZShbKDAsci5iMikoKSxmdW5jdGlvbiBfX3BhcmFtKHQscil7cmV0dXJuIGZ1bmN0aW9uKG8saSl7cihvLGksdCl9fSgwLCgwLHIuTlQpKCkpXSxpKTt2YXIgYSxjPV9fd2VicGFja19yZXF1aXJlX18oNzc1NyksdT1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oYyksbD1fX3dlYnBhY2tfcmVxdWlyZV9fKDQ4NzkpO2Z1bmN0aW9uIFJlcG9zaXRvcnlfdHlwZW9mKHQpe3JldHVybiBSZXBvc2l0b3J5X3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24gX3R5cGVvZih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sUmVwb3NpdG9yeV90eXBlb2YodCl9ZnVuY3Rpb24gUmVwb3NpdG9yeV9jbGFzc0NhbGxDaGVjayh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gUmVwb3NpdG9yeV9kZWZpbmVQcm9wZXJ0aWVzKHQscil7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb107aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX12YXIgcCxkPWE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBSZXBvc2l0b3J5KCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O1JlcG9zaXRvcnlfY2xhc3NDYWxsQ2hlY2sodGhpcyxSZXBvc2l0b3J5KSx0aGlzLml0ZW1zPXQsdGhpcy5pdGVtcz10fXJldHVybiBmdW5jdGlvbiBSZXBvc2l0b3J5X2NyZWF0ZUNsYXNzKHQscixvKXtyZXR1cm4gciYmUmVwb3NpdG9yeV9kZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLHIpLG8mJlJlcG9zaXRvcnlfZGVmaW5lUHJvcGVydGllcyh0LG8pLHR9KFJlcG9zaXRvcnksW3trZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbiBnZXQodCxyKXt2YXIgbz1nZXRTZXREZXNjZW5kYW50UHJvcCh0aGlzLml0ZW1zLHQpO3JldHVybiB2b2lkIDA9PT1vJiYobz1yKSxvfX0se2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uIHNldCh0LHIpe3JldHVyblwib2JqZWN0XCI9PT1SZXBvc2l0b3J5X3R5cGVvZih0KT90aGlzLml0ZW1zPXQ6Z2V0U2V0RGVzY2VuZGFudFByb3AodGhpcy5pdGVtcyx0LHIpLHRoaXN9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24gaGFzKHQpe3JldHVybiB2b2lkIDAhPT1nZXRTZXREZXNjZW5kYW50UHJvcCh0aGlzLml0ZW1zLHQpfX1dLFt7a2V5OlwiYXNQcm94eVwiLHZhbHVlOmZ1bmN0aW9uIGFzUHJveHkodCl7cmV0dXJuIGZ1bmN0aW9uIG1ha2VQcm94eSh0KXtyZXR1cm4gbmV3IFByb3h5KHQse2dldDpmdW5jdGlvbiBnZXQodCxyLG8pe2lmKFJlZmxlY3QuaGFzKHQscikpcmV0dXJuIFJlZmxlY3QuZ2V0KHQscixvKTtpZihyPT09cC5JU19QUk9YWSlyZXR1cm4hMDtpZihyPT09cC5VTlBST1hZKXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0fTt2YXIgaT1yLnRvU3RyaW5nKCk7cmV0dXJuIHQuaGFzKGkpP3QuZ2V0KGkpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uIHNldCh0LHIsbyxpKXtpZihbcC5JU19QUk9YWSxwLlVOUFJPWFldLmluY2x1ZGVzKHIudG9TdHJpbmcoKSkpdGhyb3cgRXJyb3IoXCJDYW5ub3Qgc2V0IHByb3BlcnR5OiBcIityLnRvU3RyaW5nKCkpO3JldHVybiBSZWZsZWN0Lmhhcyh0LHIpP1JlZmxlY3Quc2V0KHQscixvLGkpOih0LnNldChyLnRvU3RyaW5nKCksbyksITApfSxoYXM6ZnVuY3Rpb24gaGFzKHQscil7cmV0dXJuISFSZWZsZWN0Lmhhcyh0LHIpfHx0LmhhcyhyLnRvU3RyaW5nKCkpfX0pfShuZXcgYSh0KSl9fV0pLFJlcG9zaXRvcnl9KCk7ZnVuY3Rpb24gZ2V0U2V0RGVzY2VuZGFudFByb3AodCxyLG8pe2Zvcih2YXIgaT1yP3Iuc3BsaXQoXCIuXCIpOltdO2kubGVuZ3RoJiZ0Oyl7dmFyIGE9aS5zaGlmdCgpLGM9bmV3IFJlZ0V4cChcIiguKylcXFxcWyhbMC05XSopXFxcXF1cIikuZXhlYyhhKTtpZihudWxsPT09Y3x8MyE9Yy5sZW5ndGgpdm9pZCAwIT09byYmKHZvaWQgMD09PXRbYV0mJih0W2FdPXt9KSwwPT09aS5sZW5ndGgmJih0W2FdPW8pKSx0PXRbYV07ZWxzZXt2YXIgdT17YXJyTmFtZTpjWzFdLGFyckluZGV4OmNbMl19O3ZvaWQgMCE9PXRbdS5hcnJOYW1lXT8odm9pZCAwIT09byYmMD09PWkubGVuZ3RoJiYodFt1LmFyck5hbWVdW3UuYXJySW5kZXhdPW8pLHQ9dFt1LmFyck5hbWVdW3UuYXJySW5kZXhdKTp0PXZvaWQgMH19cmV0dXJuIHR9ZD1hPV9fZGVjb3JhdGUoWygwLHIuYjIpKCldLGQpLGZ1bmN0aW9uKHQpe3QuSVNfUFJPWFk9XCJfX3NfaXNQcm94eVwiLHQuVU5QUk9YWT1cIl9fc191bnByb3h5XCJ9KHB8fChwPXt9KSk7dmFyIGg9ZnVuY3Rpb24gU2VydmljZVByb3ZpZGVyKHQpeyFmdW5jdGlvbiBTZXJ2aWNlUHJvdmlkZXJfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLFNlcnZpY2VQcm92aWRlciksdGhpcy5hcHA9dH0seT1mdW5jdGlvbiBpc1NlcnZpY2VQcm92aWRlckNsYXNzKHQpe3JldHVybiEodCBpbnN0YW5jZW9mIGgpfSx2PXtzdHJlYW1zOnt9LGh0dHA6e2Jhc2VVUkw6XCIvYXBpXCIsZXRhZzp7ZW5hYmxlZDohMCxtYW5pZmVzdEtleTpcInN0cmVhbXNcIn0saGVhZGVyczp7XCJYLVJlcXVlc3RlZC1XaXRoXCI6XCJYTUxIdHRwUmVxdWVzdFwifX19O2Z1bmN0aW9uIEFwcGxpY2F0aW9uX3R5cGVvZih0KXtyZXR1cm4gQXBwbGljYXRpb25fdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbiBfdHlwZW9mKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24gX3R5cGVvZih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxBcHBsaWNhdGlvbl90eXBlb2YodCl9ZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodCxyKXt2YXIgbz1cInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZ0W1N5bWJvbC5pdGVyYXRvcl18fHRbXCJAQGl0ZXJhdG9yXCJdO2lmKCFvKXtpZihBcnJheS5pc0FycmF5KHQpfHwobz1mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkodCxyKXtpZighdClyZXR1cm47aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHQscik7dmFyIG89T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO1wiT2JqZWN0XCI9PT1vJiZ0LmNvbnN0cnVjdG9yJiYobz10LmNvbnN0cnVjdG9yLm5hbWUpO2lmKFwiTWFwXCI9PT1vfHxcIlNldFwiPT09bylyZXR1cm4gQXJyYXkuZnJvbSh0KTtpZihcIkFyZ3VtZW50c1wiPT09b3x8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobykpcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHQscil9KHQpKXx8ciYmdCYmXCJudW1iZXJcIj09dHlwZW9mIHQubGVuZ3RoKXtvJiYodD1vKTt2YXIgaT0wLGE9ZnVuY3Rpb24gRigpe307cmV0dXJue3M6YSxuOmZ1bmN0aW9uIG4oKXtyZXR1cm4gaT49dC5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOnRbaSsrXX19LGU6ZnVuY3Rpb24gZSh0KXt0aHJvdyB0fSxmOmF9fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX12YXIgYyx1PSEwLGw9ITE7cmV0dXJue3M6ZnVuY3Rpb24gcygpe289by5jYWxsKHQpfSxuOmZ1bmN0aW9uIG4oKXt2YXIgdD1vLm5leHQoKTtyZXR1cm4gdT10LmRvbmUsdH0sZTpmdW5jdGlvbiBlKHQpe2w9ITAsYz10fSxmOmZ1bmN0aW9uIGYoKXt0cnl7dXx8bnVsbD09by5yZXR1cm58fG8ucmV0dXJuKCl9ZmluYWxseXtpZihsKXRocm93IGN9fX19ZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkodCxyKXsobnVsbD09cnx8cj50Lmxlbmd0aCkmJihyPXQubGVuZ3RoKTtmb3IodmFyIG89MCxpPW5ldyBBcnJheShyKTtvPHI7bysrKWlbb109dFtvXTtyZXR1cm4gaX1mdW5jdGlvbiBBcHBsaWNhdGlvbl9kZWZpbmVQcm9wZXJ0aWVzKHQscil7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb107aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1mdW5jdGlvbiBBcHBsaWNhdGlvbl9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiBBcHBsaWNhdGlvbl9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiB0Ll9fcHJvdG9fXz1yLHR9LEFwcGxpY2F0aW9uX3NldFByb3RvdHlwZU9mKHQscil9ZnVuY3Rpb24gQXBwbGljYXRpb25fY3JlYXRlU3VwZXIodCl7dmFyIHI9ZnVuY3Rpb24gQXBwbGljYXRpb25faXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCl7dmFyIG8saT1BcHBsaWNhdGlvbl9nZXRQcm90b3R5cGVPZih0KTtpZihyKXt2YXIgYT1BcHBsaWNhdGlvbl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtvPVJlZmxlY3QuY29uc3RydWN0KGksYXJndW1lbnRzLGEpfWVsc2Ugbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gQXBwbGljYXRpb25fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLG8pfX1mdW5jdGlvbiBBcHBsaWNhdGlvbl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQscil7aWYociYmKFwib2JqZWN0XCI9PT1BcHBsaWNhdGlvbl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBmdW5jdGlvbiBBcHBsaWNhdGlvbl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQodCl7aWYodm9pZCAwPT09dCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIHR9KHQpfWZ1bmN0aW9uIEFwcGxpY2F0aW9uX2dldFByb3RvdHlwZU9mKHQpe3JldHVybiBBcHBsaWNhdGlvbl9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sQXBwbGljYXRpb25fZ2V0UHJvdG90eXBlT2YodCl9dmFyIGc9ZnVuY3Rpb24gbWFrZUxvZyh0KXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygxMjI3KSh0KX0oXCJBcHBsaWNhdGlvblwiKSxfPWZ1bmN0aW9uKHQpeyFmdW5jdGlvbiBBcHBsaWNhdGlvbl9pbmhlcml0cyh0LHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHImJnIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksciYmQXBwbGljYXRpb25fc2V0UHJvdG90eXBlT2YodCxyKX0oQXBwbGljYXRpb24sdCk7dmFyIG89QXBwbGljYXRpb25fY3JlYXRlU3VwZXIoQXBwbGljYXRpb24pO2Z1bmN0aW9uIEFwcGxpY2F0aW9uKCl7dmFyIHQ7cmV0dXJuIGZ1bmN0aW9uIEFwcGxpY2F0aW9uX2NsYXNzQ2FsbENoZWNrKHQscil7aWYoISh0IGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyxBcHBsaWNhdGlvbiksKHQ9by5jYWxsKHRoaXMse2RlZmF1bHRTY29wZTpcIlRyYW5zaWVudFwiLGF1dG9CaW5kSW5qZWN0YWJsZTohMCxza2lwQmFzZUNsYXNzQ2hlY2tzOiEwfSkpLnByb3ZpZGVycz1bXSx0LmxvYWRlZD17fSx0LmJvb3RlZD0hMSx0LnN0YXJ0ZWQ9ITEsdC5zaW5nbGV0b24oXCJldmVudHNcIixpKS5hZGRCaW5kaW5nR2V0dGVyKFwiZXZlbnRzXCIpLHQuZXZlbnRzLmFueSgoZnVuY3Rpb24odCl7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgsbz1uZXcgQXJyYXkocj4xP3ItMTowKSxpPTE7aTxyO2krKylvW2ktMV09YXJndW1lbnRzW2ldO3JldHVybiBnKHQsXCIgYXJndW1lbnRzOiBcIixvKX0pKSx0fXJldHVybiBmdW5jdGlvbiBBcHBsaWNhdGlvbl9jcmVhdGVDbGFzcyh0LHIsbyl7cmV0dXJuIHImJkFwcGxpY2F0aW9uX2RlZmluZVByb3BlcnRpZXModC5wcm90b3R5cGUsciksbyYmQXBwbGljYXRpb25fZGVmaW5lUHJvcGVydGllcyh0LG8pLHR9KEFwcGxpY2F0aW9uLFt7a2V5OlwiaXNCb290ZWRcIix2YWx1ZTpmdW5jdGlvbiBpc0Jvb3RlZCgpe3JldHVybiB0aGlzLmJvb3RlZH19LHtrZXk6XCJpc1N0YXJ0ZWRcIix2YWx1ZTpmdW5jdGlvbiBpc1N0YXJ0ZWQoKXtyZXR1cm4gdGhpcy5zdGFydGVkfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbiBpbml0aWFsaXplKCl7dmFyIHQscixvLGksYT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWUoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUkKGMpe2Zvcig7Oylzd2l0Y2goYy5wcmV2PWMubmV4dCl7Y2FzZSAwOnJldHVybiBhPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7cHJvdmlkZXJzOltdfSxhKSx7Y29uZmlnOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHYpLGEuY29uZmlnKSx7aHR0cDpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx2Lmh0dHApLChudWxsPT09KHQ9YS5jb25maWcpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmh0dHApfHx7fSkse2V0YWc6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHYuaHR0cC5ldGFnKSwobnVsbD09PShvPW51bGw9PT0ocj1hLmNvbmZpZyl8fHZvaWQgMD09PXI/dm9pZCAwOnIuaHR0cCl8fHZvaWQgMD09PW8/dm9pZCAwOm8uZXRhZyl8fHt9KX0pLHN0cmVhbXM6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHYuc3RyZWFtcyksKG51bGw9PT0oaT1hLmNvbmZpZyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuc3RyZWFtcyl8fHt9KX0pfSksdGhpcy5ldmVudHMuZW1pdChcIkFwcGxpY2F0aW9uOmluaXRpYWxpemVcIixhKSx0aGlzLmluc3RhbmNlKFwiY29uZmlnXCIsZC5hc1Byb3h5KGEuY29uZmlnKSkuYWRkQmluZGluZ0dldHRlcihcImNvbmZpZ1wiKSxjLm5leHQ9NSx0aGlzLmxvYWRQcm92aWRlcnMoYS5wcm92aWRlcnMpO2Nhc2UgNTpyZXR1cm4gYy5uZXh0PTcsdGhpcy5yZWdpc3RlclByb3ZpZGVycyh0aGlzLnByb3ZpZGVycyk7Y2FzZSA3OnJldHVybiB0aGlzLmV2ZW50cy5lbWl0KFwiQXBwbGljYXRpb246aW5pdGlhbGl6ZWRcIix0aGlzKSxjLmFicnVwdChcInJldHVyblwiLHRoaXMpO2Nhc2UgOTpjYXNlXCJlbmRcIjpyZXR1cm4gYy5zdG9wKCl9fSksX2NhbGxlZSx0aGlzKX0pKSl9fSx7a2V5OlwiYm9vdFwiLHZhbHVlOmZ1bmN0aW9uIGJvb3QoKXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTIoKXt2YXIgdCxvLGksYT10aGlzO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTIkKGMpe2Zvcig7Oylzd2l0Y2goYy5wcmV2PWMubmV4dCl7Y2FzZSAwOmlmKCF0aGlzLmJvb3RlZCl7Yy5uZXh0PTI7YnJlYWt9cmV0dXJuIGMuYWJydXB0KFwicmV0dXJuXCIsdGhpcyk7Y2FzZSAyOnRoaXMuZXZlbnRzLmVtaXQoXCJBcHBsaWNhdGlvbjpib290XCIsdGhpcyksdD1fY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnByb3ZpZGVycyksYy5wcmV2PTQsaT11KCkubWFyaygoZnVuY3Rpb24gX2xvb3AoKXt2YXIgdDtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9sb29wJChpKXtmb3IoOzspc3dpdGNoKGkucHJldj1pLm5leHQpe2Nhc2UgMDppZih0PW8udmFsdWUsYS5ldmVudHMuZW1pdChcIkFwcGxpY2F0aW9uOmJvb3RQcm92aWRlclwiLHQpLCEoXCJib290XCJpbiB0KXx8ITA9PT1SZWZsZWN0LmdldE1ldGFkYXRhKFwiYm9vdFwiLHQpKXtpLm5leHQ9NjticmVha31yZXR1cm4gUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImJvb3RcIiwhMCx0KSxpLm5leHQ9NixhLmxvYWRBc3luYyhuZXcgci5McygoZnVuY3Rpb24oKXtyZXR1cm4gdC5ib290KCl9KSkpO2Nhc2UgNjphLmV2ZW50cy5lbWl0KFwiQXBwbGljYXRpb246Ym9vdGVkUHJvdmlkZXJcIix0KTtjYXNlIDc6Y2FzZVwiZW5kXCI6cmV0dXJuIGkuc3RvcCgpfX0pLF9sb29wKX0pKSx0LnMoKTtjYXNlIDc6aWYoKG89dC5uKCkpLmRvbmUpe2MubmV4dD0xMTticmVha31yZXR1cm4gYy5kZWxlZ2F0ZVlpZWxkKGkoKSxcInQwXCIsOSk7Y2FzZSA5OmMubmV4dD03O2JyZWFrO2Nhc2UgMTE6Yy5uZXh0PTE2O2JyZWFrO2Nhc2UgMTM6Yy5wcmV2PTEzLGMudDE9Yy5jYXRjaCg0KSx0LmUoYy50MSk7Y2FzZSAxNjpyZXR1cm4gYy5wcmV2PTE2LHQuZigpLGMuZmluaXNoKDE2KTtjYXNlIDE5OnJldHVybiB0aGlzLmJvb3RlZD0hMCx0aGlzLmV2ZW50cy5lbWl0KFwiQXBwbGljYXRpb246Ym9vdGVkXCIsdGhpcyksYy5hYnJ1cHQoXCJyZXR1cm5cIix0aGlzKTtjYXNlIDIyOmNhc2VcImVuZFwiOnJldHVybiBjLnN0b3AoKX19KSxfY2FsbGVlMix0aGlzLFtbNCwxMywxNiwxOV1dKX0pKSl9fSx7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbiBzdGFydCgpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMygpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTMkKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0aGlzLmV2ZW50cy5lbWl0KFwiQXBwbGljYXRpb246c3RhcnRcIix0aGlzKSx0aGlzLmV2ZW50cy5lbWl0KFwiQXBwbGljYXRpb246c3RhcnRlZFwiLHRoaXMpLHQuYWJydXB0KFwicmV0dXJuXCIsdGhpcyk7Y2FzZSAzOmNhc2VcImVuZFwiOnJldHVybiB0LnN0b3AoKX19KSxfY2FsbGVlMyx0aGlzKX0pKSl9fSx7a2V5OlwibG9hZFByb3ZpZGVyc1wiLHZhbHVlOmZ1bmN0aW9uIGxvYWRQcm92aWRlcnModCl7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWU1KCl7dmFyIHI9dGhpcztyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWU1JChvKXtmb3IoOzspc3dpdGNoKG8ucHJldj1vLm5leHQpe2Nhc2UgMDpyZXR1cm4gby5uZXh0PTIsUHJvbWlzZS5hbGwodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBfX2F3YWl0ZXIocix2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNCgpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTQkKHIpe2Zvcig7Oylzd2l0Y2goci5wcmV2PXIubmV4dCl7Y2FzZSAwOnJldHVybiByLmFicnVwdChcInJldHVyblwiLHRoaXMubG9hZFByb3ZpZGVyKHQpKTtjYXNlIDE6Y2FzZVwiZW5kXCI6cmV0dXJuIHIuc3RvcCgpfX0pLF9jYWxsZWU0LHRoaXMpfSkpKX0pKSk7Y2FzZSAyOnJldHVybiBvLmFicnVwdChcInJldHVyblwiLHRoaXMpO2Nhc2UgMzpjYXNlXCJlbmRcIjpyZXR1cm4gby5zdG9wKCl9fSksX2NhbGxlZTUsdGhpcyl9KSkpfX0se2tleTpcImxvYWRQcm92aWRlclwiLHZhbHVlOmZ1bmN0aW9uIGxvYWRQcm92aWRlcih0KXt2YXIgcjtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTYoKXt2YXIgbyxpO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTYkKGEpe2Zvcig7Oylzd2l0Y2goYS5wcmV2PWEubmV4dCl7Y2FzZSAwOmlmKCEoKG89bnVsbCE9PShyPXQubmFtZSkmJnZvaWQgMCE9PXI/cjp0LmNvbnN0cnVjdG9yLm5hbWUpaW4gdGhpcy5sb2FkZWQpKXthLm5leHQ9MzticmVha31yZXR1cm4gYS5hYnJ1cHQoXCJyZXR1cm5cIix0aGlzLmxvYWRlZFtvXSk7Y2FzZSAzOmlmKCEoXCJwcm92aWRlcnNcImluKGk9bmV3IHQodGhpcykpKXx8ITA9PT1SZWZsZWN0LmdldE1ldGFkYXRhKFwicHJvdmlkZXJzXCIsaSkpe2EubmV4dD04O2JyZWFrfXJldHVybiBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwicHJvdmlkZXJzXCIsITAsaSksYS5uZXh0PTgsdGhpcy5sb2FkUHJvdmlkZXJzKGkucHJvdmlkZXJzKTtjYXNlIDg6cmV0dXJuIHRoaXMuZXZlbnRzLmVtaXQoXCJBcHBsaWNhdGlvbjpsb2FkUHJvdmlkZXJcIix0KSx0aGlzLmxvYWRlZFtvXT1pLHRoaXMucHJvdmlkZXJzLnB1c2goaSksdGhpcy5ldmVudHMuZW1pdChcIkFwcGxpY2F0aW9uOmxvYWRlZFByb3ZpZGVyXCIsaSksYS5hYnJ1cHQoXCJyZXR1cm5cIixpKTtjYXNlIDEzOmNhc2VcImVuZFwiOnJldHVybiBhLnN0b3AoKX19KSxfY2FsbGVlNix0aGlzKX0pKSl9fSx7a2V5OlwicmVnaXN0ZXJQcm92aWRlcnNcIix2YWx1ZTpmdW5jdGlvbiByZWdpc3RlclByb3ZpZGVycyh0KXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTgoKXt2YXIgcj10aGlzO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTgkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiB0aGlzLmV2ZW50cy5lbWl0KFwiQXBwbGljYXRpb246cmVnaXN0ZXJQcm92aWRlcnNcIix0KSxvLm5leHQ9MyxQcm9taXNlLmFsbCh0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIF9fYXdhaXRlcihyLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWU3KCl7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlNyQocil7Zm9yKDs7KXN3aXRjaChyLnByZXY9ci5uZXh0KXtjYXNlIDA6cmV0dXJuIHIuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5yZWdpc3Rlcih0KSk7Y2FzZSAxOmNhc2VcImVuZFwiOnJldHVybiByLnN0b3AoKX19KSxfY2FsbGVlNyx0aGlzKX0pKSl9KSkpO2Nhc2UgMzpyZXR1cm4gdGhpcy5ldmVudHMuZW1pdChcIkFwcGxpY2F0aW9uOnJlZ2lzdGVyZWRQcm92aWRlcnNcIix0KSxvLmFicnVwdChcInJldHVyblwiLHRoaXMpO2Nhc2UgNTpjYXNlXCJlbmRcIjpyZXR1cm4gby5zdG9wKCl9fSksX2NhbGxlZTgsdGhpcyl9KSkpfX0se2tleTpcInJlZ2lzdGVyXCIsdmFsdWU6ZnVuY3Rpb24gcmVnaXN0ZXIodCl7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWU5KCl7dmFyIG87cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlOSQoaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6aWYoIXkodCkpe2kubmV4dD02O2JyZWFrfXJldHVybiBpLm5leHQ9Myx0aGlzLmxvYWRQcm92aWRlcih0KTtjYXNlIDM6bz1pLnNlbnQsaS5uZXh0PTc7YnJlYWs7Y2FzZSA2Om89dDtjYXNlIDc6aWYodGhpcy5ldmVudHMuZW1pdChcIkFwcGxpY2F0aW9uOnJlZ2lzdGVyUHJvdmlkZXJcIix0KSwhKFwicmVnaXN0ZXJcImluIG8pfHwhMD09PVJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJyZWdpc3RlclwiLG8pKXtpLm5leHQ9MTI7YnJlYWt9cmV0dXJuIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXCJyZWdpc3RlclwiLCEwLG8pLGkubmV4dD0xMix0aGlzLmxvYWRBc3luYyhuZXcgci5McygoZnVuY3Rpb24oKXtyZXR1cm4gby5yZWdpc3RlcigpfSkpKTtjYXNlIDEyOnJldHVybiB0aGlzLmV2ZW50cy5lbWl0KFwiQXBwbGljYXRpb246cmVnaXN0ZXJlZFByb3ZpZGVyc1wiLG8pLGkuYWJydXB0KFwicmV0dXJuXCIsdGhpcyk7Y2FzZSAxNDpjYXNlXCJlbmRcIjpyZXR1cm4gaS5zdG9wKCl9fSksX2NhbGxlZTksdGhpcyl9KSkpfX0se2tleTpcInNpbmdsZXRvblwiLHZhbHVlOmZ1bmN0aW9uIHNpbmdsZXRvbih0LHIpe3JldHVybiB0aGlzLmJpbmQodCkudG8ocikuaW5TaW5nbGV0b25TY29wZSgpLHRoaXN9fSx7a2V5OlwiYmluZGluZ1wiLHZhbHVlOmZ1bmN0aW9uIGJpbmRpbmcodCxyKXt2YXIgbz10aGlzLGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXSxiaW5kaW5nPXRoaXMuYmluZCh0KS50b0R5bmFtaWNWYWx1ZSgoZnVuY3Rpb24odCl7cmV0dXJuIHIobyl9KSk7cmV0dXJuIGk/YmluZGluZy5pblNpbmdsZXRvblNjb3BlKCk6YmluZGluZy5pblRyYW5zaWVudFNjb3BlKCksdGhpc319LHtrZXk6XCJpbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uIGluc3RhbmNlKHQscil7cmV0dXJuIHRoaXMuYmluZCh0KS50b0NvbnN0YW50VmFsdWUociksdGhpc319LHtrZXk6XCJhZGRCaW5kaW5nR2V0dGVyXCIsdmFsdWU6ZnVuY3Rpb24gYWRkQmluZGluZ0dldHRlcih0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bnVsbDtyPXJ8fHQ7dmFyIG89dGhpcztyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG8scix7Z2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBvLmdldCh0KX0sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KSx0aGlzfX1dLFt7a2V5OlwiaW5zdGFuY2VcIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMuX2luc3RhbmNlfHwodGhpcy5faW5zdGFuY2U9bmV3IHRoaXMpLHRoaXMuX2luc3RhbmNlfX0se2tleTpcImdldEluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24gZ2V0SW5zdGFuY2UoKXtyZXR1cm4gdGhpcy5pbnN0YW5jZX19XSksQXBwbGljYXRpb259KHIuVzIpLG09Xy5pbnN0YW5jZSxiPSgwLGwuWikobSkubGF6eUluamVjdDtmdW5jdGlvbiBDb2xsZWN0aW9uX3R5cGVvZih0KXtyZXR1cm4gQ29sbGVjdGlvbl90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbiBfdHlwZW9mKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LENvbGxlY3Rpb25fdHlwZW9mKHQpfWZ1bmN0aW9uIENvbGxlY3Rpb25fY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIENvbGxlY3Rpb25fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LHIpe2lmKHImJihcIm9iamVjdFwiPT09Q29sbGVjdGlvbl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBDb2xsZWN0aW9uX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KX1mdW5jdGlvbiBDb2xsZWN0aW9uX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH1mdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKHQpe3ZhciByPVwiZnVuY3Rpb25cIj09dHlwZW9mIE1hcD9uZXcgTWFwOnZvaWQgMDtyZXR1cm4gX3dyYXBOYXRpdmVTdXBlcj1mdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKHQpe2lmKG51bGw9PT10fHwhZnVuY3Rpb24gX2lzTmF0aXZlRnVuY3Rpb24odCl7cmV0dXJuLTEhPT1GdW5jdGlvbi50b1N0cmluZy5jYWxsKHQpLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpfSh0KSlyZXR1cm4gdDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtpZih2b2lkIDAhPT1yKXtpZihyLmhhcyh0KSlyZXR1cm4gci5nZXQodCk7ci5zZXQodCxXcmFwcGVyKX1mdW5jdGlvbiBXcmFwcGVyKCl7cmV0dXJuIF9jb25zdHJ1Y3QodCxhcmd1bWVudHMsQ29sbGVjdGlvbl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvcil9cmV0dXJuIFdyYXBwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpXcmFwcGVyLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLENvbGxlY3Rpb25fc2V0UHJvdG90eXBlT2YoV3JhcHBlcix0KX0sX3dyYXBOYXRpdmVTdXBlcih0KX1mdW5jdGlvbiBfY29uc3RydWN0KHQscixvKXtyZXR1cm4gX2NvbnN0cnVjdD1Db2xsZWN0aW9uX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpP1JlZmxlY3QuY29uc3RydWN0OmZ1bmN0aW9uIF9jb25zdHJ1Y3QodCxyLG8pe3ZhciBpPVtudWxsXTtpLnB1c2guYXBwbHkoaSxyKTt2YXIgYT1uZXcoRnVuY3Rpb24uYmluZC5hcHBseSh0LGkpKTtyZXR1cm4gbyYmQ29sbGVjdGlvbl9zZXRQcm90b3R5cGVPZihhLG8ucHJvdG90eXBlKSxhfSxfY29uc3RydWN0LmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBDb2xsZWN0aW9uX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2godCl7cmV0dXJuITF9fWZ1bmN0aW9uIENvbGxlY3Rpb25fc2V0UHJvdG90eXBlT2YodCxyKXtyZXR1cm4gQ29sbGVjdGlvbl9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiB0Ll9fcHJvdG9fXz1yLHR9LENvbGxlY3Rpb25fc2V0UHJvdG90eXBlT2YodCxyKX1mdW5jdGlvbiBDb2xsZWN0aW9uX2dldFByb3RvdHlwZU9mKHQpe3JldHVybiBDb2xsZWN0aW9uX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKHQpe3JldHVybiB0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpfSxDb2xsZWN0aW9uX2dldFByb3RvdHlwZU9mKHQpfXZhciB3PWZ1bmN0aW9uKHQpeyFmdW5jdGlvbiBDb2xsZWN0aW9uX2luaGVyaXRzKHQscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgciYmbnVsbCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUociYmci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxyJiZDb2xsZWN0aW9uX3NldFByb3RvdHlwZU9mKHQscil9KENvbGxlY3Rpb24sdCk7dmFyIHI9ZnVuY3Rpb24gQ29sbGVjdGlvbl9jcmVhdGVTdXBlcih0KXt2YXIgcj1Db2xsZWN0aW9uX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpO3JldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpe3ZhciBvLGk9Q29sbGVjdGlvbl9nZXRQcm90b3R5cGVPZih0KTtpZihyKXt2YXIgYT1Db2xsZWN0aW9uX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yO289UmVmbGVjdC5jb25zdHJ1Y3QoaSxhcmd1bWVudHMsYSl9ZWxzZSBvPWkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBDb2xsZWN0aW9uX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcyxvKX19KENvbGxlY3Rpb24pO2Z1bmN0aW9uIENvbGxlY3Rpb24oKXt2YXIgdDtDb2xsZWN0aW9uX2NsYXNzQ2FsbENoZWNrKHRoaXMsQ29sbGVjdGlvbik7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGgsaT1uZXcgQXJyYXkobyksYT0wO2E8bzthKyspaVthXT1hcmd1bWVudHNbYV07cmV0dXJuIHQ9ci5jYWxsLmFwcGx5KHIsW3RoaXNdLmNvbmNhdChpKSksT2JqZWN0LnNldFByb3RvdHlwZU9mKENvbGxlY3Rpb25fYXNzZXJ0VGhpc0luaXRpYWxpemVkKHQpLEFycmF5LnByb3RvdHlwZSksdH1yZXR1cm4gQ29sbGVjdGlvbn0oX3dyYXBOYXRpdmVTdXBlcihBcnJheSkpLFM9X193ZWJwYWNrX3JlcXVpcmVfXyg5NjY5KSxDPV9fd2VicGFja19yZXF1aXJlX18ubihTKTtmdW5jdGlvbiBFVGFnQ2FjaGVfZGVmaW5lUHJvcGVydGllcyh0LHIpe2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19dmFyIE89ZnVuY3Rpb24oKXtmdW5jdGlvbiBFVGFnQ2FjaGUoKXshZnVuY3Rpb24gRVRhZ0NhY2hlX2NsYXNzQ2FsbENoZWNrKHQscil7aWYoISh0IGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyxFVGFnQ2FjaGUpfXJldHVybiBmdW5jdGlvbiBFVGFnQ2FjaGVfY3JlYXRlQ2xhc3ModCxyLG8pe3JldHVybiByJiZFVGFnQ2FjaGVfZGVmaW5lUHJvcGVydGllcyh0LnByb3RvdHlwZSxyKSxvJiZFVGFnQ2FjaGVfZGVmaW5lUHJvcGVydGllcyh0LG8pLHR9KEVUYWdDYWNoZSxbe2tleTpcIm1hbmlmZXN0S2V5XCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLmNvbmZpZy5odHRwLmV0YWcubWFuaWZlc3RLZXl9fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24gZ2V0KHQpe3JldHVybiB0aGlzLnN0b3JhZ2UuZ2V0KHQpfX0se2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uIHNldCh0LHIsbyl7cmV0dXJuIHRoaXMuYWRkVG9VdWlkTWFuaWZlc3QodCksdGhpcy5zdG9yYWdlLnNldCh0LHtldGFnOnIsdmFsdWU6b30pfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24gcmVzZXQoKXt2YXIgdD10aGlzO3RoaXMuZ2V0VXVpZE1hbmlmZXN0KCkuZm9yRWFjaCgoZnVuY3Rpb24ocil7cmV0dXJuIHQuc3RvcmFnZS51bnNldChyKX0pKX19LHtrZXk6XCJnZXRVdWlkTWFuaWZlc3RcIix2YWx1ZTpmdW5jdGlvbiBnZXRVdWlkTWFuaWZlc3QoKXtyZXR1cm4gdGhpcy5zdG9yYWdlLmhhcyh0aGlzLm1hbmlmZXN0S2V5KXx8dGhpcy5zdG9yYWdlLnNldCh0aGlzLm1hbmlmZXN0S2V5LFtdKSx0aGlzLnN0b3JhZ2UuZ2V0KHRoaXMubWFuaWZlc3RLZXksW10pfX0se2tleTpcImFkZFRvVXVpZE1hbmlmZXN0XCIsdmFsdWU6ZnVuY3Rpb24gYWRkVG9VdWlkTWFuaWZlc3QodCl7dmFyIHI9dGhpcy5nZXRVdWlkTWFuaWZlc3QoKTtyLnB1c2godCksdGhpcy5zdG9yYWdlLnNldCh0aGlzLm1hbmlmZXN0S2V5LHIpfX1dKSxFVGFnQ2FjaGV9KCk7ZnVuY3Rpb24gRVRhZ19kZWZpbmVQcm9wZXJ0aWVzKHQscil7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb107aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1fX2RlY29yYXRlKFtiKFwic3RvcmFnZVwiKV0sTy5wcm90b3R5cGUsXCJzdG9yYWdlXCIsdm9pZCAwKSxfX2RlY29yYXRlKFtiKFwiY29uZmlnXCIpXSxPLnByb3RvdHlwZSxcImNvbmZpZ1wiLHZvaWQgMCksTz1fX2RlY29yYXRlKFsoMCxyLmIyKSgpXSxPKTt2YXIgVD1mdW5jdGlvbiBieUxvd2VyQ2FzZSh0KXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIEUocik9PT10fX0sRT1mdW5jdGlvbiB0b0xvd2VyQ2FzZSh0KXtyZXR1cm4gdC50b0xvd2VyQ2FzZSgpfSxQPWZ1bmN0aW9uIGdldEtleXModCl7cmV0dXJuIE9iamVjdC5rZXlzKHQpfSxBPWZ1bmN0aW9uIGlzQ2FjaGVhYmxlTWV0aG9kKHQpe3JldHVybn5bXCJHRVRcIixcIkhFQURcIl0uaW5kZXhPZih0Lm1ldGhvZC50b1VwcGVyQ2FzZSgpKX0seD1mdW5jdGlvbiBnZXRCYXNlNjRVcmxGcm9tQ29uZmlnKHQpe3JldHVybiBidG9hKHQudXJsKX0sST1mdW5jdGlvbigpe2Z1bmN0aW9uIEVUYWcodCl7dmFyIHI9dGhpczshZnVuY3Rpb24gRVRhZ19jbGFzc0NhbGxDaGVjayh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsRVRhZyksdGhpcy5heGlvcz10LHRoaXMucmVxdWVzdD1udWxsLHRoaXMucmVzcG9uc2U9bnVsbCx0aGlzLmVuYWJsZWQ9ITEsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJldGFnXCIse2dldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gcn0sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1yZXR1cm4gZnVuY3Rpb24gRVRhZ19jcmVhdGVDbGFzcyh0LHIsbyl7cmV0dXJuIHImJkVUYWdfZGVmaW5lUHJvcGVydGllcyh0LnByb3RvdHlwZSxyKSxvJiZFVGFnX2RlZmluZVByb3BlcnRpZXModCxvKSx0fShFVGFnLFt7a2V5OlwiZW5hYmxlRXRhZ1wiLHZhbHVlOmZ1bmN0aW9uIGVuYWJsZUV0YWcoKXt0aGlzLmVuYWJsZWR8fCh0aGlzLnJlcXVlc3Q9dGhpcy5heGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UodGhpcy5nZXRSZXF1ZXN0SW50ZXJjZXB0b3IoKSksdGhpcy5yZXNwb25zZT10aGlzLmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UodGhpcy5nZXRSZXNwb25zZUludGVyY2VwdG9yKCksdGhpcy5nZXRSZXNwb25zZUVycm9ySW50ZXJjZXB0b3IoKSksdGhpcy5lbmFibGVkPSEwKX19LHtrZXk6XCJkaXNhYmxlRXRhZ1wiLHZhbHVlOmZ1bmN0aW9uIGRpc2FibGVFdGFnKCl7dGhpcy5lbmFibGVkJiYodGhpcy5heGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5lamVjdCh0aGlzLnJlcXVlc3QpLHRoaXMuYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmVqZWN0KHRoaXMucmVzcG9uc2UpLHRoaXMuZW5hYmxlZD0hMSl9fSx7a2V5OlwiaXNFbmFibGVkXCIsdmFsdWU6ZnVuY3Rpb24gaXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuZW5hYmxlZH19LHtrZXk6XCJnZXRDYWNoZUJ5QXhpb3NDb25maWdcIix2YWx1ZTpmdW5jdGlvbiBnZXRDYWNoZUJ5QXhpb3NDb25maWcodCl7cmV0dXJuIHRoaXMuY2FjaGUuZ2V0KHgodCkpfX0se2tleTpcImdldFJlcXVlc3RJbnRlcmNlcHRvclwiLHZhbHVlOmZ1bmN0aW9uIGdldFJlcXVlc3RJbnRlcmNlcHRvcigpe3ZhciB0PXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHIpe2lmKEEocikpe3ZhciBvPXgociksaT10LmNhY2hlLmdldChvKTtpJiYoci5oZWFkZXJzPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyLmhlYWRlcnMpLHtcIklmLU5vbmUtTWF0Y2hcIjppLmV0YWd9KSl9cmV0dXJuIHJ9fX0se2tleTpcImdldFJlc3BvbnNlSW50ZXJjZXB0b3JcIix2YWx1ZTpmdW5jdGlvbiBnZXRSZXNwb25zZUludGVyY2VwdG9yKCl7dmFyIHQ9dGhpcztyZXR1cm4gZnVuY3Rpb24ocil7aWYoQShyLmNvbmZpZykpe3ZhciBvPWZ1bmN0aW9uIGdldEhlYWRlckNhc2VJbnNlbnNpdGl2ZSh0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIHJbUChyKS5maW5kKFQodCkpXX0oXCJldGFnXCIsci5oZWFkZXJzKTtvJiZ0LmNhY2hlLnNldCh4KHIuY29uZmlnKSxvLHIuZGF0YSl9cmV0dXJuIHJ9fX0se2tleTpcImdldFJlc3BvbnNlRXJyb3JJbnRlcmNlcHRvclwiLHZhbHVlOmZ1bmN0aW9uIGdldFJlc3BvbnNlRXJyb3JJbnRlcmNlcHRvcigpe3ZhciB0PXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHIpe2lmKHIucmVzcG9uc2UmJjMwND09PXIucmVzcG9uc2Uuc3RhdHVzKXt2YXIgbz10LmdldENhY2hlQnlBeGlvc0NvbmZpZyhyLnJlc3BvbnNlLmNvbmZpZyk7aWYoIW8pcmV0dXJuIFByb21pc2UucmVqZWN0KHIpO3ZhciBpPXIucmVzcG9uc2U7cmV0dXJuIGkuc3RhdHVzPTIwMCxpLmRhdGE9by52YWx1ZSxQcm9taXNlLnJlc29sdmUoaSl9cmV0dXJuIFByb21pc2UucmVqZWN0KHIpfX19XSksRVRhZ30oKTtmdW5jdGlvbiBIdHRwU2VydmljZVByb3ZpZGVyX3R5cGVvZih0KXtyZXR1cm4gSHR0cFNlcnZpY2VQcm92aWRlcl90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbiBfdHlwZW9mKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LEh0dHBTZXJ2aWNlUHJvdmlkZXJfdHlwZW9mKHQpfWZ1bmN0aW9uIEh0dHBTZXJ2aWNlUHJvdmlkZXJfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIEh0dHBTZXJ2aWNlUHJvdmlkZXJfZGVmaW5lUHJvcGVydGllcyh0LHIpe2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19ZnVuY3Rpb24gSHR0cFNlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiBIdHRwU2VydmljZVByb3ZpZGVyX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIHQuX19wcm90b19fPXIsdH0sSHR0cFNlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpfWZ1bmN0aW9uIEh0dHBTZXJ2aWNlUHJvdmlkZXJfY3JlYXRlU3VwZXIodCl7dmFyIHI9ZnVuY3Rpb24gSHR0cFNlcnZpY2VQcm92aWRlcl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKXt2YXIgbyxpPUh0dHBTZXJ2aWNlUHJvdmlkZXJfZ2V0UHJvdG90eXBlT2YodCk7aWYocil7dmFyIGE9SHR0cFNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtvPVJlZmxlY3QuY29uc3RydWN0KGksYXJndW1lbnRzLGEpfWVsc2Ugbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gSHR0cFNlcnZpY2VQcm92aWRlcl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsbyl9fWZ1bmN0aW9uIEh0dHBTZXJ2aWNlUHJvdmlkZXJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LHIpe2lmKHImJihcIm9iamVjdFwiPT09SHR0cFNlcnZpY2VQcm92aWRlcl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBmdW5jdGlvbiBIdHRwU2VydmljZVByb3ZpZGVyX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH0odCl9ZnVuY3Rpb24gSHR0cFNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gSHR0cFNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sSHR0cFNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0KX1fX2RlY29yYXRlKFtiKFwiaHR0cC5ldGFnLmNhY2hlXCIpXSxJLnByb3RvdHlwZSxcImNhY2hlXCIsdm9pZCAwKSxJPV9fZGVjb3JhdGUoWygwLHIuYjIpKCldLEkpO3ZhciBrPWZ1bmN0aW9uKHQpeyFmdW5jdGlvbiBIdHRwU2VydmljZVByb3ZpZGVyX2luaGVyaXRzKHQscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgciYmbnVsbCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUociYmci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxyJiZIdHRwU2VydmljZVByb3ZpZGVyX3NldFByb3RvdHlwZU9mKHQscil9KEh0dHBTZXJ2aWNlUHJvdmlkZXIsdCk7dmFyIHI9SHR0cFNlcnZpY2VQcm92aWRlcl9jcmVhdGVTdXBlcihIdHRwU2VydmljZVByb3ZpZGVyKTtmdW5jdGlvbiBIdHRwU2VydmljZVByb3ZpZGVyKCl7cmV0dXJuIEh0dHBTZXJ2aWNlUHJvdmlkZXJfY2xhc3NDYWxsQ2hlY2sodGhpcyxIdHRwU2VydmljZVByb3ZpZGVyKSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gZnVuY3Rpb24gSHR0cFNlcnZpY2VQcm92aWRlcl9jcmVhdGVDbGFzcyh0LHIsbyl7cmV0dXJuIHImJkh0dHBTZXJ2aWNlUHJvdmlkZXJfZGVmaW5lUHJvcGVydGllcyh0LnByb3RvdHlwZSxyKSxvJiZIdHRwU2VydmljZVByb3ZpZGVyX2RlZmluZVByb3BlcnRpZXModCxvKSx0fShIdHRwU2VydmljZVByb3ZpZGVyLFt7a2V5OlwicmVnaXN0ZXJcIix2YWx1ZTpmdW5jdGlvbiByZWdpc3Rlcigpe3RoaXMucmVnaXN0ZXJBeGlvcygpfX0se2tleTpcImJvb3RcIix2YWx1ZTpmdW5jdGlvbiBib290KCl7dGhpcy5ib290RVRhZygpfX0se2tleTpcInJlZ2lzdGVyQXhpb3NcIix2YWx1ZTpmdW5jdGlvbiByZWdpc3RlckF4aW9zKCl7dmFyIHQscixvLGk9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuYXBwLmNvbmZpZy5odHRwKSx7cGFyYW1zOk9iamVjdC5hc3NpZ24oe30sKG51bGw9PT0odD10aGlzLmFwcC5jb25maWcuaHR0cCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucGFyYW1zKXx8e30pLGhlYWRlcnM6T2JqZWN0LmFzc2lnbih7XCJYLVJlcXVlc3RlZC1XaXRoXCI6XCJYTUxIdHRwUmVxdWVzdFwifSwobnVsbD09PShyPXRoaXMuYXBwLmNvbmZpZy5odHRwKXx8dm9pZCAwPT09cj92b2lkIDA6ci5oZWFkZXJzKXx8e30pfSksYT10aGlzLmFwcC5jb25maWcuc3RyZWFtcztpZihudWxsPT09KG89bnVsbD09YT92b2lkIDA6YS5jYWNoZSl8fHZvaWQgMD09PW98fG8uZW5hYmxlZCwobnVsbD09YT92b2lkIDA6YS54ZGVidWcpJiYoaS5oZWFkZXJzLkNvb2tpZT1cIlhERUJVR19TRVNTSU9OPXN0YXJ0XCIsaS5wYXJhbXMuWERFQlVHX1NFU1NJT049XCJQSFBTVE9STVwiKSxudWxsPT1hP3ZvaWQgMDphLmF1dGhlbnRpY2F0aW9uKXt2YXIgYz1hLmF1dGhlbnRpY2F0aW9uLHU9Yy50eXBlLGw9Yy5iYXNpYyxwPWMudG9rZW47XCJiYXNpY1wiPT09dT9pLmF1dGg9e3VzZXJuYW1lOmwudXNlcm5hbWUscGFzc3dvcmQ6bC5wYXNzd29yZH06XCJ0b2tlblwiPT09dSYmKGkuaGVhZGVycy5BdXRob3JpemF0aW9uPVwiQmVhcmVyIFwiK3ApfXZhciBkPUMoKS5jcmVhdGUoaSk7dGhpcy5hcHAuaW5zdGFuY2UoXCJheGlvc1wiLEMoKSksdGhpcy5hcHAuaW5zdGFuY2UoXCJodHRwXCIsZCkuYWRkQmluZGluZ0dldHRlcihcImh0dHBcIil9fSx7a2V5OlwiYm9vdEVUYWdcIix2YWx1ZTpmdW5jdGlvbiBib290RVRhZygpe2lmKHRoaXMuYXBwLmNvbmZpZy5odHRwLmV0YWcuZW5hYmxlZCl7dmFyIHQ9dGhpcy5hcHAuaHR0cDt0aGlzLmFwcC5zaW5nbGV0b24oXCJodHRwLmV0YWcuY2FjaGVcIixPKSx0aGlzLmFwcC5pbnN0YW5jZShcImh0dHAuZXRhZ1wiLG5ldyBJKHQpKSx0LmV0YWcuZW5hYmxlRXRhZygpfX19XSksSHR0cFNlcnZpY2VQcm92aWRlcn0oaCksTj1fX3dlYnBhY2tfcmVxdWlyZV9fKDY5NjEpLFI9X193ZWJwYWNrX3JlcXVpcmVfXy5uKE4pO2Z1bmN0aW9uIFRyYW5zZm9ybWVyX2RlZmluZVByb3BlcnRpZXModCxyKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXZhciBqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gVHJhbnNmb3JtZXIoKXshZnVuY3Rpb24gVHJhbnNmb3JtZXJfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLFRyYW5zZm9ybWVyKX1yZXR1cm4gZnVuY3Rpb24gVHJhbnNmb3JtZXJfY3JlYXRlQ2xhc3ModCxyLG8pe3JldHVybiByJiZUcmFuc2Zvcm1lcl9kZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLHIpLG8mJlRyYW5zZm9ybWVyX2RlZmluZVByb3BlcnRpZXModCxvKSx0fShUcmFuc2Zvcm1lcixudWxsLFt7a2V5OlwicHJlZml4ZXNMZW5ndGhcIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMudHlwZVByZWZpeC5sZW5ndGgrNX19LHtrZXk6XCJjb21wcmVzc1wiLHZhbHVlOmZ1bmN0aW9uIGNvbXByZXNzKHQpe3JldHVybiB0aGlzLnR5cGVQcmVmaXgrXCJsei1zfFwiK1IoKS5jb21wcmVzc1RvVVRGMTYodCl9fSx7a2V5OlwiZGVjb21wcmVzc1wiLHZhbHVlOmZ1bmN0aW9uIGRlY29tcHJlc3ModCl7dmFyIHIsbztyZXR1cm4gdC5sZW5ndGg8dGhpcy5wcmVmaXhlc0xlbmd0aHx8KHI9dC5zdWJzdHIoMCx0aGlzLnByZWZpeGVzTGVuZ3RoLTEpLG89dC5zdWJzdHJpbmcodGhpcy5wcmVmaXhlc0xlbmd0aCkscj09PXRoaXMudHlwZVByZWZpeCtcImx6LXNcIiYmKHQ9UigpLmRlY29tcHJlc3NGcm9tVVRGMTYobykpKSx0fX0se2tleTpcImVuY29kZVwiLHZhbHVlOmZ1bmN0aW9uIGVuY29kZSh0KXtyZXR1cm5cIltvYmplY3QgRGF0ZV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KT90aGlzLnR5cGVQcmVmaXgrXCJkYXRlfFwiK3QuZ2V0VGltZSgpLnRvU3RyaW5nKCk6XCJbb2JqZWN0IFJlZ0V4cF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KT90aGlzLnR5cGVQcmVmaXgrXCJleHByfFwiK3Quc291cmNlOlwibnVtYmVyXCI9PXR5cGVvZiB0P3RoaXMudHlwZVByZWZpeCtcIm51bWJ8XCIrdDpcImJvb2xlYW5cIj09dHlwZW9mIHQ/dGhpcy50eXBlUHJlZml4K1wiYm9vbHxcIisodD9cIjFcIjpcIjBcIik6XCJzdHJpbmdcIj09dHlwZW9mIHQ/dGhpcy50eXBlUHJlZml4K1wic3RybnxcIit0OnQ9PT1PYmplY3QodCk/dGhpcy50eXBlUHJlZml4K1wib2JqdHxcIitKU09OLnN0cmluZ2lmeSh0KTp0fX0se2tleTpcImRlY29kZVwiLHZhbHVlOmZ1bmN0aW9uIGRlY29kZSh0KXt2YXIgcixvO2lmKHQubGVuZ3RoPHRoaXMucHJlZml4ZXNMZW5ndGgpcmV0dXJuIHQ7c3dpdGNoKHI9dC5zdWJzdHIoMCx0aGlzLnByZWZpeGVzTGVuZ3RoLTEpLG89dC5zdWJzdHJpbmcodGhpcy5wcmVmaXhlc0xlbmd0aCkscil7Y2FzZSB0aGlzLnR5cGVQcmVmaXgrXCJkYXRlXCI6cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KG8pKTtjYXNlIHRoaXMudHlwZVByZWZpeCtcImV4cHJcIjpyZXR1cm4gbmV3IFJlZ0V4cChvKTtjYXNlIHRoaXMudHlwZVByZWZpeCtcIm51bWJcIjpyZXR1cm4gTnVtYmVyKG8pO2Nhc2UgdGhpcy50eXBlUHJlZml4K1wiYm9vbFwiOnJldHVybiBCb29sZWFuKFwiMVwiPT09byk7Y2FzZSB0aGlzLnR5cGVQcmVmaXgrXCJzdHJuXCI6cmV0dXJuXCJcIitvO2Nhc2UgdGhpcy50eXBlUHJlZml4K1wib2JqdFwiOnJldHVybiBKU09OLnBhcnNlKG8pO2RlZmF1bHQ6cmV0dXJuIHR9fX1dKSxUcmFuc2Zvcm1lcn0oKTtmdW5jdGlvbiBTdG9yYWdlQWRhcHRlcl90eXBlb2YodCl7cmV0dXJuIFN0b3JhZ2VBZGFwdGVyX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24gX3R5cGVvZih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sU3RvcmFnZUFkYXB0ZXJfdHlwZW9mKHQpfWZ1bmN0aW9uIFN0b3JhZ2VBZGFwdGVyX2RlZmluZVByb3BlcnRpZXModCxyKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fWZ1bmN0aW9uIFN0b3JhZ2VBZGFwdGVyX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIFN0b3JhZ2VBZGFwdGVyX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIHQuX19wcm90b19fPXIsdH0sU3RvcmFnZUFkYXB0ZXJfc2V0UHJvdG90eXBlT2YodCxyKX1mdW5jdGlvbiBTdG9yYWdlQWRhcHRlcl9jcmVhdGVTdXBlcih0KXt2YXIgcj1mdW5jdGlvbiBTdG9yYWdlQWRhcHRlcl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKXt2YXIgbyxpPVN0b3JhZ2VBZGFwdGVyX2dldFByb3RvdHlwZU9mKHQpO2lmKHIpe3ZhciBhPVN0b3JhZ2VBZGFwdGVyX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yO289UmVmbGVjdC5jb25zdHJ1Y3QoaSxhcmd1bWVudHMsYSl9ZWxzZSBvPWkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBTdG9yYWdlQWRhcHRlcl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsbyl9fWZ1bmN0aW9uIFN0b3JhZ2VBZGFwdGVyX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCxyKXtpZihyJiYoXCJvYmplY3RcIj09PVN0b3JhZ2VBZGFwdGVyX3R5cGVvZihyKXx8XCJmdW5jdGlvblwiPT10eXBlb2YgcikpcmV0dXJuIHI7aWYodm9pZCAwIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7cmV0dXJuIGZ1bmN0aW9uIFN0b3JhZ2VBZGFwdGVyX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH0odCl9ZnVuY3Rpb24gU3RvcmFnZUFkYXB0ZXJfZ2V0UHJvdG90eXBlT2YodCl7cmV0dXJuIFN0b3JhZ2VBZGFwdGVyX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKHQpe3JldHVybiB0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpfSxTdG9yYWdlQWRhcHRlcl9nZXRQcm90b3R5cGVPZih0KX1qLnR5cGVQcmVmaXg9XCJfX2xzX1wiO3ZhciBNPWZ1bmN0aW9uKHQpeyFmdW5jdGlvbiBTdG9yYWdlQWRhcHRlcl9pbmhlcml0cyh0LHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHImJnIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksciYmU3RvcmFnZUFkYXB0ZXJfc2V0UHJvdG90eXBlT2YodCxyKX0oU3RvcmFnZUFkYXB0ZXIsdCk7dmFyIHI9U3RvcmFnZUFkYXB0ZXJfY3JlYXRlU3VwZXIoU3RvcmFnZUFkYXB0ZXIpO2Z1bmN0aW9uIFN0b3JhZ2VBZGFwdGVyKHQpe3ZhciBvO3JldHVybiBmdW5jdGlvbiBTdG9yYWdlQWRhcHRlcl9jbGFzc0NhbGxDaGVjayh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsU3RvcmFnZUFkYXB0ZXIpLChvPXIuY2FsbCh0aGlzLHtkZWxpbWl0ZXI6XCI6XCIsd2lsZGNhcmQ6ITB9KSkuc3RvcmFnZT10LG99cmV0dXJuIGZ1bmN0aW9uIFN0b3JhZ2VBZGFwdGVyX2NyZWF0ZUNsYXNzKHQscixvKXtyZXR1cm4gciYmU3RvcmFnZUFkYXB0ZXJfZGVmaW5lUHJvcGVydGllcyh0LnByb3RvdHlwZSxyKSxvJiZTdG9yYWdlQWRhcHRlcl9kZWZpbmVQcm9wZXJ0aWVzKHQsbyksdH0oU3RvcmFnZUFkYXB0ZXIsW3trZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbiBnZXQodCxyKXtpZighdGhpcy5oYXModCkpcmV0dXJuIHI7dmFyIG89dGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7cmV0dXJuIG89ai5kZWNvbXByZXNzKG8pLGouZGVjb2RlKG8pfX0se2tleTpcImhhc1wiLHZhbHVlOmZ1bmN0aW9uIGhhcyh0KXtyZXR1cm4hIXRoaXMuc3RvcmFnZS5nZXRJdGVtKHQpfX0se2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uIHNldCh0LHIpe3ZhciBvPWouZW5jb2RlKHIpO3JldHVybiBvPWouY29tcHJlc3MobyksdGhpcy5zdG9yYWdlLnNldEl0ZW0odCxvKSx0aGlzLmVtaXQoXCJzZXQ6XCIrdCxyLHQpLHRoaXN9fSx7a2V5OlwidW5zZXRcIix2YWx1ZTpmdW5jdGlvbiB1bnNldCh0KXtyZXR1cm4gdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCksdGhpcy5lbWl0KFwidW5zZXQ6XCIrdCksdGhpc319LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uIGNsZWFyKCl7cmV0dXJuIHRoaXMuc3RvcmFnZS5jbGVhcigpLHRoaXMuZW1pdChcImNsZWFyXCIpLHRoaXN9fV0pLFN0b3JhZ2VBZGFwdGVyfSh0LkV2ZW50RW1pdHRlcjIpO2Z1bmN0aW9uIExvY2FsU3RvcmFnZUFkYXB0ZXJfdHlwZW9mKHQpe3JldHVybiBMb2NhbFN0b3JhZ2VBZGFwdGVyX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24gX3R5cGVvZih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sTG9jYWxTdG9yYWdlQWRhcHRlcl90eXBlb2YodCl9ZnVuY3Rpb24gTG9jYWxTdG9yYWdlQWRhcHRlcl9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiBMb2NhbFN0b3JhZ2VBZGFwdGVyX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIHQuX19wcm90b19fPXIsdH0sTG9jYWxTdG9yYWdlQWRhcHRlcl9zZXRQcm90b3R5cGVPZih0LHIpfWZ1bmN0aW9uIExvY2FsU3RvcmFnZUFkYXB0ZXJfY3JlYXRlU3VwZXIodCl7dmFyIHI9ZnVuY3Rpb24gTG9jYWxTdG9yYWdlQWRhcHRlcl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKXt2YXIgbyxpPUxvY2FsU3RvcmFnZUFkYXB0ZXJfZ2V0UHJvdG90eXBlT2YodCk7aWYocil7dmFyIGE9TG9jYWxTdG9yYWdlQWRhcHRlcl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtvPVJlZmxlY3QuY29uc3RydWN0KGksYXJndW1lbnRzLGEpfWVsc2Ugbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gTG9jYWxTdG9yYWdlQWRhcHRlcl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsbyl9fWZ1bmN0aW9uIExvY2FsU3RvcmFnZUFkYXB0ZXJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LHIpe2lmKHImJihcIm9iamVjdFwiPT09TG9jYWxTdG9yYWdlQWRhcHRlcl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBmdW5jdGlvbiBMb2NhbFN0b3JhZ2VBZGFwdGVyX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH0odCl9ZnVuY3Rpb24gTG9jYWxTdG9yYWdlQWRhcHRlcl9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gTG9jYWxTdG9yYWdlQWRhcHRlcl9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sTG9jYWxTdG9yYWdlQWRhcHRlcl9nZXRQcm90b3R5cGVPZih0KX12YXIgTD1mdW5jdGlvbih0KXshZnVuY3Rpb24gTG9jYWxTdG9yYWdlQWRhcHRlcl9pbmhlcml0cyh0LHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHImJnIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksciYmTG9jYWxTdG9yYWdlQWRhcHRlcl9zZXRQcm90b3R5cGVPZih0LHIpfShMb2NhbFN0b3JhZ2VBZGFwdGVyLHQpO3ZhciByPUxvY2FsU3RvcmFnZUFkYXB0ZXJfY3JlYXRlU3VwZXIoTG9jYWxTdG9yYWdlQWRhcHRlcik7ZnVuY3Rpb24gTG9jYWxTdG9yYWdlQWRhcHRlcigpe3JldHVybiBmdW5jdGlvbiBMb2NhbFN0b3JhZ2VBZGFwdGVyX2NsYXNzQ2FsbENoZWNrKHQscil7aWYoISh0IGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyxMb2NhbFN0b3JhZ2VBZGFwdGVyKSxyLmNhbGwodGhpcyx3aW5kb3cubG9jYWxTdG9yYWdlKX1yZXR1cm4gTG9jYWxTdG9yYWdlQWRhcHRlcn0oTT1fX2RlY29yYXRlKFsoMCxyLmIyKSgpXSxNKSk7ZnVuY3Rpb24gU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX3R5cGVvZih0KXtyZXR1cm4gU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24gX3R5cGVvZih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX3R5cGVvZih0KX1mdW5jdGlvbiBTZXNzaW9uU3RvcmFnZUFkYXB0ZXJfc2V0UHJvdG90eXBlT2YodCxyKXtyZXR1cm4gU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIHQuX19wcm90b19fPXIsdH0sU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX3NldFByb3RvdHlwZU9mKHQscil9ZnVuY3Rpb24gU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX2NyZWF0ZVN1cGVyKHQpe3ZhciByPWZ1bmN0aW9uIFNlc3Npb25TdG9yYWdlQWRhcHRlcl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKXt2YXIgbyxpPVNlc3Npb25TdG9yYWdlQWRhcHRlcl9nZXRQcm90b3R5cGVPZih0KTtpZihyKXt2YXIgYT1TZXNzaW9uU3RvcmFnZUFkYXB0ZXJfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7bz1SZWZsZWN0LmNvbnN0cnVjdChpLGFyZ3VtZW50cyxhKX1lbHNlIG89aS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIFNlc3Npb25TdG9yYWdlQWRhcHRlcl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsbyl9fWZ1bmN0aW9uIFNlc3Npb25TdG9yYWdlQWRhcHRlcl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQscil7aWYociYmKFwib2JqZWN0XCI9PT1TZXNzaW9uU3RvcmFnZUFkYXB0ZXJfdHlwZW9mKHIpfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiByKSlyZXR1cm4gcjtpZih2b2lkIDAhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtyZXR1cm4gZnVuY3Rpb24gU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH0odCl9ZnVuY3Rpb24gU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX2dldFByb3RvdHlwZU9mKHQpe3JldHVybiBTZXNzaW9uU3RvcmFnZUFkYXB0ZXJfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YodCl7cmV0dXJuIHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCl9LFNlc3Npb25TdG9yYWdlQWRhcHRlcl9nZXRQcm90b3R5cGVPZih0KX12YXIgQj1mdW5jdGlvbih0KXshZnVuY3Rpb24gU2Vzc2lvblN0b3JhZ2VBZGFwdGVyX2luaGVyaXRzKHQscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgciYmbnVsbCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUociYmci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxyJiZTZXNzaW9uU3RvcmFnZUFkYXB0ZXJfc2V0UHJvdG90eXBlT2YodCxyKX0oU2Vzc2lvblN0b3JhZ2VBZGFwdGVyLHQpO3ZhciByPVNlc3Npb25TdG9yYWdlQWRhcHRlcl9jcmVhdGVTdXBlcihTZXNzaW9uU3RvcmFnZUFkYXB0ZXIpO2Z1bmN0aW9uIFNlc3Npb25TdG9yYWdlQWRhcHRlcigpe3JldHVybiBmdW5jdGlvbiBTZXNzaW9uU3RvcmFnZUFkYXB0ZXJfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLFNlc3Npb25TdG9yYWdlQWRhcHRlciksci5jYWxsKHRoaXMsd2luZG93LnNlc3Npb25TdG9yYWdlKX1yZXR1cm4gU2Vzc2lvblN0b3JhZ2VBZGFwdGVyfShNKTtmdW5jdGlvbiBTdG9yYWdlU2VydmljZVByb3ZpZGVyX3R5cGVvZih0KXtyZXR1cm4gU3RvcmFnZVNlcnZpY2VQcm92aWRlcl90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbiBfdHlwZW9mKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJfdHlwZW9mKHQpfWZ1bmN0aW9uIFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJfZGVmaW5lUHJvcGVydGllcyh0LHIpe2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19ZnVuY3Rpb24gU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiBTdG9yYWdlU2VydmljZVByb3ZpZGVyX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIHQuX19wcm90b19fPXIsdH0sU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpfWZ1bmN0aW9uIFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJfY3JlYXRlU3VwZXIodCl7dmFyIHI9ZnVuY3Rpb24gU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKXt2YXIgbyxpPVN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJfZ2V0UHJvdG90eXBlT2YodCk7aWYocil7dmFyIGE9U3RvcmFnZVNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtvPVJlZmxlY3QuY29uc3RydWN0KGksYXJndW1lbnRzLGEpfWVsc2Ugbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsbyl9fWZ1bmN0aW9uIFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LHIpe2lmKHImJihcIm9iamVjdFwiPT09U3RvcmFnZVNlcnZpY2VQcm92aWRlcl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBmdW5jdGlvbiBTdG9yYWdlU2VydmljZVByb3ZpZGVyX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH0odCl9ZnVuY3Rpb24gU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0KX12YXIgRD1mdW5jdGlvbih0KXshZnVuY3Rpb24gU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9pbmhlcml0cyh0LHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHImJnIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksciYmU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpfShTdG9yYWdlU2VydmljZVByb3ZpZGVyLHQpO3ZhciByPVN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJfY3JlYXRlU3VwZXIoU3RvcmFnZVNlcnZpY2VQcm92aWRlcik7ZnVuY3Rpb24gU3RvcmFnZVNlcnZpY2VQcm92aWRlcigpe3JldHVybiBTdG9yYWdlU2VydmljZVByb3ZpZGVyX2NsYXNzQ2FsbENoZWNrKHRoaXMsU3RvcmFnZVNlcnZpY2VQcm92aWRlciksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGZ1bmN0aW9uIFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJfY3JlYXRlQ2xhc3ModCxyLG8pe3JldHVybiByJiZTdG9yYWdlU2VydmljZVByb3ZpZGVyX2RlZmluZVByb3BlcnRpZXModC5wcm90b3R5cGUsciksbyYmU3RvcmFnZVNlcnZpY2VQcm92aWRlcl9kZWZpbmVQcm9wZXJ0aWVzKHQsbyksdH0oU3RvcmFnZVNlcnZpY2VQcm92aWRlcixbe2tleTpcInJlZ2lzdGVyXCIsdmFsdWU6ZnVuY3Rpb24gcmVnaXN0ZXIoKXt0aGlzLmFwcC5zaW5nbGV0b24oXCJzdG9yYWdlLmxvY2FsXCIsTCksdGhpcy5hcHAuc2luZ2xldG9uKFwic3RvcmFnZS5zZXNzaW9uXCIsQiksdGhpcy5hcHAuYmluZChcInN0b3JhZ2VcIikudG9EeW5hbWljVmFsdWUoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRhaW5lci5nZXQoXCJzdG9yYWdlLmxvY2FsXCIpfSkpLHRoaXMuYXBwLmFkZEJpbmRpbmdHZXR0ZXIoXCJzdG9yYWdlXCIpfX1dKSxTdG9yYWdlU2VydmljZVByb3ZpZGVyfShoKTt2YXIgVT1mdW5jdGlvbiBGaWVsZCh0KXshZnVuY3Rpb24gRmllbGRfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLEZpZWxkKSxPYmplY3QuYXNzaWduKHRoaXMsdCl9O2Z1bmN0aW9uIEVudHJ5X2NsYXNzQ2FsbENoZWNrKHQscil7aWYoISh0IGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBFbnRyeV9kZWZpbmVQcm9wZXJ0aWVzKHQscil7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb107aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX12YXIgRz1mdW5jdGlvbigpe2Z1bmN0aW9uIEVudHJ5KHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxvPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl07RW50cnlfY2xhc3NDYWxsQ2hlY2sodGhpcyxFbnRyeSksdGhpcy5fc3RyZWFtPXQsdGhpcy5fZGF0YT1yLHRoaXMuX2ZyZXNoPW87dmFyIGk9bmV3IFByb3h5KHRoaXMse2dldDpmdW5jdGlvbiBnZXQodCxyLG8pe3JldHVybiBSZWZsZWN0Lmhhcyh0LHIpP1JlZmxlY3QuZ2V0KHQscixvKTpSZWZsZWN0Lmhhcyh0Ll9kYXRhLHIpP1JlZmxlY3QuZ2V0KHQuX2RhdGEscik6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24gc2V0KHQscixvLGkpe3JldHVybiBSZWZsZWN0Lmhhcyh0LHIpP1JlZmxlY3Quc2V0KHQscixvLGkpOlJlZmxlY3Quc2V0KHQuX2RhdGEscixvKX19KTtyZXR1cm4gaX1yZXR1cm4gZnVuY3Rpb24gRW50cnlfY3JlYXRlQ2xhc3ModCxyLG8pe3JldHVybiByJiZFbnRyeV9kZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLHIpLG8mJkVudHJ5X2RlZmluZVByb3BlcnRpZXModCxvKSx0fShFbnRyeSxbe2tleTpcInN0cmVhbVwiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5fc3RyZWFtfX0se2tleTpcInNhdmVcIix2YWx1ZTpmdW5jdGlvbiBzYXZlKCl7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWUoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUkKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKHQucHJldj0wLCF0aGlzLl9mcmVzaCl7dC5uZXh0PTU7YnJlYWt9cmV0dXJuIHQubmV4dD00LHRoaXMuaHR0cC5wb3N0RW50cnkodGhpcy5fc3RyZWFtLmlkLHRoaXMuX2RhdGEpO2Nhc2UgNDpjYXNlIDc6cmV0dXJuIHQuYWJydXB0KFwicmV0dXJuXCIsITApO2Nhc2UgNTpyZXR1cm4gdC5uZXh0PTcsdGhpcy5odHRwLnBhdGNoRW50cnkodGhpcy5fc3RyZWFtLmlkLHRoaXMuX2RhdGEuaWQsdGhpcy5fZGF0YSk7Y2FzZSAxMDpyZXR1cm4gdC5wcmV2PTEwLHQudDA9dC5jYXRjaCgwKSx0LmFicnVwdChcInJldHVyblwiLCExKTtjYXNlIDEzOmNhc2VcImVuZFwiOnJldHVybiB0LnN0b3AoKX19KSxfY2FsbGVlLHRoaXMsW1swLDEwXV0pfSkpKX19LHtrZXk6XCJ2YWxpZGF0b3JcIix2YWx1ZTpmdW5jdGlvbiB2YWxpZGF0b3IoKXt9fV0pLEVudHJ5fSgpO2Z1bmN0aW9uIEVudHJ5Q29sbGVjdGlvbl90eXBlb2YodCl7cmV0dXJuIEVudHJ5Q29sbGVjdGlvbl90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbiBfdHlwZW9mKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LEVudHJ5Q29sbGVjdGlvbl90eXBlb2YodCl9ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KHQpe3JldHVybiBmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXModCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gRW50cnlDb2xsZWN0aW9uX2FycmF5TGlrZVRvQXJyYXkodCl9KHQpfHxmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPXRbU3ltYm9sLml0ZXJhdG9yXXx8bnVsbCE9dFtcIkBAaXRlcmF0b3JcIl0pcmV0dXJuIEFycmF5LmZyb20odCl9KHQpfHxmdW5jdGlvbiBFbnRyeUNvbGxlY3Rpb25fdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkodCxyKXtpZighdClyZXR1cm47aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIEVudHJ5Q29sbGVjdGlvbl9hcnJheUxpa2VUb0FycmF5KHQscik7dmFyIG89T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO1wiT2JqZWN0XCI9PT1vJiZ0LmNvbnN0cnVjdG9yJiYobz10LmNvbnN0cnVjdG9yLm5hbWUpO2lmKFwiTWFwXCI9PT1vfHxcIlNldFwiPT09bylyZXR1cm4gQXJyYXkuZnJvbSh0KTtpZihcIkFyZ3VtZW50c1wiPT09b3x8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobykpcmV0dXJuIEVudHJ5Q29sbGVjdGlvbl9hcnJheUxpa2VUb0FycmF5KHQscil9KHQpfHxmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX0oKX1mdW5jdGlvbiBFbnRyeUNvbGxlY3Rpb25fYXJyYXlMaWtlVG9BcnJheSh0LHIpeyhudWxsPT1yfHxyPnQubGVuZ3RoKSYmKHI9dC5sZW5ndGgpO2Zvcih2YXIgbz0wLGk9bmV3IEFycmF5KHIpO288cjtvKyspaVtvXT10W29dO3JldHVybiBpfWZ1bmN0aW9uIEVudHJ5Q29sbGVjdGlvbl9jbGFzc0NhbGxDaGVjayh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gRW50cnlDb2xsZWN0aW9uX2RlZmluZVByb3BlcnRpZXModCxyKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fWZ1bmN0aW9uIEVudHJ5Q29sbGVjdGlvbl9jcmVhdGVDbGFzcyh0LHIsbyl7cmV0dXJuIHImJkVudHJ5Q29sbGVjdGlvbl9kZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLHIpLG8mJkVudHJ5Q29sbGVjdGlvbl9kZWZpbmVQcm9wZXJ0aWVzKHQsbyksdH1mdW5jdGlvbiBFbnRyeUNvbGxlY3Rpb25faW5oZXJpdHModCxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyJiZyLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHImJkVudHJ5Q29sbGVjdGlvbl9zZXRQcm90b3R5cGVPZih0LHIpfWZ1bmN0aW9uIEVudHJ5Q29sbGVjdGlvbl9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiBFbnRyeUNvbGxlY3Rpb25fc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YodCxyKXtyZXR1cm4gdC5fX3Byb3RvX189cix0fSxFbnRyeUNvbGxlY3Rpb25fc2V0UHJvdG90eXBlT2YodCxyKX1mdW5jdGlvbiBFbnRyeUNvbGxlY3Rpb25fY3JlYXRlU3VwZXIodCl7dmFyIHI9ZnVuY3Rpb24gRW50cnlDb2xsZWN0aW9uX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2godCl7cmV0dXJuITF9fSgpO3JldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpe3ZhciBvLGk9RW50cnlDb2xsZWN0aW9uX2dldFByb3RvdHlwZU9mKHQpO2lmKHIpe3ZhciBhPUVudHJ5Q29sbGVjdGlvbl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtvPVJlZmxlY3QuY29uc3RydWN0KGksYXJndW1lbnRzLGEpfWVsc2Ugbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gRW50cnlDb2xsZWN0aW9uX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcyxvKX19ZnVuY3Rpb24gRW50cnlDb2xsZWN0aW9uX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCxyKXtpZihyJiYoXCJvYmplY3RcIj09PUVudHJ5Q29sbGVjdGlvbl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBmdW5jdGlvbiBFbnRyeUNvbGxlY3Rpb25fYXNzZXJ0VGhpc0luaXRpYWxpemVkKHQpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiB0fSh0KX1mdW5jdGlvbiBFbnRyeUNvbGxlY3Rpb25fZ2V0UHJvdG90eXBlT2YodCl7cmV0dXJuIEVudHJ5Q29sbGVjdGlvbl9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sRW50cnlDb2xsZWN0aW9uX2dldFByb3RvdHlwZU9mKHQpfV9fZGVjb3JhdGUoW2IoXCJzdHJlYW1zLmh0dHBcIildLEcucHJvdG90eXBlLFwiaHR0cFwiLHZvaWQgMCk7dmFyIFc9ZnVuY3Rpb24odCl7RW50cnlDb2xsZWN0aW9uX2luaGVyaXRzKEVudHJ5Q29sbGVjdGlvbix0KTt2YXIgcj1FbnRyeUNvbGxlY3Rpb25fY3JlYXRlU3VwZXIoRW50cnlDb2xsZWN0aW9uKTtmdW5jdGlvbiBFbnRyeUNvbGxlY3Rpb24odCxvLGkpe3ZhciBhO3JldHVybiBFbnRyeUNvbGxlY3Rpb25fY2xhc3NDYWxsQ2hlY2sodGhpcyxFbnRyeUNvbGxlY3Rpb24pLChhPXIuY2FsbC5hcHBseShyLFt0aGlzXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHQpKSkpLm1ldGE9byxhLmxpbmtzPWksYX1yZXR1cm4gRW50cnlDb2xsZWN0aW9uX2NyZWF0ZUNsYXNzKEVudHJ5Q29sbGVjdGlvbixudWxsLFt7a2V5OlwiZnJvbVJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24gZnJvbVJlc3BvbnNlKHQscil7cmV0dXJuIG5ldyBFbnRyeUNvbGxlY3Rpb24oT2JqZWN0LnZhbHVlcyh0LmRhdGEpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBHKHIsdCwhMSl9KSksdC5tZXRhLHQubGlua3MpfX1dKSxFbnRyeUNvbGxlY3Rpb259KHcpLHE9ZnVuY3Rpb24odCl7RW50cnlDb2xsZWN0aW9uX2luaGVyaXRzKFBhZ2luYXRlZEVudHJ5Q29sbGVjdGlvbix0KTt2YXIgcj1FbnRyeUNvbGxlY3Rpb25fY3JlYXRlU3VwZXIoUGFnaW5hdGVkRW50cnlDb2xsZWN0aW9uKTtmdW5jdGlvbiBQYWdpbmF0ZWRFbnRyeUNvbGxlY3Rpb24odCxvLGkpe3ZhciBhO3JldHVybiBFbnRyeUNvbGxlY3Rpb25fY2xhc3NDYWxsQ2hlY2sodGhpcyxQYWdpbmF0ZWRFbnRyeUNvbGxlY3Rpb24pLChhPXIuY2FsbC5hcHBseShyLFt0aGlzXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHQpKSkpLm1ldGE9byxhLmxpbmtzPWksYX1yZXR1cm4gRW50cnlDb2xsZWN0aW9uX2NyZWF0ZUNsYXNzKFBhZ2luYXRlZEVudHJ5Q29sbGVjdGlvbixudWxsLFt7a2V5OlwiZnJvbVJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24gZnJvbVJlc3BvbnNlKHQscil7cmV0dXJuIG5ldyBQYWdpbmF0ZWRFbnRyeUNvbGxlY3Rpb24oT2JqZWN0LnZhbHVlcyh0LmRhdGEpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBHKHIsdCwhMSl9KSksdC5tZXRhLHQubGlua3MpfX1dKSxQYWdpbmF0ZWRFbnRyeUNvbGxlY3Rpb259KHcpO2Z1bmN0aW9uIENyaXRlcmlhX2RlZmluZVByb3BlcnRpZXModCxyKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXZhciBWPVtcIj5cIixcIjxcIixcIj09XCIsXCIhPVwiLFwiPj1cIixcIjw9XCIsXCIhPFwiLFwiIT5cIixcIjw+XCJdLEg9W1wiQkVUV0VFTlwiLFwiRVhJU1RTXCIsXCJPUlwiLFwiQU5EXCIsXCJOT1RcIixcIklOXCIsXCJBTExcIixcIkFOWVwiLFwiTElLRVwiLFwiSVMgTlVMTFwiLFwiVU5JUVVFXCJdLEs9W10uY29uY2F0KFYpLmNvbmNhdChIKSwkPWZ1bmN0aW9uIGlzT3BlcmF0b3IodCl7cmV0dXJuIEsuaW5jbHVkZXModCl9LHo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBDcml0ZXJpYSh0KXshZnVuY3Rpb24gQ3JpdGVyaWFfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLENyaXRlcmlhKSx0aGlzLnN0cmVhbT10LHRoaXMucGFyYW1ldGVycz1bXX1yZXR1cm4gZnVuY3Rpb24gQ3JpdGVyaWFfY3JlYXRlQ2xhc3ModCxyLG8pe3JldHVybiByJiZDcml0ZXJpYV9kZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLHIpLG8mJkNyaXRlcmlhX2RlZmluZVByb3BlcnRpZXModCxvKSx0fShDcml0ZXJpYSxbe2tleTpcImZpbmRcIix2YWx1ZTpmdW5jdGlvbiBmaW5kKHQpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlKCl7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlJChyKXtmb3IoOzspc3dpdGNoKHIucHJldj1yLm5leHQpe2Nhc2UgMDpyZXR1cm4gci5hYnJ1cHQoXCJyZXR1cm5cIix0aGlzLndoZXJlKFwiaWRcIix0KS5maXJzdCgpKTtjYXNlIDE6Y2FzZVwiZW5kXCI6cmV0dXJuIHIuc3RvcCgpfX0pLF9jYWxsZWUsdGhpcyl9KSkpfX0se2tleTpcImZpcnN0XCIsdmFsdWU6ZnVuY3Rpb24gZmlyc3QoKXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTIoKXt2YXIgdDtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUyJChyKXtmb3IoOzspc3dpdGNoKHIucHJldj1yLm5leHQpe2Nhc2UgMDpyZXR1cm4gci5uZXh0PTIsdGhpcy5saW1pdCgxKS5nZXQoKTtjYXNlIDI6cmV0dXJuIHQ9ci5zZW50LHIuYWJydXB0KFwicmV0dXJuXCIsdFswXSk7Y2FzZSA0OmNhc2VcImVuZFwiOnJldHVybiByLnN0b3AoKX19KSxfY2FsbGVlMix0aGlzKX0pKSl9fSx7a2V5OlwiY2FjaGVcIix2YWx1ZTpmdW5jdGlvbiBjYWNoZSgpe3JldHVybiB0aGlzfX0se2tleTpcIm9yZGVyQnlcIix2YWx1ZTpmdW5jdGlvbiBvcmRlckJ5KHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcImRlc2NcIjtyZXR1cm4gdGhpcy5hZGRQYXJhbWV0ZXIoXCJvcmRlckJ5XCIsW3Qscl0pLHRoaXN9fSx7a2V5OlwibGltaXRcIix2YWx1ZTpmdW5jdGlvbiBsaW1pdCh0KXtyZXR1cm4gdGhpcy5hZGRQYXJhbWV0ZXIoXCJsaW1pdFwiLHQpLHRoaXN9fSx7a2V5Olwid2hlcmVcIix2YWx1ZTpmdW5jdGlvbiB3aGVyZSgpe3ZhciB0LHIsbyxpO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoPyh0PWFyZ3VtZW50cy5sZW5ndGg8PTA/dm9pZCAwOmFyZ3VtZW50c1swXSxyPVwiPT1cIixvPWFyZ3VtZW50cy5sZW5ndGg8PTE/dm9pZCAwOmFyZ3VtZW50c1sxXSk6Mz09PWFyZ3VtZW50cy5sZW5ndGg/KHQ9YXJndW1lbnRzLmxlbmd0aDw9MD92b2lkIDA6YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzLmxlbmd0aDw9MT92b2lkIDA6YXJndW1lbnRzWzFdLG89YXJndW1lbnRzLmxlbmd0aDw9Mj92b2lkIDA6YXJndW1lbnRzWzJdKTo0PT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzLmxlbmd0aDw9MD92b2lkIDA6YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzLmxlbmd0aDw9MT92b2lkIDA6YXJndW1lbnRzWzFdLG89YXJndW1lbnRzLmxlbmd0aDw9Mj92b2lkIDA6YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzLmxlbmd0aDw9Mz92b2lkIDA6YXJndW1lbnRzWzNdKSwhJChyKSl0aHJvdyBuZXcgRXJyb3IoJ0NyaXRlcmlhIHdoZXJlKCkgb3BlcmF0b3IgXCInLmNvbmNhdChyLCdcIiBub3QgdmFsaWQgJykpO3JldHVybiB0aGlzLmFkZFBhcmFtZXRlcihcIndoZXJlXCIsW3QscixvLGldKSx0aGlzfX0se2tleTpcIm9yV2hlcmVcIix2YWx1ZTpmdW5jdGlvbiBvcldoZXJlKCl7dmFyIHQscixvO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoPyh0PWFyZ3VtZW50cy5sZW5ndGg8PTA/dm9pZCAwOmFyZ3VtZW50c1swXSxyPVwiPT1cIixvPWFyZ3VtZW50cy5sZW5ndGg8PTE/dm9pZCAwOmFyZ3VtZW50c1sxXSk6KHQ9YXJndW1lbnRzLmxlbmd0aDw9MD92b2lkIDA6YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzLmxlbmd0aDw9MT92b2lkIDA6YXJndW1lbnRzWzFdLG89YXJndW1lbnRzLmxlbmd0aDw9Mj92b2lkIDA6YXJndW1lbnRzWzJdKSwhJChyKSl0aHJvdyBuZXcgRXJyb3IoJ0NyaXRlcmlhIG9yV2hlcmUoKSBvcGVyYXRvciBcIicuY29uY2F0KHIsJ1wiIG5vdCB2YWxpZCAnKSk7cmV0dXJuIHRoaXMuYWRkUGFyYW1ldGVyKFwid2hlcmVcIixbdCxyLG8sXCJvclwiXSksdGhpc319LHtrZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTMoKXt2YXIgdCxyO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTMkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiB0PXRoaXMuY29tcGlsZVN0YXRlbWVudHMoKSxvLm5leHQ9Myx0aGlzLmh0dHAuZ2V0RW50cmllcyh0aGlzLnN0cmVhbS5pZCx7cXVlcnk6dH0se30pO2Nhc2UgMzpyZXR1cm4gcj1vLnNlbnQsby5hYnJ1cHQoXCJyZXR1cm5cIixXLmZyb21SZXNwb25zZShyLHRoaXMuc3RyZWFtKSk7Y2FzZSA1OmNhc2VcImVuZFwiOnJldHVybiBvLnN0b3AoKX19KSxfY2FsbGVlMyx0aGlzKX0pKSl9fSx7a2V5OlwiY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24gY3JlYXRlKHQpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNCgpe3ZhciByO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTQkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiByPXRoaXMubmV3SW5zdGFuY2UodCksby5uZXh0PTMsci5zYXZlKCk7Y2FzZSAzOnJldHVybiBvLmFicnVwdChcInJldHVyblwiLHIpO2Nhc2UgNDpjYXNlXCJlbmRcIjpyZXR1cm4gby5zdG9wKCl9fSksX2NhbGxlZTQsdGhpcyl9KSkpfX0se2tleTpcInNhdmVcIix2YWx1ZTpmdW5jdGlvbiBzYXZlKHQpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNSgpe3ZhciByO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTUkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiBvLm5leHQ9Mix0LnNhdmUoKTtjYXNlIDI6cmV0dXJuIHI9by5zZW50LG8uYWJydXB0KFwicmV0dXJuXCIscik7Y2FzZSA0OmNhc2VcImVuZFwiOnJldHVybiBvLnN0b3AoKX19KSxfY2FsbGVlNSl9KSkpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uIF9kZWxldGUoKXtyZXR1cm4gdGhpc319LHtrZXk6XCJwYWdpbmF0ZVwiLHZhbHVlOmZ1bmN0aW9uIHBhZ2luYXRlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjEwMCxyPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxO3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNigpe3ZhciBvLGk7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlNiQoYSl7Zm9yKDs7KXN3aXRjaChhLnByZXY9YS5uZXh0KXtjYXNlIDA6cmV0dXJuIG89dGhpcy5jb21waWxlU3RhdGVtZW50cygpLGEubmV4dD0zLHRoaXMuaHR0cC5nZXRFbnRyaWVzKHRoaXMuc3RyZWFtLmlkLHtxdWVyeTpvfSx7cGFnaW5hdGU6ITAscGVyX3BhZ2U6dCxwYWdlOnJ9KTtjYXNlIDM6cmV0dXJuIGk9YS5zZW50LGEuYWJydXB0KFwicmV0dXJuXCIscS5mcm9tUmVzcG9uc2UoaSx0aGlzLnN0cmVhbSkpO2Nhc2UgNTpjYXNlXCJlbmRcIjpyZXR1cm4gYS5zdG9wKCl9fSksX2NhbGxlZTYsdGhpcyl9KSkpfX0se2tleTpcIm5ld0luc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24gbmV3SW5zdGFuY2UodCl7cmV0dXJuIG5ldyBHKHRoaXMuc3RyZWFtLHQsITApfX0se2tleTpcImdldFBhcmFtZXRlcnNcIix2YWx1ZTpmdW5jdGlvbiBnZXRQYXJhbWV0ZXJzKCl7cmV0dXJuIHRoaXMucGFyYW1ldGVyc319LHtrZXk6XCJzZXRQYXJhbWV0ZXJzXCIsdmFsdWU6ZnVuY3Rpb24gc2V0UGFyYW1ldGVycyh0KXtyZXR1cm4gdGhpcy5wYXJhbWV0ZXJzPXQsdGhpc319LHtrZXk6XCJhZGRQYXJhbWV0ZXJcIix2YWx1ZTpmdW5jdGlvbiBhZGRQYXJhbWV0ZXIodCxyKXtyZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLnB1c2goe25hbWU6dCx2YWx1ZTpyfSksdGhpc319LHtrZXk6XCJjb21waWxlU3RhdGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uIGNvbXBpbGVTdGF0ZW1lbnRzKCl7cmV0dXJuIHRoaXMucGFyYW1ldGVycy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkodCxyLG8pe3JldHVybiByIGluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQscix7dmFsdWU6byxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbcl09byx0fSh7fSx0Lm5hbWUsZnVuY3Rpb24gZW5zdXJlQXJyYXkodCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dDpbdF19KHQudmFsdWUpKX0pKX19XSksQ3JpdGVyaWF9KCk7ZnVuY3Rpb24gU3RyZWFtc19SZXBvc2l0b3J5X2RlZmluZVByb3BlcnRpZXModCxyKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fV9fZGVjb3JhdGUoW2IoXCJzdHJlYW1zLmh0dHBcIildLHoucHJvdG90eXBlLFwiaHR0cFwiLHZvaWQgMCksej1fX2RlY29yYXRlKFsoMCxyLmIyKSgpXSx6KTt2YXIgSj1mdW5jdGlvbigpe2Z1bmN0aW9uIFJlcG9zaXRvcnkodCl7IWZ1bmN0aW9uIFN0cmVhbXNfUmVwb3NpdG9yeV9jbGFzc0NhbGxDaGVjayh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsUmVwb3NpdG9yeSksdGhpcy5zdHJlYW09dH1yZXR1cm4gZnVuY3Rpb24gU3RyZWFtc19SZXBvc2l0b3J5X2NyZWF0ZUNsYXNzKHQscixvKXtyZXR1cm4gciYmU3RyZWFtc19SZXBvc2l0b3J5X2RlZmluZVByb3BlcnRpZXModC5wcm90b3R5cGUsciksbyYmU3RyZWFtc19SZXBvc2l0b3J5X2RlZmluZVByb3BlcnRpZXModCxvKSx0fShSZXBvc2l0b3J5LFt7a2V5OlwiYWxsXCIsdmFsdWU6ZnVuY3Rpb24gYWxsKCl7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWUoKXt2YXIgdCxyLG89dGhpcztyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUkKGkpe2Zvcig7Oylzd2l0Y2goaS5wcmV2PWkubmV4dCl7Y2FzZSAwOnJldHVybiBpLm5leHQ9Mix0aGlzLmh0dHAuZ2V0RW50cmllcyh0aGlzLnN0cmVhbS5pZCk7Y2FzZSAyOnJldHVybiB0PWkuc2VudCxyPXQuZGF0YS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgRyhvLnN0cmVhbSx0LCExKX0pKSxpLmFicnVwdChcInJldHVyblwiLG5ldyBXKHIsdC5tZXRhLHQubGlua3MpKTtjYXNlIDU6Y2FzZVwiZW5kXCI6cmV0dXJuIGkuc3RvcCgpfX0pLF9jYWxsZWUsdGhpcyl9KSkpfX0se2tleTpcImZpbmRcIix2YWx1ZTpmdW5jdGlvbiBmaW5kKHQpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMigpe3ZhciByO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTIkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiByPXRoaXMuc3RyZWFtLmVudHJpZXMoKSxvLmFicnVwdChcInJldHVyblwiLHIud2hlcmUoXCJpZFwiLHQpLmZpcnN0KCkpO2Nhc2UgMjpjYXNlXCJlbmRcIjpyZXR1cm4gby5zdG9wKCl9fSksX2NhbGxlZTIsdGhpcyl9KSkpfX0se2tleTpcImZpbmRBbGxcIix2YWx1ZTpmdW5jdGlvbiBmaW5kQWxsKHQpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMygpe3ZhciByO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTMkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiByPXRoaXMuc3RyZWFtLmVudHJpZXMoKSxvLmFicnVwdChcInJldHVyblwiLHIud2hlcmUoXCJpZFwiLFwiSU5cIix0KS5nZXQoKSk7Y2FzZSAyOmNhc2VcImVuZFwiOnJldHVybiBvLnN0b3AoKX19KSxfY2FsbGVlMyx0aGlzKX0pKSl9fSx7a2V5OlwiZmluZEJ5XCIsdmFsdWU6ZnVuY3Rpb24gZmluZEJ5KHQscil7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWU0KCl7dmFyIG87cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlNCQoaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6cmV0dXJuIG89dGhpcy5zdHJlYW0uZW50cmllcygpLGkuYWJydXB0KFwicmV0dXJuXCIsby53aGVyZSh0LHIpLmZpcnN0KCkpO2Nhc2UgMjpjYXNlXCJlbmRcIjpyZXR1cm4gaS5zdG9wKCl9fSksX2NhbGxlZTQsdGhpcyl9KSkpfX0se2tleTpcImZpbmRBbGxXaGVyZVwiLHZhbHVlOmZ1bmN0aW9uIGZpbmRBbGxXaGVyZSh0LHIpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNSgpe3ZhciBvO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTUkKGkpe2Zvcig7Oylzd2l0Y2goaS5wcmV2PWkubmV4dCl7Y2FzZSAwOnJldHVybiBvPXRoaXMuc3RyZWFtLmVudHJpZXMoKSxpLmFicnVwdChcInJldHVyblwiLG8ud2hlcmUodCxyKS5nZXQoKSk7Y2FzZSAyOmNhc2VcImVuZFwiOnJldHVybiBpLnN0b3AoKX19KSxfY2FsbGVlNSx0aGlzKX0pKSl9fSx7a2V5OlwiY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24gY3JlYXRlKHQpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNigpe3ZhciByO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTYkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiByPXRoaXMubmV3Q3JpdGVyaWEoKS5uZXdJbnN0YW5jZSh0KSxvLm5leHQ9MyxyLnNhdmUoKTtjYXNlIDM6cmV0dXJuIG8uYWJydXB0KFwicmV0dXJuXCIscik7Y2FzZSA0OmNhc2VcImVuZFwiOnJldHVybiBvLnN0b3AoKX19KSxfY2FsbGVlNix0aGlzKX0pKSl9fSx7a2V5Olwic2F2ZVwiLHZhbHVlOmZ1bmN0aW9uIHNhdmUodCl7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWU3KCl7dmFyIHI7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlNyQobyl7Zm9yKDs7KXN3aXRjaChvLnByZXY9by5uZXh0KXtjYXNlIDA6cmV0dXJuIG8ubmV4dD0yLHQuc2F2ZSgpO2Nhc2UgMjpyZXR1cm4gcj1vLnNlbnQsby5hYnJ1cHQoXCJyZXR1cm5cIixyKTtjYXNlIDQ6Y2FzZVwiZW5kXCI6cmV0dXJuIG8uc3RvcCgpfX0pLF9jYWxsZWU3KX0pKSl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24gX2RlbGV0ZSh0KXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTgoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWU4JChyKXtmb3IoOzspc3dpdGNoKHIucHJldj1yLm5leHQpe2Nhc2UgMDpyZXR1cm4gci5uZXh0PTIsdGhpcy5odHRwLmRlbGV0ZUVudHJ5KHRoaXMuc3RyZWFtLmlkLHQuaWQpO2Nhc2UgMjpyZXR1cm4gci5hYnJ1cHQoXCJyZXR1cm5cIiwhMCk7Y2FzZSAzOmNhc2VcImVuZFwiOnJldHVybiByLnN0b3AoKX19KSxfY2FsbGVlOCx0aGlzKX0pKSl9fSx7a2V5OlwidHJ1bmNhdGVcIix2YWx1ZTpmdW5jdGlvbiB0cnVuY2F0ZSgpe3JldHVybiB0aGlzfX0se2tleTpcIm5ld0luc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24gbmV3SW5zdGFuY2UodCl7cmV0dXJuIHRoaXMubmV3Q3JpdGVyaWEoKS5uZXdJbnN0YW5jZSh0KX19LHtrZXk6XCJuZXdDcml0ZXJpYVwiLHZhbHVlOmZ1bmN0aW9uIG5ld0NyaXRlcmlhKCl7cmV0dXJuIG5ldyB6KHRoaXMuc3RyZWFtKX19XSksUmVwb3NpdG9yeX0oKTtmdW5jdGlvbiBfc2xpY2VkVG9BcnJheSh0LHIpe3JldHVybiBmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXModCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdH0odCl8fGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdCh0LHIpe3ZhciBvPW51bGw9PXQ/bnVsbDpcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZ0W1N5bWJvbC5pdGVyYXRvcl18fHRbXCJAQGl0ZXJhdG9yXCJdO2lmKG51bGw9PW8pcmV0dXJuO3ZhciBpLGEsYz1bXSx1PSEwLGw9ITE7dHJ5e2ZvcihvPW8uY2FsbCh0KTshKHU9KGk9by5uZXh0KCkpLmRvbmUpJiYoYy5wdXNoKGkudmFsdWUpLCFyfHxjLmxlbmd0aCE9PXIpO3U9ITApO31jYXRjaCh0KXtsPSEwLGE9dH1maW5hbGx5e3RyeXt1fHxudWxsPT1vLnJldHVybnx8by5yZXR1cm4oKX1maW5hbGx5e2lmKGwpdGhyb3cgYX19cmV0dXJuIGN9KHQscil8fGZ1bmN0aW9uIFN0cmVhbV91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSh0LHIpe2lmKCF0KXJldHVybjtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gU3RyZWFtX2FycmF5TGlrZVRvQXJyYXkodCxyKTt2YXIgbz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkuc2xpY2UoOCwtMSk7XCJPYmplY3RcIj09PW8mJnQuY29uc3RydWN0b3ImJihvPXQuY29uc3RydWN0b3IubmFtZSk7aWYoXCJNYXBcIj09PW98fFwiU2V0XCI9PT1vKXJldHVybiBBcnJheS5mcm9tKHQpO2lmKFwiQXJndW1lbnRzXCI9PT1vfHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChvKSlyZXR1cm4gU3RyZWFtX2FycmF5TGlrZVRvQXJyYXkodCxyKX0odCxyKXx8ZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gU3RyZWFtX2FycmF5TGlrZVRvQXJyYXkodCxyKXsobnVsbD09cnx8cj50Lmxlbmd0aCkmJihyPXQubGVuZ3RoKTtmb3IodmFyIG89MCxpPW5ldyBBcnJheShyKTtvPHI7bysrKWlbb109dFtvXTtyZXR1cm4gaX1mdW5jdGlvbiBTdHJlYW1fZGVmaW5lUHJvcGVydGllcyh0LHIpe2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19X19kZWNvcmF0ZShbYihcInN0cmVhbXMuaHR0cFwiKV0sSi5wcm90b3R5cGUsXCJodHRwXCIsdm9pZCAwKTt2YXIgWT1mdW5jdGlvbigpe2Z1bmN0aW9uIFN0cmVhbSh0LHIsbyl7IWZ1bmN0aW9uIFN0cmVhbV9jbGFzc0NhbGxDaGVjayh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsU3RyZWFtKSx0aGlzLm1ldGE9cix0aGlzLmxpbmtzPW8sdC5maWVsZHMmJih0aGlzLmZpZWxkcz1uZXcgTWFwKE9iamVjdC5lbnRyaWVzKHQuZmllbGRzKS5tYXAoKGZ1bmN0aW9uKHQpe3ZhciByPV9zbGljZWRUb0FycmF5KHQsMiksbz1yWzBdLGk9clsxXTtyZXR1cm5bbyxuZXcgVShpKV19KSkpLGRlbGV0ZSB0LmZpZWxkcyksT2JqZWN0LmFzc2lnbih0aGlzLHQpfXJldHVybiBmdW5jdGlvbiBTdHJlYW1fY3JlYXRlQ2xhc3ModCxyLG8pe3JldHVybiByJiZTdHJlYW1fZGVmaW5lUHJvcGVydGllcyh0LnByb3RvdHlwZSxyKSxvJiZTdHJlYW1fZGVmaW5lUHJvcGVydGllcyh0LG8pLHR9KFN0cmVhbSxbe2tleTpcInJlcG9zaXRvcnlcIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMuX3JlcG9zaXRvcnl8fCh0aGlzLl9yZXBvc2l0b3J5PW5ldyBKKHRoaXMpKSx0aGlzLl9yZXBvc2l0b3J5fX0se2tleTpcImVudHJpZXNcIix2YWx1ZTpmdW5jdGlvbiBlbnRyaWVzKCl7cmV0dXJuIHRoaXMucmVwb3NpdG9yeS5uZXdDcml0ZXJpYSgpfX1dKSxTdHJlYW19KCk7ZnVuY3Rpb24gRmllbGRDb2xsZWN0aW9uX3R5cGVvZih0KXtyZXR1cm4gRmllbGRDb2xsZWN0aW9uX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24gX3R5cGVvZih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sRmllbGRDb2xsZWN0aW9uX3R5cGVvZih0KX1mdW5jdGlvbiBGaWVsZENvbGxlY3Rpb25fY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIEZpZWxkQ29sbGVjdGlvbl9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiBGaWVsZENvbGxlY3Rpb25fc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YodCxyKXtyZXR1cm4gdC5fX3Byb3RvX189cix0fSxGaWVsZENvbGxlY3Rpb25fc2V0UHJvdG90eXBlT2YodCxyKX1mdW5jdGlvbiBGaWVsZENvbGxlY3Rpb25fY3JlYXRlU3VwZXIodCl7dmFyIHI9ZnVuY3Rpb24gRmllbGRDb2xsZWN0aW9uX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2godCl7cmV0dXJuITF9fSgpO3JldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpe3ZhciBvLGk9RmllbGRDb2xsZWN0aW9uX2dldFByb3RvdHlwZU9mKHQpO2lmKHIpe3ZhciBhPUZpZWxkQ29sbGVjdGlvbl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtvPVJlZmxlY3QuY29uc3RydWN0KGksYXJndW1lbnRzLGEpfWVsc2Ugbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gRmllbGRDb2xsZWN0aW9uX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcyxvKX19ZnVuY3Rpb24gRmllbGRDb2xsZWN0aW9uX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCxyKXtpZihyJiYoXCJvYmplY3RcIj09PUZpZWxkQ29sbGVjdGlvbl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBmdW5jdGlvbiBGaWVsZENvbGxlY3Rpb25fYXNzZXJ0VGhpc0luaXRpYWxpemVkKHQpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiB0fSh0KX1mdW5jdGlvbiBGaWVsZENvbGxlY3Rpb25fZ2V0UHJvdG90eXBlT2YodCl7cmV0dXJuIEZpZWxkQ29sbGVjdGlvbl9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sRmllbGRDb2xsZWN0aW9uX2dldFByb3RvdHlwZU9mKHQpfXZhciBYPWZ1bmN0aW9uKHQpeyFmdW5jdGlvbiBGaWVsZENvbGxlY3Rpb25faW5oZXJpdHModCxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyJiZyLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHImJkZpZWxkQ29sbGVjdGlvbl9zZXRQcm90b3R5cGVPZih0LHIpfShGaWVsZENvbGxlY3Rpb24sdCk7dmFyIHI9RmllbGRDb2xsZWN0aW9uX2NyZWF0ZVN1cGVyKEZpZWxkQ29sbGVjdGlvbik7ZnVuY3Rpb24gRmllbGRDb2xsZWN0aW9uKCl7cmV0dXJuIEZpZWxkQ29sbGVjdGlvbl9jbGFzc0NhbGxDaGVjayh0aGlzLEZpZWxkQ29sbGVjdGlvbiksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEZpZWxkQ29sbGVjdGlvbn0odyk7ZnVuY3Rpb24gSHR0cF9kZWZpbmVQcm9wZXJ0aWVzKHQscil7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb107aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX12YXIgUT1mdW5jdGlvbigpe2Z1bmN0aW9uIEh0dHAoKXshZnVuY3Rpb24gSHR0cF9jbGFzc0NhbGxDaGVjayh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsSHR0cCl9cmV0dXJuIGZ1bmN0aW9uIEh0dHBfY3JlYXRlQ2xhc3ModCxyLG8pe3JldHVybiByJiZIdHRwX2RlZmluZVByb3BlcnRpZXModC5wcm90b3R5cGUsciksbyYmSHR0cF9kZWZpbmVQcm9wZXJ0aWVzKHQsbyksdH0oSHR0cCxbe2tleTpcImdldFN0cmVhbXNcIix2YWx1ZTpmdW5jdGlvbiBnZXRTdHJlYW1zKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlKCl7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlJChvKXtmb3IoOzspc3dpdGNoKG8ucHJldj1vLm5leHQpe2Nhc2UgMDpyZXR1cm4gci5wYXJhbXM9dCxvLmFicnVwdChcInJldHVyblwiLHRoaXMuZ2V0KFwiL3N0cmVhbXNcIixyKSk7Y2FzZSAyOmNhc2VcImVuZFwiOnJldHVybiBvLnN0b3AoKX19KSxfY2FsbGVlLHRoaXMpfSkpKX19LHtrZXk6XCJwb3N0U3RyZWFtXCIsdmFsdWU6ZnVuY3Rpb24gcG9zdFN0cmVhbSh0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWUyKCl7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlMiQobyl7Zm9yKDs7KXN3aXRjaChvLnByZXY9by5uZXh0KXtjYXNlIDA6cmV0dXJuIHIuZGF0YT10LG8uYWJydXB0KFwicmV0dXJuXCIsdGhpcy5wb3N0KFwiL3N0cmVhbXNcIix0LHIpKTtjYXNlIDI6Y2FzZVwiZW5kXCI6cmV0dXJuIG8uc3RvcCgpfX0pLF9jYWxsZWUyLHRoaXMpfSkpKX19LHtrZXk6XCJnZXRTdHJlYW1cIix2YWx1ZTpmdW5jdGlvbiBnZXRTdHJlYW0odCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG89YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMygpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTMkKGkpe2Zvcig7Oylzd2l0Y2goaS5wcmV2PWkubmV4dCl7Y2FzZSAwOnJldHVybiBvLnBhcmFtcz1yLGkuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5nZXQoXCIvc3RyZWFtcy9cIi5jb25jYXQodCksbykpO2Nhc2UgMjpjYXNlXCJlbmRcIjpyZXR1cm4gaS5zdG9wKCl9fSksX2NhbGxlZTMsdGhpcyl9KSkpfX0se2tleTpcInBhdGNoU3RyZWFtXCIsdmFsdWU6ZnVuY3Rpb24gcGF0Y2hTdHJlYW0odCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG89YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNCgpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTQkKGkpe2Zvcig7Oylzd2l0Y2goaS5wcmV2PWkubmV4dCl7Y2FzZSAwOnJldHVybiBvLnBhcmFtcz1yLGkuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5wYXRjaChcIi9zdHJlYW1zL1wiLmNvbmNhdCh0KSxvKSk7Y2FzZSAyOmNhc2VcImVuZFwiOnJldHVybiBpLnN0b3AoKX19KSxfY2FsbGVlNCx0aGlzKX0pKSl9fSx7a2V5OlwicHV0U3RyZWFtXCIsdmFsdWU6ZnVuY3Rpb24gcHV0U3RyZWFtKHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxvPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTUoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWU1JChpKXtmb3IoOzspc3dpdGNoKGkucHJldj1pLm5leHQpe2Nhc2UgMDpyZXR1cm4gby5wYXJhbXM9cixpLmFicnVwdChcInJldHVyblwiLHRoaXMucHV0KFwiL3N0cmVhbXMvXCIuY29uY2F0KHQpLG8pKTtjYXNlIDI6Y2FzZVwiZW5kXCI6cmV0dXJuIGkuc3RvcCgpfX0pLF9jYWxsZWU1LHRoaXMpfSkpKX19LHtrZXk6XCJkZWxldGVTdHJlYW1cIix2YWx1ZTpmdW5jdGlvbiBkZWxldGVTdHJlYW0odCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNigpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTYkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiBvLmFicnVwdChcInJldHVyblwiLHRoaXMuZGVsZXRlKFwiL3N0cmVhbXMvXCIuY29uY2F0KHQpLHIpKTtjYXNlIDE6Y2FzZVwiZW5kXCI6cmV0dXJuIG8uc3RvcCgpfX0pLF9jYWxsZWU2LHRoaXMpfSkpKX19LHtrZXk6XCJnZXRFbnRyaWVzXCIsdmFsdWU6ZnVuY3Rpb24gZ2V0RW50cmllcyh0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e30saT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106e307cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWU3KCl7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlNyQoYSl7Zm9yKDs7KXN3aXRjaChhLnByZXY9YS5uZXh0KXtjYXNlIDA6cmV0dXJuIGkuZGF0YT1yLGkucGFyYW1zPW8sYS5hYnJ1cHQoXCJyZXR1cm5cIix0aGlzLmdldChcIi9zdHJlYW1zL1wiLmNvbmNhdCh0LFwiL2VudHJpZXNcIiksT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHtyZXNwb25zZVR5cGU6XCJqc29uXCIsaGVhZGVyczp7XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn19KSkpO2Nhc2UgMzpjYXNlXCJlbmRcIjpyZXR1cm4gYS5zdG9wKCl9fSksX2NhbGxlZTcsdGhpcyl9KSkpfX0se2tleTpcInBvc3RFbnRyeVwiLHZhbHVlOmZ1bmN0aW9uIHBvc3RFbnRyeSh0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWU4KCl7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlOCQoaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6cmV0dXJuIG8uZGF0YT1yLGkuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5wb3N0KFwiL3N0cmVhbXMvXCIuY29uY2F0KHQsXCIvZW50cmllc1wiKSxyLG8pKTtjYXNlIDI6Y2FzZVwiZW5kXCI6cmV0dXJuIGkuc3RvcCgpfX0pLF9jYWxsZWU4LHRoaXMpfSkpKX19LHtrZXk6XCJnZXRFbnRyeVwiLHZhbHVlOmZ1bmN0aW9uIGdldEVudHJ5KHQscil7dmFyIG89YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlOSgpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTkkKGkpe2Zvcig7Oylzd2l0Y2goaS5wcmV2PWkubmV4dCl7Y2FzZSAwOnJldHVybiBpLmFicnVwdChcInJldHVyblwiLHRoaXMuZ2V0KFwiL3N0cmVhbXMvXCIuY29uY2F0KHQsXCIvZW50cmllcy9cIikuY29uY2F0KHIpLG8pKTtjYXNlIDE6Y2FzZVwiZW5kXCI6cmV0dXJuIGkuc3RvcCgpfX0pLF9jYWxsZWU5LHRoaXMpfSkpKX19LHtrZXk6XCJwYXRjaEVudHJ5XCIsdmFsdWU6ZnVuY3Rpb24gcGF0Y2hFbnRyeSh0LHIpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fSxpPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTp7fTtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTEwKCl7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlMTAkKGEpe2Zvcig7Oylzd2l0Y2goYS5wcmV2PWEubmV4dCl7Y2FzZSAwOnJldHVybiBpLmRhdGE9byxhLmFicnVwdChcInJldHVyblwiLHRoaXMucGF0Y2goXCIvc3RyZWFtcy9cIi5jb25jYXQodCxcIi9lbnRyaWVzL1wiKS5jb25jYXQociksaSkpO2Nhc2UgMjpjYXNlXCJlbmRcIjpyZXR1cm4gYS5zdG9wKCl9fSksX2NhbGxlZTEwLHRoaXMpfSkpKX19LHtrZXk6XCJwdXRFbnRyeVwiLHZhbHVlOmZ1bmN0aW9uIHB1dEVudHJ5KHQscil7dmFyIG89YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LGk9YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOnt9O3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMTEoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUxMSQoYSl7Zm9yKDs7KXN3aXRjaChhLnByZXY9YS5uZXh0KXtjYXNlIDA6cmV0dXJuIGkuZGF0YT1vLGEuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5wdXQoXCIvc3RyZWFtcy9cIi5jb25jYXQodCxcIi9lbnRyaWVzL1wiKS5jb25jYXQociksaSkpO2Nhc2UgMjpjYXNlXCJlbmRcIjpyZXR1cm4gYS5zdG9wKCl9fSksX2NhbGxlZTExLHRoaXMpfSkpKX19LHtrZXk6XCJkZWxldGVFbnRyeVwiLHZhbHVlOmZ1bmN0aW9uIGRlbGV0ZUVudHJ5KHQscil7dmFyIG89YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMTIoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUxMiQoaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6cmV0dXJuIGkuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5wYXRjaChcIi9zdHJlYW1zL1wiLmNvbmNhdCh0LFwiL2VudHJpZXMvXCIpLmNvbmNhdChyKSxvKSk7Y2FzZSAxOmNhc2VcImVuZFwiOnJldHVybiBpLnN0b3AoKX19KSxfY2FsbGVlMTIsdGhpcyl9KSkpfX0se2tleTpcImdldFVyaVwiLHZhbHVlOmZ1bmN0aW9uIGdldFVyaSh0KXtyZXR1cm4gdGhpcy5heGlvcy5nZXRVcmkodCl9fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24gZ2V0KHQscil7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWUxMygpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTEzJChvKXtmb3IoOzspc3dpdGNoKG8ucHJldj1vLm5leHQpe2Nhc2UgMDpyZXR1cm4gby5hYnJ1cHQoXCJyZXR1cm5cIix0aGlzLnJlcXVlc3QoT2JqZWN0LmFzc2lnbih7dXJsOnQsbWV0aG9kOlwiR0VUXCJ9LHJ8fHt9KSkpO2Nhc2UgMTpjYXNlXCJlbmRcIjpyZXR1cm4gby5zdG9wKCl9fSksX2NhbGxlZTEzLHRoaXMpfSkpKX19LHtrZXk6XCJkZWxldGVcIix2YWx1ZTpmdW5jdGlvbiBfZGVsZXRlKHQscil7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWUxNCgpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTE0JChvKXtmb3IoOzspc3dpdGNoKG8ucHJldj1vLm5leHQpe2Nhc2UgMDpyZXR1cm4gby5hYnJ1cHQoXCJyZXR1cm5cIix0aGlzLnJlcXVlc3QoT2JqZWN0LmFzc2lnbih7dXJsOnQsbWV0aG9kOlwiREVMRVRFXCJ9LHJ8fHt9KSkpO2Nhc2UgMTpjYXNlXCJlbmRcIjpyZXR1cm4gby5zdG9wKCl9fSksX2NhbGxlZTE0LHRoaXMpfSkpKX19LHtrZXk6XCJoZWFkXCIsdmFsdWU6ZnVuY3Rpb24gaGVhZCh0LHIpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMTUoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUxNSQobyl7Zm9yKDs7KXN3aXRjaChvLnByZXY9by5uZXh0KXtjYXNlIDA6cmV0dXJuIG8uYWJydXB0KFwicmV0dXJuXCIsdGhpcy5yZXF1ZXN0KE9iamVjdC5hc3NpZ24oe3VybDp0LG1ldGhvZDpcIkhFQURcIn0scnx8e30pKSk7Y2FzZSAxOmNhc2VcImVuZFwiOnJldHVybiBvLnN0b3AoKX19KSxfY2FsbGVlMTUsdGhpcyl9KSkpfX0se2tleTpcIm9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbiBvcHRpb25zKHQscil7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWUxNigpe3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTE2JChvKXtmb3IoOzspc3dpdGNoKG8ucHJldj1vLm5leHQpe2Nhc2UgMDpyZXR1cm4gby5hYnJ1cHQoXCJyZXR1cm5cIix0aGlzLnJlcXVlc3QoT2JqZWN0LmFzc2lnbih7dXJsOnQsbWV0aG9kOlwiT1BUSU9OU1wifSxyfHx7fSkpKTtjYXNlIDE6Y2FzZVwiZW5kXCI6cmV0dXJuIG8uc3RvcCgpfX0pLF9jYWxsZWUxNix0aGlzKX0pKSl9fSx7a2V5OlwicG9zdFwiLHZhbHVlOmZ1bmN0aW9uIHBvc3QodCxyLG8pe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMTcoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUxNyQoaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6cmV0dXJuIGkuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5yZXF1ZXN0KE9iamVjdC5hc3NpZ24oe3VybDp0LG1ldGhvZDpcIlBPU1RcIixkYXRhOnJ9LG98fHt9KSkpO2Nhc2UgMTpjYXNlXCJlbmRcIjpyZXR1cm4gaS5zdG9wKCl9fSksX2NhbGxlZTE3LHRoaXMpfSkpKX19LHtrZXk6XCJwdXRcIix2YWx1ZTpmdW5jdGlvbiBwdXQodCxyLG8pe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMTgoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUxOCQoaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6cmV0dXJuIGkuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5yZXF1ZXN0KE9iamVjdC5hc3NpZ24oe3VybDp0LG1ldGhvZDpcIlBVVFwiLGRhdGE6cn0sb3x8e30pKSk7Y2FzZSAxOmNhc2VcImVuZFwiOnJldHVybiBpLnN0b3AoKX19KSxfY2FsbGVlMTgsdGhpcyl9KSkpfX0se2tleTpcInBhdGNoXCIsdmFsdWU6ZnVuY3Rpb24gcGF0Y2godCxyLG8pe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlMTkoKXtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUxOSQoaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6cmV0dXJuIGkuYWJydXB0KFwicmV0dXJuXCIsdGhpcy5yZXF1ZXN0KE9iamVjdC5hc3NpZ24oe3VybDp0LG1ldGhvZDpcIlBBVENIXCIsZGF0YTpyfSxvfHx7fSkpKTtjYXNlIDE6Y2FzZVwiZW5kXCI6cmV0dXJuIGkuc3RvcCgpfX0pLF9jYWxsZWUxOSx0aGlzKX0pKSl9fSx7a2V5OlwiY29uc3RydWN0ZWRcIix2YWx1ZTpmdW5jdGlvbiBjb25zdHJ1Y3RlZCgpe3RoaXMuY2FuY2VsVG9rZW5Tb3VyY2U9dGhpcy5BeGlvcy5DYW5jZWxUb2tlbi5zb3VyY2UoKX19LHtrZXk6XCJyZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24gcmVxdWVzdCh0KXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTIwKCl7dmFyIHI7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlMjAkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiB0LmNhbmNlbFRva2VuPXRoaXMuY2FuY2VsVG9rZW5Tb3VyY2UudG9rZW4sby5wcmV2PTEsby5uZXh0PTQsdGhpcy5heGlvcy5yZXF1ZXN0KHQpO2Nhc2UgNDpyZXR1cm4gcj1vLnNlbnQsci5kYXRhLHIuaGVhZGVycyxyLnN0YXR1cyxyLnN0YXR1c1RleHQsby5hYnJ1cHQoXCJyZXR1cm5cIixyLmRhdGEpO2Nhc2UgOTp0aHJvdyBvLnByZXY9OSxvLnQwPW8uY2F0Y2goMSksQygpLmlzQ2FuY2VsKG8udDApLG8udDA7Y2FzZSAxMzpjYXNlXCJlbmRcIjpyZXR1cm4gby5zdG9wKCl9fSksX2NhbGxlZTIwLHRoaXMsW1sxLDldXSl9KSkpfX1dKSxIdHRwfSgpO2Z1bmN0aW9uIFN0cmVhbXNfZGVmaW5lUHJvcGVydGllcyh0LHIpe2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19X19kZWNvcmF0ZShbYihcImF4aW9zXCIpXSxRLnByb3RvdHlwZSxcIkF4aW9zXCIsdm9pZCAwKSxfX2RlY29yYXRlKFtiKFwiaHR0cFwiKV0sUS5wcm90b3R5cGUsXCJheGlvc1wiLHZvaWQgMCksX19kZWNvcmF0ZShbKDAsci56WSkoKV0sUS5wcm90b3R5cGUsXCJjb25zdHJ1Y3RlZFwiLG51bGwpLFE9X19kZWNvcmF0ZShbKDAsci5iMikoKV0sUSk7dmFyIFo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBTdHJlYW1zKCl7IWZ1bmN0aW9uIFN0cmVhbXNfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLFN0cmVhbXMpfXJldHVybiBmdW5jdGlvbiBTdHJlYW1zX2NyZWF0ZUNsYXNzKHQscixvKXtyZXR1cm4gciYmU3RyZWFtc19kZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLHIpLG8mJlN0cmVhbXNfZGVmaW5lUHJvcGVydGllcyh0LG8pLHR9KFN0cmVhbXMsW3trZXk6XCJhbGxcIix2YWx1ZTpmdW5jdGlvbiBhbGwoKXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZSgpe3ZhciB0O3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZSQocil7Zm9yKDs7KXN3aXRjaChyLnByZXY9ci5uZXh0KXtjYXNlIDA6cmV0dXJuIHIubmV4dD0yLHRoaXMuaHR0cC5nZXRTdHJlYW1zKCk7Y2FzZSAyOnJldHVybiB0PXIuc2VudCxyLmFicnVwdChcInJldHVyblwiLHQuZGF0YS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgWSh0KX0pKSk7Y2FzZSA0OmNhc2VcImVuZFwiOnJldHVybiByLnN0b3AoKX19KSxfY2FsbGVlLHRoaXMpfSkpKX19LHtrZXk6XCJtYWtlXCIsdmFsdWU6ZnVuY3Rpb24gbWFrZSh0KXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCx1KCkubWFyaygoZnVuY3Rpb24gX2NhbGxlZTIoKXt2YXIgcjtyZXR1cm4gdSgpLndyYXAoKGZ1bmN0aW9uIF9jYWxsZWUyJChvKXtmb3IoOzspc3dpdGNoKG8ucHJldj1vLm5leHQpe2Nhc2UgMDpyZXR1cm4gby5uZXh0PTIsdGhpcy5odHRwLmdldFN0cmVhbSh0KTtjYXNlIDI6cmV0dXJuIHI9by5zZW50LG8uYWJydXB0KFwicmV0dXJuXCIsbmV3IFkoci5kYXRhLHIubWV0YSxyLmxpbmtzKSk7Y2FzZSA0OmNhc2VcImVuZFwiOnJldHVybiBvLnN0b3AoKX19KSxfY2FsbGVlMix0aGlzKX0pKSl9fSx7a2V5OlwiZW50cmllc1wiLHZhbHVlOmZ1bmN0aW9uIGVudHJpZXModCl7cmV0dXJuIF9fYXdhaXRlcih0aGlzLHZvaWQgMCx2b2lkIDAsdSgpLm1hcmsoKGZ1bmN0aW9uIF9jYWxsZWUzKCl7dmFyIHI7cmV0dXJuIHUoKS53cmFwKChmdW5jdGlvbiBfY2FsbGVlMyQobyl7Zm9yKDs7KXN3aXRjaChvLnByZXY9by5uZXh0KXtjYXNlIDA6cmV0dXJuIG8ubmV4dD0yLHRoaXMubWFrZSh0KTtjYXNlIDI6cmV0dXJuIHI9by5zZW50LG8uYWJydXB0KFwicmV0dXJuXCIsbmV3IHoocikpO2Nhc2UgNDpjYXNlXCJlbmRcIjpyZXR1cm4gby5zdG9wKCl9fSksX2NhbGxlZTMsdGhpcyl9KSkpfX0se2tleTpcInJlcG9zaXRvcnlcIix2YWx1ZTpmdW5jdGlvbiByZXBvc2l0b3J5KHQpe3JldHVybiBfX2F3YWl0ZXIodGhpcyx2b2lkIDAsdm9pZCAwLHUoKS5tYXJrKChmdW5jdGlvbiBfY2FsbGVlNCgpe3ZhciByO3JldHVybiB1KCkud3JhcCgoZnVuY3Rpb24gX2NhbGxlZTQkKG8pe2Zvcig7Oylzd2l0Y2goby5wcmV2PW8ubmV4dCl7Y2FzZSAwOnJldHVybiBvLm5leHQ9Mix0aGlzLm1ha2UodCk7Y2FzZSAyOnJldHVybiByPW8uc2VudCxvLmFicnVwdChcInJldHVyblwiLG5ldyBKKHIpKTtjYXNlIDQ6Y2FzZVwiZW5kXCI6cmV0dXJuIG8uc3RvcCgpfX0pLF9jYWxsZWU0LHRoaXMpfSkpKX19LHtrZXk6XCJjb2xsZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24gY29sbGVjdGlvbigpe319XSksU3RyZWFtc30oKTtmdW5jdGlvbiBTdHJlYW1zU2VydmljZVByb3ZpZGVyX3R5cGVvZih0KXtyZXR1cm4gU3RyZWFtc1NlcnZpY2VQcm92aWRlcl90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbiBfdHlwZW9mKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LFN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJfdHlwZW9mKHQpfWZ1bmN0aW9uIFN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJfY2xhc3NDYWxsQ2hlY2sodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIFN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJfZGVmaW5lUHJvcGVydGllcyh0LHIpe2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19ZnVuY3Rpb24gU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiBTdHJlYW1zU2VydmljZVByb3ZpZGVyX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIHQuX19wcm90b19fPXIsdH0sU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpfWZ1bmN0aW9uIFN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJfY3JlYXRlU3VwZXIodCl7dmFyIHI9ZnVuY3Rpb24gU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKXt2YXIgbyxpPVN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJfZ2V0UHJvdG90eXBlT2YodCk7aWYocil7dmFyIGE9U3RyZWFtc1NlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtvPVJlZmxlY3QuY29uc3RydWN0KGksYXJndW1lbnRzLGEpfWVsc2Ugbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsbyl9fWZ1bmN0aW9uIFN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LHIpe2lmKHImJihcIm9iamVjdFwiPT09U3RyZWFtc1NlcnZpY2VQcm92aWRlcl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBmdW5jdGlvbiBTdHJlYW1zU2VydmljZVByb3ZpZGVyX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH0odCl9ZnVuY3Rpb24gU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0KX1fX2RlY29yYXRlKFtiKFwiY29uZmlnXCIpXSxaLnByb3RvdHlwZSxcImNvbmZpZ1wiLHZvaWQgMCksX19kZWNvcmF0ZShbYihcInN0cmVhbXMuaHR0cFwiKV0sWi5wcm90b3R5cGUsXCJodHRwXCIsdm9pZCAwKSxaPV9fZGVjb3JhdGUoWygwLHIuYjIpKCldLFopO3ZhciBlZT1mdW5jdGlvbih0KXshZnVuY3Rpb24gU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9pbmhlcml0cyh0LHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHImJnIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksciYmU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpfShTdHJlYW1zU2VydmljZVByb3ZpZGVyLHQpO3ZhciByPVN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJfY3JlYXRlU3VwZXIoU3RyZWFtc1NlcnZpY2VQcm92aWRlcik7ZnVuY3Rpb24gU3RyZWFtc1NlcnZpY2VQcm92aWRlcigpe3JldHVybiBTdHJlYW1zU2VydmljZVByb3ZpZGVyX2NsYXNzQ2FsbENoZWNrKHRoaXMsU3RyZWFtc1NlcnZpY2VQcm92aWRlciksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGZ1bmN0aW9uIFN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJfY3JlYXRlQ2xhc3ModCxyLG8pe3JldHVybiByJiZTdHJlYW1zU2VydmljZVByb3ZpZGVyX2RlZmluZVByb3BlcnRpZXModC5wcm90b3R5cGUsciksbyYmU3RyZWFtc1NlcnZpY2VQcm92aWRlcl9kZWZpbmVQcm9wZXJ0aWVzKHQsbyksdH0oU3RyZWFtc1NlcnZpY2VQcm92aWRlcixbe2tleTpcInJlZ2lzdGVyXCIsdmFsdWU6ZnVuY3Rpb24gcmVnaXN0ZXIoKXt0aGlzLmFwcC5zaW5nbGV0b24oXCJzdHJlYW1zXCIsWikuYWRkQmluZGluZ0dldHRlcihcInN0cmVhbXNcIiksdGhpcy5hcHAuc2luZ2xldG9uKFwic3RyZWFtcy5odHRwXCIsUSl9fV0pLFN0cmVhbXNTZXJ2aWNlUHJvdmlkZXJ9KGgpO2Z1bmN0aW9uIENvcmVTZXJ2aWNlUHJvdmlkZXJfdHlwZW9mKHQpe3JldHVybiBDb3JlU2VydmljZVByb3ZpZGVyX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24gX3R5cGVvZih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sQ29yZVNlcnZpY2VQcm92aWRlcl90eXBlb2YodCl9ZnVuY3Rpb24gQ29yZVNlcnZpY2VQcm92aWRlcl9jbGFzc0NhbGxDaGVjayh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gQ29yZVNlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpe3JldHVybiBDb3JlU2VydmljZVByb3ZpZGVyX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQscil7cmV0dXJuIHQuX19wcm90b19fPXIsdH0sQ29yZVNlcnZpY2VQcm92aWRlcl9zZXRQcm90b3R5cGVPZih0LHIpfWZ1bmN0aW9uIENvcmVTZXJ2aWNlUHJvdmlkZXJfY3JlYXRlU3VwZXIodCl7dmFyIHI9ZnVuY3Rpb24gQ29yZVNlcnZpY2VQcm92aWRlcl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKXt2YXIgbyxpPUNvcmVTZXJ2aWNlUHJvdmlkZXJfZ2V0UHJvdG90eXBlT2YodCk7aWYocil7dmFyIGE9Q29yZVNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtvPVJlZmxlY3QuY29uc3RydWN0KGksYXJndW1lbnRzLGEpfWVsc2Ugbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gQ29yZVNlcnZpY2VQcm92aWRlcl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsbyl9fWZ1bmN0aW9uIENvcmVTZXJ2aWNlUHJvdmlkZXJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LHIpe2lmKHImJihcIm9iamVjdFwiPT09Q29yZVNlcnZpY2VQcm92aWRlcl90eXBlb2Yocil8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpKXJldHVybiByO2lmKHZvaWQgMCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBmdW5jdGlvbiBDb3JlU2VydmljZVByb3ZpZGVyX2Fzc2VydFRoaXNJbml0aWFsaXplZCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH0odCl9ZnVuY3Rpb24gQ29yZVNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gQ29yZVNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sQ29yZVNlcnZpY2VQcm92aWRlcl9nZXRQcm90b3R5cGVPZih0KX12YXIgdGU9ZnVuY3Rpb24odCl7IWZ1bmN0aW9uIENvcmVTZXJ2aWNlUHJvdmlkZXJfaW5oZXJpdHModCxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyJiZyLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHImJkNvcmVTZXJ2aWNlUHJvdmlkZXJfc2V0UHJvdG90eXBlT2YodCxyKX0oQ29yZVNlcnZpY2VQcm92aWRlcix0KTt2YXIgcj1Db3JlU2VydmljZVByb3ZpZGVyX2NyZWF0ZVN1cGVyKENvcmVTZXJ2aWNlUHJvdmlkZXIpO2Z1bmN0aW9uIENvcmVTZXJ2aWNlUHJvdmlkZXIoKXt2YXIgdDtyZXR1cm4gQ29yZVNlcnZpY2VQcm92aWRlcl9jbGFzc0NhbGxDaGVjayh0aGlzLENvcmVTZXJ2aWNlUHJvdmlkZXIpLCh0PXIuYXBwbHkodGhpcyxhcmd1bWVudHMpKS5wcm92aWRlcnM9W0QsayxlZV0sdH1yZXR1cm4gQ29yZVNlcnZpY2VQcm92aWRlcn0oaCl9KSgpO3ZhciBpPW8uTXgsYT1vLkZFLGM9by5TTCx1PW8uVlIsbD1vLlVwLHA9by5rUyxkPW8uckYsaD1vLmdOLHk9by5pcCx2PW8uZVYsZz1vLmU2LF89by5QdixtPW8uamcsYj1vLl9qLHc9by5VVCxTPW8uTDksQz1vLkpKLE89by5HWCxUPW8uRjYsRT1vLlZFLFA9by5MUCxBPW8uJFQseD1vLmwyLEk9by5pQyxrPW8uZjMsTj1vLkVSLFI9by5HbjtleHBvcnR7aSBhcyBBcHBsaWNhdGlvbixhIGFzIENvbGxlY3Rpb24sYyBhcyBDb3JlU2VydmljZVByb3ZpZGVyLHUgYXMgQ3JpdGVyaWEsbCBhcyBEaXNwYXRjaGVyLHAgYXMgRW50cnksZCBhcyBFbnRyeUNvbGxlY3Rpb24saCBhcyBGaWVsZCx5IGFzIEZpZWxkQ29sbGVjdGlvbix2IGFzIEh0dHAsZyBhcyBIdHRwU2VydmljZVByb3ZpZGVyLF8gYXMgTG9jYWxTdG9yYWdlQWRhcHRlcixtIGFzIFBhZ2luYXRlZEVudHJ5Q29sbGVjdGlvbixiIGFzIFJlcG9zaXRvcnksdyBhcyBTZXJ2aWNlUHJvdmlkZXIsUyBhcyBTZXNzaW9uU3RvcmFnZUFkYXB0ZXIsQyBhcyBTdG9yYWdlQWRhcHRlcixPIGFzIFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXIsVCBhcyBTdHJlYW0sRSBhcyBTdHJlYW1zLFAgYXMgU3RyZWFtc1NlcnZpY2VQcm92aWRlcixBIGFzIFRyYW5zZm9ybWVyLHggYXMgYXBwLEkgYXMgY29tcGFyaXNvbk9wZXJhdG9ycyxrIGFzIGluamVjdCxOIGFzIGxvZ2ljYWxPcGVyYXRvcnMsUiBhcyBvcGVyYXRvcnN9OyIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuQWxwaW5lID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIGZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTtcbiAgICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7XG4gICAgICB9KTtcbiAgICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTtcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5cztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTtcblxuICAgICAgaWYgKGkgJSAyKSB7XG4gICAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgLy8gVGhhbmtzIEBzdGltdWx1czpcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3N0aW11bHVzanMvc3RpbXVsdXMvYmxvYi9tYXN0ZXIvcGFja2FnZXMvJTQwc3RpbXVsdXMvY29yZS9zcmMvYXBwbGljYXRpb24udHNcbiAgZnVuY3Rpb24gZG9tUmVhZHkoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gXCJsb2FkaW5nXCIpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgcmVzb2x2ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gYXJyYXlVbmlxdWUoYXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KGFycmF5KSk7XG4gIH1cbiAgZnVuY3Rpb24gaXNUZXN0aW5nKCkge1xuICAgIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwiTm9kZS5qc1wiKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwianNkb21cIik7XG4gIH1cbiAgZnVuY3Rpb24gY2hlY2tlZEF0dHJMb29zZUNvbXBhcmUodmFsdWVBLCB2YWx1ZUIpIHtcbiAgICByZXR1cm4gdmFsdWVBID09IHZhbHVlQjtcbiAgfVxuICBmdW5jdGlvbiB3YXJuSWZNYWxmb3JtZWRUZW1wbGF0ZShlbCwgZGlyZWN0aXZlKSB7XG4gICAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3RlbXBsYXRlJykge1xuICAgICAgY29uc29sZS53YXJuKGBBbHBpbmU6IFske2RpcmVjdGl2ZX1dIGRpcmVjdGl2ZSBzaG91bGQgb25seSBiZSBhZGRlZCB0byA8dGVtcGxhdGU+IHRhZ3MuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYWxwaW5lanMvYWxwaW5lIyR7ZGlyZWN0aXZlfWApO1xuICAgIH0gZWxzZSBpZiAoZWwuY29udGVudC5jaGlsZEVsZW1lbnRDb3VudCAhPT0gMSkge1xuICAgICAgY29uc29sZS53YXJuKGBBbHBpbmU6IDx0ZW1wbGF0ZT4gdGFnIHdpdGggWyR7ZGlyZWN0aXZlfV0gZW5jb3VudGVyZWQgd2l0aCBhbiB1bmV4cGVjdGVkIG51bWJlciBvZiByb290IGVsZW1lbnRzLiBNYWtlIHN1cmUgPHRlbXBsYXRlPiBoYXMgYSBzaW5nbGUgcm9vdCBlbGVtZW50LiBgKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24ga2ViYWJDYXNlKHN1YmplY3QpIHtcbiAgICByZXR1cm4gc3ViamVjdC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCAnJDEtJDInKS5yZXBsYWNlKC9bX1xcc10vLCAnLScpLnRvTG93ZXJDYXNlKCk7XG4gIH1cbiAgZnVuY3Rpb24gY2FtZWxDYXNlKHN1YmplY3QpIHtcbiAgICByZXR1cm4gc3ViamVjdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0oXFx3KS9nLCAobWF0Y2gsIGNoYXIpID0+IGNoYXIudG9VcHBlckNhc2UoKSk7XG4gIH1cbiAgZnVuY3Rpb24gd2FsayhlbCwgY2FsbGJhY2spIHtcbiAgICBpZiAoY2FsbGJhY2soZWwpID09PSBmYWxzZSkgcmV0dXJuO1xuICAgIGxldCBub2RlID0gZWwuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgd2Fsayhub2RlLCBjYWxsYmFjayk7XG4gICAgICBub2RlID0gbm9kZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQpIHtcbiAgICB2YXIgdGltZW91dDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLFxuICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIH07XG5cbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgaGFuZGxlRXJyb3IgPSAoZWwsIGV4cHJlc3Npb24sIGVycm9yKSA9PiB7XG4gICAgY29uc29sZS53YXJuKGBBbHBpbmUgRXJyb3I6IFwiJHtlcnJvcn1cIlxcblxcbkV4cHJlc3Npb246IFwiJHtleHByZXNzaW9ufVwiXFxuRWxlbWVudDpgLCBlbCk7XG5cbiAgICBpZiAoIWlzVGVzdGluZygpKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGVycm9yLCB7XG4gICAgICAgIGVsLFxuICAgICAgICBleHByZXNzaW9uXG4gICAgICB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiB0cnlDYXRjaChjYiwge1xuICAgIGVsLFxuICAgIGV4cHJlc3Npb25cbiAgfSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNiKCk7XG4gICAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlID8gdmFsdWUuY2F0Y2goZSA9PiBoYW5kbGVFcnJvcihlbCwgZXhwcmVzc2lvbiwgZSkpIDogdmFsdWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaGFuZGxlRXJyb3IoZWwsIGV4cHJlc3Npb24sIGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNhZmVyRXZhbChlbCwgZXhwcmVzc2lvbiwgZGF0YUNvbnRleHQsIGFkZGl0aW9uYWxIZWxwZXJWYXJpYWJsZXMgPSB7fSkge1xuICAgIHJldHVybiB0cnlDYXRjaCgoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGV4cHJlc3Npb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGV4cHJlc3Npb24uY2FsbChkYXRhQ29udGV4dCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oWyckZGF0YScsIC4uLk9iamVjdC5rZXlzKGFkZGl0aW9uYWxIZWxwZXJWYXJpYWJsZXMpXSwgYHZhciBfX2FscGluZV9yZXN1bHQ7IHdpdGgoJGRhdGEpIHsgX19hbHBpbmVfcmVzdWx0ID0gJHtleHByZXNzaW9ufSB9OyByZXR1cm4gX19hbHBpbmVfcmVzdWx0YCkoZGF0YUNvbnRleHQsIC4uLk9iamVjdC52YWx1ZXMoYWRkaXRpb25hbEhlbHBlclZhcmlhYmxlcykpO1xuICAgIH0sIHtcbiAgICAgIGVsLFxuICAgICAgZXhwcmVzc2lvblxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIHNhZmVyRXZhbE5vUmV0dXJuKGVsLCBleHByZXNzaW9uLCBkYXRhQ29udGV4dCwgYWRkaXRpb25hbEhlbHBlclZhcmlhYmxlcyA9IHt9KSB7XG4gICAgcmV0dXJuIHRyeUNhdGNoKCgpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZXhwcmVzc2lvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGV4cHJlc3Npb24uY2FsbChkYXRhQ29udGV4dCwgYWRkaXRpb25hbEhlbHBlclZhcmlhYmxlc1snJGV2ZW50J10pKTtcbiAgICAgIH1cblxuICAgICAgbGV0IEFzeW5jRnVuY3Rpb24gPSBGdW5jdGlvbjtcbiAgICAgIC8qIE1PREVSTi1PTkxZOlNUQVJUICovXG5cbiAgICAgIEFzeW5jRnVuY3Rpb24gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYXN5bmMgZnVuY3Rpb24gKCkge30pLmNvbnN0cnVjdG9yO1xuICAgICAgLyogTU9ERVJOLU9OTFk6RU5EICovXG4gICAgICAvLyBGb3IgdGhlIGNhc2VzIHdoZW4gdXNlcnMgcGFzcyBvbmx5IGEgZnVuY3Rpb24gcmVmZXJlbmNlIHRvIHRoZSBjYWxsZXI6IGB4LW9uOmNsaWNrPVwiZm9vXCJgXG4gICAgICAvLyBXaGVyZSBcImZvb1wiIGlzIGEgZnVuY3Rpb24uIEFsc28sIHdlJ2xsIHBhc3MgdGhlIGZ1bmN0aW9uIHRoZSBldmVudCBpbnN0YW5jZSB3aGVuIHdlIGNhbGwgaXQuXG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhkYXRhQ29udGV4dCkuaW5jbHVkZXMoZXhwcmVzc2lvbikpIHtcbiAgICAgICAgbGV0IG1ldGhvZFJlZmVyZW5jZSA9IG5ldyBGdW5jdGlvbihbJ2RhdGFDb250ZXh0JywgLi4uT2JqZWN0LmtleXMoYWRkaXRpb25hbEhlbHBlclZhcmlhYmxlcyldLCBgd2l0aChkYXRhQ29udGV4dCkgeyByZXR1cm4gJHtleHByZXNzaW9ufSB9YCkoZGF0YUNvbnRleHQsIC4uLk9iamVjdC52YWx1ZXMoYWRkaXRpb25hbEhlbHBlclZhcmlhYmxlcykpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgbWV0aG9kUmVmZXJlbmNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtZXRob2RSZWZlcmVuY2UuY2FsbChkYXRhQ29udGV4dCwgYWRkaXRpb25hbEhlbHBlclZhcmlhYmxlc1snJGV2ZW50J10pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQXN5bmNGdW5jdGlvbihbJ2RhdGFDb250ZXh0JywgLi4uT2JqZWN0LmtleXMoYWRkaXRpb25hbEhlbHBlclZhcmlhYmxlcyldLCBgd2l0aChkYXRhQ29udGV4dCkgeyAke2V4cHJlc3Npb259IH1gKShkYXRhQ29udGV4dCwgLi4uT2JqZWN0LnZhbHVlcyhhZGRpdGlvbmFsSGVscGVyVmFyaWFibGVzKSkpO1xuICAgIH0sIHtcbiAgICAgIGVsLFxuICAgICAgZXhwcmVzc2lvblxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHhBdHRyUkUgPSAvXngtKG9ufGJpbmR8ZGF0YXx0ZXh0fGh0bWx8bW9kZWx8aWZ8Zm9yfHNob3d8Y2xvYWt8dHJhbnNpdGlvbnxyZWZ8c3ByZWFkKVxcYi87XG4gIGZ1bmN0aW9uIGlzWEF0dHIoYXR0cikge1xuICAgIGNvbnN0IG5hbWUgPSByZXBsYWNlQXRBbmRDb2xvbldpdGhTdGFuZGFyZFN5bnRheChhdHRyLm5hbWUpO1xuICAgIHJldHVybiB4QXR0clJFLnRlc3QobmFtZSk7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0WEF0dHJzKGVsLCBjb21wb25lbnQsIHR5cGUpIHtcbiAgICBsZXQgZGlyZWN0aXZlcyA9IEFycmF5LmZyb20oZWwuYXR0cmlidXRlcykuZmlsdGVyKGlzWEF0dHIpLm1hcChwYXJzZUh0bWxBdHRyaWJ1dGUpOyAvLyBHZXQgYW4gb2JqZWN0IG9mIGRpcmVjdGl2ZXMgZnJvbSB4LXNwcmVhZC5cblxuICAgIGxldCBzcHJlYWREaXJlY3RpdmUgPSBkaXJlY3RpdmVzLmZpbHRlcihkaXJlY3RpdmUgPT4gZGlyZWN0aXZlLnR5cGUgPT09ICdzcHJlYWQnKVswXTtcblxuICAgIGlmIChzcHJlYWREaXJlY3RpdmUpIHtcbiAgICAgIGxldCBzcHJlYWRPYmplY3QgPSBzYWZlckV2YWwoZWwsIHNwcmVhZERpcmVjdGl2ZS5leHByZXNzaW9uLCBjb21wb25lbnQuJGRhdGEpOyAvLyBBZGQgeC1zcHJlYWQgZGlyZWN0aXZlcyB0byB0aGUgcGlsZSBvZiBleGlzdGluZyBkaXJlY3RpdmVzLlxuXG4gICAgICBkaXJlY3RpdmVzID0gZGlyZWN0aXZlcy5jb25jYXQoT2JqZWN0LmVudHJpZXMoc3ByZWFkT2JqZWN0KS5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+IHBhcnNlSHRtbEF0dHJpYnV0ZSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHZhbHVlXG4gICAgICB9KSkpO1xuICAgIH1cblxuICAgIGlmICh0eXBlKSByZXR1cm4gZGlyZWN0aXZlcy5maWx0ZXIoaSA9PiBpLnR5cGUgPT09IHR5cGUpO1xuICAgIHJldHVybiBzb3J0RGlyZWN0aXZlcyhkaXJlY3RpdmVzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNvcnREaXJlY3RpdmVzKGRpcmVjdGl2ZXMpIHtcbiAgICBsZXQgZGlyZWN0aXZlT3JkZXIgPSBbJ2JpbmQnLCAnbW9kZWwnLCAnc2hvdycsICdjYXRjaC1hbGwnXTtcbiAgICByZXR1cm4gZGlyZWN0aXZlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBsZXQgdHlwZUEgPSBkaXJlY3RpdmVPcmRlci5pbmRleE9mKGEudHlwZSkgPT09IC0xID8gJ2NhdGNoLWFsbCcgOiBhLnR5cGU7XG4gICAgICBsZXQgdHlwZUIgPSBkaXJlY3RpdmVPcmRlci5pbmRleE9mKGIudHlwZSkgPT09IC0xID8gJ2NhdGNoLWFsbCcgOiBiLnR5cGU7XG4gICAgICByZXR1cm4gZGlyZWN0aXZlT3JkZXIuaW5kZXhPZih0eXBlQSkgLSBkaXJlY3RpdmVPcmRlci5pbmRleE9mKHR5cGVCKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlSHRtbEF0dHJpYnV0ZSh7XG4gICAgbmFtZSxcbiAgICB2YWx1ZVxuICB9KSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSByZXBsYWNlQXRBbmRDb2xvbldpdGhTdGFuZGFyZFN5bnRheChuYW1lKTtcbiAgICBjb25zdCB0eXBlTWF0Y2ggPSBub3JtYWxpemVkTmFtZS5tYXRjaCh4QXR0clJFKTtcbiAgICBjb25zdCB2YWx1ZU1hdGNoID0gbm9ybWFsaXplZE5hbWUubWF0Y2goLzooW2EtekEtWjAtOVxcLTpdKykvKTtcbiAgICBjb25zdCBtb2RpZmllcnMgPSBub3JtYWxpemVkTmFtZS5tYXRjaCgvXFwuW14uXFxdXSsoPz1bXlxcXV0qJCkvZykgfHwgW107XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHR5cGVNYXRjaCA/IHR5cGVNYXRjaFsxXSA6IG51bGwsXG4gICAgICB2YWx1ZTogdmFsdWVNYXRjaCA/IHZhbHVlTWF0Y2hbMV0gOiBudWxsLFxuICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMubWFwKGkgPT4gaS5yZXBsYWNlKCcuJywgJycpKSxcbiAgICAgIGV4cHJlc3Npb246IHZhbHVlXG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBpc0Jvb2xlYW5BdHRyKGF0dHJOYW1lKSB7XG4gICAgLy8gQXMgcGVyIEhUTUwgc3BlYyB0YWJsZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWwjYXR0cmlidXRlcy0zOmJvb2xlYW4tYXR0cmlidXRlXG4gICAgLy8gQXJyYXkgcm91Z2hseSBvcmRlcmVkIGJ5IGVzdGltYXRlZCB1c2FnZVxuICAgIGNvbnN0IGJvb2xlYW5BdHRyaWJ1dGVzID0gWydkaXNhYmxlZCcsICdjaGVja2VkJywgJ3JlcXVpcmVkJywgJ3JlYWRvbmx5JywgJ2hpZGRlbicsICdvcGVuJywgJ3NlbGVjdGVkJywgJ2F1dG9mb2N1cycsICdpdGVtc2NvcGUnLCAnbXVsdGlwbGUnLCAnbm92YWxpZGF0ZScsICdhbGxvd2Z1bGxzY3JlZW4nLCAnYWxsb3dwYXltZW50cmVxdWVzdCcsICdmb3Jtbm92YWxpZGF0ZScsICdhdXRvcGxheScsICdjb250cm9scycsICdsb29wJywgJ211dGVkJywgJ3BsYXlzaW5saW5lJywgJ2RlZmF1bHQnLCAnaXNtYXAnLCAncmV2ZXJzZWQnLCAnYXN5bmMnLCAnZGVmZXInLCAnbm9tb2R1bGUnXTtcbiAgICByZXR1cm4gYm9vbGVhbkF0dHJpYnV0ZXMuaW5jbHVkZXMoYXR0ck5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIHJlcGxhY2VBdEFuZENvbG9uV2l0aFN0YW5kYXJkU3ludGF4KG5hbWUpIHtcbiAgICBpZiAobmFtZS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoJ0AnLCAneC1vbjonKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUuc3RhcnRzV2l0aCgnOicpKSB7XG4gICAgICByZXR1cm4gbmFtZS5yZXBsYWNlKCc6JywgJ3gtYmluZDonKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZTtcbiAgfVxuICBmdW5jdGlvbiBjb252ZXJ0Q2xhc3NTdHJpbmdUb0FycmF5KGNsYXNzTGlzdCwgZmlsdGVyRm4gPSBCb29sZWFuKSB7XG4gICAgcmV0dXJuIGNsYXNzTGlzdC5zcGxpdCgnICcpLmZpbHRlcihmaWx0ZXJGbik7XG4gIH1cbiAgY29uc3QgVFJBTlNJVElPTl9UWVBFX0lOID0gJ2luJztcbiAgY29uc3QgVFJBTlNJVElPTl9UWVBFX09VVCA9ICdvdXQnO1xuICBjb25zdCBUUkFOU0lUSU9OX0NBTkNFTExFRCA9ICdjYW5jZWxsZWQnO1xuICBmdW5jdGlvbiB0cmFuc2l0aW9uSW4oZWwsIHNob3csIHJlamVjdCwgY29tcG9uZW50LCBmb3JjZVNraXAgPSBmYWxzZSkge1xuICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gdHJhbnNpdGlvbiBvbiB0aGUgaW5pdGlhbCBwYWdlIGxvYWQuXG4gICAgaWYgKGZvcmNlU2tpcCkgcmV0dXJuIHNob3coKTtcblxuICAgIGlmIChlbC5fX3hfdHJhbnNpdGlvbiAmJiBlbC5fX3hfdHJhbnNpdGlvbi50eXBlID09PSBUUkFOU0lUSU9OX1RZUEVfSU4pIHtcbiAgICAgIC8vIHRoZXJlIGlzIGFscmVhZHkgYSBzaW1pbGFyIHRyYW5zaXRpb24gZ29pbmcgb24sIHRoaXMgd2FzIHByb2JhYmx5IHRyaWdnZXJlZCBieVxuICAgICAgLy8gYSBjaGFuZ2UgaW4gYSBkaWZmZXJlbnQgcHJvcGVydHksIGxldCdzIGp1c3QgbGVhdmUgdGhlIHByZXZpb3VzIG9uZSBkb2luZyBpdHMgam9iXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYXR0cnMgPSBnZXRYQXR0cnMoZWwsIGNvbXBvbmVudCwgJ3RyYW5zaXRpb24nKTtcbiAgICBjb25zdCBzaG93QXR0ciA9IGdldFhBdHRycyhlbCwgY29tcG9uZW50LCAnc2hvdycpWzBdOyAvLyBJZiB0aGlzIGlzIHRyaWdnZXJlZCBieSBhIHgtc2hvdy50cmFuc2l0aW9uLlxuXG4gICAgaWYgKHNob3dBdHRyICYmIHNob3dBdHRyLm1vZGlmaWVycy5pbmNsdWRlcygndHJhbnNpdGlvbicpKSB7XG4gICAgICBsZXQgbW9kaWZpZXJzID0gc2hvd0F0dHIubW9kaWZpZXJzOyAvLyBJZiB4LXNob3cudHJhbnNpdGlvbi5vdXQsIHdlJ2xsIHNraXAgdGhlIFwiaW5cIiB0cmFuc2l0aW9uLlxuXG4gICAgICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKCdvdXQnKSAmJiAhbW9kaWZpZXJzLmluY2x1ZGVzKCdpbicpKSByZXR1cm4gc2hvdygpO1xuICAgICAgY29uc3Qgc2V0dGluZ0JvdGhTaWRlc09mVHJhbnNpdGlvbiA9IG1vZGlmaWVycy5pbmNsdWRlcygnaW4nKSAmJiBtb2RpZmllcnMuaW5jbHVkZXMoJ291dCcpOyAvLyBJZiB4LXNob3cudHJhbnNpdGlvbi5pbi4uLm91dC4uLiBvbmx5IHVzZSBcImluXCIgcmVsYXRlZCBtb2RpZmllcnMgZm9yIHRoaXMgdHJhbnNpdGlvbi5cblxuICAgICAgbW9kaWZpZXJzID0gc2V0dGluZ0JvdGhTaWRlc09mVHJhbnNpdGlvbiA/IG1vZGlmaWVycy5maWx0ZXIoKGksIGluZGV4KSA9PiBpbmRleCA8IG1vZGlmaWVycy5pbmRleE9mKCdvdXQnKSkgOiBtb2RpZmllcnM7XG4gICAgICB0cmFuc2l0aW9uSGVscGVySW4oZWwsIG1vZGlmaWVycywgc2hvdywgcmVqZWN0KTsgLy8gT3RoZXJ3aXNlLCB3ZSBjYW4gYXNzdW1lIHgtdHJhbnNpdGlvbjplbnRlci5cbiAgICB9IGVsc2UgaWYgKGF0dHJzLnNvbWUoYXR0ciA9PiBbJ2VudGVyJywgJ2VudGVyLXN0YXJ0JywgJ2VudGVyLWVuZCddLmluY2x1ZGVzKGF0dHIudmFsdWUpKSkge1xuICAgICAgdHJhbnNpdGlvbkNsYXNzZXNJbihlbCwgY29tcG9uZW50LCBhdHRycywgc2hvdywgcmVqZWN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgbmVpdGhlciwganVzdCBzaG93IHRoYXQgZGFtbiB0aGluZy5cbiAgICAgIHNob3coKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbk91dChlbCwgaGlkZSwgcmVqZWN0LCBjb21wb25lbnQsIGZvcmNlU2tpcCA9IGZhbHNlKSB7XG4gICAgLy8gV2UgZG9uJ3Qgd2FudCB0byB0cmFuc2l0aW9uIG9uIHRoZSBpbml0aWFsIHBhZ2UgbG9hZC5cbiAgICBpZiAoZm9yY2VTa2lwKSByZXR1cm4gaGlkZSgpO1xuXG4gICAgaWYgKGVsLl9feF90cmFuc2l0aW9uICYmIGVsLl9feF90cmFuc2l0aW9uLnR5cGUgPT09IFRSQU5TSVRJT05fVFlQRV9PVVQpIHtcbiAgICAgIC8vIHRoZXJlIGlzIGFscmVhZHkgYSBzaW1pbGFyIHRyYW5zaXRpb24gZ29pbmcgb24sIHRoaXMgd2FzIHByb2JhYmx5IHRyaWdnZXJlZCBieVxuICAgICAgLy8gYSBjaGFuZ2UgaW4gYSBkaWZmZXJlbnQgcHJvcGVydHksIGxldCdzIGp1c3QgbGVhdmUgdGhlIHByZXZpb3VzIG9uZSBkb2luZyBpdHMgam9iXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYXR0cnMgPSBnZXRYQXR0cnMoZWwsIGNvbXBvbmVudCwgJ3RyYW5zaXRpb24nKTtcbiAgICBjb25zdCBzaG93QXR0ciA9IGdldFhBdHRycyhlbCwgY29tcG9uZW50LCAnc2hvdycpWzBdO1xuXG4gICAgaWYgKHNob3dBdHRyICYmIHNob3dBdHRyLm1vZGlmaWVycy5pbmNsdWRlcygndHJhbnNpdGlvbicpKSB7XG4gICAgICBsZXQgbW9kaWZpZXJzID0gc2hvd0F0dHIubW9kaWZpZXJzO1xuICAgICAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcygnaW4nKSAmJiAhbW9kaWZpZXJzLmluY2x1ZGVzKCdvdXQnKSkgcmV0dXJuIGhpZGUoKTtcbiAgICAgIGNvbnN0IHNldHRpbmdCb3RoU2lkZXNPZlRyYW5zaXRpb24gPSBtb2RpZmllcnMuaW5jbHVkZXMoJ2luJykgJiYgbW9kaWZpZXJzLmluY2x1ZGVzKCdvdXQnKTtcbiAgICAgIG1vZGlmaWVycyA9IHNldHRpbmdCb3RoU2lkZXNPZlRyYW5zaXRpb24gPyBtb2RpZmllcnMuZmlsdGVyKChpLCBpbmRleCkgPT4gaW5kZXggPiBtb2RpZmllcnMuaW5kZXhPZignb3V0JykpIDogbW9kaWZpZXJzO1xuICAgICAgdHJhbnNpdGlvbkhlbHBlck91dChlbCwgbW9kaWZpZXJzLCBzZXR0aW5nQm90aFNpZGVzT2ZUcmFuc2l0aW9uLCBoaWRlLCByZWplY3QpO1xuICAgIH0gZWxzZSBpZiAoYXR0cnMuc29tZShhdHRyID0+IFsnbGVhdmUnLCAnbGVhdmUtc3RhcnQnLCAnbGVhdmUtZW5kJ10uaW5jbHVkZXMoYXR0ci52YWx1ZSkpKSB7XG4gICAgICB0cmFuc2l0aW9uQ2xhc3Nlc091dChlbCwgY29tcG9uZW50LCBhdHRycywgaGlkZSwgcmVqZWN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlkZSgpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiB0cmFuc2l0aW9uSGVscGVySW4oZWwsIG1vZGlmaWVycywgc2hvd0NhbGxiYWNrLCByZWplY3QpIHtcbiAgICAvLyBEZWZhdWx0IHZhbHVlcyBpbnNwaXJlZCBieTogaHR0cHM6Ly9tYXRlcmlhbC5pby9kZXNpZ24vbW90aW9uL3NwZWVkLmh0bWwjZHVyYXRpb25cbiAgICBjb25zdCBzdHlsZVZhbHVlcyA9IHtcbiAgICAgIGR1cmF0aW9uOiBtb2RpZmllclZhbHVlKG1vZGlmaWVycywgJ2R1cmF0aW9uJywgMTUwKSxcbiAgICAgIG9yaWdpbjogbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsICdvcmlnaW4nLCAnY2VudGVyJyksXG4gICAgICBmaXJzdDoge1xuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBzY2FsZTogbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsICdzY2FsZScsIDk1KVxuICAgICAgfSxcbiAgICAgIHNlY29uZDoge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBzY2FsZTogMTAwXG4gICAgICB9XG4gICAgfTtcbiAgICB0cmFuc2l0aW9uSGVscGVyKGVsLCBtb2RpZmllcnMsIHNob3dDYWxsYmFjaywgKCkgPT4ge30sIHJlamVjdCwgc3R5bGVWYWx1ZXMsIFRSQU5TSVRJT05fVFlQRV9JTik7XG4gIH1cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkhlbHBlck91dChlbCwgbW9kaWZpZXJzLCBzZXR0aW5nQm90aFNpZGVzT2ZUcmFuc2l0aW9uLCBoaWRlQ2FsbGJhY2ssIHJlamVjdCkge1xuICAgIC8vIE1ha2UgdGhlIFwib3V0XCIgdHJhbnNpdGlvbiAuNXggc2xvd2VyIHRoYW4gdGhlIFwiaW5cIi4gKFZpc3VhbGx5IGJldHRlcilcbiAgICAvLyBIT1dFVkVSLCBpZiB0aGV5IGV4cGxpY2l0bHkgc2V0IGEgZHVyYXRpb24gZm9yIHRoZSBcIm91dFwiIHRyYW5zaXRpb24sXG4gICAgLy8gdXNlIHRoYXQuXG4gICAgY29uc3QgZHVyYXRpb24gPSBzZXR0aW5nQm90aFNpZGVzT2ZUcmFuc2l0aW9uID8gbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsICdkdXJhdGlvbicsIDE1MCkgOiBtb2RpZmllclZhbHVlKG1vZGlmaWVycywgJ2R1cmF0aW9uJywgMTUwKSAvIDI7XG4gICAgY29uc3Qgc3R5bGVWYWx1ZXMgPSB7XG4gICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICBvcmlnaW46IG1vZGlmaWVyVmFsdWUobW9kaWZpZXJzLCAnb3JpZ2luJywgJ2NlbnRlcicpLFxuICAgICAgZmlyc3Q6IHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEwMFxuICAgICAgfSxcbiAgICAgIHNlY29uZDoge1xuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBzY2FsZTogbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsICdzY2FsZScsIDk1KVxuICAgICAgfVxuICAgIH07XG4gICAgdHJhbnNpdGlvbkhlbHBlcihlbCwgbW9kaWZpZXJzLCAoKSA9PiB7fSwgaGlkZUNhbGxiYWNrLCByZWplY3QsIHN0eWxlVmFsdWVzLCBUUkFOU0lUSU9OX1RZUEVfT1VUKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vZGlmaWVyVmFsdWUobW9kaWZpZXJzLCBrZXksIGZhbGxiYWNrKSB7XG4gICAgLy8gSWYgdGhlIG1vZGlmaWVyIGlzbid0IHByZXNlbnQsIHVzZSB0aGUgZGVmYXVsdC5cbiAgICBpZiAobW9kaWZpZXJzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHJldHVybiBmYWxsYmFjazsgLy8gSWYgaXQgSVMgcHJlc2VudCwgZ3JhYiB0aGUgdmFsdWUgYWZ0ZXIgaXQ6IHgtc2hvdy50cmFuc2l0aW9uLmR1cmF0aW9uLjUwMG1zXG5cbiAgICBjb25zdCByYXdWYWx1ZSA9IG1vZGlmaWVyc1ttb2RpZmllcnMuaW5kZXhPZihrZXkpICsgMV07XG4gICAgaWYgKCFyYXdWYWx1ZSkgcmV0dXJuIGZhbGxiYWNrO1xuXG4gICAgaWYgKGtleSA9PT0gJ3NjYWxlJykge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHZlcnkgbmV4dCB2YWx1ZSBpcyBOT1QgYSBudW1iZXIgYW5kIHJldHVybiB0aGUgZmFsbGJhY2suXG4gICAgICAvLyBJZiB4LXNob3cudHJhbnNpdGlvbi5zY2FsZSwgd2UnbGwgdXNlIHRoZSBkZWZhdWx0IHNjYWxlIHZhbHVlLlxuICAgICAgLy8gVGhhdCBpcyBob3cgYSB1c2VyIG9wdHMgb3V0IG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gICAgICBpZiAoIWlzTnVtZXJpYyhyYXdWYWx1ZSkpIHJldHVybiBmYWxsYmFjaztcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnZHVyYXRpb24nKSB7XG4gICAgICAvLyBTdXBwb3J0IHgtc2hvdy50cmFuc2l0aW9uLmR1cmF0aW9uLjUwMG1zICYmIGR1cmF0aW9uLjUwMFxuICAgICAgbGV0IG1hdGNoID0gcmF3VmFsdWUubWF0Y2goLyhbMC05XSspbXMvKTtcbiAgICAgIGlmIChtYXRjaCkgcmV0dXJuIG1hdGNoWzFdO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdvcmlnaW4nKSB7XG4gICAgICAvLyBTdXBwb3J0IGNoYWluaW5nIG9yaWdpbiBkaXJlY3Rpb25zOiB4LXNob3cudHJhbnNpdGlvbi50b3AucmlnaHRcbiAgICAgIGlmIChbJ3RvcCcsICdyaWdodCcsICdsZWZ0JywgJ2NlbnRlcicsICdib3R0b20nXS5pbmNsdWRlcyhtb2RpZmllcnNbbW9kaWZpZXJzLmluZGV4T2Yoa2V5KSArIDJdKSkge1xuICAgICAgICByZXR1cm4gW3Jhd1ZhbHVlLCBtb2RpZmllcnNbbW9kaWZpZXJzLmluZGV4T2Yoa2V5KSArIDJdXS5qb2luKCcgJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhd1ZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkhlbHBlcihlbCwgbW9kaWZpZXJzLCBob29rMSwgaG9vazIsIHJlamVjdCwgc3R5bGVWYWx1ZXMsIHR5cGUpIHtcbiAgICAvLyBjbGVhciB0aGUgcHJldmlvdXMgdHJhbnNpdGlvbiBpZiBleGlzdHMgdG8gYXZvaWQgY2FjaGluZyB0aGUgd3Jvbmcgc3R5bGVzXG4gICAgaWYgKGVsLl9feF90cmFuc2l0aW9uKSB7XG4gICAgICBlbC5fX3hfdHJhbnNpdGlvbi5jYW5jZWwgJiYgZWwuX194X3RyYW5zaXRpb24uY2FuY2VsKCk7XG4gICAgfSAvLyBJZiB0aGUgdXNlciBzZXQgdGhlc2Ugc3R5bGUgdmFsdWVzLCB3ZSdsbCBwdXQgdGhlbSBiYWNrIHdoZW4gd2UncmUgZG9uZSB3aXRoIHRoZW0uXG5cblxuICAgIGNvbnN0IG9wYWNpdHlDYWNoZSA9IGVsLnN0eWxlLm9wYWNpdHk7XG4gICAgY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBlbC5zdHlsZS50cmFuc2Zvcm07XG4gICAgY29uc3QgdHJhbnNmb3JtT3JpZ2luQ2FjaGUgPSBlbC5zdHlsZS50cmFuc2Zvcm1PcmlnaW47IC8vIElmIG5vIG1vZGlmaWVycyBhcmUgcHJlc2VudDogeC1zaG93LnRyYW5zaXRpb24sIHdlJ2xsIGRlZmF1bHQgdG8gYm90aCBvcGFjaXR5IGFuZCBzY2FsZS5cblxuICAgIGNvbnN0IG5vTW9kaWZpZXJzID0gIW1vZGlmaWVycy5pbmNsdWRlcygnb3BhY2l0eScpICYmICFtb2RpZmllcnMuaW5jbHVkZXMoJ3NjYWxlJyk7XG4gICAgY29uc3QgdHJhbnNpdGlvbk9wYWNpdHkgPSBub01vZGlmaWVycyB8fCBtb2RpZmllcnMuaW5jbHVkZXMoJ29wYWNpdHknKTtcbiAgICBjb25zdCB0cmFuc2l0aW9uU2NhbGUgPSBub01vZGlmaWVycyB8fCBtb2RpZmllcnMuaW5jbHVkZXMoJ3NjYWxlJyk7IC8vIFRoZXNlIGFyZSB0aGUgZXhwbGljaXQgc3RhZ2VzIG9mIGEgdHJhbnNpdGlvbiAoc2FtZSBzdGFnZXMgZm9yIGluIGFuZCBmb3Igb3V0KS5cbiAgICAvLyBUaGlzIHdheSB5b3UgY2FuIGdldCBhIGJpcmRzIGV5ZSB2aWV3IG9mIHRoZSBob29rcywgYW5kIHRoZSBkaWZmZXJlbmNlc1xuICAgIC8vIGJldHdlZW4gdGhlbS5cblxuICAgIGNvbnN0IHN0YWdlcyA9IHtcbiAgICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodHJhbnNpdGlvbk9wYWNpdHkpIGVsLnN0eWxlLm9wYWNpdHkgPSBzdHlsZVZhbHVlcy5maXJzdC5vcGFjaXR5O1xuICAgICAgICBpZiAodHJhbnNpdGlvblNjYWxlKSBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHtzdHlsZVZhbHVlcy5maXJzdC5zY2FsZSAvIDEwMH0pYDtcbiAgICAgIH0sXG5cbiAgICAgIGR1cmluZygpIHtcbiAgICAgICAgaWYgKHRyYW5zaXRpb25TY2FsZSkgZWwuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gc3R5bGVWYWx1ZXMub3JpZ2luO1xuICAgICAgICBlbC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSBbdHJhbnNpdGlvbk9wYWNpdHkgPyBgb3BhY2l0eWAgOiBgYCwgdHJhbnNpdGlvblNjYWxlID8gYHRyYW5zZm9ybWAgOiBgYF0uam9pbignICcpLnRyaW0oKTtcbiAgICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7c3R5bGVWYWx1ZXMuZHVyYXRpb24gLyAxMDAwfXNgO1xuICAgICAgICBlbC5zdHlsZS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24gPSBgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpYDtcbiAgICAgIH0sXG5cbiAgICAgIHNob3coKSB7XG4gICAgICAgIGhvb2sxKCk7XG4gICAgICB9LFxuXG4gICAgICBlbmQoKSB7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uT3BhY2l0eSkgZWwuc3R5bGUub3BhY2l0eSA9IHN0eWxlVmFsdWVzLnNlY29uZC5vcGFjaXR5O1xuICAgICAgICBpZiAodHJhbnNpdGlvblNjYWxlKSBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHtzdHlsZVZhbHVlcy5zZWNvbmQuc2NhbGUgLyAxMDB9KWA7XG4gICAgICB9LFxuXG4gICAgICBoaWRlKCkge1xuICAgICAgICBob29rMigpO1xuICAgICAgfSxcblxuICAgICAgY2xlYW51cCgpIHtcbiAgICAgICAgaWYgKHRyYW5zaXRpb25PcGFjaXR5KSBlbC5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eUNhY2hlO1xuICAgICAgICBpZiAodHJhbnNpdGlvblNjYWxlKSBlbC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1DYWNoZTtcbiAgICAgICAgaWYgKHRyYW5zaXRpb25TY2FsZSkgZWwuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gdHJhbnNmb3JtT3JpZ2luQ2FjaGU7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9IG51bGw7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IG51bGw7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbiA9IG51bGw7XG4gICAgICB9XG5cbiAgICB9O1xuICAgIHRyYW5zaXRpb24oZWwsIHN0YWdlcywgdHlwZSwgcmVqZWN0KTtcbiAgfVxuXG4gIGNvbnN0IGVuc3VyZVN0cmluZ0V4cHJlc3Npb24gPSAoZXhwcmVzc2lvbiwgZWwsIGNvbXBvbmVudCkgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXhwcmVzc2lvbiA9PT0gJ2Z1bmN0aW9uJyA/IGNvbXBvbmVudC5ldmFsdWF0ZVJldHVybkV4cHJlc3Npb24oZWwsIGV4cHJlc3Npb24pIDogZXhwcmVzc2lvbjtcbiAgfTtcblxuICBmdW5jdGlvbiB0cmFuc2l0aW9uQ2xhc3Nlc0luKGVsLCBjb21wb25lbnQsIGRpcmVjdGl2ZXMsIHNob3dDYWxsYmFjaywgcmVqZWN0KSB7XG4gICAgY29uc3QgZW50ZXIgPSBjb252ZXJ0Q2xhc3NTdHJpbmdUb0FycmF5KGVuc3VyZVN0cmluZ0V4cHJlc3Npb24oKGRpcmVjdGl2ZXMuZmluZChpID0+IGkudmFsdWUgPT09ICdlbnRlcicpIHx8IHtcbiAgICAgIGV4cHJlc3Npb246ICcnXG4gICAgfSkuZXhwcmVzc2lvbiwgZWwsIGNvbXBvbmVudCkpO1xuICAgIGNvbnN0IGVudGVyU3RhcnQgPSBjb252ZXJ0Q2xhc3NTdHJpbmdUb0FycmF5KGVuc3VyZVN0cmluZ0V4cHJlc3Npb24oKGRpcmVjdGl2ZXMuZmluZChpID0+IGkudmFsdWUgPT09ICdlbnRlci1zdGFydCcpIHx8IHtcbiAgICAgIGV4cHJlc3Npb246ICcnXG4gICAgfSkuZXhwcmVzc2lvbiwgZWwsIGNvbXBvbmVudCkpO1xuICAgIGNvbnN0IGVudGVyRW5kID0gY29udmVydENsYXNzU3RyaW5nVG9BcnJheShlbnN1cmVTdHJpbmdFeHByZXNzaW9uKChkaXJlY3RpdmVzLmZpbmQoaSA9PiBpLnZhbHVlID09PSAnZW50ZXItZW5kJykgfHwge1xuICAgICAgZXhwcmVzc2lvbjogJydcbiAgICB9KS5leHByZXNzaW9uLCBlbCwgY29tcG9uZW50KSk7XG4gICAgdHJhbnNpdGlvbkNsYXNzZXMoZWwsIGVudGVyLCBlbnRlclN0YXJ0LCBlbnRlckVuZCwgc2hvd0NhbGxiYWNrLCAoKSA9PiB7fSwgVFJBTlNJVElPTl9UWVBFX0lOLCByZWplY3QpO1xuICB9XG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25DbGFzc2VzT3V0KGVsLCBjb21wb25lbnQsIGRpcmVjdGl2ZXMsIGhpZGVDYWxsYmFjaywgcmVqZWN0KSB7XG4gICAgY29uc3QgbGVhdmUgPSBjb252ZXJ0Q2xhc3NTdHJpbmdUb0FycmF5KGVuc3VyZVN0cmluZ0V4cHJlc3Npb24oKGRpcmVjdGl2ZXMuZmluZChpID0+IGkudmFsdWUgPT09ICdsZWF2ZScpIHx8IHtcbiAgICAgIGV4cHJlc3Npb246ICcnXG4gICAgfSkuZXhwcmVzc2lvbiwgZWwsIGNvbXBvbmVudCkpO1xuICAgIGNvbnN0IGxlYXZlU3RhcnQgPSBjb252ZXJ0Q2xhc3NTdHJpbmdUb0FycmF5KGVuc3VyZVN0cmluZ0V4cHJlc3Npb24oKGRpcmVjdGl2ZXMuZmluZChpID0+IGkudmFsdWUgPT09ICdsZWF2ZS1zdGFydCcpIHx8IHtcbiAgICAgIGV4cHJlc3Npb246ICcnXG4gICAgfSkuZXhwcmVzc2lvbiwgZWwsIGNvbXBvbmVudCkpO1xuICAgIGNvbnN0IGxlYXZlRW5kID0gY29udmVydENsYXNzU3RyaW5nVG9BcnJheShlbnN1cmVTdHJpbmdFeHByZXNzaW9uKChkaXJlY3RpdmVzLmZpbmQoaSA9PiBpLnZhbHVlID09PSAnbGVhdmUtZW5kJykgfHwge1xuICAgICAgZXhwcmVzc2lvbjogJydcbiAgICB9KS5leHByZXNzaW9uLCBlbCwgY29tcG9uZW50KSk7XG4gICAgdHJhbnNpdGlvbkNsYXNzZXMoZWwsIGxlYXZlLCBsZWF2ZVN0YXJ0LCBsZWF2ZUVuZCwgKCkgPT4ge30sIGhpZGVDYWxsYmFjaywgVFJBTlNJVElPTl9UWVBFX09VVCwgcmVqZWN0KTtcbiAgfVxuICBmdW5jdGlvbiB0cmFuc2l0aW9uQ2xhc3NlcyhlbCwgY2xhc3Nlc0R1cmluZywgY2xhc3Nlc1N0YXJ0LCBjbGFzc2VzRW5kLCBob29rMSwgaG9vazIsIHR5cGUsIHJlamVjdCkge1xuICAgIC8vIGNsZWFyIHRoZSBwcmV2aW91cyB0cmFuc2l0aW9uIGlmIGV4aXN0cyB0byBhdm9pZCBjYWNoaW5nIHRoZSB3cm9uZyBjbGFzc2VzXG4gICAgaWYgKGVsLl9feF90cmFuc2l0aW9uKSB7XG4gICAgICBlbC5fX3hfdHJhbnNpdGlvbi5jYW5jZWwgJiYgZWwuX194X3RyYW5zaXRpb24uY2FuY2VsKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3JpZ2luYWxDbGFzc2VzID0gZWwuX194X29yaWdpbmFsX2NsYXNzZXMgfHwgW107XG4gICAgY29uc3Qgc3RhZ2VzID0ge1xuICAgICAgc3RhcnQoKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3Nlc1N0YXJ0KTtcbiAgICAgIH0sXG5cbiAgICAgIGR1cmluZygpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzRHVyaW5nKTtcbiAgICAgIH0sXG5cbiAgICAgIHNob3coKSB7XG4gICAgICAgIGhvb2sxKCk7XG4gICAgICB9LFxuXG4gICAgICBlbmQoKSB7XG4gICAgICAgIC8vIERvbid0IHJlbW92ZSBjbGFzc2VzIHRoYXQgd2VyZSBpbiB0aGUgb3JpZ2luYWwgY2xhc3MgYXR0cmlidXRlLlxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzZXNTdGFydC5maWx0ZXIoaSA9PiAhb3JpZ2luYWxDbGFzc2VzLmluY2x1ZGVzKGkpKSk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3Nlc0VuZCk7XG4gICAgICB9LFxuXG4gICAgICBoaWRlKCkge1xuICAgICAgICBob29rMigpO1xuICAgICAgfSxcblxuICAgICAgY2xlYW51cCgpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc2VzRHVyaW5nLmZpbHRlcihpID0+ICFvcmlnaW5hbENsYXNzZXMuaW5jbHVkZXMoaSkpKTtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc2VzRW5kLmZpbHRlcihpID0+ICFvcmlnaW5hbENsYXNzZXMuaW5jbHVkZXMoaSkpKTtcbiAgICAgIH1cblxuICAgIH07XG4gICAgdHJhbnNpdGlvbihlbCwgc3RhZ2VzLCB0eXBlLCByZWplY3QpO1xuICB9XG4gIGZ1bmN0aW9uIHRyYW5zaXRpb24oZWwsIHN0YWdlcywgdHlwZSwgcmVqZWN0KSB7XG4gICAgY29uc3QgZmluaXNoID0gb25jZSgoKSA9PiB7XG4gICAgICBzdGFnZXMuaGlkZSgpOyAvLyBBZGRpbmcgYW4gXCJpc0Nvbm5lY3RlZFwiIGNoZWNrLCBpbiBjYXNlIHRoZSBjYWxsYmFja1xuICAgICAgLy8gcmVtb3ZlZCB0aGUgZWxlbWVudCBmcm9tIHRoZSBET00uXG5cbiAgICAgIGlmIChlbC5pc0Nvbm5lY3RlZCkge1xuICAgICAgICBzdGFnZXMuY2xlYW51cCgpO1xuICAgICAgfVxuXG4gICAgICBkZWxldGUgZWwuX194X3RyYW5zaXRpb247XG4gICAgfSk7XG4gICAgZWwuX194X3RyYW5zaXRpb24gPSB7XG4gICAgICAvLyBTZXQgdHJhbnNpdGlvbiB0eXBlIHNvIHdlIGNhbiBhdm9pZCBjbGVhcmluZyB0cmFuc2l0aW9uIGlmIHRoZSBkaXJlY3Rpb24gaXMgdGhlIHNhbWVcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAvLyBjcmVhdGUgYSBjYWxsYmFjayBmb3IgdGhlIGxhc3Qgc3RhZ2VzIG9mIHRoZSB0cmFuc2l0aW9uIHNvIHdlIGNhbiBjYWxsIGl0XG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBwb2ludCBhbmQgZWFybHkgdGVybWluYXRlIGl0LiBPbmNlIHdpbGwgZW5zdXJlIHRoYXQgZnVuY3Rpb25cbiAgICAgIC8vIGlzIG9ubHkgY2FsbGVkIG9uZSB0aW1lLlxuICAgICAgY2FuY2VsOiBvbmNlKCgpID0+IHtcbiAgICAgICAgcmVqZWN0KFRSQU5TSVRJT05fQ0FOQ0VMTEVEKTtcbiAgICAgICAgZmluaXNoKCk7XG4gICAgICB9KSxcbiAgICAgIGZpbmlzaCxcbiAgICAgIC8vIFRoaXMgc3RvcmUgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lIHNvIHdlIGNhbiBjYW5jZWwgaXRcbiAgICAgIG5leHRGcmFtZTogbnVsbFxuICAgIH07XG4gICAgc3RhZ2VzLnN0YXJ0KCk7XG4gICAgc3RhZ2VzLmR1cmluZygpO1xuICAgIGVsLl9feF90cmFuc2l0aW9uLm5leHRGcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAvLyBOb3RlOiBTYWZhcmkncyB0cmFuc2l0aW9uRHVyYXRpb24gcHJvcGVydHkgd2lsbCBsaXN0IG91dCBjb21tYSBzZXBhcmF0ZWQgdHJhbnNpdGlvbiBkdXJhdGlvbnNcbiAgICAgIC8vIGZvciBldmVyeSBzaW5nbGUgdHJhbnNpdGlvbiBwcm9wZXJ0eS4gTGV0J3MgZ3JhYiB0aGUgZmlyc3Qgb25lIGFuZCBjYWxsIGl0IGEgZGF5LlxuICAgICAgbGV0IGR1cmF0aW9uID0gTnVtYmVyKGdldENvbXB1dGVkU3R5bGUoZWwpLnRyYW5zaXRpb25EdXJhdGlvbi5yZXBsYWNlKC8sLiovLCAnJykucmVwbGFjZSgncycsICcnKSkgKiAxMDAwO1xuXG4gICAgICBpZiAoZHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgZHVyYXRpb24gPSBOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZShlbCkuYW5pbWF0aW9uRHVyYXRpb24ucmVwbGFjZSgncycsICcnKSkgKiAxMDAwO1xuICAgICAgfVxuXG4gICAgICBzdGFnZXMuc2hvdygpO1xuICAgICAgZWwuX194X3RyYW5zaXRpb24ubmV4dEZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgc3RhZ2VzLmVuZCgpO1xuICAgICAgICBzZXRUaW1lb3V0KGVsLl9feF90cmFuc2l0aW9uLmZpbmlzaCwgZHVyYXRpb24pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gaXNOdW1lcmljKHN1YmplY3QpIHtcbiAgICByZXR1cm4gIUFycmF5LmlzQXJyYXkoc3ViamVjdCkgJiYgIWlzTmFOKHN1YmplY3QpO1xuICB9IC8vIFRoYW5rcyBAdnVlanNcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS9ibG9iLzRkZTQ2NDlkOTYzNzI2MmE5YjAwNzcyMGI1OWY4MGFjNzJhNTYyMGMvc3JjL3NoYXJlZC91dGlsLmpzXG5cbiAgZnVuY3Rpb24gb25jZShjYWxsYmFjaykge1xuICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRm9yRGlyZWN0aXZlKGNvbXBvbmVudCwgdGVtcGxhdGVFbCwgZXhwcmVzc2lvbiwgaW5pdGlhbFVwZGF0ZSwgZXh0cmFWYXJzKSB7XG4gICAgd2FybklmTWFsZm9ybWVkVGVtcGxhdGUodGVtcGxhdGVFbCwgJ3gtZm9yJyk7XG4gICAgbGV0IGl0ZXJhdG9yTmFtZXMgPSB0eXBlb2YgZXhwcmVzc2lvbiA9PT0gJ2Z1bmN0aW9uJyA/IHBhcnNlRm9yRXhwcmVzc2lvbihjb21wb25lbnQuZXZhbHVhdGVSZXR1cm5FeHByZXNzaW9uKHRlbXBsYXRlRWwsIGV4cHJlc3Npb24pKSA6IHBhcnNlRm9yRXhwcmVzc2lvbihleHByZXNzaW9uKTtcbiAgICBsZXQgaXRlbXMgPSBldmFsdWF0ZUl0ZW1zQW5kUmV0dXJuRW1wdHlJZlhJZklzUHJlc2VudEFuZEZhbHNlT25FbGVtZW50KGNvbXBvbmVudCwgdGVtcGxhdGVFbCwgaXRlcmF0b3JOYW1lcywgZXh0cmFWYXJzKTsgLy8gQXMgd2Ugd2FsayB0aGUgYXJyYXksIHdlJ2xsIGFsc28gd2FsayB0aGUgRE9NICh1cGRhdGluZy9jcmVhdGluZyBhcyB3ZSBnbykuXG5cbiAgICBsZXQgY3VycmVudEVsID0gdGVtcGxhdGVFbDtcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgbGV0IGl0ZXJhdGlvblNjb3BlVmFyaWFibGVzID0gZ2V0SXRlcmF0aW9uU2NvcGVWYXJpYWJsZXMoaXRlcmF0b3JOYW1lcywgaXRlbSwgaW5kZXgsIGl0ZW1zLCBleHRyYVZhcnMoKSk7XG4gICAgICBsZXQgY3VycmVudEtleSA9IGdlbmVyYXRlS2V5Rm9ySXRlcmF0aW9uKGNvbXBvbmVudCwgdGVtcGxhdGVFbCwgaW5kZXgsIGl0ZXJhdGlvblNjb3BlVmFyaWFibGVzKTtcbiAgICAgIGxldCBuZXh0RWwgPSBsb29rQWhlYWRGb3JNYXRjaGluZ0tleWVkRWxlbWVudEFuZE1vdmVJdElmRm91bmQoY3VycmVudEVsLm5leHRFbGVtZW50U2libGluZywgY3VycmVudEtleSk7IC8vIElmIHdlIGhhdmVuJ3QgZm91bmQgYSBtYXRjaGluZyBrZXksIGluc2VydCB0aGUgZWxlbWVudCBhdCB0aGUgY3VycmVudCBwb3NpdGlvbi5cblxuICAgICAgaWYgKCFuZXh0RWwpIHtcbiAgICAgICAgbmV4dEVsID0gYWRkRWxlbWVudEluTG9vcEFmdGVyQ3VycmVudEVsKHRlbXBsYXRlRWwsIGN1cnJlbnRFbCk7IC8vIEFuZCB0cmFuc2l0aW9uIGl0IGluIGlmIGl0J3Mgbm90IHRoZSBmaXJzdCBwYWdlIGxvYWQuXG5cbiAgICAgICAgdHJhbnNpdGlvbkluKG5leHRFbCwgKCkgPT4ge30sICgpID0+IHt9LCBjb21wb25lbnQsIGluaXRpYWxVcGRhdGUpO1xuICAgICAgICBuZXh0RWwuX194X2ZvciA9IGl0ZXJhdGlvblNjb3BlVmFyaWFibGVzO1xuICAgICAgICBjb21wb25lbnQuaW5pdGlhbGl6ZUVsZW1lbnRzKG5leHRFbCwgKCkgPT4gbmV4dEVsLl9feF9mb3IpOyAvLyBPdGhlcndpc2UgdXBkYXRlIHRoZSBlbGVtZW50IHdlIGZvdW5kLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGVtcG9yYXJpbHkgcmVtb3ZlIHRoZSBrZXkgaW5kaWNhdG9yIHRvIGFsbG93IHRoZSBub3JtYWwgXCJ1cGRhdGVFbGVtZW50c1wiIHRvIHdvcmsuXG4gICAgICAgIGRlbGV0ZSBuZXh0RWwuX194X2Zvcl9rZXk7XG4gICAgICAgIG5leHRFbC5fX3hfZm9yID0gaXRlcmF0aW9uU2NvcGVWYXJpYWJsZXM7XG4gICAgICAgIGNvbXBvbmVudC51cGRhdGVFbGVtZW50cyhuZXh0RWwsICgpID0+IG5leHRFbC5fX3hfZm9yKTtcbiAgICAgIH1cblxuICAgICAgY3VycmVudEVsID0gbmV4dEVsO1xuICAgICAgY3VycmVudEVsLl9feF9mb3Jfa2V5ID0gY3VycmVudEtleTtcbiAgICB9KTtcbiAgICByZW1vdmVBbnlMZWZ0T3ZlckVsZW1lbnRzRnJvbVByZXZpb3VzVXBkYXRlKGN1cnJlbnRFbCwgY29tcG9uZW50KTtcbiAgfSAvLyBUaGlzIHdhcyB0YWtlbiBmcm9tIFZ1ZUpTIDIuKiBjb3JlLiBUaGFua3MgVnVlIVxuXG4gIGZ1bmN0aW9uIHBhcnNlRm9yRXhwcmVzc2lvbihleHByZXNzaW9uKSB7XG4gICAgbGV0IGZvckl0ZXJhdG9yUkUgPSAvLChbXixcXH1cXF1dKikoPzosKFteLFxcfVxcXV0qKSk/JC87XG4gICAgbGV0IHN0cmlwUGFyZW5zUkUgPSAvXlxcKHxcXCkkL2c7XG4gICAgbGV0IGZvckFsaWFzUkUgPSAvKFtcXHNcXFNdKj8pXFxzKyg/OmlufG9mKVxccysoW1xcc1xcU10qKS87XG4gICAgbGV0IGluTWF0Y2ggPSBTdHJpbmcoZXhwcmVzc2lvbikubWF0Y2goZm9yQWxpYXNSRSk7XG4gICAgaWYgKCFpbk1hdGNoKSByZXR1cm47XG4gICAgbGV0IHJlcyA9IHt9O1xuICAgIHJlcy5pdGVtcyA9IGluTWF0Y2hbMl0udHJpbSgpO1xuICAgIGxldCBpdGVtID0gaW5NYXRjaFsxXS50cmltKCkucmVwbGFjZShzdHJpcFBhcmVuc1JFLCAnJyk7XG4gICAgbGV0IGl0ZXJhdG9yTWF0Y2ggPSBpdGVtLm1hdGNoKGZvckl0ZXJhdG9yUkUpO1xuXG4gICAgaWYgKGl0ZXJhdG9yTWF0Y2gpIHtcbiAgICAgIHJlcy5pdGVtID0gaXRlbS5yZXBsYWNlKGZvckl0ZXJhdG9yUkUsICcnKS50cmltKCk7XG4gICAgICByZXMuaW5kZXggPSBpdGVyYXRvck1hdGNoWzFdLnRyaW0oKTtcblxuICAgICAgaWYgKGl0ZXJhdG9yTWF0Y2hbMl0pIHtcbiAgICAgICAgcmVzLmNvbGxlY3Rpb24gPSBpdGVyYXRvck1hdGNoWzJdLnRyaW0oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLml0ZW0gPSBpdGVtO1xuICAgIH1cblxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJdGVyYXRpb25TY29wZVZhcmlhYmxlcyhpdGVyYXRvck5hbWVzLCBpdGVtLCBpbmRleCwgaXRlbXMsIGV4dHJhVmFycykge1xuICAgIC8vIFdlIG11c3QgY3JlYXRlIGEgbmV3IG9iamVjdCwgc28gZWFjaCBpdGVyYXRpb24gaGFzIGEgbmV3IHNjb3BlXG4gICAgbGV0IHNjb3BlVmFyaWFibGVzID0gZXh0cmFWYXJzID8gX29iamVjdFNwcmVhZDIoe30sIGV4dHJhVmFycykgOiB7fTtcbiAgICBzY29wZVZhcmlhYmxlc1tpdGVyYXRvck5hbWVzLml0ZW1dID0gaXRlbTtcbiAgICBpZiAoaXRlcmF0b3JOYW1lcy5pbmRleCkgc2NvcGVWYXJpYWJsZXNbaXRlcmF0b3JOYW1lcy5pbmRleF0gPSBpbmRleDtcbiAgICBpZiAoaXRlcmF0b3JOYW1lcy5jb2xsZWN0aW9uKSBzY29wZVZhcmlhYmxlc1tpdGVyYXRvck5hbWVzLmNvbGxlY3Rpb25dID0gaXRlbXM7XG4gICAgcmV0dXJuIHNjb3BlVmFyaWFibGVzO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVLZXlGb3JJdGVyYXRpb24oY29tcG9uZW50LCBlbCwgaW5kZXgsIGl0ZXJhdGlvblNjb3BlVmFyaWFibGVzKSB7XG4gICAgbGV0IGJpbmRLZXlBdHRyaWJ1dGUgPSBnZXRYQXR0cnMoZWwsIGNvbXBvbmVudCwgJ2JpbmQnKS5maWx0ZXIoYXR0ciA9PiBhdHRyLnZhbHVlID09PSAna2V5JylbMF07IC8vIElmIHRoZSBkZXYgaGFzbid0IHNwZWNpZmllZCBhIGtleSwganVzdCByZXR1cm4gdGhlIGluZGV4IG9mIHRoZSBpdGVyYXRpb24uXG5cbiAgICBpZiAoIWJpbmRLZXlBdHRyaWJ1dGUpIHJldHVybiBpbmRleDtcbiAgICByZXR1cm4gY29tcG9uZW50LmV2YWx1YXRlUmV0dXJuRXhwcmVzc2lvbihlbCwgYmluZEtleUF0dHJpYnV0ZS5leHByZXNzaW9uLCAoKSA9PiBpdGVyYXRpb25TY29wZVZhcmlhYmxlcyk7XG4gIH1cblxuICBmdW5jdGlvbiBldmFsdWF0ZUl0ZW1zQW5kUmV0dXJuRW1wdHlJZlhJZklzUHJlc2VudEFuZEZhbHNlT25FbGVtZW50KGNvbXBvbmVudCwgZWwsIGl0ZXJhdG9yTmFtZXMsIGV4dHJhVmFycykge1xuICAgIGxldCBpZkF0dHJpYnV0ZSA9IGdldFhBdHRycyhlbCwgY29tcG9uZW50LCAnaWYnKVswXTtcblxuICAgIGlmIChpZkF0dHJpYnV0ZSAmJiAhY29tcG9uZW50LmV2YWx1YXRlUmV0dXJuRXhwcmVzc2lvbihlbCwgaWZBdHRyaWJ1dGUuZXhwcmVzc2lvbikpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBsZXQgaXRlbXMgPSBjb21wb25lbnQuZXZhbHVhdGVSZXR1cm5FeHByZXNzaW9uKGVsLCBpdGVyYXRvck5hbWVzLml0ZW1zLCBleHRyYVZhcnMpOyAvLyBUaGlzIGFkZHMgc3VwcG9ydCBmb3IgdGhlIGBpIGluIG5gIHN5bnRheC5cblxuICAgIGlmIChpc051bWVyaWMoaXRlbXMpICYmIGl0ZW1zID49IDApIHtcbiAgICAgIGl0ZW1zID0gQXJyYXkuZnJvbShBcnJheShpdGVtcykua2V5cygpLCBpID0+IGkgKyAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXM7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRFbGVtZW50SW5Mb29wQWZ0ZXJDdXJyZW50RWwodGVtcGxhdGVFbCwgY3VycmVudEVsKSB7XG4gICAgbGV0IGNsb25lID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZUVsLmNvbnRlbnQsIHRydWUpO1xuICAgIGN1cnJlbnRFbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShjbG9uZSwgY3VycmVudEVsLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgcmV0dXJuIGN1cnJlbnRFbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBsb29rQWhlYWRGb3JNYXRjaGluZ0tleWVkRWxlbWVudEFuZE1vdmVJdElmRm91bmQobmV4dEVsLCBjdXJyZW50S2V5KSB7XG4gICAgaWYgKCFuZXh0RWwpIHJldHVybjsgLy8gSWYgd2UgYXJlIGFscmVhZHkgcGFzdCB0aGUgeC1mb3IgZ2VuZXJhdGVkIGVsZW1lbnRzLCB3ZSBkb24ndCBuZWVkIHRvIGxvb2sgYWhlYWQuXG5cbiAgICBpZiAobmV4dEVsLl9feF9mb3Jfa2V5ID09PSB1bmRlZmluZWQpIHJldHVybjsgLy8gSWYgdGhlIHRoZSBrZXkncyBETyBtYXRjaCwgbm8gbmVlZCB0byBsb29rIGFoZWFkLlxuXG4gICAgaWYgKG5leHRFbC5fX3hfZm9yX2tleSA9PT0gY3VycmVudEtleSkgcmV0dXJuIG5leHRFbDsgLy8gSWYgdGhleSBkb24ndCwgd2UnbGwgbG9vayBhaGVhZCBmb3IgYSBtYXRjaC5cbiAgICAvLyBJZiB3ZSBmaW5kIGl0LCB3ZSdsbCBtb3ZlIGl0IHRvIHRoZSBjdXJyZW50IHBvc2l0aW9uIGluIHRoZSBsb29wLlxuXG4gICAgbGV0IHRtcE5leHRFbCA9IG5leHRFbDtcblxuICAgIHdoaWxlICh0bXBOZXh0RWwpIHtcbiAgICAgIGlmICh0bXBOZXh0RWwuX194X2Zvcl9rZXkgPT09IGN1cnJlbnRLZXkpIHtcbiAgICAgICAgcmV0dXJuIHRtcE5leHRFbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZSh0bXBOZXh0RWwsIG5leHRFbCk7XG4gICAgICB9XG5cbiAgICAgIHRtcE5leHRFbCA9IHRtcE5leHRFbC5uZXh0RWxlbWVudFNpYmxpbmcgJiYgdG1wTmV4dEVsLm5leHRFbGVtZW50U2libGluZy5fX3hfZm9yX2tleSAhPT0gdW5kZWZpbmVkID8gdG1wTmV4dEVsLm5leHRFbGVtZW50U2libGluZyA6IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUFueUxlZnRPdmVyRWxlbWVudHNGcm9tUHJldmlvdXNVcGRhdGUoY3VycmVudEVsLCBjb21wb25lbnQpIHtcbiAgICB2YXIgbmV4dEVsZW1lbnRGcm9tT2xkTG9vcCA9IGN1cnJlbnRFbC5uZXh0RWxlbWVudFNpYmxpbmcgJiYgY3VycmVudEVsLm5leHRFbGVtZW50U2libGluZy5fX3hfZm9yX2tleSAhPT0gdW5kZWZpbmVkID8gY3VycmVudEVsLm5leHRFbGVtZW50U2libGluZyA6IGZhbHNlO1xuXG4gICAgd2hpbGUgKG5leHRFbGVtZW50RnJvbU9sZExvb3ApIHtcbiAgICAgIGxldCBuZXh0RWxlbWVudEZyb21PbGRMb29wSW1tdXRhYmxlID0gbmV4dEVsZW1lbnRGcm9tT2xkTG9vcDtcbiAgICAgIGxldCBuZXh0U2libGluZyA9IG5leHRFbGVtZW50RnJvbU9sZExvb3AubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgdHJhbnNpdGlvbk91dChuZXh0RWxlbWVudEZyb21PbGRMb29wLCAoKSA9PiB7XG4gICAgICAgIG5leHRFbGVtZW50RnJvbU9sZExvb3BJbW11dGFibGUucmVtb3ZlKCk7XG4gICAgICB9LCAoKSA9PiB7fSwgY29tcG9uZW50KTtcbiAgICAgIG5leHRFbGVtZW50RnJvbU9sZExvb3AgPSBuZXh0U2libGluZyAmJiBuZXh0U2libGluZy5fX3hfZm9yX2tleSAhPT0gdW5kZWZpbmVkID8gbmV4dFNpYmxpbmcgOiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVBdHRyaWJ1dGVCaW5kaW5nRGlyZWN0aXZlKGNvbXBvbmVudCwgZWwsIGF0dHJOYW1lLCBleHByZXNzaW9uLCBleHRyYVZhcnMsIGF0dHJUeXBlLCBtb2RpZmllcnMpIHtcbiAgICB2YXIgdmFsdWUgPSBjb21wb25lbnQuZXZhbHVhdGVSZXR1cm5FeHByZXNzaW9uKGVsLCBleHByZXNzaW9uLCBleHRyYVZhcnMpO1xuXG4gICAgaWYgKGF0dHJOYW1lID09PSAndmFsdWUnKSB7XG4gICAgICBpZiAoQWxwaW5lLmlnbm9yZUZvY3VzZWRGb3JWYWx1ZUJpbmRpbmcgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKSkgcmV0dXJuOyAvLyBJZiBuZXN0ZWQgbW9kZWwga2V5IGlzIHVuZGVmaW5lZCwgc2V0IHRoZSBkZWZhdWx0IHZhbHVlIHRvIGVtcHR5IHN0cmluZy5cblxuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgU3RyaW5nKGV4cHJlc3Npb24pLm1hdGNoKC9cXC4vKSkge1xuICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWwudHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgICAvLyBTZXQgcmFkaW8gdmFsdWUgZnJvbSB4LWJpbmQ6dmFsdWUsIGlmIG5vIFwidmFsdWVcIiBhdHRyaWJ1dGUgZXhpc3RzLlxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYW55IGluaXRpYWwgc3RhdGUgdmFsdWVzLCByYWRpbyB3aWxsIGhhdmUgYSBjb3JyZWN0XG4gICAgICAgIC8vIFwiY2hlY2tlZFwiIHZhbHVlIHNpbmNlIHgtYmluZDp2YWx1ZSBpcyBwcm9jZXNzZWQgYmVmb3JlIHgtbW9kZWwuXG4gICAgICAgIGlmIChlbC5hdHRyaWJ1dGVzLnZhbHVlID09PSB1bmRlZmluZWQgJiYgYXR0clR5cGUgPT09ICdiaW5kJykge1xuICAgICAgICAgIGVsLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoYXR0clR5cGUgIT09ICdiaW5kJykge1xuICAgICAgICAgIGVsLmNoZWNrZWQgPSBjaGVja2VkQXR0ckxvb3NlQ29tcGFyZShlbC52YWx1ZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVsLnR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgLy8gSWYgd2UgYXJlIGV4cGxpY2l0bHkgYmluZGluZyBhIHN0cmluZyB0byB0aGUgOnZhbHVlLCBzZXQgdGhlIHN0cmluZyxcbiAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGlzIGEgYm9vbGVhbiwgbGVhdmUgaXQgYWxvbmUsIGl0IHdpbGwgYmUgc2V0IHRvIFwib25cIlxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5LlxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnYm9vbGVhbicgJiYgIVtudWxsLCB1bmRlZmluZWRdLmluY2x1ZGVzKHZhbHVlKSAmJiBhdHRyVHlwZSA9PT0gJ2JpbmQnKSB7XG4gICAgICAgICAgZWwudmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGF0dHJUeXBlICE9PSAnYmluZCcpIHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIC8vIEknbSBwdXJwb3NlbHkgbm90IHVzaW5nIEFycmF5LmluY2x1ZGVzIGhlcmUgYmVjYXVzZSBpdCdzXG4gICAgICAgICAgICAvLyBzdHJpY3QsIGFuZCBiZWNhdXNlIG9mIE51bWVyaWMvU3RyaW5nIG1pcy1jYXN0aW5nLCBJXG4gICAgICAgICAgICAvLyB3YW50IHRoZSBcImluY2x1ZGVzXCIgdG8gYmUgXCJmdXp6eVwiLlxuICAgICAgICAgICAgZWwuY2hlY2tlZCA9IHZhbHVlLnNvbWUodmFsID0+IGNoZWNrZWRBdHRyTG9vc2VDb21wYXJlKHZhbCwgZWwudmFsdWUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVsLnRhZ05hbWUgPT09ICdTRUxFQ1QnKSB7XG4gICAgICAgIHVwZGF0ZVNlbGVjdChlbCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGVsLnZhbHVlID09PSB2YWx1ZSkgcmV0dXJuO1xuICAgICAgICBlbC52YWx1ZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXR0ck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbENsYXNzZXMgPSBlbC5fX3hfb3JpZ2luYWxfY2xhc3NlcyB8fCBbXTtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGFycmF5VW5pcXVlKG9yaWdpbmFsQ2xhc3Nlcy5jb25jYXQodmFsdWUpKS5qb2luKCcgJykpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIFNvcnRpbmcgdGhlIGtleXMgLyBjbGFzcyBuYW1lcyBieSB0aGVpciBib29sZWFuIHZhbHVlIHdpbGwgZW5zdXJlIHRoYXRcbiAgICAgICAgLy8gYW55dGhpbmcgdGhhdCBldmFsdWF0ZXMgdG8gYGZhbHNlYCBhbmQgbmVlZHMgdG8gcmVtb3ZlIGNsYXNzZXMgaXMgcnVuIGZpcnN0LlxuICAgICAgICBjb25zdCBrZXlzU29ydGVkQnlCb29sZWFuVmFsdWUgPSBPYmplY3Qua2V5cyh2YWx1ZSkuc29ydCgoYSwgYikgPT4gdmFsdWVbYV0gLSB2YWx1ZVtiXSk7XG4gICAgICAgIGtleXNTb3J0ZWRCeUJvb2xlYW5WYWx1ZS5mb3JFYWNoKGNsYXNzTmFtZXMgPT4ge1xuICAgICAgICAgIGlmICh2YWx1ZVtjbGFzc05hbWVzXSkge1xuICAgICAgICAgICAgY29udmVydENsYXNzU3RyaW5nVG9BcnJheShjbGFzc05hbWVzKS5mb3JFYWNoKGNsYXNzTmFtZSA9PiBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb252ZXJ0Q2xhc3NTdHJpbmdUb0FycmF5KGNsYXNzTmFtZXMpLmZvckVhY2goY2xhc3NOYW1lID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQ2xhc3NlcyA9IGVsLl9feF9vcmlnaW5hbF9jbGFzc2VzIHx8IFtdO1xuICAgICAgICBjb25zdCBuZXdDbGFzc2VzID0gdmFsdWUgPyBjb252ZXJ0Q2xhc3NTdHJpbmdUb0FycmF5KHZhbHVlKSA6IFtdO1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgYXJyYXlVbmlxdWUob3JpZ2luYWxDbGFzc2VzLmNvbmNhdChuZXdDbGFzc2VzKSkuam9pbignICcpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXR0ck5hbWUgPSBtb2RpZmllcnMuaW5jbHVkZXMoJ2NhbWVsJykgPyBjYW1lbENhc2UoYXR0ck5hbWUpIDogYXR0ck5hbWU7IC8vIElmIGFuIGF0dHJpYnV0ZSdzIGJvdW5kIHZhbHVlIGlzIG51bGwsIHVuZGVmaW5lZCBvciBmYWxzZSwgcmVtb3ZlIHRoZSBhdHRyaWJ1dGVcblxuICAgICAgaWYgKFtudWxsLCB1bmRlZmluZWQsIGZhbHNlXS5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHJOYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlzQm9vbGVhbkF0dHIoYXR0ck5hbWUpID8gc2V0SWZDaGFuZ2VkKGVsLCBhdHRyTmFtZSwgYXR0ck5hbWUpIDogc2V0SWZDaGFuZ2VkKGVsLCBhdHRyTmFtZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldElmQ2hhbmdlZChlbCwgYXR0ck5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKGVsLmdldEF0dHJpYnV0ZShhdHRyTmFtZSkgIT0gdmFsdWUpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdChlbCwgdmFsdWUpIHtcbiAgICBjb25zdCBhcnJheVdyYXBwZWRWYWx1ZSA9IFtdLmNvbmNhdCh2YWx1ZSkubWFwKHZhbHVlID0+IHtcbiAgICAgIHJldHVybiB2YWx1ZSArICcnO1xuICAgIH0pO1xuICAgIEFycmF5LmZyb20oZWwub3B0aW9ucykuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgb3B0aW9uLnNlbGVjdGVkID0gYXJyYXlXcmFwcGVkVmFsdWUuaW5jbHVkZXMob3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVRleHREaXJlY3RpdmUoZWwsIG91dHB1dCwgZXhwcmVzc2lvbikge1xuICAgIC8vIElmIG5lc3RlZCBtb2RlbCBrZXkgaXMgdW5kZWZpbmVkLCBzZXQgdGhlIGRlZmF1bHQgdmFsdWUgdG8gZW1wdHkgc3RyaW5nLlxuICAgIGlmIChvdXRwdXQgPT09IHVuZGVmaW5lZCAmJiBTdHJpbmcoZXhwcmVzc2lvbikubWF0Y2goL1xcLi8pKSB7XG4gICAgICBvdXRwdXQgPSAnJztcbiAgICB9XG5cbiAgICBlbC50ZXh0Q29udGVudCA9IG91dHB1dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUh0bWxEaXJlY3RpdmUoY29tcG9uZW50LCBlbCwgZXhwcmVzc2lvbiwgZXh0cmFWYXJzKSB7XG4gICAgZWwuaW5uZXJIVE1MID0gY29tcG9uZW50LmV2YWx1YXRlUmV0dXJuRXhwcmVzc2lvbihlbCwgZXhwcmVzc2lvbiwgZXh0cmFWYXJzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVNob3dEaXJlY3RpdmUoY29tcG9uZW50LCBlbCwgdmFsdWUsIG1vZGlmaWVycywgaW5pdGlhbFVwZGF0ZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgaGlkZSA9ICgpID0+IHtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICBlbC5fX3hfaXNfc2hvd24gPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc2hvdyA9ICgpID0+IHtcbiAgICAgIGlmIChlbC5zdHlsZS5sZW5ndGggPT09IDEgJiYgZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG4gICAgICB9XG5cbiAgICAgIGVsLl9feF9pc19zaG93biA9IHRydWU7XG4gICAgfTtcblxuICAgIGlmIChpbml0aWFsVXBkYXRlID09PSB0cnVlKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgc2hvdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlID0gKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgZWwuX194X3RyYW5zaXRpb24pIHtcbiAgICAgICAgICB0cmFuc2l0aW9uSW4oZWwsICgpID0+IHtcbiAgICAgICAgICAgIHNob3coKTtcbiAgICAgICAgICB9LCByZWplY3QsIGNvbXBvbmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKCgpID0+IHt9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpIHtcbiAgICAgICAgICB0cmFuc2l0aW9uT3V0KGVsLCAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCgpID0+IHtcbiAgICAgICAgICAgICAgaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgcmVqZWN0LCBjb21wb25lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUoKCkgPT4ge30pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTsgLy8gVGhlIHdvcmtpbmcgb2YgeC1zaG93IGlzIGEgYml0IGNvbXBsZXggYmVjYXVzZSB3ZSBuZWVkIHRvXG4gICAgLy8gd2FpdCBmb3IgYW55IGNoaWxkIHRyYW5zaXRpb25zIHRvIGZpbmlzaCBiZWZvcmUgaGlkaW5nXG4gICAgLy8gc29tZSBlbGVtZW50LiBBbHNvLCB0aGlzIGhhcyB0byBiZSBkb25lIHJlY3Vyc2l2ZWx5LlxuICAgIC8vIElmIHgtc2hvdy5pbW1lZGlhdGUsIGZvcmVnb2UgdGhlIHdhaXRpbmcuXG5cblxuICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoJ2ltbWVkaWF0ZScpKSB7XG4gICAgICBoYW5kbGUoZmluaXNoID0+IGZpbmlzaCgpLCAoKSA9PiB7fSk7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyB4LXNob3cgaXMgZW5jb3VudGVyZWQgZHVyaW5nIGEgRE9NIHRyZWUgd2Fsay4gSWYgYW4gZWxlbWVudFxuICAgIC8vIHdlIGVuY291bnRlciBpcyBOT1QgYSBjaGlsZCBvZiBhbm90aGVyIHgtc2hvdyBlbGVtZW50IHdlXG4gICAgLy8gY2FuIGV4ZWN1dGUgdGhlIHByZXZpb3VzIHgtc2hvdyBzdGFjayAoaWYgb25lIGV4aXN0cykuXG5cblxuICAgIGlmIChjb21wb25lbnQuc2hvd0RpcmVjdGl2ZUxhc3RFbGVtZW50ICYmICFjb21wb25lbnQuc2hvd0RpcmVjdGl2ZUxhc3RFbGVtZW50LmNvbnRhaW5zKGVsKSkge1xuICAgICAgY29tcG9uZW50LmV4ZWN1dGVBbmRDbGVhclJlbWFpbmluZ1Nob3dEaXJlY3RpdmVTdGFjaygpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudC5zaG93RGlyZWN0aXZlU3RhY2sucHVzaChoYW5kbGUpO1xuICAgIGNvbXBvbmVudC5zaG93RGlyZWN0aXZlTGFzdEVsZW1lbnQgPSBlbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUlmRGlyZWN0aXZlKGNvbXBvbmVudCwgZWwsIGV4cHJlc3Npb25SZXN1bHQsIGluaXRpYWxVcGRhdGUsIGV4dHJhVmFycykge1xuICAgIHdhcm5JZk1hbGZvcm1lZFRlbXBsYXRlKGVsLCAneC1pZicpO1xuICAgIGNvbnN0IGVsZW1lbnRIYXNBbHJlYWR5QmVlbkFkZGVkID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nICYmIGVsLm5leHRFbGVtZW50U2libGluZy5fX3hfaW5zZXJ0ZWRfbWUgPT09IHRydWU7XG5cbiAgICBpZiAoZXhwcmVzc2lvblJlc3VsdCAmJiAoIWVsZW1lbnRIYXNBbHJlYWR5QmVlbkFkZGVkIHx8IGVsLl9feF90cmFuc2l0aW9uKSkge1xuICAgICAgY29uc3QgY2xvbmUgPSBkb2N1bWVudC5pbXBvcnROb2RlKGVsLmNvbnRlbnQsIHRydWUpO1xuICAgICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIGVsLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgICB0cmFuc2l0aW9uSW4oZWwubmV4dEVsZW1lbnRTaWJsaW5nLCAoKSA9PiB7fSwgKCkgPT4ge30sIGNvbXBvbmVudCwgaW5pdGlhbFVwZGF0ZSk7XG4gICAgICBjb21wb25lbnQuaW5pdGlhbGl6ZUVsZW1lbnRzKGVsLm5leHRFbGVtZW50U2libGluZywgZXh0cmFWYXJzKTtcbiAgICAgIGVsLm5leHRFbGVtZW50U2libGluZy5fX3hfaW5zZXJ0ZWRfbWUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIWV4cHJlc3Npb25SZXN1bHQgJiYgZWxlbWVudEhhc0FscmVhZHlCZWVuQWRkZWQpIHtcbiAgICAgIHRyYW5zaXRpb25PdXQoZWwubmV4dEVsZW1lbnRTaWJsaW5nLCAoKSA9PiB7XG4gICAgICAgIGVsLm5leHRFbGVtZW50U2libGluZy5yZW1vdmUoKTtcbiAgICAgIH0sICgpID0+IHt9LCBjb21wb25lbnQsIGluaXRpYWxVcGRhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyTGlzdGVuZXIoY29tcG9uZW50LCBlbCwgZXZlbnQsIG1vZGlmaWVycywgZXhwcmVzc2lvbiwgZXh0cmFWYXJzID0ge30pIHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgcGFzc2l2ZTogbW9kaWZpZXJzLmluY2x1ZGVzKCdwYXNzaXZlJylcbiAgICB9O1xuXG4gICAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcygnY2FtZWwnKSkge1xuICAgICAgZXZlbnQgPSBjYW1lbENhc2UoZXZlbnQpO1xuICAgIH1cblxuICAgIGxldCBoYW5kbGVyLCBsaXN0ZW5lclRhcmdldDtcblxuICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoJ2F3YXknKSkge1xuICAgICAgbGlzdGVuZXJUYXJnZXQgPSBkb2N1bWVudDtcblxuICAgICAgaGFuZGxlciA9IGUgPT4ge1xuICAgICAgICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiB0aGUgY2xpY2sgY2FtZSBmcm9tIHRoZSBlbGVtZW50IG9yIHdpdGhpbiBpdC5cbiAgICAgICAgaWYgKGVsLmNvbnRhaW5zKGUudGFyZ2V0KSkgcmV0dXJuOyAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiB0aGlzIGVsZW1lbnQgaXNuJ3QgY3VycmVudGx5IHZpc2libGUuXG5cbiAgICAgICAgaWYgKGVsLm9mZnNldFdpZHRoIDwgMSAmJiBlbC5vZmZzZXRIZWlnaHQgPCAxKSByZXR1cm47IC8vIE5vdyB0aGF0IHdlIGFyZSBzdXJlIHRoZSBlbGVtZW50IGlzIHZpc2libGUsIEFORCB0aGUgY2xpY2tcbiAgICAgICAgLy8gaXMgZnJvbSBvdXRzaWRlIGl0LCBsZXQncyBydW4gdGhlIGV4cHJlc3Npb24uXG5cbiAgICAgICAgcnVuTGlzdGVuZXJIYW5kbGVyKGNvbXBvbmVudCwgZXhwcmVzc2lvbiwgZSwgZXh0cmFWYXJzKTtcblxuICAgICAgICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKCdvbmNlJykpIHtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdGVuZXJUYXJnZXQgPSBtb2RpZmllcnMuaW5jbHVkZXMoJ3dpbmRvdycpID8gd2luZG93IDogbW9kaWZpZXJzLmluY2x1ZGVzKCdkb2N1bWVudCcpID8gZG9jdW1lbnQgOiBlbDtcblxuICAgICAgaGFuZGxlciA9IGUgPT4ge1xuICAgICAgICAvLyBSZW1vdmUgdGhpcyBnbG9iYWwgZXZlbnQgaGFuZGxlciBpZiB0aGUgZWxlbWVudCB0aGF0IGRlY2xhcmVkIGl0XG4gICAgICAgIC8vIGhhcyBiZWVuIHJlbW92ZWQuIEl0J3Mgbm93IHN0YWxlLlxuICAgICAgICBpZiAobGlzdGVuZXJUYXJnZXQgPT09IHdpbmRvdyB8fCBsaXN0ZW5lclRhcmdldCA9PT0gZG9jdW1lbnQpIHtcbiAgICAgICAgICBpZiAoIWRvY3VtZW50LmJvZHkuY29udGFpbnMoZWwpKSB7XG4gICAgICAgICAgICBsaXN0ZW5lclRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNLZXlFdmVudChldmVudCkpIHtcbiAgICAgICAgICBpZiAoaXNMaXN0ZW5pbmdGb3JBU3BlY2lmaWNLZXlUaGF0SGFzbnRCZWVuUHJlc3NlZChlLCBtb2RpZmllcnMpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcygncHJldmVudCcpKSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoJ3N0b3AnKSkgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gSWYgdGhlIC5zZWxmIG1vZGlmaWVyIGlzbid0IHByZXNlbnQsIG9yIGlmIGl0IGlzIHByZXNlbnQgYW5kXG4gICAgICAgIC8vIHRoZSB0YXJnZXQgZWxlbWVudCBtYXRjaGVzIHRoZSBlbGVtZW50IHdlIGFyZSByZWdpc3RlcmluZyB0aGVcbiAgICAgICAgLy8gZXZlbnQgb24sIHJ1biB0aGUgaGFuZGxlclxuXG4gICAgICAgIGlmICghbW9kaWZpZXJzLmluY2x1ZGVzKCdzZWxmJykgfHwgZS50YXJnZXQgPT09IGVsKSB7XG4gICAgICAgICAgY29uc3QgcmV0dXJuVmFsdWUgPSBydW5MaXN0ZW5lckhhbmRsZXIoY29tcG9uZW50LCBleHByZXNzaW9uLCBlLCBleHRyYVZhcnMpO1xuICAgICAgICAgIHJldHVyblZhbHVlLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKCdvbmNlJykpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lclRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoJ2RlYm91bmNlJykpIHtcbiAgICAgIGxldCBuZXh0TW9kaWZpZXIgPSBtb2RpZmllcnNbbW9kaWZpZXJzLmluZGV4T2YoJ2RlYm91bmNlJykgKyAxXSB8fCAnaW52YWxpZC13YWl0JztcbiAgICAgIGxldCB3YWl0ID0gaXNOdW1lcmljKG5leHRNb2RpZmllci5zcGxpdCgnbXMnKVswXSkgPyBOdW1iZXIobmV4dE1vZGlmaWVyLnNwbGl0KCdtcycpWzBdKSA6IDI1MDtcbiAgICAgIGhhbmRsZXIgPSBkZWJvdW5jZShoYW5kbGVyLCB3YWl0KTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lclRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJ1bkxpc3RlbmVySGFuZGxlcihjb21wb25lbnQsIGV4cHJlc3Npb24sIGUsIGV4dHJhVmFycykge1xuICAgIHJldHVybiBjb21wb25lbnQuZXZhbHVhdGVDb21tYW5kRXhwcmVzc2lvbihlLnRhcmdldCwgZXhwcmVzc2lvbiwgKCkgPT4ge1xuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBleHRyYVZhcnMoKSksIHt9LCB7XG4gICAgICAgICckZXZlbnQnOiBlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzS2V5RXZlbnQoZXZlbnQpIHtcbiAgICByZXR1cm4gWydrZXlkb3duJywgJ2tleXVwJ10uaW5jbHVkZXMoZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNMaXN0ZW5pbmdGb3JBU3BlY2lmaWNLZXlUaGF0SGFzbnRCZWVuUHJlc3NlZChlLCBtb2RpZmllcnMpIHtcbiAgICBsZXQga2V5TW9kaWZpZXJzID0gbW9kaWZpZXJzLmZpbHRlcihpID0+IHtcbiAgICAgIHJldHVybiAhWyd3aW5kb3cnLCAnZG9jdW1lbnQnLCAncHJldmVudCcsICdzdG9wJ10uaW5jbHVkZXMoaSk7XG4gICAgfSk7XG5cbiAgICBpZiAoa2V5TW9kaWZpZXJzLmluY2x1ZGVzKCdkZWJvdW5jZScpKSB7XG4gICAgICBsZXQgZGVib3VuY2VJbmRleCA9IGtleU1vZGlmaWVycy5pbmRleE9mKCdkZWJvdW5jZScpO1xuICAgICAga2V5TW9kaWZpZXJzLnNwbGljZShkZWJvdW5jZUluZGV4LCBpc051bWVyaWMoKGtleU1vZGlmaWVyc1tkZWJvdW5jZUluZGV4ICsgMV0gfHwgJ2ludmFsaWQtd2FpdCcpLnNwbGl0KCdtcycpWzBdKSA/IDIgOiAxKTtcbiAgICB9IC8vIElmIG5vIG1vZGlmaWVyIGlzIHNwZWNpZmllZCwgd2UnbGwgY2FsbCBpdCBhIHByZXNzLlxuXG5cbiAgICBpZiAoa2V5TW9kaWZpZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlOyAvLyBJZiBvbmUgaXMgcGFzc2VkLCBBTkQgaXQgbWF0Y2hlcyB0aGUga2V5IHByZXNzZWQsIHdlJ2xsIGNhbGwgaXQgYSBwcmVzcy5cblxuICAgIGlmIChrZXlNb2RpZmllcnMubGVuZ3RoID09PSAxICYmIGtleU1vZGlmaWVyc1swXSA9PT0ga2V5VG9Nb2RpZmllcihlLmtleSkpIHJldHVybiBmYWxzZTsgLy8gVGhlIHVzZXIgaXMgbGlzdGVuaW5nIGZvciBrZXkgY29tYmluYXRpb25zLlxuXG4gICAgY29uc3Qgc3lzdGVtS2V5TW9kaWZpZXJzID0gWydjdHJsJywgJ3NoaWZ0JywgJ2FsdCcsICdtZXRhJywgJ2NtZCcsICdzdXBlciddO1xuICAgIGNvbnN0IHNlbGVjdGVkU3lzdGVtS2V5TW9kaWZpZXJzID0gc3lzdGVtS2V5TW9kaWZpZXJzLmZpbHRlcihtb2RpZmllciA9PiBrZXlNb2RpZmllcnMuaW5jbHVkZXMobW9kaWZpZXIpKTtcbiAgICBrZXlNb2RpZmllcnMgPSBrZXlNb2RpZmllcnMuZmlsdGVyKGkgPT4gIXNlbGVjdGVkU3lzdGVtS2V5TW9kaWZpZXJzLmluY2x1ZGVzKGkpKTtcblxuICAgIGlmIChzZWxlY3RlZFN5c3RlbUtleU1vZGlmaWVycy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBhY3RpdmVseVByZXNzZWRLZXlNb2RpZmllcnMgPSBzZWxlY3RlZFN5c3RlbUtleU1vZGlmaWVycy5maWx0ZXIobW9kaWZpZXIgPT4ge1xuICAgICAgICAvLyBBbGlhcyBcImNtZFwiIGFuZCBcInN1cGVyXCIgdG8gXCJtZXRhXCJcbiAgICAgICAgaWYgKG1vZGlmaWVyID09PSAnY21kJyB8fCBtb2RpZmllciA9PT0gJ3N1cGVyJykgbW9kaWZpZXIgPSAnbWV0YSc7XG4gICAgICAgIHJldHVybiBlW2Ake21vZGlmaWVyfUtleWBdO1xuICAgICAgfSk7IC8vIElmIGFsbCB0aGUgbW9kaWZpZXJzIHNlbGVjdGVkIGFyZSBwcmVzc2VkLCAuLi5cblxuICAgICAgaWYgKGFjdGl2ZWx5UHJlc3NlZEtleU1vZGlmaWVycy5sZW5ndGggPT09IHNlbGVjdGVkU3lzdGVtS2V5TW9kaWZpZXJzLmxlbmd0aCkge1xuICAgICAgICAvLyBBTkQgdGhlIHJlbWFpbmluZyBrZXkgaXMgcHJlc3NlZCBhcyB3ZWxsLiBJdCdzIGEgcHJlc3MuXG4gICAgICAgIGlmIChrZXlNb2RpZmllcnNbMF0gPT09IGtleVRvTW9kaWZpZXIoZS5rZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSAvLyBXZSdsbCBjYWxsIGl0IE5PVCBhIHZhbGlkIGtleXByZXNzLlxuXG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGtleVRvTW9kaWZpZXIoa2V5KSB7XG4gICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICByZXR1cm4gJ3NsYXNoJztcblxuICAgICAgY2FzZSAnICc6XG4gICAgICBjYXNlICdTcGFjZWJhcic6XG4gICAgICAgIHJldHVybiAnc3BhY2UnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4ga2V5ICYmIGtlYmFiQ2FzZShrZXkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyTW9kZWxMaXN0ZW5lcihjb21wb25lbnQsIGVsLCBtb2RpZmllcnMsIGV4cHJlc3Npb24sIGV4dHJhVmFycykge1xuICAgIC8vIElmIHRoZSBlbGVtZW50IHdlIGFyZSBiaW5kaW5nIHRvIGlzIGEgc2VsZWN0LCBhIHJhZGlvLCBvciBjaGVja2JveFxuICAgIC8vIHdlJ2xsIGxpc3RlbiBmb3IgdGhlIGNoYW5nZSBldmVudCBpbnN0ZWFkIG9mIHRoZSBcImlucHV0XCIgZXZlbnQuXG4gICAgdmFyIGV2ZW50ID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc2VsZWN0JyB8fCBbJ2NoZWNrYm94JywgJ3JhZGlvJ10uaW5jbHVkZXMoZWwudHlwZSkgfHwgbW9kaWZpZXJzLmluY2x1ZGVzKCdsYXp5JykgPyAnY2hhbmdlJyA6ICdpbnB1dCc7XG4gICAgY29uc3QgbGlzdGVuZXJFeHByZXNzaW9uID0gYCR7ZXhwcmVzc2lvbn0gPSByaWdodFNpZGVPZkV4cHJlc3Npb24oJGV2ZW50LCAke2V4cHJlc3Npb259KWA7XG4gICAgcmVnaXN0ZXJMaXN0ZW5lcihjb21wb25lbnQsIGVsLCBldmVudCwgbW9kaWZpZXJzLCBsaXN0ZW5lckV4cHJlc3Npb24sICgpID0+IHtcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgZXh0cmFWYXJzKCkpLCB7fSwge1xuICAgICAgICByaWdodFNpZGVPZkV4cHJlc3Npb246IGdlbmVyYXRlTW9kZWxBc3NpZ25tZW50RnVuY3Rpb24oZWwsIG1vZGlmaWVycywgZXhwcmVzc2lvbilcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVNb2RlbEFzc2lnbm1lbnRGdW5jdGlvbihlbCwgbW9kaWZpZXJzLCBleHByZXNzaW9uKSB7XG4gICAgaWYgKGVsLnR5cGUgPT09ICdyYWRpbycpIHtcbiAgICAgIC8vIFJhZGlvIGJ1dHRvbnMgb25seSB3b3JrIHByb3Blcmx5IHdoZW4gdGhleSBzaGFyZSBhIG5hbWUgYXR0cmlidXRlLlxuICAgICAgLy8gUGVvcGxlIG1pZ2h0IGFzc3VtZSB3ZSB0YWtlIGNhcmUgb2YgdGhhdCBmb3IgdGhlbSwgYmVjYXVzZVxuICAgICAgLy8gdGhleSBhbHJlYWR5IHNldCBhIHNoYXJlZCBcIngtbW9kZWxcIiBhdHRyaWJ1dGUuXG4gICAgICBpZiAoIWVsLmhhc0F0dHJpYnV0ZSgnbmFtZScpKSBlbC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBleHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKGV2ZW50LCBjdXJyZW50VmFsdWUpID0+IHtcbiAgICAgIC8vIENoZWNrIGZvciBldmVudC5kZXRhaWwgZHVlIHRvIGFuIGlzc3VlIHdoZXJlIElFMTEgaGFuZGxlcyBvdGhlciBldmVudHMgYXMgYSBDdXN0b21FdmVudC5cbiAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEN1c3RvbUV2ZW50ICYmIGV2ZW50LmRldGFpbCkge1xuICAgICAgICByZXR1cm4gZXZlbnQuZGV0YWlsO1xuICAgICAgfSBlbHNlIGlmIChlbC50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIC8vIElmIHRoZSBkYXRhIHdlIGFyZSBiaW5kaW5nIHRvIGlzIGFuIGFycmF5LCB0b2dnbGUgaXRzIHZhbHVlIGluc2lkZSB0aGUgYXJyYXkuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnRWYWx1ZSkpIHtcbiAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IG1vZGlmaWVycy5pbmNsdWRlcygnbnVtYmVyJykgPyBzYWZlUGFyc2VOdW1iZXIoZXZlbnQudGFyZ2V0LnZhbHVlKSA6IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgICByZXR1cm4gZXZlbnQudGFyZ2V0LmNoZWNrZWQgPyBjdXJyZW50VmFsdWUuY29uY2F0KFtuZXdWYWx1ZV0pIDogY3VycmVudFZhbHVlLmZpbHRlcihlbCA9PiAhY2hlY2tlZEF0dHJMb29zZUNvbXBhcmUoZWwsIG5ld1ZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldC5jaGVja2VkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NlbGVjdCcgJiYgZWwubXVsdGlwbGUpIHtcbiAgICAgICAgcmV0dXJuIG1vZGlmaWVycy5pbmNsdWRlcygnbnVtYmVyJykgPyBBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5zZWxlY3RlZE9wdGlvbnMpLm1hcChvcHRpb24gPT4ge1xuICAgICAgICAgIGNvbnN0IHJhd1ZhbHVlID0gb3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0O1xuICAgICAgICAgIHJldHVybiBzYWZlUGFyc2VOdW1iZXIocmF3VmFsdWUpO1xuICAgICAgICB9KSA6IEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnNlbGVjdGVkT3B0aW9ucykubWFwKG9wdGlvbiA9PiB7XG4gICAgICAgICAgcmV0dXJuIG9wdGlvbi52YWx1ZSB8fCBvcHRpb24udGV4dDtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByYXdWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgcmV0dXJuIG1vZGlmaWVycy5pbmNsdWRlcygnbnVtYmVyJykgPyBzYWZlUGFyc2VOdW1iZXIocmF3VmFsdWUpIDogbW9kaWZpZXJzLmluY2x1ZGVzKCd0cmltJykgPyByYXdWYWx1ZS50cmltKCkgOiByYXdWYWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gc2FmZVBhcnNlTnVtYmVyKHJhd1ZhbHVlKSB7XG4gICAgY29uc3QgbnVtYmVyID0gcmF3VmFsdWUgPyBwYXJzZUZsb2F0KHJhd1ZhbHVlKSA6IG51bGw7XG4gICAgcmV0dXJuIGlzTnVtZXJpYyhudW1iZXIpID8gbnVtYmVyIDogcmF3VmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQ29weXJpZ2h0IChDKSAyMDE3IHNhbGVzZm9yY2UuY29tLCBpbmMuXG4gICAqL1xuICBjb25zdCB7IGlzQXJyYXkgfSA9IEFycmF5O1xuICBjb25zdCB7IGdldFByb3RvdHlwZU9mLCBjcmVhdGU6IE9iamVjdENyZWF0ZSwgZGVmaW5lUHJvcGVydHk6IE9iamVjdERlZmluZVByb3BlcnR5LCBkZWZpbmVQcm9wZXJ0aWVzOiBPYmplY3REZWZpbmVQcm9wZXJ0aWVzLCBpc0V4dGVuc2libGUsIGdldE93blByb3BlcnR5RGVzY3JpcHRvciwgZ2V0T3duUHJvcGVydHlOYW1lcywgZ2V0T3duUHJvcGVydHlTeW1ib2xzLCBwcmV2ZW50RXh0ZW5zaW9ucywgaGFzT3duUHJvcGVydHksIH0gPSBPYmplY3Q7XG4gIGNvbnN0IHsgcHVzaDogQXJyYXlQdXNoLCBjb25jYXQ6IEFycmF5Q29uY2F0LCBtYXA6IEFycmF5TWFwLCB9ID0gQXJyYXkucHJvdG90eXBlO1xuICBmdW5jdGlvbiBpc1VuZGVmaW5lZChvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT09IHVuZGVmaW5lZDtcbiAgfVxuICBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbic7XG4gIH1cbiAgZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG4gIH1cbiAgY29uc3QgcHJveHlUb1ZhbHVlTWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgZnVuY3Rpb24gcmVnaXN0ZXJQcm94eShwcm94eSwgdmFsdWUpIHtcbiAgICAgIHByb3h5VG9WYWx1ZU1hcC5zZXQocHJveHksIHZhbHVlKTtcbiAgfVxuICBjb25zdCB1bndyYXAgPSAocmVwbGljYU9yQW55KSA9PiBwcm94eVRvVmFsdWVNYXAuZ2V0KHJlcGxpY2FPckFueSkgfHwgcmVwbGljYU9yQW55O1xuXG4gIGZ1bmN0aW9uIHdyYXBWYWx1ZShtZW1icmFuZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBtZW1icmFuZS52YWx1ZUlzT2JzZXJ2YWJsZSh2YWx1ZSkgPyBtZW1icmFuZS5nZXRQcm94eSh2YWx1ZSkgOiB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogVW53cmFwIHByb3BlcnR5IGRlc2NyaXB0b3JzIHdpbGwgc2V0IHZhbHVlIG9uIG9yaWdpbmFsIGRlc2NyaXB0b3JcbiAgICogV2Ugb25seSBuZWVkIHRvIHVud3JhcCBpZiB2YWx1ZSBpcyBzcGVjaWZpZWRcbiAgICogQHBhcmFtIGRlc2NyaXB0b3IgZXh0ZXJuYWwgZGVzY3JwaXRvciBwcm92aWRlZCB0byBkZWZpbmUgbmV3IHByb3BlcnR5IG9uIG9yaWdpbmFsIHZhbHVlXG4gICAqL1xuICBmdW5jdGlvbiB1bndyYXBEZXNjcmlwdG9yKGRlc2NyaXB0b3IpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGRlc2NyaXB0b3IsICd2YWx1ZScpKSB7XG4gICAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IHVud3JhcChkZXNjcmlwdG9yLnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZXNjcmlwdG9yO1xuICB9XG4gIGZ1bmN0aW9uIGxvY2tTaGFkb3dUYXJnZXQobWVtYnJhbmUsIHNoYWRvd1RhcmdldCwgb3JpZ2luYWxUYXJnZXQpIHtcbiAgICAgIGNvbnN0IHRhcmdldEtleXMgPSBBcnJheUNvbmNhdC5jYWxsKGdldE93blByb3BlcnR5TmFtZXMob3JpZ2luYWxUYXJnZXQpLCBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMob3JpZ2luYWxUYXJnZXQpKTtcbiAgICAgIHRhcmdldEtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgbGV0IGRlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob3JpZ2luYWxUYXJnZXQsIGtleSk7XG4gICAgICAgICAgLy8gV2UgZG8gbm90IG5lZWQgdG8gd3JhcCB0aGUgZGVzY3JpcHRvciBpZiBjb25maWd1cmFibGVcbiAgICAgICAgICAvLyBCZWNhdXNlIHdlIGNhbiBkZWFsIHdpdGggd3JhcHBpbmcgaXQgd2hlbiB1c2VyIGdvZXMgdGhyb3VnaFxuICAgICAgICAgIC8vIEdldCBvd24gcHJvcGVydHkgZGVzY3JpcHRvci4gVGhlcmUgaXMgYWxzbyBhIGNoYW5jZSB0aGF0IHRoaXMgZGVzY3JpcHRvclxuICAgICAgICAgIC8vIGNvdWxkIGNoYW5nZSBzb21ldGltZSBpbiB0aGUgZnV0dXJlLCBzbyB3ZSBjYW4gZGVmZXIgd3JhcHBpbmdcbiAgICAgICAgICAvLyB1bnRpbCB3ZSBuZWVkIHRvXG4gICAgICAgICAgaWYgKCFkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSkge1xuICAgICAgICAgICAgICBkZXNjcmlwdG9yID0gd3JhcERlc2NyaXB0b3IobWVtYnJhbmUsIGRlc2NyaXB0b3IsIHdyYXBWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIE9iamVjdERlZmluZVByb3BlcnR5KHNoYWRvd1RhcmdldCwga2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgIH0pO1xuICAgICAgcHJldmVudEV4dGVuc2lvbnMoc2hhZG93VGFyZ2V0KTtcbiAgfVxuICBjbGFzcyBSZWFjdGl2ZVByb3h5SGFuZGxlciB7XG4gICAgICBjb25zdHJ1Y3RvcihtZW1icmFuZSwgdmFsdWUpIHtcbiAgICAgICAgICB0aGlzLm9yaWdpbmFsVGFyZ2V0ID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5tZW1icmFuZSA9IG1lbWJyYW5lO1xuICAgICAgfVxuICAgICAgZ2V0KHNoYWRvd1RhcmdldCwga2V5KSB7XG4gICAgICAgICAgY29uc3QgeyBvcmlnaW5hbFRhcmdldCwgbWVtYnJhbmUgfSA9IHRoaXM7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBvcmlnaW5hbFRhcmdldFtrZXldO1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWVPYnNlcnZlZCB9ID0gbWVtYnJhbmU7XG4gICAgICAgICAgdmFsdWVPYnNlcnZlZChvcmlnaW5hbFRhcmdldCwga2V5KTtcbiAgICAgICAgICByZXR1cm4gbWVtYnJhbmUuZ2V0UHJveHkodmFsdWUpO1xuICAgICAgfVxuICAgICAgc2V0KHNoYWRvd1RhcmdldCwga2V5LCB2YWx1ZSkge1xuICAgICAgICAgIGNvbnN0IHsgb3JpZ2luYWxUYXJnZXQsIG1lbWJyYW5lOiB7IHZhbHVlTXV0YXRlZCB9IH0gPSB0aGlzO1xuICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gb3JpZ2luYWxUYXJnZXRba2V5XTtcbiAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgIG9yaWdpbmFsVGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgdmFsdWVNdXRhdGVkKG9yaWdpbmFsVGFyZ2V0LCBrZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdsZW5ndGgnICYmIGlzQXJyYXkob3JpZ2luYWxUYXJnZXQpKSB7XG4gICAgICAgICAgICAgIC8vIGZpeCBmb3IgaXNzdWUgIzIzNjogcHVzaCB3aWxsIGFkZCB0aGUgbmV3IGluZGV4LCBhbmQgYnkgdGhlIHRpbWUgbGVuZ3RoXG4gICAgICAgICAgICAgIC8vIGlzIHVwZGF0ZWQsIHRoZSBpbnRlcm5hbCBsZW5ndGggaXMgYWxyZWFkeSBlcXVhbCB0byB0aGUgbmV3IGxlbmd0aCB2YWx1ZVxuICAgICAgICAgICAgICAvLyB0aGVyZWZvcmUsIHRoZSBvbGRWYWx1ZSBpcyBlcXVhbCB0byB0aGUgdmFsdWUuIFRoaXMgaXMgdGhlIGZvcmtpbmcgbG9naWNcbiAgICAgICAgICAgICAgLy8gdG8gc3VwcG9ydCB0aGlzIHVzZSBjYXNlLlxuICAgICAgICAgICAgICB2YWx1ZU11dGF0ZWQob3JpZ2luYWxUYXJnZXQsIGtleSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgZGVsZXRlUHJvcGVydHkoc2hhZG93VGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICBjb25zdCB7IG9yaWdpbmFsVGFyZ2V0LCBtZW1icmFuZTogeyB2YWx1ZU11dGF0ZWQgfSB9ID0gdGhpcztcbiAgICAgICAgICBkZWxldGUgb3JpZ2luYWxUYXJnZXRba2V5XTtcbiAgICAgICAgICB2YWx1ZU11dGF0ZWQob3JpZ2luYWxUYXJnZXQsIGtleSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBhcHBseShzaGFkb3dUYXJnZXQsIHRoaXNBcmcsIGFyZ0FycmF5KSB7XG4gICAgICAgICAgLyogTm8gb3AgKi9cbiAgICAgIH1cbiAgICAgIGNvbnN0cnVjdCh0YXJnZXQsIGFyZ0FycmF5LCBuZXdUYXJnZXQpIHtcbiAgICAgICAgICAvKiBObyBvcCAqL1xuICAgICAgfVxuICAgICAgaGFzKHNoYWRvd1RhcmdldCwga2V5KSB7XG4gICAgICAgICAgY29uc3QgeyBvcmlnaW5hbFRhcmdldCwgbWVtYnJhbmU6IHsgdmFsdWVPYnNlcnZlZCB9IH0gPSB0aGlzO1xuICAgICAgICAgIHZhbHVlT2JzZXJ2ZWQob3JpZ2luYWxUYXJnZXQsIGtleSk7XG4gICAgICAgICAgcmV0dXJuIGtleSBpbiBvcmlnaW5hbFRhcmdldDtcbiAgICAgIH1cbiAgICAgIG93bktleXMoc2hhZG93VGFyZ2V0KSB7XG4gICAgICAgICAgY29uc3QgeyBvcmlnaW5hbFRhcmdldCB9ID0gdGhpcztcbiAgICAgICAgICByZXR1cm4gQXJyYXlDb25jYXQuY2FsbChnZXRPd25Qcm9wZXJ0eU5hbWVzKG9yaWdpbmFsVGFyZ2V0KSwgZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9yaWdpbmFsVGFyZ2V0KSk7XG4gICAgICB9XG4gICAgICBpc0V4dGVuc2libGUoc2hhZG93VGFyZ2V0KSB7XG4gICAgICAgICAgY29uc3Qgc2hhZG93SXNFeHRlbnNpYmxlID0gaXNFeHRlbnNpYmxlKHNoYWRvd1RhcmdldCk7XG4gICAgICAgICAgaWYgKCFzaGFkb3dJc0V4dGVuc2libGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNoYWRvd0lzRXh0ZW5zaWJsZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgeyBvcmlnaW5hbFRhcmdldCwgbWVtYnJhbmUgfSA9IHRoaXM7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0SXNFeHRlbnNpYmxlID0gaXNFeHRlbnNpYmxlKG9yaWdpbmFsVGFyZ2V0KTtcbiAgICAgICAgICBpZiAoIXRhcmdldElzRXh0ZW5zaWJsZSkge1xuICAgICAgICAgICAgICBsb2NrU2hhZG93VGFyZ2V0KG1lbWJyYW5lLCBzaGFkb3dUYXJnZXQsIG9yaWdpbmFsVGFyZ2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRhcmdldElzRXh0ZW5zaWJsZTtcbiAgICAgIH1cbiAgICAgIHNldFByb3RvdHlwZU9mKHNoYWRvd1RhcmdldCwgcHJvdG90eXBlKSB7XG4gICAgICB9XG4gICAgICBnZXRQcm90b3R5cGVPZihzaGFkb3dUYXJnZXQpIHtcbiAgICAgICAgICBjb25zdCB7IG9yaWdpbmFsVGFyZ2V0IH0gPSB0aGlzO1xuICAgICAgICAgIHJldHVybiBnZXRQcm90b3R5cGVPZihvcmlnaW5hbFRhcmdldCk7XG4gICAgICB9XG4gICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc2hhZG93VGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICBjb25zdCB7IG9yaWdpbmFsVGFyZ2V0LCBtZW1icmFuZSB9ID0gdGhpcztcbiAgICAgICAgICBjb25zdCB7IHZhbHVlT2JzZXJ2ZWQgfSA9IHRoaXMubWVtYnJhbmU7XG4gICAgICAgICAgLy8ga2V5cyBsb29rZWQgdXAgdmlhIGhhc093blByb3BlcnR5IG5lZWQgdG8gYmUgcmVhY3RpdmVcbiAgICAgICAgICB2YWx1ZU9ic2VydmVkKG9yaWdpbmFsVGFyZ2V0LCBrZXkpO1xuICAgICAgICAgIGxldCBkZXNjID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9yaWdpbmFsVGFyZ2V0LCBrZXkpO1xuICAgICAgICAgIGlmIChpc1VuZGVmaW5lZChkZXNjKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZGVzYztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc2hhZG93RGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzaGFkb3dUYXJnZXQsIGtleSk7XG4gICAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChzaGFkb3dEZXNjcmlwdG9yKSkge1xuICAgICAgICAgICAgICByZXR1cm4gc2hhZG93RGVzY3JpcHRvcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gTm90ZTogYnkgYWNjZXNzaW5nIHRoZSBkZXNjcmlwdG9yLCB0aGUga2V5IGlzIG1hcmtlZCBhcyBvYnNlcnZlZFxuICAgICAgICAgIC8vIGJ1dCBhY2Nlc3MgdG8gdGhlIHZhbHVlLCBzZXR0ZXIgb3IgZ2V0dGVyIChpZiBhdmFpbGFibGUpIGNhbm5vdCBvYnNlcnZlXG4gICAgICAgICAgLy8gbXV0YXRpb25zLCBqdXN0IGxpa2UgcmVndWxhciBtZXRob2RzLCBpbiB3aGljaCBjYXNlIHdlIGp1c3QgZG8gbm90aGluZy5cbiAgICAgICAgICBkZXNjID0gd3JhcERlc2NyaXB0b3IobWVtYnJhbmUsIGRlc2MsIHdyYXBWYWx1ZSk7XG4gICAgICAgICAgaWYgKCFkZXNjLmNvbmZpZ3VyYWJsZSkge1xuICAgICAgICAgICAgICAvLyBJZiBkZXNjcmlwdG9yIGZyb20gb3JpZ2luYWwgdGFyZ2V0IGlzIG5vdCBjb25maWd1cmFibGUsXG4gICAgICAgICAgICAgIC8vIFdlIG11c3QgY29weSB0aGUgd3JhcHBlZCBkZXNjcmlwdG9yIG92ZXIgdG8gdGhlIHNoYWRvdyB0YXJnZXQuXG4gICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgcHJveHkgd2lsbCB0aHJvdyBhbiBpbnZhcmlhbnQgZXJyb3IuXG4gICAgICAgICAgICAgIC8vIFRoaXMgaXMgb3VyIGxhc3QgY2hhbmNlIHRvIGxvY2sgdGhlIHZhbHVlLlxuICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm94eS9oYW5kbGVyL2dldE93blByb3BlcnR5RGVzY3JpcHRvciNJbnZhcmlhbnRzXG4gICAgICAgICAgICAgIE9iamVjdERlZmluZVByb3BlcnR5KHNoYWRvd1RhcmdldCwga2V5LCBkZXNjKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGRlc2M7XG4gICAgICB9XG4gICAgICBwcmV2ZW50RXh0ZW5zaW9ucyhzaGFkb3dUYXJnZXQpIHtcbiAgICAgICAgICBjb25zdCB7IG9yaWdpbmFsVGFyZ2V0LCBtZW1icmFuZSB9ID0gdGhpcztcbiAgICAgICAgICBsb2NrU2hhZG93VGFyZ2V0KG1lbWJyYW5lLCBzaGFkb3dUYXJnZXQsIG9yaWdpbmFsVGFyZ2V0KTtcbiAgICAgICAgICBwcmV2ZW50RXh0ZW5zaW9ucyhvcmlnaW5hbFRhcmdldCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBkZWZpbmVQcm9wZXJ0eShzaGFkb3dUYXJnZXQsIGtleSwgZGVzY3JpcHRvcikge1xuICAgICAgICAgIGNvbnN0IHsgb3JpZ2luYWxUYXJnZXQsIG1lbWJyYW5lIH0gPSB0aGlzO1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWVNdXRhdGVkIH0gPSBtZW1icmFuZTtcbiAgICAgICAgICBjb25zdCB7IGNvbmZpZ3VyYWJsZSB9ID0gZGVzY3JpcHRvcjtcbiAgICAgICAgICAvLyBXZSBoYXZlIHRvIGNoZWNrIGZvciB2YWx1ZSBpbiBkZXNjcmlwdG9yXG4gICAgICAgICAgLy8gYmVjYXVzZSBPYmplY3QuZnJlZXplKHByb3h5KSBjYWxscyB0aGlzIG1ldGhvZFxuICAgICAgICAgIC8vIHdpdGggb25seSB7IGNvbmZpZ3VyYWJsZTogZmFsc2UsIHdyaXRlYWJsZTogZmFsc2UgfVxuICAgICAgICAgIC8vIEFkZGl0aW9uYWxseSwgbWV0aG9kIHdpbGwgb25seSBiZSBjYWxsZWQgd2l0aCB3cml0ZWFibGU6ZmFsc2VcbiAgICAgICAgICAvLyBpZiB0aGUgZGVzY3JpcHRvciBoYXMgYSB2YWx1ZSwgYXMgb3Bwb3NlZCB0byBnZXR0ZXIvc2V0dGVyXG4gICAgICAgICAgLy8gU28gd2UgY2FuIGp1c3QgY2hlY2sgaWYgd3JpdGFibGUgaXMgcHJlc2VudCBhbmQgdGhlbiBzZWUgaWZcbiAgICAgICAgICAvLyB2YWx1ZSBpcyBwcmVzZW50LiBUaGlzIGVsaW1pbmF0ZXMgZ2V0dGVyIGFuZCBzZXR0ZXIgZGVzY3JpcHRvcnNcbiAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChkZXNjcmlwdG9yLCAnd3JpdGFibGUnKSAmJiAhaGFzT3duUHJvcGVydHkuY2FsbChkZXNjcmlwdG9yLCAndmFsdWUnKSkge1xuICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbERlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob3JpZ2luYWxUYXJnZXQsIGtleSk7XG4gICAgICAgICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBvcmlnaW5hbERlc2NyaXB0b3IudmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIE9iamVjdERlZmluZVByb3BlcnR5KG9yaWdpbmFsVGFyZ2V0LCBrZXksIHVud3JhcERlc2NyaXB0b3IoZGVzY3JpcHRvcikpO1xuICAgICAgICAgIGlmIChjb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIE9iamVjdERlZmluZVByb3BlcnR5KHNoYWRvd1RhcmdldCwga2V5LCB3cmFwRGVzY3JpcHRvcihtZW1icmFuZSwgZGVzY3JpcHRvciwgd3JhcFZhbHVlKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlTXV0YXRlZChvcmlnaW5hbFRhcmdldCwga2V5KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXBSZWFkT25seVZhbHVlKG1lbWJyYW5lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG1lbWJyYW5lLnZhbHVlSXNPYnNlcnZhYmxlKHZhbHVlKSA/IG1lbWJyYW5lLmdldFJlYWRPbmx5UHJveHkodmFsdWUpIDogdmFsdWU7XG4gIH1cbiAgY2xhc3MgUmVhZE9ubHlIYW5kbGVyIHtcbiAgICAgIGNvbnN0cnVjdG9yKG1lbWJyYW5lLCB2YWx1ZSkge1xuICAgICAgICAgIHRoaXMub3JpZ2luYWxUYXJnZXQgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm1lbWJyYW5lID0gbWVtYnJhbmU7XG4gICAgICB9XG4gICAgICBnZXQoc2hhZG93VGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICBjb25zdCB7IG1lbWJyYW5lLCBvcmlnaW5hbFRhcmdldCB9ID0gdGhpcztcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IG9yaWdpbmFsVGFyZ2V0W2tleV07XG4gICAgICAgICAgY29uc3QgeyB2YWx1ZU9ic2VydmVkIH0gPSBtZW1icmFuZTtcbiAgICAgICAgICB2YWx1ZU9ic2VydmVkKG9yaWdpbmFsVGFyZ2V0LCBrZXkpO1xuICAgICAgICAgIHJldHVybiBtZW1icmFuZS5nZXRSZWFkT25seVByb3h5KHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHNldChzaGFkb3dUYXJnZXQsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBkZWxldGVQcm9wZXJ0eShzaGFkb3dUYXJnZXQsIGtleSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGFwcGx5KHNoYWRvd1RhcmdldCwgdGhpc0FyZywgYXJnQXJyYXkpIHtcbiAgICAgICAgICAvKiBObyBvcCAqL1xuICAgICAgfVxuICAgICAgY29uc3RydWN0KHRhcmdldCwgYXJnQXJyYXksIG5ld1RhcmdldCkge1xuICAgICAgICAgIC8qIE5vIG9wICovXG4gICAgICB9XG4gICAgICBoYXMoc2hhZG93VGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICBjb25zdCB7IG9yaWdpbmFsVGFyZ2V0LCBtZW1icmFuZTogeyB2YWx1ZU9ic2VydmVkIH0gfSA9IHRoaXM7XG4gICAgICAgICAgdmFsdWVPYnNlcnZlZChvcmlnaW5hbFRhcmdldCwga2V5KTtcbiAgICAgICAgICByZXR1cm4ga2V5IGluIG9yaWdpbmFsVGFyZ2V0O1xuICAgICAgfVxuICAgICAgb3duS2V5cyhzaGFkb3dUYXJnZXQpIHtcbiAgICAgICAgICBjb25zdCB7IG9yaWdpbmFsVGFyZ2V0IH0gPSB0aGlzO1xuICAgICAgICAgIHJldHVybiBBcnJheUNvbmNhdC5jYWxsKGdldE93blByb3BlcnR5TmFtZXMob3JpZ2luYWxUYXJnZXQpLCBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMob3JpZ2luYWxUYXJnZXQpKTtcbiAgICAgIH1cbiAgICAgIHNldFByb3RvdHlwZU9mKHNoYWRvd1RhcmdldCwgcHJvdG90eXBlKSB7XG4gICAgICB9XG4gICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc2hhZG93VGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICBjb25zdCB7IG9yaWdpbmFsVGFyZ2V0LCBtZW1icmFuZSB9ID0gdGhpcztcbiAgICAgICAgICBjb25zdCB7IHZhbHVlT2JzZXJ2ZWQgfSA9IG1lbWJyYW5lO1xuICAgICAgICAgIC8vIGtleXMgbG9va2VkIHVwIHZpYSBoYXNPd25Qcm9wZXJ0eSBuZWVkIHRvIGJlIHJlYWN0aXZlXG4gICAgICAgICAgdmFsdWVPYnNlcnZlZChvcmlnaW5hbFRhcmdldCwga2V5KTtcbiAgICAgICAgICBsZXQgZGVzYyA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihvcmlnaW5hbFRhcmdldCwga2V5KTtcbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQoZGVzYykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRlc2M7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNoYWRvd0Rlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc2hhZG93VGFyZ2V0LCBrZXkpO1xuICAgICAgICAgIGlmICghaXNVbmRlZmluZWQoc2hhZG93RGVzY3JpcHRvcikpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNoYWRvd0Rlc2NyaXB0b3I7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIE5vdGU6IGJ5IGFjY2Vzc2luZyB0aGUgZGVzY3JpcHRvciwgdGhlIGtleSBpcyBtYXJrZWQgYXMgb2JzZXJ2ZWRcbiAgICAgICAgICAvLyBidXQgYWNjZXNzIHRvIHRoZSB2YWx1ZSBvciBnZXR0ZXIgKGlmIGF2YWlsYWJsZSkgY2Fubm90IGJlIG9ic2VydmVkLFxuICAgICAgICAgIC8vIGp1c3QgbGlrZSByZWd1bGFyIG1ldGhvZHMsIGluIHdoaWNoIGNhc2Ugd2UganVzdCBkbyBub3RoaW5nLlxuICAgICAgICAgIGRlc2MgPSB3cmFwRGVzY3JpcHRvcihtZW1icmFuZSwgZGVzYywgd3JhcFJlYWRPbmx5VmFsdWUpO1xuICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGRlc2MsICdzZXQnKSkge1xuICAgICAgICAgICAgICBkZXNjLnNldCA9IHVuZGVmaW5lZDsgLy8gcmVhZE9ubHkgbWVtYnJhbmUgZG9lcyBub3QgYWxsb3cgc2V0dGVyc1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWRlc2MuY29uZmlndXJhYmxlKSB7XG4gICAgICAgICAgICAgIC8vIElmIGRlc2NyaXB0b3IgZnJvbSBvcmlnaW5hbCB0YXJnZXQgaXMgbm90IGNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgICAgLy8gV2UgbXVzdCBjb3B5IHRoZSB3cmFwcGVkIGRlc2NyaXB0b3Igb3ZlciB0byB0aGUgc2hhZG93IHRhcmdldC5cbiAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBwcm94eSB3aWxsIHRocm93IGFuIGludmFyaWFudCBlcnJvci5cbiAgICAgICAgICAgICAgLy8gVGhpcyBpcyBvdXIgbGFzdCBjaGFuY2UgdG8gbG9jayB0aGUgdmFsdWUuXG4gICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb3h5L2hhbmRsZXIvZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yI0ludmFyaWFudHNcbiAgICAgICAgICAgICAgT2JqZWN0RGVmaW5lUHJvcGVydHkoc2hhZG93VGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZGVzYztcbiAgICAgIH1cbiAgICAgIHByZXZlbnRFeHRlbnNpb25zKHNoYWRvd1RhcmdldCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGRlZmluZVByb3BlcnR5KHNoYWRvd1RhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZVNoYWRvd1RhcmdldCh2YWx1ZSkge1xuICAgICAgbGV0IHNoYWRvd1RhcmdldCA9IHVuZGVmaW5lZDtcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIHNoYWRvd1RhcmdldCA9IFtdO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgc2hhZG93VGFyZ2V0ID0ge307XG4gICAgICB9XG4gICAgICByZXR1cm4gc2hhZG93VGFyZ2V0O1xuICB9XG4gIGNvbnN0IE9iamVjdERvdFByb3RvdHlwZSA9IE9iamVjdC5wcm90b3R5cGU7XG4gIGZ1bmN0aW9uIGRlZmF1bHRWYWx1ZUlzT2JzZXJ2YWJsZSh2YWx1ZSkge1xuICAgICAgLy8gaW50ZW50aW9uYWxseSBjaGVja2luZyBmb3IgbnVsbFxuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gdHJlYXQgYWxsIG5vbi1vYmplY3QgdHlwZXMsIGluY2x1ZGluZyB1bmRlZmluZWQsIGFzIG5vbi1vYnNlcnZhYmxlIHZhbHVlc1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByb3RvID0gZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICAgICAgcmV0dXJuIChwcm90byA9PT0gT2JqZWN0RG90UHJvdG90eXBlIHx8IHByb3RvID09PSBudWxsIHx8IGdldFByb3RvdHlwZU9mKHByb3RvKSA9PT0gbnVsbCk7XG4gIH1cbiAgY29uc3QgZGVmYXVsdFZhbHVlT2JzZXJ2ZWQgPSAob2JqLCBrZXkpID0+IHtcbiAgICAgIC8qIGRvIG5vdGhpbmcgKi9cbiAgfTtcbiAgY29uc3QgZGVmYXVsdFZhbHVlTXV0YXRlZCA9IChvYmosIGtleSkgPT4ge1xuICAgICAgLyogZG8gbm90aGluZyAqL1xuICB9O1xuICBjb25zdCBkZWZhdWx0VmFsdWVEaXN0b3J0aW9uID0gKHZhbHVlKSA9PiB2YWx1ZTtcbiAgZnVuY3Rpb24gd3JhcERlc2NyaXB0b3IobWVtYnJhbmUsIGRlc2NyaXB0b3IsIGdldFZhbHVlKSB7XG4gICAgICBjb25zdCB7IHNldCwgZ2V0IH0gPSBkZXNjcmlwdG9yO1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoZGVzY3JpcHRvciwgJ3ZhbHVlJykpIHtcbiAgICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gZ2V0VmFsdWUobWVtYnJhbmUsIGRlc2NyaXB0b3IudmFsdWUpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChnZXQpKSB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0b3IuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgLy8gaW52b2tpbmcgdGhlIG9yaWdpbmFsIGdldHRlciB3aXRoIHRoZSBvcmlnaW5hbCB0YXJnZXRcbiAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRWYWx1ZShtZW1icmFuZSwgZ2V0LmNhbGwodW53cmFwKHRoaXMpKSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghaXNVbmRlZmluZWQoc2V0KSkge1xuICAgICAgICAgICAgICBkZXNjcmlwdG9yLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBkb24ndCBoYXZlIGEgY2xlYXIgaW5kaWNhdGlvbiBvZiB3aGV0aGVyXG4gICAgICAgICAgICAgICAgICAvLyBvciBub3QgYSB2YWxpZCBtdXRhdGlvbiB3aWxsIG9jY3VyLCB3ZSBkb24ndCBoYXZlIHRoZSBrZXksXG4gICAgICAgICAgICAgICAgICAvLyBhbmQgd2UgYXJlIG5vdCBzdXJlIHdoeSBhbmQgaG93IHRoZXkgYXJlIGludm9raW5nIHRoaXMgc2V0dGVyLlxuICAgICAgICAgICAgICAgICAgLy8gTmV2ZXJ0aGVsZXNzIHdlIHByZXNlcnZlIHRoZSBvcmlnaW5hbCBzZW1hbnRpY3MgYnkgaW52b2tpbmcgdGhlXG4gICAgICAgICAgICAgICAgICAvLyBvcmlnaW5hbCBzZXR0ZXIgd2l0aCB0aGUgb3JpZ2luYWwgdGFyZ2V0IGFuZCB0aGUgdW53cmFwcGVkIHZhbHVlXG4gICAgICAgICAgICAgICAgICBzZXQuY2FsbCh1bndyYXAodGhpcyksIG1lbWJyYW5lLnVud3JhcFByb3h5KHZhbHVlKSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7XG4gIH1cbiAgY2xhc3MgUmVhY3RpdmVNZW1icmFuZSB7XG4gICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgICAgdGhpcy52YWx1ZURpc3RvcnRpb24gPSBkZWZhdWx0VmFsdWVEaXN0b3J0aW9uO1xuICAgICAgICAgIHRoaXMudmFsdWVNdXRhdGVkID0gZGVmYXVsdFZhbHVlTXV0YXRlZDtcbiAgICAgICAgICB0aGlzLnZhbHVlT2JzZXJ2ZWQgPSBkZWZhdWx0VmFsdWVPYnNlcnZlZDtcbiAgICAgICAgICB0aGlzLnZhbHVlSXNPYnNlcnZhYmxlID0gZGVmYXVsdFZhbHVlSXNPYnNlcnZhYmxlO1xuICAgICAgICAgIHRoaXMub2JqZWN0R3JhcGggPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICAgIGlmICghaXNVbmRlZmluZWQob3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZURpc3RvcnRpb24sIHZhbHVlTXV0YXRlZCwgdmFsdWVPYnNlcnZlZCwgdmFsdWVJc09ic2VydmFibGUgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICAgIHRoaXMudmFsdWVEaXN0b3J0aW9uID0gaXNGdW5jdGlvbih2YWx1ZURpc3RvcnRpb24pID8gdmFsdWVEaXN0b3J0aW9uIDogZGVmYXVsdFZhbHVlRGlzdG9ydGlvbjtcbiAgICAgICAgICAgICAgdGhpcy52YWx1ZU11dGF0ZWQgPSBpc0Z1bmN0aW9uKHZhbHVlTXV0YXRlZCkgPyB2YWx1ZU11dGF0ZWQgOiBkZWZhdWx0VmFsdWVNdXRhdGVkO1xuICAgICAgICAgICAgICB0aGlzLnZhbHVlT2JzZXJ2ZWQgPSBpc0Z1bmN0aW9uKHZhbHVlT2JzZXJ2ZWQpID8gdmFsdWVPYnNlcnZlZCA6IGRlZmF1bHRWYWx1ZU9ic2VydmVkO1xuICAgICAgICAgICAgICB0aGlzLnZhbHVlSXNPYnNlcnZhYmxlID0gaXNGdW5jdGlvbih2YWx1ZUlzT2JzZXJ2YWJsZSkgPyB2YWx1ZUlzT2JzZXJ2YWJsZSA6IGRlZmF1bHRWYWx1ZUlzT2JzZXJ2YWJsZTtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBnZXRQcm94eSh2YWx1ZSkge1xuICAgICAgICAgIGNvbnN0IHVud3JhcHBlZFZhbHVlID0gdW53cmFwKHZhbHVlKTtcbiAgICAgICAgICBjb25zdCBkaXN0b3J0ZWQgPSB0aGlzLnZhbHVlRGlzdG9ydGlvbih1bndyYXBwZWRWYWx1ZSk7XG4gICAgICAgICAgaWYgKHRoaXMudmFsdWVJc09ic2VydmFibGUoZGlzdG9ydGVkKSkge1xuICAgICAgICAgICAgICBjb25zdCBvID0gdGhpcy5nZXRSZWFjdGl2ZVN0YXRlKHVud3JhcHBlZFZhbHVlLCBkaXN0b3J0ZWQpO1xuICAgICAgICAgICAgICAvLyB3aGVuIHRyeWluZyB0byBleHRyYWN0IHRoZSB3cml0YWJsZSB2ZXJzaW9uIG9mIGEgcmVhZG9ubHlcbiAgICAgICAgICAgICAgLy8gd2UgcmV0dXJuIHRoZSByZWFkb25seS5cbiAgICAgICAgICAgICAgcmV0dXJuIG8ucmVhZE9ubHkgPT09IHZhbHVlID8gdmFsdWUgOiBvLnJlYWN0aXZlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZGlzdG9ydGVkO1xuICAgICAgfVxuICAgICAgZ2V0UmVhZE9ubHlQcm94eSh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlID0gdW53cmFwKHZhbHVlKTtcbiAgICAgICAgICBjb25zdCBkaXN0b3J0ZWQgPSB0aGlzLnZhbHVlRGlzdG9ydGlvbih2YWx1ZSk7XG4gICAgICAgICAgaWYgKHRoaXMudmFsdWVJc09ic2VydmFibGUoZGlzdG9ydGVkKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZWFjdGl2ZVN0YXRlKHZhbHVlLCBkaXN0b3J0ZWQpLnJlYWRPbmx5O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZGlzdG9ydGVkO1xuICAgICAgfVxuICAgICAgdW53cmFwUHJveHkocCkge1xuICAgICAgICAgIHJldHVybiB1bndyYXAocCk7XG4gICAgICB9XG4gICAgICBnZXRSZWFjdGl2ZVN0YXRlKHZhbHVlLCBkaXN0b3J0ZWRWYWx1ZSkge1xuICAgICAgICAgIGNvbnN0IHsgb2JqZWN0R3JhcGgsIH0gPSB0aGlzO1xuICAgICAgICAgIGxldCByZWFjdGl2ZVN0YXRlID0gb2JqZWN0R3JhcGguZ2V0KGRpc3RvcnRlZFZhbHVlKTtcbiAgICAgICAgICBpZiAocmVhY3RpdmVTdGF0ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVhY3RpdmVTdGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgbWVtYnJhbmUgPSB0aGlzO1xuICAgICAgICAgIHJlYWN0aXZlU3RhdGUgPSB7XG4gICAgICAgICAgICAgIGdldCByZWFjdGl2ZSgpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWN0aXZlSGFuZGxlciA9IG5ldyBSZWFjdGl2ZVByb3h5SGFuZGxlcihtZW1icmFuZSwgZGlzdG9ydGVkVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgLy8gY2FjaGluZyB0aGUgcmVhY3RpdmUgcHJveHkgYWZ0ZXIgdGhlIGZpcnN0IHRpbWUgaXQgaXMgYWNjZXNzZWRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KGNyZWF0ZVNoYWRvd1RhcmdldChkaXN0b3J0ZWRWYWx1ZSksIHJlYWN0aXZlSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICByZWdpc3RlclByb3h5KHByb3h5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBPYmplY3REZWZpbmVQcm9wZXJ0eSh0aGlzLCAncmVhY3RpdmUnLCB7IHZhbHVlOiBwcm94eSB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBwcm94eTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZ2V0IHJlYWRPbmx5KCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZE9ubHlIYW5kbGVyID0gbmV3IFJlYWRPbmx5SGFuZGxlcihtZW1icmFuZSwgZGlzdG9ydGVkVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgLy8gY2FjaGluZyB0aGUgcmVhZE9ubHkgcHJveHkgYWZ0ZXIgdGhlIGZpcnN0IHRpbWUgaXQgaXMgYWNjZXNzZWRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KGNyZWF0ZVNoYWRvd1RhcmdldChkaXN0b3J0ZWRWYWx1ZSksIHJlYWRPbmx5SGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICByZWdpc3RlclByb3h5KHByb3h5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBPYmplY3REZWZpbmVQcm9wZXJ0eSh0aGlzLCAncmVhZE9ubHknLCB7IHZhbHVlOiBwcm94eSB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBwcm94eTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgb2JqZWN0R3JhcGguc2V0KGRpc3RvcnRlZFZhbHVlLCByZWFjdGl2ZVN0YXRlKTtcbiAgICAgICAgICByZXR1cm4gcmVhY3RpdmVTdGF0ZTtcbiAgICAgIH1cbiAgfVxuICAvKiogdmVyc2lvbjogMC4yNi4wICovXG5cbiAgZnVuY3Rpb24gd3JhcChkYXRhLCBtdXRhdGlvbkNhbGxiYWNrKSB7XG5cbiAgICBsZXQgbWVtYnJhbmUgPSBuZXcgUmVhY3RpdmVNZW1icmFuZSh7XG4gICAgICB2YWx1ZU11dGF0ZWQodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgbXV0YXRpb25DYWxsYmFjayh0YXJnZXQsIGtleSk7XG4gICAgICB9XG5cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogbWVtYnJhbmUuZ2V0UHJveHkoZGF0YSksXG4gICAgICBtZW1icmFuZTogbWVtYnJhbmVcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHVud3JhcCQxKG1lbWJyYW5lLCBvYnNlcnZhYmxlKSB7XG4gICAgbGV0IHVud3JhcHBlZERhdGEgPSBtZW1icmFuZS51bndyYXBQcm94eShvYnNlcnZhYmxlKTtcbiAgICBsZXQgY29weSA9IHt9O1xuICAgIE9iamVjdC5rZXlzKHVud3JhcHBlZERhdGEpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChbJyRlbCcsICckcmVmcycsICckbmV4dFRpY2snLCAnJHdhdGNoJ10uaW5jbHVkZXMoa2V5KSkgcmV0dXJuO1xuICAgICAgY29weVtrZXldID0gdW53cmFwcGVkRGF0YVtrZXldO1xuICAgIH0pO1xuICAgIHJldHVybiBjb3B5O1xuICB9XG5cbiAgY2xhc3MgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbCwgY29tcG9uZW50Rm9yQ2xvbmUgPSBudWxsKSB7XG4gICAgICB0aGlzLiRlbCA9IGVsO1xuICAgICAgY29uc3QgZGF0YUF0dHIgPSB0aGlzLiRlbC5nZXRBdHRyaWJ1dGUoJ3gtZGF0YScpO1xuICAgICAgY29uc3QgZGF0YUV4cHJlc3Npb24gPSBkYXRhQXR0ciA9PT0gJycgPyAne30nIDogZGF0YUF0dHI7XG4gICAgICBjb25zdCBpbml0RXhwcmVzc2lvbiA9IHRoaXMuJGVsLmdldEF0dHJpYnV0ZSgneC1pbml0Jyk7XG4gICAgICBsZXQgZGF0YUV4dHJhcyA9IHtcbiAgICAgICAgJGVsOiB0aGlzLiRlbFxuICAgICAgfTtcbiAgICAgIGxldCBjYW5vbmljYWxDb21wb25lbnRFbGVtZW50UmVmZXJlbmNlID0gY29tcG9uZW50Rm9yQ2xvbmUgPyBjb21wb25lbnRGb3JDbG9uZS4kZWwgOiB0aGlzLiRlbDtcbiAgICAgIE9iamVjdC5lbnRyaWVzKEFscGluZS5tYWdpY1Byb3BlcnRpZXMpLmZvckVhY2goKFtuYW1lLCBjYWxsYmFja10pID0+IHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGFFeHRyYXMsIGAkJHtuYW1lfWAsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhjYW5vbmljYWxDb21wb25lbnRFbGVtZW50UmVmZXJlbmNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnVub2JzZXJ2ZWREYXRhID0gY29tcG9uZW50Rm9yQ2xvbmUgPyBjb21wb25lbnRGb3JDbG9uZS5nZXRVbm9ic2VydmVkRGF0YSgpIDogc2FmZXJFdmFsKGVsLCBkYXRhRXhwcmVzc2lvbiwgZGF0YUV4dHJhcyk7XG4gICAgICAvLyBDb25zdHJ1Y3QgYSBQcm94eS1iYXNlZCBvYnNlcnZhYmxlLiBUaGlzIHdpbGwgYmUgdXNlZCB0byBoYW5kbGUgcmVhY3Rpdml0eS5cblxuICAgICAgbGV0IHtcbiAgICAgICAgbWVtYnJhbmUsXG4gICAgICAgIGRhdGFcbiAgICAgIH0gPSB0aGlzLndyYXBEYXRhSW5PYnNlcnZhYmxlKHRoaXMudW5vYnNlcnZlZERhdGEpO1xuICAgICAgdGhpcy4kZGF0YSA9IGRhdGE7XG4gICAgICB0aGlzLm1lbWJyYW5lID0gbWVtYnJhbmU7IC8vIEFmdGVyIG1ha2luZyB1c2VyLXN1cHBsaWVkIGRhdGEgbWV0aG9kcyByZWFjdGl2ZSwgd2UgY2FuIG5vdyBhZGRcbiAgICAgIC8vIG91ciBtYWdpYyBwcm9wZXJ0aWVzIHRvIHRoZSBvcmlnaW5hbCBkYXRhIGZvciBhY2Nlc3MuXG5cbiAgICAgIHRoaXMudW5vYnNlcnZlZERhdGEuJGVsID0gdGhpcy4kZWw7XG4gICAgICB0aGlzLnVub2JzZXJ2ZWREYXRhLiRyZWZzID0gdGhpcy5nZXRSZWZzUHJveHkoKTtcbiAgICAgIHRoaXMubmV4dFRpY2tTdGFjayA9IFtdO1xuXG4gICAgICB0aGlzLnVub2JzZXJ2ZWREYXRhLiRuZXh0VGljayA9IGNhbGxiYWNrID0+IHtcbiAgICAgICAgdGhpcy5uZXh0VGlja1N0YWNrLnB1c2goY2FsbGJhY2spO1xuICAgICAgfTtcblxuICAgICAgdGhpcy53YXRjaGVycyA9IHt9O1xuXG4gICAgICB0aGlzLnVub2JzZXJ2ZWREYXRhLiR3YXRjaCA9IChwcm9wZXJ0eSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLndhdGNoZXJzW3Byb3BlcnR5XSkgdGhpcy53YXRjaGVyc1twcm9wZXJ0eV0gPSBbXTtcbiAgICAgICAgdGhpcy53YXRjaGVyc1twcm9wZXJ0eV0ucHVzaChjYWxsYmFjayk7XG4gICAgICB9O1xuICAgICAgLyogTU9ERVJOLU9OTFk6U1RBUlQgKi9cbiAgICAgIC8vIFdlIHJlbW92ZSB0aGlzIHBpZWNlIG9mIGNvZGUgZnJvbSB0aGUgbGVnYWN5IGJ1aWxkLlxuICAgICAgLy8gSW4gSUUxMSwgd2UgaGF2ZSBhbHJlYWR5IGRlZmluZWQgb3VyIGhlbHBlcnMgYXQgdGhpcyBwb2ludC5cbiAgICAgIC8vIFJlZ2lzdGVyIGN1c3RvbSBtYWdpYyBwcm9wZXJ0aWVzLlxuXG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKEFscGluZS5tYWdpY1Byb3BlcnRpZXMpLmZvckVhY2goKFtuYW1lLCBjYWxsYmFja10pID0+IHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMudW5vYnNlcnZlZERhdGEsIGAkJHtuYW1lfWAsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhjYW5vbmljYWxDb21wb25lbnRFbGVtZW50UmVmZXJlbmNlLCB0aGlzLiRlbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgLyogTU9ERVJOLU9OTFk6RU5EICovXG5cbiAgICAgIHRoaXMuc2hvd0RpcmVjdGl2ZVN0YWNrID0gW107XG4gICAgICB0aGlzLnNob3dEaXJlY3RpdmVMYXN0RWxlbWVudDtcbiAgICAgIGNvbXBvbmVudEZvckNsb25lIHx8IEFscGluZS5vbkJlZm9yZUNvbXBvbmVudEluaXRpYWxpemVkcy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKHRoaXMpKTtcbiAgICAgIHZhciBpbml0UmV0dXJuZWRDYWxsYmFjazsgLy8gSWYgeC1pbml0IGlzIHByZXNlbnQgQU5EIHdlIGFyZW4ndCBjbG9uaW5nIChza2lwIHgtaW5pdCBvbiBjbG9uZSlcblxuICAgICAgaWYgKGluaXRFeHByZXNzaW9uICYmICFjb21wb25lbnRGb3JDbG9uZSkge1xuICAgICAgICAvLyBXZSB3YW50IHRvIGFsbG93IGRhdGEgbWFuaXB1bGF0aW9uLCBidXQgbm90IHRyaWdnZXIgRE9NIHVwZGF0ZXMganVzdCB5ZXQuXG4gICAgICAgIC8vIFdlIGhhdmVuJ3QgZXZlbiBpbml0aWFsaXplZCB0aGUgZWxlbWVudHMgd2l0aCB0aGVpciBBbHBpbmUgYmluZGluZ3MuIEkgbWVhbiBjJ21vbi5cbiAgICAgICAgdGhpcy5wYXVzZVJlYWN0aXZpdHkgPSB0cnVlO1xuICAgICAgICBpbml0UmV0dXJuZWRDYWxsYmFjayA9IHRoaXMuZXZhbHVhdGVSZXR1cm5FeHByZXNzaW9uKHRoaXMuJGVsLCBpbml0RXhwcmVzc2lvbik7XG4gICAgICAgIHRoaXMucGF1c2VSZWFjdGl2aXR5ID0gZmFsc2U7XG4gICAgICB9IC8vIFJlZ2lzdGVyIGFsbCBvdXIgbGlzdGVuZXJzIGFuZCBzZXQgYWxsIG91ciBhdHRyaWJ1dGUgYmluZGluZ3MuXG4gICAgICAvLyBJZiB3ZSdyZSBjbG9uaW5nIGEgY29tcG9uZW50LCB0aGUgdGhpcmQgcGFyYW1ldGVyIGVuc3VyZXMgbm8gZHVwbGljYXRlXG4gICAgICAvLyBldmVudCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgKHRoZSBtdXRhdGlvbiBvYnNlcnZlciB3aWxsIHRha2UgY2FyZSBvZiB0aGVtKVxuXG5cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUVsZW1lbnRzKHRoaXMuJGVsLCAoKSA9PiB7fSwgY29tcG9uZW50Rm9yQ2xvbmUpOyAvLyBVc2UgbXV0YXRpb24gb2JzZXJ2ZXIgdG8gZGV0ZWN0IG5ldyBlbGVtZW50cyBiZWluZyBhZGRlZCB3aXRoaW4gdGhpcyBjb21wb25lbnQgYXQgcnVuLXRpbWUuXG4gICAgICAvLyBBbHBpbmUncyBqdXN0IHNvIGRhcm4gZmxleGlibGUgYW1pcml0ZT9cblxuICAgICAgdGhpcy5saXN0ZW5Gb3JOZXdFbGVtZW50c1RvSW5pdGlhbGl6ZSgpO1xuXG4gICAgICBpZiAodHlwZW9mIGluaXRSZXR1cm5lZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIFJ1biB0aGUgY2FsbGJhY2sgcmV0dXJuZWQgZnJvbSB0aGUgXCJ4LWluaXRcIiBob29rIHRvIGFsbG93IHRoZSB1c2VyIHRvIGRvIHN0dWZmIGFmdGVyXG4gICAgICAgIC8vIEFscGluZSdzIGdvdCBpdCdzIGdydWJieSBsaXR0bGUgcGF3cyBhbGwgb3ZlciBldmVyeXRoaW5nLlxuICAgICAgICBpbml0UmV0dXJuZWRDYWxsYmFjay5jYWxsKHRoaXMuJGRhdGEpO1xuICAgICAgfVxuXG4gICAgICBjb21wb25lbnRGb3JDbG9uZSB8fCBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgQWxwaW5lLm9uQ29tcG9uZW50SW5pdGlhbGl6ZWRzLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2sodGhpcykpO1xuICAgICAgfSwgMCk7XG4gICAgfVxuXG4gICAgZ2V0VW5vYnNlcnZlZERhdGEoKSB7XG4gICAgICByZXR1cm4gdW53cmFwJDEodGhpcy5tZW1icmFuZSwgdGhpcy4kZGF0YSk7XG4gICAgfVxuXG4gICAgd3JhcERhdGFJbk9ic2VydmFibGUoZGF0YSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgbGV0IHVwZGF0ZURvbSA9IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi51cGRhdGVFbGVtZW50cyhzZWxmLiRlbCk7XG4gICAgICB9LCAwKTtcbiAgICAgIHJldHVybiB3cmFwKGRhdGEsICh0YXJnZXQsIGtleSkgPT4ge1xuICAgICAgICBpZiAoc2VsZi53YXRjaGVyc1trZXldKSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHdhdGNoZXIgZm9yIHRoaXMgc3BlY2lmaWMga2V5LCBydW4gaXQuXG4gICAgICAgICAgc2VsZi53YXRjaGVyc1trZXldLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2sodGFyZ2V0W2tleV0pKTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICAvLyBBcnJheXMgYXJlIHNwZWNpYWwgY2FzZXMsIGlmIGFueSBvZiB0aGUgaXRlbXMgY2hhbmdlLCB3ZSBjb25zaWRlciB0aGUgYXJyYXkgYXMgbXV0YXRlZC5cbiAgICAgICAgICBPYmplY3Qua2V5cyhzZWxmLndhdGNoZXJzKS5mb3JFYWNoKGZ1bGxEb3ROb3RhdGlvbktleSA9PiB7XG4gICAgICAgICAgICBsZXQgZG90Tm90YXRpb25QYXJ0cyA9IGZ1bGxEb3ROb3RhdGlvbktleS5zcGxpdCgnLicpOyAvLyBJZ25vcmUgbGVuZ3RoIG11dGF0aW9ucyBzaW5jZSB0aGV5IHdvdWxkIHJlc3VsdCBpbiBkdXBsaWNhdGUgY2FsbHMuXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgd2hlbiBjYWxsaW5nIHB1c2gsIHdlIHdvdWxkIGdldCBhIG11dGF0aW9uIGZvciB0aGUgaXRlbSdzIGtleVxuICAgICAgICAgICAgLy8gYW5kIGEgc2Vjb25kIG11dGF0aW9uIGZvciB0aGUgbGVuZ3RoIHByb3BlcnR5LlxuXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnbGVuZ3RoJykgcmV0dXJuO1xuICAgICAgICAgICAgZG90Tm90YXRpb25QYXJ0cy5yZWR1Y2UoKGNvbXBhcmlzb25EYXRhLCBwYXJ0KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChPYmplY3QuaXModGFyZ2V0LCBjb21wYXJpc29uRGF0YVtwYXJ0XSkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLndhdGNoZXJzW2Z1bGxEb3ROb3RhdGlvbktleV0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayh0YXJnZXQpKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uRGF0YVtwYXJ0XTtcbiAgICAgICAgICAgIH0sIHNlbGYudW5vYnNlcnZlZERhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIExldCdzIHdhbGsgdGhyb3VnaCB0aGUgd2F0Y2hlcnMgd2l0aCBcImRvdC1ub3RhdGlvblwiIChmb28uYmFyKSBhbmQgc2VlXG4gICAgICAgICAgLy8gaWYgdGhpcyBtdXRhdGlvbiBmaXRzIGFueSBvZiB0aGVtLlxuICAgICAgICAgIE9iamVjdC5rZXlzKHNlbGYud2F0Y2hlcnMpLmZpbHRlcihpID0+IGkuaW5jbHVkZXMoJy4nKSkuZm9yRWFjaChmdWxsRG90Tm90YXRpb25LZXkgPT4ge1xuICAgICAgICAgICAgbGV0IGRvdE5vdGF0aW9uUGFydHMgPSBmdWxsRG90Tm90YXRpb25LZXkuc3BsaXQoJy4nKTsgLy8gSWYgdGhpcyBkb3Qtbm90YXRpb24gd2F0Y2hlcidzIGxhc3QgXCJwYXJ0XCIgZG9lc24ndCBtYXRjaCB0aGUgY3VycmVudFxuICAgICAgICAgICAgLy8ga2V5LCB0aGVuIHNraXAgaXQgZWFybHkgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuXG5cbiAgICAgICAgICAgIGlmIChrZXkgIT09IGRvdE5vdGF0aW9uUGFydHNbZG90Tm90YXRpb25QYXJ0cy5sZW5ndGggLSAxXSkgcmV0dXJuOyAvLyBOb3csIHdhbGsgdGhyb3VnaCB0aGUgZG90LW5vdGF0aW9uIFwicGFydHNcIiByZWN1cnNpdmVseSB0byBmaW5kXG4gICAgICAgICAgICAvLyBhIG1hdGNoLCBhbmQgY2FsbCB0aGUgd2F0Y2hlciBpZiBvbmUncyBmb3VuZC5cblxuICAgICAgICAgICAgZG90Tm90YXRpb25QYXJ0cy5yZWR1Y2UoKGNvbXBhcmlzb25EYXRhLCBwYXJ0KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChPYmplY3QuaXModGFyZ2V0LCBjb21wYXJpc29uRGF0YSkpIHtcbiAgICAgICAgICAgICAgICAvLyBSdW4gdGhlIHdhdGNoZXJzLlxuICAgICAgICAgICAgICAgIHNlbGYud2F0Y2hlcnNbZnVsbERvdE5vdGF0aW9uS2V5XS5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKHRhcmdldFtrZXldKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbkRhdGFbcGFydF07XG4gICAgICAgICAgICB9LCBzZWxmLnVub2JzZXJ2ZWREYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBEb24ndCByZWFjdCB0byBkYXRhIGNoYW5nZXMgZm9yIGNhc2VzIGxpa2UgdGhlIGB4LWNyZWF0ZWRgIGhvb2suXG5cblxuICAgICAgICBpZiAoc2VsZi5wYXVzZVJlYWN0aXZpdHkpIHJldHVybjtcbiAgICAgICAgdXBkYXRlRG9tKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB3YWxrQW5kU2tpcE5lc3RlZENvbXBvbmVudHMoZWwsIGNhbGxiYWNrLCBpbml0aWFsaXplQ29tcG9uZW50Q2FsbGJhY2sgPSAoKSA9PiB7fSkge1xuICAgICAgd2FsayhlbCwgZWwgPT4ge1xuICAgICAgICAvLyBXZSd2ZSBoaXQgYSBjb21wb25lbnQuXG4gICAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3gtZGF0YScpKSB7XG4gICAgICAgICAgLy8gSWYgaXQncyBub3QgdGhlIGN1cnJlbnQgb25lLlxuICAgICAgICAgIGlmICghZWwuaXNTYW1lTm9kZSh0aGlzLiRlbCkpIHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgaXQgaWYgaXQncyBub3QuXG4gICAgICAgICAgICBpZiAoIWVsLl9feCkgaW5pdGlhbGl6ZUNvbXBvbmVudENhbGxiYWNrKGVsKTsgLy8gTm93IHdlJ2xsIGxldCB0aGF0IHN1Yi1jb21wb25lbnQgZGVhbCB3aXRoIGl0c2VsZi5cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlbCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplRWxlbWVudHMocm9vdEVsLCBleHRyYVZhcnMgPSAoKSA9PiB7fSwgY29tcG9uZW50Rm9yQ2xvbmUgPSBmYWxzZSkge1xuICAgICAgdGhpcy53YWxrQW5kU2tpcE5lc3RlZENvbXBvbmVudHMocm9vdEVsLCBlbCA9PiB7XG4gICAgICAgIC8vIERvbid0IHRvdWNoIHNwYXducyBmcm9tIGZvciBsb29wXG4gICAgICAgIGlmIChlbC5fX3hfZm9yX2tleSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7IC8vIERvbid0IHRvdWNoIHNwYXducyBmcm9tIGlmIGRpcmVjdGl2ZXNcblxuICAgICAgICBpZiAoZWwuX194X2luc2VydGVkX21lICE9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplRWxlbWVudChlbCwgZXh0cmFWYXJzLCBjb21wb25lbnRGb3JDbG9uZSA/IGZhbHNlIDogdHJ1ZSk7XG4gICAgICB9LCBlbCA9PiB7XG4gICAgICAgIGlmICghY29tcG9uZW50Rm9yQ2xvbmUpIGVsLl9feCA9IG5ldyBDb21wb25lbnQoZWwpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmV4ZWN1dGVBbmRDbGVhclJlbWFpbmluZ1Nob3dEaXJlY3RpdmVTdGFjaygpO1xuICAgICAgdGhpcy5leGVjdXRlQW5kQ2xlYXJOZXh0VGlja1N0YWNrKHJvb3RFbCk7XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZUVsZW1lbnQoZWwsIGV4dHJhVmFycywgc2hvdWxkUmVnaXN0ZXJMaXN0ZW5lcnMgPSB0cnVlKSB7XG4gICAgICAvLyBUbyBzdXBwb3J0IGNsYXNzIGF0dHJpYnV0ZSBtZXJnaW5nLCB3ZSBoYXZlIHRvIGtub3cgd2hhdCB0aGUgZWxlbWVudCdzXG4gICAgICAvLyBvcmlnaW5hbCBjbGFzcyBhdHRyaWJ1dGUgbG9va2VkIGxpa2UgZm9yIHJlZmVyZW5jZS5cbiAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NsYXNzJykgJiYgZ2V0WEF0dHJzKGVsLCB0aGlzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGVsLl9feF9vcmlnaW5hbF9jbGFzc2VzID0gY29udmVydENsYXNzU3RyaW5nVG9BcnJheShlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpO1xuICAgICAgfVxuXG4gICAgICBzaG91bGRSZWdpc3Rlckxpc3RlbmVycyAmJiB0aGlzLnJlZ2lzdGVyTGlzdGVuZXJzKGVsLCBleHRyYVZhcnMpO1xuICAgICAgdGhpcy5yZXNvbHZlQm91bmRBdHRyaWJ1dGVzKGVsLCB0cnVlLCBleHRyYVZhcnMpO1xuICAgIH1cblxuICAgIHVwZGF0ZUVsZW1lbnRzKHJvb3RFbCwgZXh0cmFWYXJzID0gKCkgPT4ge30pIHtcbiAgICAgIHRoaXMud2Fsa0FuZFNraXBOZXN0ZWRDb21wb25lbnRzKHJvb3RFbCwgZWwgPT4ge1xuICAgICAgICAvLyBEb24ndCB0b3VjaCBzcGF3bnMgZnJvbSBmb3IgbG9vcCAoYW5kIGNoZWNrIGlmIHRoZSByb290IGlzIGFjdHVhbGx5IGEgZm9yIGxvb3AgaW4gYSBwYXJlbnQsIGRvbid0IHNraXAgaXQuKVxuICAgICAgICBpZiAoZWwuX194X2Zvcl9rZXkgIT09IHVuZGVmaW5lZCAmJiAhZWwuaXNTYW1lTm9kZSh0aGlzLiRlbCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KGVsLCBleHRyYVZhcnMpO1xuICAgICAgfSwgZWwgPT4ge1xuICAgICAgICBlbC5fX3ggPSBuZXcgQ29tcG9uZW50KGVsKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5leGVjdXRlQW5kQ2xlYXJSZW1haW5pbmdTaG93RGlyZWN0aXZlU3RhY2soKTtcbiAgICAgIHRoaXMuZXhlY3V0ZUFuZENsZWFyTmV4dFRpY2tTdGFjayhyb290RWwpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVBbmRDbGVhck5leHRUaWNrU3RhY2soZWwpIHtcbiAgICAgIC8vIFNraXAgc3Bhd25zIGZyb20gYWxwaW5lIGRpcmVjdGl2ZXNcbiAgICAgIGlmIChlbCA9PT0gdGhpcy4kZWwgJiYgdGhpcy5uZXh0VGlja1N0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gV2UgcnVuIHRoZSB0aWNrIHN0YWNrIGFmdGVyIHRoZSBuZXh0IGZyYW1lIHRvIGFsbG93IGFueVxuICAgICAgICAvLyBydW5uaW5nIHRyYW5zaXRpb25zIHRvIHBhc3MgdGhlIGluaXRpYWwgc2hvdyBzdGFnZS5cbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICB3aGlsZSAodGhpcy5uZXh0VGlja1N0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFRpY2tTdGFjay5zaGlmdCgpKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBleGVjdXRlQW5kQ2xlYXJSZW1haW5pbmdTaG93RGlyZWN0aXZlU3RhY2soKSB7XG4gICAgICAvLyBUaGUgZ29hbCBoZXJlIGlzIHRvIHN0YXJ0IGFsbCB0aGUgeC1zaG93IHRyYW5zaXRpb25zXG4gICAgICAvLyBhbmQgYnVpbGQgYSBuZXN0ZWQgcHJvbWlzZSBjaGFpbiBzbyB0aGF0IGVsZW1lbnRzXG4gICAgICAvLyBvbmx5IGhpZGUgd2hlbiB0aGUgY2hpbGRyZW4gYXJlIGZpbmlzaGVkIGhpZGluZy5cbiAgICAgIHRoaXMuc2hvd0RpcmVjdGl2ZVN0YWNrLnJldmVyc2UoKS5tYXAoaGFuZGxlciA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgaGFuZGxlcihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH0pLnJlZHVjZSgocHJvbWlzZUNoYWluLCBwcm9taXNlKSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9taXNlQ2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmaW5pc2hFbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGZpbmlzaEVsZW1lbnQoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBQcm9taXNlLnJlc29sdmUoKCkgPT4ge30pKS5jYXRjaChlID0+IHtcbiAgICAgICAgaWYgKGUgIT09IFRSQU5TSVRJT05fQ0FOQ0VMTEVEKSB0aHJvdyBlO1xuICAgICAgfSk7IC8vIFdlJ3ZlIHByb2Nlc3NlZCB0aGUgaGFuZGxlciBzdGFjay4gbGV0J3MgY2xlYXIgaXQuXG5cbiAgICAgIHRoaXMuc2hvd0RpcmVjdGl2ZVN0YWNrID0gW107XG4gICAgICB0aGlzLnNob3dEaXJlY3RpdmVMYXN0RWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB1cGRhdGVFbGVtZW50KGVsLCBleHRyYVZhcnMpIHtcbiAgICAgIHRoaXMucmVzb2x2ZUJvdW5kQXR0cmlidXRlcyhlbCwgZmFsc2UsIGV4dHJhVmFycyk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJMaXN0ZW5lcnMoZWwsIGV4dHJhVmFycykge1xuICAgICAgZ2V0WEF0dHJzKGVsLCB0aGlzKS5mb3JFYWNoKCh7XG4gICAgICAgIHR5cGUsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBtb2RpZmllcnMsXG4gICAgICAgIGV4cHJlc3Npb25cbiAgICAgIH0pID0+IHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSAnb24nOlxuICAgICAgICAgICAgcmVnaXN0ZXJMaXN0ZW5lcih0aGlzLCBlbCwgdmFsdWUsIG1vZGlmaWVycywgZXhwcmVzc2lvbiwgZXh0cmFWYXJzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnbW9kZWwnOlxuICAgICAgICAgICAgcmVnaXN0ZXJNb2RlbExpc3RlbmVyKHRoaXMsIGVsLCBtb2RpZmllcnMsIGV4cHJlc3Npb24sIGV4dHJhVmFycyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVzb2x2ZUJvdW5kQXR0cmlidXRlcyhlbCwgaW5pdGlhbFVwZGF0ZSA9IGZhbHNlLCBleHRyYVZhcnMpIHtcbiAgICAgIGxldCBhdHRycyA9IGdldFhBdHRycyhlbCwgdGhpcyk7XG4gICAgICBhdHRycy5mb3JFYWNoKCh7XG4gICAgICAgIHR5cGUsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBtb2RpZmllcnMsXG4gICAgICAgIGV4cHJlc3Npb25cbiAgICAgIH0pID0+IHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSAnbW9kZWwnOlxuICAgICAgICAgICAgaGFuZGxlQXR0cmlidXRlQmluZGluZ0RpcmVjdGl2ZSh0aGlzLCBlbCwgJ3ZhbHVlJywgZXhwcmVzc2lvbiwgZXh0cmFWYXJzLCB0eXBlLCBtb2RpZmllcnMpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdiaW5kJzpcbiAgICAgICAgICAgIC8vIFRoZSA6a2V5IGJpbmRpbmcgb24gYW4geC1mb3IgaXMgc3BlY2lhbCwgaWdub3JlIGl0LlxuICAgICAgICAgICAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJyAmJiB2YWx1ZSA9PT0gJ2tleScpIHJldHVybjtcbiAgICAgICAgICAgIGhhbmRsZUF0dHJpYnV0ZUJpbmRpbmdEaXJlY3RpdmUodGhpcywgZWwsIHZhbHVlLCBleHByZXNzaW9uLCBleHRyYVZhcnMsIHR5cGUsIG1vZGlmaWVycyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMuZXZhbHVhdGVSZXR1cm5FeHByZXNzaW9uKGVsLCBleHByZXNzaW9uLCBleHRyYVZhcnMpO1xuICAgICAgICAgICAgaGFuZGxlVGV4dERpcmVjdGl2ZShlbCwgb3V0cHV0LCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnaHRtbCc6XG4gICAgICAgICAgICBoYW5kbGVIdG1sRGlyZWN0aXZlKHRoaXMsIGVsLCBleHByZXNzaW9uLCBleHRyYVZhcnMpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdzaG93JzpcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0aGlzLmV2YWx1YXRlUmV0dXJuRXhwcmVzc2lvbihlbCwgZXhwcmVzc2lvbiwgZXh0cmFWYXJzKTtcbiAgICAgICAgICAgIGhhbmRsZVNob3dEaXJlY3RpdmUodGhpcywgZWwsIG91dHB1dCwgbW9kaWZpZXJzLCBpbml0aWFsVXBkYXRlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnaWYnOlxuICAgICAgICAgICAgLy8gSWYgdGhpcyBlbGVtZW50IGFsc28gaGFzIHgtZm9yIG9uIGl0LCBkb24ndCBwcm9jZXNzIHgtaWYuXG4gICAgICAgICAgICAvLyBXZSB3aWxsIGxldCB0aGUgXCJ4LWZvclwiIGRpcmVjdGl2ZSBoYW5kbGUgdGhlIFwiaWZcImluZy5cbiAgICAgICAgICAgIGlmIChhdHRycy5zb21lKGkgPT4gaS50eXBlID09PSAnZm9yJykpIHJldHVybjtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0aGlzLmV2YWx1YXRlUmV0dXJuRXhwcmVzc2lvbihlbCwgZXhwcmVzc2lvbiwgZXh0cmFWYXJzKTtcbiAgICAgICAgICAgIGhhbmRsZUlmRGlyZWN0aXZlKHRoaXMsIGVsLCBvdXRwdXQsIGluaXRpYWxVcGRhdGUsIGV4dHJhVmFycyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2Zvcic6XG4gICAgICAgICAgICBoYW5kbGVGb3JEaXJlY3RpdmUodGhpcywgZWwsIGV4cHJlc3Npb24sIGluaXRpYWxVcGRhdGUsIGV4dHJhVmFycyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2Nsb2FrJzpcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgneC1jbG9haycpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGV2YWx1YXRlUmV0dXJuRXhwcmVzc2lvbihlbCwgZXhwcmVzc2lvbiwgZXh0cmFWYXJzID0gKCkgPT4ge30pIHtcbiAgICAgIHJldHVybiBzYWZlckV2YWwoZWwsIGV4cHJlc3Npb24sIHRoaXMuJGRhdGEsIF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBleHRyYVZhcnMoKSksIHt9LCB7XG4gICAgICAgICRkaXNwYXRjaDogdGhpcy5nZXREaXNwYXRjaEZ1bmN0aW9uKGVsKVxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGV2YWx1YXRlQ29tbWFuZEV4cHJlc3Npb24oZWwsIGV4cHJlc3Npb24sIGV4dHJhVmFycyA9ICgpID0+IHt9KSB7XG4gICAgICByZXR1cm4gc2FmZXJFdmFsTm9SZXR1cm4oZWwsIGV4cHJlc3Npb24sIHRoaXMuJGRhdGEsIF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBleHRyYVZhcnMoKSksIHt9LCB7XG4gICAgICAgICRkaXNwYXRjaDogdGhpcy5nZXREaXNwYXRjaEZ1bmN0aW9uKGVsKVxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGdldERpc3BhdGNoRnVuY3Rpb24oZWwpIHtcbiAgICAgIHJldHVybiAoZXZlbnQsIGRldGFpbCA9IHt9KSA9PiB7XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGV2ZW50LCB7XG4gICAgICAgICAgZGV0YWlsLFxuICAgICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgICAgfSkpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBsaXN0ZW5Gb3JOZXdFbGVtZW50c1RvSW5pdGlhbGl6ZSgpIHtcbiAgICAgIGNvbnN0IHRhcmdldE5vZGUgPSB0aGlzLiRlbDtcbiAgICAgIGNvbnN0IG9ic2VydmVyT3B0aW9ucyA9IHtcbiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICB9O1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEZpbHRlciBvdXQgbXV0YXRpb25zIHRyaWdnZXJlZCBmcm9tIGNoaWxkIGNvbXBvbmVudHMuXG4gICAgICAgICAgY29uc3QgY2xvc2VzdFBhcmVudENvbXBvbmVudCA9IG11dGF0aW9uc1tpXS50YXJnZXQuY2xvc2VzdCgnW3gtZGF0YV0nKTtcbiAgICAgICAgICBpZiAoIShjbG9zZXN0UGFyZW50Q29tcG9uZW50ICYmIGNsb3Nlc3RQYXJlbnRDb21wb25lbnQuaXNTYW1lTm9kZSh0aGlzLiRlbCkpKSBjb250aW51ZTtcblxuICAgICAgICAgIGlmIChtdXRhdGlvbnNbaV0udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIG11dGF0aW9uc1tpXS5hdHRyaWJ1dGVOYW1lID09PSAneC1kYXRhJykge1xuICAgICAgICAgICAgY29uc3QgeEF0dHIgPSBtdXRhdGlvbnNbaV0udGFyZ2V0LmdldEF0dHJpYnV0ZSgneC1kYXRhJykgfHwgJ3t9JztcbiAgICAgICAgICAgIGNvbnN0IHJhd0RhdGEgPSBzYWZlckV2YWwodGhpcy4kZWwsIHhBdHRyLCB7XG4gICAgICAgICAgICAgICRlbDogdGhpcy4kZWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMocmF3RGF0YSkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICBpZiAodGhpcy4kZGF0YVtrZXldICE9PSByYXdEYXRhW2tleV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRkYXRhW2tleV0gPSByYXdEYXRhW2tleV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChtdXRhdGlvbnNbaV0uYWRkZWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtdXRhdGlvbnNbaV0uYWRkZWROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSAhPT0gMSB8fCBub2RlLl9feF9pbnNlcnRlZF9tZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGlmIChub2RlLm1hdGNoZXMoJ1t4LWRhdGFdJykgJiYgIW5vZGUuX194KSB7XG4gICAgICAgICAgICAgICAgbm9kZS5fX3ggPSBuZXcgQ29tcG9uZW50KG5vZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUVsZW1lbnRzKG5vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0Tm9kZSwgb2JzZXJ2ZXJPcHRpb25zKTtcbiAgICB9XG5cbiAgICBnZXRSZWZzUHJveHkoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcmVmT2JqID0ge307XG4gICAgICAvLyBPbmUgb2YgdGhlIGdvYWxzIG9mIHRoaXMgaXMgdG8gbm90IGhvbGQgZWxlbWVudHMgaW4gbWVtb3J5LCBidXQgcmF0aGVyIHJlLWV2YWx1YXRlXG4gICAgICAvLyB0aGUgRE9NIHdoZW4gdGhlIHN5c3RlbSBuZWVkcyBzb21ldGhpbmcgZnJvbSBpdC4gVGhpcyB3YXksIHRoZSBmcmFtZXdvcmsgaXMgZmxleGlibGUgYW5kXG4gICAgICAvLyBmcmllbmRseSB0byBvdXRzaWRlIERPTSBjaGFuZ2VzIGZyb20gbGlicmFyaWVzIGxpa2UgVnVlL0xpdmV3aXJlLlxuICAgICAgLy8gRm9yIHRoaXMgcmVhc29uLCBJJ20gdXNpbmcgYW4gXCJvbi1kZW1hbmRcIiBwcm94eSB0byBmYWtlIGEgXCIkcmVmc1wiIG9iamVjdC5cblxuICAgICAgcmV0dXJuIG5ldyBQcm94eShyZWZPYmosIHtcbiAgICAgICAgZ2V0KG9iamVjdCwgcHJvcGVydHkpIHtcbiAgICAgICAgICBpZiAocHJvcGVydHkgPT09ICckaXNBbHBpbmVQcm94eScpIHJldHVybiB0cnVlO1xuICAgICAgICAgIHZhciByZWY7IC8vIFdlIGNhbid0IGp1c3QgcXVlcnkgdGhlIERPTSBiZWNhdXNlIGl0J3MgaGFyZCB0byBmaWx0ZXIgb3V0IHJlZnMgaW5cbiAgICAgICAgICAvLyBuZXN0ZWQgY29tcG9uZW50cy5cblxuICAgICAgICAgIHNlbGYud2Fsa0FuZFNraXBOZXN0ZWRDb21wb25lbnRzKHNlbGYuJGVsLCBlbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd4LXJlZicpICYmIGVsLmdldEF0dHJpYnV0ZSgneC1yZWYnKSA9PT0gcHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgcmVmID0gZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHJlZjtcbiAgICAgICAgfVxuXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfVxuXG4gIGNvbnN0IEFscGluZSA9IHtcbiAgICB2ZXJzaW9uOiBcIjIuOC4yXCIsXG4gICAgcGF1c2VNdXRhdGlvbk9ic2VydmVyOiBmYWxzZSxcbiAgICBtYWdpY1Byb3BlcnRpZXM6IHt9LFxuICAgIG9uQ29tcG9uZW50SW5pdGlhbGl6ZWRzOiBbXSxcbiAgICBvbkJlZm9yZUNvbXBvbmVudEluaXRpYWxpemVkczogW10sXG4gICAgaWdub3JlRm9jdXNlZEZvclZhbHVlQmluZGluZzogZmFsc2UsXG4gICAgc3RhcnQ6IGFzeW5jIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgaWYgKCFpc1Rlc3RpbmcoKSkge1xuICAgICAgICBhd2FpdCBkb21SZWFkeSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRpc2NvdmVyQ29tcG9uZW50cyhlbCA9PiB7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbXBvbmVudChlbCk7XG4gICAgICB9KTsgLy8gSXQncyBlYXNpZXIgYW5kIG1vcmUgcGVyZm9ybWFudCB0byBqdXN0IHN1cHBvcnQgVHVyYm9saW5rcyB0aGFuIGxpc3RlblxuICAgICAgLy8gdG8gTXV0YXRpb25PYnNlcnZlciBtdXRhdGlvbnMgYXQgdGhlIGRvY3VtZW50IGxldmVsLlxuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidHVyYm9saW5rczpsb2FkXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5kaXNjb3ZlclVuaW5pdGlhbGl6ZWRDb21wb25lbnRzKGVsID0+IHtcbiAgICAgICAgICB0aGlzLmluaXRpYWxpemVDb21wb25lbnQoZWwpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5saXN0ZW5Gb3JOZXdVbmluaXRpYWxpemVkQ29tcG9uZW50c0F0UnVuVGltZSgpO1xuICAgIH0sXG4gICAgZGlzY292ZXJDb21wb25lbnRzOiBmdW5jdGlvbiBkaXNjb3ZlckNvbXBvbmVudHMoY2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IHJvb3RFbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbeC1kYXRhXScpO1xuICAgICAgcm9vdEVscy5mb3JFYWNoKHJvb3RFbCA9PiB7XG4gICAgICAgIGNhbGxiYWNrKHJvb3RFbCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRpc2NvdmVyVW5pbml0aWFsaXplZENvbXBvbmVudHM6IGZ1bmN0aW9uIGRpc2NvdmVyVW5pbml0aWFsaXplZENvbXBvbmVudHMoY2FsbGJhY2ssIGVsID0gbnVsbCkge1xuICAgICAgY29uc3Qgcm9vdEVscyA9IChlbCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbCgnW3gtZGF0YV0nKTtcbiAgICAgIEFycmF5LmZyb20ocm9vdEVscykuZmlsdGVyKGVsID0+IGVsLl9feCA9PT0gdW5kZWZpbmVkKS5mb3JFYWNoKHJvb3RFbCA9PiB7XG4gICAgICAgIGNhbGxiYWNrKHJvb3RFbCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGxpc3RlbkZvck5ld1VuaW5pdGlhbGl6ZWRDb21wb25lbnRzQXRSdW5UaW1lOiBmdW5jdGlvbiBsaXN0ZW5Gb3JOZXdVbmluaXRpYWxpemVkQ29tcG9uZW50c0F0UnVuVGltZSgpIHtcbiAgICAgIGNvbnN0IHRhcmdldE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgICBjb25zdCBvYnNlcnZlck9wdGlvbnMgPSB7XG4gICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcbiAgICAgICAgaWYgKHRoaXMucGF1c2VNdXRhdGlvbk9ic2VydmVyKSByZXR1cm47XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtdXRhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAobXV0YXRpb25zW2ldLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbXV0YXRpb25zW2ldLmFkZGVkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgICAgLy8gRGlzY2FyZCBub24tZWxlbWVudCBub2RlcyAobGlrZSBsaW5lLWJyZWFrcylcbiAgICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IDEpIHJldHVybjsgLy8gRGlzY2FyZCBhbnkgY2hhbmdlcyBoYXBwZW5pbmcgd2l0aGluIGFuIGV4aXN0aW5nIGNvbXBvbmVudC5cbiAgICAgICAgICAgICAgLy8gVGhleSB3aWxsIHRha2UgY2FyZSBvZiB0aGVtc2VsdmVzLlxuXG4gICAgICAgICAgICAgIGlmIChub2RlLnBhcmVudEVsZW1lbnQgJiYgbm9kZS5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoJ1t4LWRhdGFdJykpIHJldHVybjtcbiAgICAgICAgICAgICAgdGhpcy5kaXNjb3ZlclVuaW5pdGlhbGl6ZWRDb21wb25lbnRzKGVsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDb21wb25lbnQoZWwpO1xuICAgICAgICAgICAgICB9LCBub2RlLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0Tm9kZSwgb2JzZXJ2ZXJPcHRpb25zKTtcbiAgICB9LFxuICAgIGluaXRpYWxpemVDb21wb25lbnQ6IGZ1bmN0aW9uIGluaXRpYWxpemVDb21wb25lbnQoZWwpIHtcbiAgICAgIGlmICghZWwuX194KSB7XG4gICAgICAgIC8vIFdyYXAgaW4gYSB0cnkvY2F0Y2ggc28gdGhhdCB3ZSBkb24ndCBwcmV2ZW50IG90aGVyIGNvbXBvbmVudHNcbiAgICAgICAgLy8gZnJvbSBpbml0aWFsaXppbmcgd2hlbiBvbmUgY29tcG9uZW50IGNvbnRhaW5zIGFuIGVycm9yLlxuICAgICAgICB0cnkge1xuICAgICAgICAgIGVsLl9feCA9IG5ldyBDb21wb25lbnQoZWwpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNsb25lOiBmdW5jdGlvbiBjbG9uZShjb21wb25lbnQsIG5ld0VsKSB7XG4gICAgICBpZiAoIW5ld0VsLl9feCkge1xuICAgICAgICBuZXdFbC5fX3ggPSBuZXcgQ29tcG9uZW50KG5ld0VsLCBjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgYWRkTWFnaWNQcm9wZXJ0eTogZnVuY3Rpb24gYWRkTWFnaWNQcm9wZXJ0eShuYW1lLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy5tYWdpY1Byb3BlcnRpZXNbbmFtZV0gPSBjYWxsYmFjaztcbiAgICB9LFxuICAgIG9uQ29tcG9uZW50SW5pdGlhbGl6ZWQ6IGZ1bmN0aW9uIG9uQ29tcG9uZW50SW5pdGlhbGl6ZWQoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMub25Db21wb25lbnRJbml0aWFsaXplZHMucHVzaChjYWxsYmFjayk7XG4gICAgfSxcbiAgICBvbkJlZm9yZUNvbXBvbmVudEluaXRpYWxpemVkOiBmdW5jdGlvbiBvbkJlZm9yZUNvbXBvbmVudEluaXRpYWxpemVkKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLm9uQmVmb3JlQ29tcG9uZW50SW5pdGlhbGl6ZWRzLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbiAgfTtcblxuICBpZiAoIWlzVGVzdGluZygpKSB7XG4gICAgd2luZG93LkFscGluZSA9IEFscGluZTtcblxuICAgIGlmICh3aW5kb3cuZGVmZXJMb2FkaW5nQWxwaW5lKSB7XG4gICAgICB3aW5kb3cuZGVmZXJMb2FkaW5nQWxwaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LkFscGluZS5zdGFydCgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5BbHBpbmUuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gQWxwaW5lO1xuXG59KSkpO1xuIiwiaW1wb3J0IHsgU2VydmljZVByb3ZpZGVyIH0gZnJvbSAnQGxhcmF2ZWwtc3RyZWFtcy9jb3JlJztcblxuZXhwb3J0IGNsYXNzIEFwcFNlcnZpY2VQcm92aWRlciBleHRlbmRzIFNlcnZpY2VQcm92aWRlciB7XG5cbiAgICByZWdpc3RlcigpIHtcbiAgICAgICAgLy9cbiAgICB9XG5cbiAgICBib290KCkge1xuICAgICAgICAvL1xuICAgIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQge0FwcFNlcnZpY2VQcm92aWRlcn0gZnJvbSAnLi9zcmMvQXBwU2VydmljZVByb3ZpZGVyJztcblxuaW1wb3J0ICdhbHBpbmVqcyc7XG5cbmNvbnN0IHRlc3QgPSB0cnVlO1xuXG5leHBvcnQge0FwcFNlcnZpY2VQcm92aWRlciwgdGVzdH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==